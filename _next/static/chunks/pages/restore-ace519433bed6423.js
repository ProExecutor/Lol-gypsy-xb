(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{2989:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/restore",function(){return s(6650)}])},4260:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(5893),r=s(1664),n=s.n(r);function l(){return(0,a.jsxs)("footer",{className:"text-center h-16 sm:h-20 w-full sm:pt-2 pt-4 border-t mt-5 flex sm:flex-row flex-col justify-between items-center px-3 space-y-3 sm:mb-0 mb-3",children:[(0,a.jsxs)("div",{children:["Powered by"," ",(0,a.jsxs)("a",{href:"https://replicate.com/",target:"_blank",className:"font-bold transition hover:text-black/50",children:["Replicate"," "]}),"and"," ",(0,a.jsx)("a",{href:"https://www.bytescale.com/",target:"_blank",className:"font-bold transition hover:text-black/50",children:"Bytescale"}),". Created by"," ",(0,a.jsx)("a",{href:"https://www.twitter.com/nutlope",target:"_blank",className:"font-bold transition hover:text-black/50",children:"Hassan"})," ","(hassan@hey.com)."]}),(0,a.jsxs)("div",{className:"flex space-x-4 pb-4 sm:pb-0",children:[(0,a.jsx)(n(),{href:"https://twitter.com/nutlope",className:"group","aria-label":"TaxPal on Twitter",children:(0,a.jsx)("svg",{"aria-hidden":"true",className:"h-6 w-6 fill-slate-500 group-hover:fill-slate-700",children:(0,a.jsx)("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0 0 22 5.92a8.19 8.19 0 0 1-2.357.646 4.118 4.118 0 0 0 1.804-2.27 8.224 8.224 0 0 1-2.605.996 4.107 4.107 0 0 0-6.993 3.743 11.65 11.65 0 0 1-8.457-4.287 4.106 4.106 0 0 0 1.27 5.477A4.073 4.073 0 0 1 2.8 9.713v.052a4.105 4.105 0 0 0 3.292 4.022 4.093 4.093 0 0 1-1.853.07 4.108 4.108 0 0 0 3.834 2.85A8.233 8.233 0 0 1 2 18.407a11.615 11.615 0 0 0 6.29 1.84"})})}),(0,a.jsx)(n(),{href:"https://github.com/Nutlope/restorePhotos",className:"group","aria-label":"TaxPal on GitHub",children:(0,a.jsx)("svg",{"aria-hidden":"true",className:"h-6 w-6 fill-slate-500 group-hover:fill-slate-700",children:(0,a.jsx)("path",{d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 6.844a9.59 9.59 0 0 1 2.504.337c1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.02 10.02 0 0 0 22 12.017C22 6.484 17.522 2 12 2Z"})})})]})]})}},3505:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(5893),r=s(5675),n=s.n(r),l=s(1664),o=s.n(l);function i(e){let{photo:t}=e;return(0,a.jsxs)("header",{className:"flex justify-between items-center w-full mt-5 border-b-2 pb-7 sm:px-4 px-2",children:[(0,a.jsxs)(o(),{href:"/",className:"flex space-x-2",children:[(0,a.jsx)(n(),{alt:"header text",src:"/imageIcon.png",className:"sm:w-10 sm:h-10 w-7 h-7",width:20,height:20}),(0,a.jsx)("h1",{className:"sm:text-3xl text-xl font-bold ml-2 tracking-tight",children:"restorePhotos.io"})]}),t?(0,a.jsx)(n(),{alt:"Profile picture",src:t,className:"w-10 rounded-full",width:32,height:28}):(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsx)(o(),{href:"/",className:"border-r border-gray-300 pr-4 space-x-2 hover:text-blue-400 transition hidden sm:flex",children:(0,a.jsx)("p",{className:"font-medium text-base",children:"Home"})}),(0,a.jsx)(o(),{href:"/restore",className:"border-gray-300 pr-4 space-x-2 hover:text-blue-400 transition hidden sm:flex",children:(0,a.jsx)("p",{className:"font-medium text-base",children:"Restore"})})]})]})}},6650:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(5893),r=s(9008),n=s.n(r),l=s(5675),o=s.n(l),i=s(7294),c=s(9364),d=s(2339),x=s(7610);let m=e=>{let{original:t,restored:s}=e;return(0,a.jsx)(x.vx,{itemOne:(0,a.jsx)(x.ps,{src:t,alt:"original photo"}),itemTwo:(0,a.jsx)(x.ps,{src:s,alt:"restored photo"}),portrait:!0,className:"flex w-[475px] mt-5"})};var h=s(4260),u=s(3505),p=s(2437),f=s.n(p);let g=e=>{let{color:t="#000",style:s="small"}=e;return(0,a.jsxs)("span",{className:"small"==s?f().loading2:f().loading,children:[(0,a.jsx)("span",{style:{backgroundColor:t}}),(0,a.jsx)("span",{style:{backgroundColor:t}}),(0,a.jsx)("span",{style:{backgroundColor:t}})]})};g.defaultProps={style:"small"};var b=s(6782);function j(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function w(e){let{sideBySide:t,setSideBySide:s,...r}=e;return(0,a.jsx)(b.r.Group,{as:"div",...r,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm mr-3 font-medium ".concat(t?"text-gray-500":"text-gray-900"),children:"Side by Side"}),(0,a.jsx)(b.r,{checked:t,onChange:s,className:j(t?"bg-black":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none "),children:(0,a.jsx)("span",{"aria-hidden":"true",className:j(t?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})}),(0,a.jsx)(b.r.Label,{as:"span",className:"ml-3",children:(0,a.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-gray-900":"text-gray-500"," "),children:"Compare"})})]})})}var N=s(2822),y=s.n(N),v=s(4573),k=s(3299),_=s(9734),P=s(238);let S=()=>{var e;let[t,s]=(0,i.useState)(null),[r,l]=(0,i.useState)(null),[x,p]=(0,i.useState)(!1),[f,b]=(0,i.useState)(!1),[j,N]=(0,i.useState)(!1),[S,C]=(0,i.useState)(null),[T,O]=(0,i.useState)(null),R=e=>fetch(e).then(e=>e.json()),{data:G,mutate:Z}=(0,_.ZP)("/api/remaining",R),{data:A,status:L}=(0,k.useSession)(),I={apiKey:"public_12a1xvS8jZdLWgknMmQTRsnuTJVQ",maxFileCount:1,mimeTypes:["image/jpeg","image/png","image/jpg"],editor:{images:{crop:!1}},styles:{colors:{primary:"#000"}},onPreUpload:async e=>{let t=!1;try{t=await y().isSafe(e),console.log({isSafe:t}),t||v.ZP.track("NSFW Image blocked")}catch(e){console.error("NSFW predictor threw an error",e)}return t?0===G.remainingGenerations?{errorMessage:"No more generations left for the day."}:void 0:{errorMessage:"Detected a NSFW image which is not allowed."}}},U=()=>(0,a.jsx)(d.UploadDropzone,{options:I,onUpdate:e=>{let{uploadedFiles:t}=e;if(0!==t.length){let e=t[0],a=e.originalFile.originalFileName,r=c.$O.url({accountId:e.accountId,filePath:e.filePath,options:{transformation:"preset",transformationPreset:"thumbnail"}});O(a),s(r),B(r)}},width:"670px",height:"250px"});async function B(e){await new Promise(e=>setTimeout(e,500)),p(!0);let t=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e})}),s=await t.json();200!==t.status?C(s):(Z(),l(s)),p(!1)}return(0,a.jsxs)("div",{className:"flex max-w-6xl mx-auto flex-col items-center justify-center py-2 min-h-screen",children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"Restore Photos"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)(u.Z,{photo:(null==A?void 0:null===(e=A.user)||void 0===e?void 0:e.image)||void 0}),(0,a.jsxs)("main",{className:"flex flex-1 w-full flex-col items-center justify-center text-center px-4 mt-4 sm:mb-0 mb-8",children:[(0,a.jsxs)("a",{className:"border shadow-xl flex max-w-md rounded-xl mb-6 hover:scale-[1.02] transition duration-300 ease-in-out",href:"https://www.roomgpt.io/",target:"_blank",onClick:()=>v.ZP.track("RoomGPT link clicked"),children:[(0,a.jsx)("img",{src:"/roomgpt-ad.png",alt:"roomgpt ad",className:"w-48 rounded-lg"}),(0,a.jsxs)("div",{className:"flex gap-3 flex-col py-3 sm:pr-4 pr-2",children:[(0,a.jsxs)("h3",{className:"text-left sm:text-md text-sm text-gray-700",children:["Revolutionize your space with the world's first AI interior designer, 100% free to try."," "]}),(0,a.jsx)("p",{className:"text-left sm:text-sm text-xs text-gray-500 opacity-50 font-medium",children:"ROOMGPT.IO"})]})]}),(0,a.jsx)("h1",{className:"mx-auto max-w-4xl font-display text-4xl font-bold tracking-normal text-slate-900 sm:text-6xl mb-5",children:"Restore any face photo"}),"authenticated"===L&&G&&(0,a.jsxs)("p",{className:"text-slate-500",children:["You have"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[G.remainingGenerations," generations"]})," ","left today. Your generation",Number(G.remainingGenerations)>1?"s":""," will renew in"," ",(0,a.jsxs)("span",{className:"font-semibold",children:[G.hours," hours and ",G.minutes," minutes."]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center w-full flex-col mt-4",children:[(0,a.jsx)(w,{className:"".concat(f?"visible mb-6":"invisible"),sideBySide:j,setSideBySide:e=>N(e)}),f&&j&&(0,a.jsx)(m,{original:t,restored:r}),"loading"===L?(0,a.jsx)("div",{className:"max-w-[670px] h-[250px] flex justify-center items-center",children:(0,a.jsx)(P._P,{height:"100",width:"100",color:"black",radius:"6",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"rings-loading"})}):"authenticated"!==L||t?!t&&(0,a.jsxs)("div",{className:"h-[250px] flex flex-col items-center space-y-6 max-w-[670px] -mt-8",children:[(0,a.jsx)("div",{className:"max-w-xl text-gray-600",children:"Sign in below with Google to create a free account and restore your photos today. You will be able to restore 5 photos per day for free."}),(0,a.jsxs)("button",{onClick:()=>(0,k.signIn)("google"),className:"bg-gray-200 text-black font-semibold py-3 px-6 rounded-2xl flex items-center space-x-2",children:[(0,a.jsx)(o(),{src:"/google.png",width:20,height:20,alt:"google's logo"}),(0,a.jsx)("span",{children:"Sign in with Google"})]})]}):(0,a.jsx)(U,{}),t&&!r&&(0,a.jsx)(o(),{alt:"original photo",src:t,className:"rounded-2xl",width:475,height:475}),r&&t&&!j&&(0,a.jsxs)("div",{className:"flex sm:space-x-4 sm:flex-row flex-col",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mb-1 font-medium text-lg",children:"Original Photo"}),(0,a.jsx)(o(),{alt:"original photo",src:t,className:"rounded-2xl relative",width:475,height:475})]}),(0,a.jsxs)("div",{className:"sm:mt-0 mt-8",children:[(0,a.jsx)("h2",{className:"mb-1 font-medium text-lg",children:"Restored Photo"}),(0,a.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:(0,a.jsx)(o(),{alt:"restored photo",src:r,className:"rounded-2xl relative sm:mt-0 mt-2 cursor-zoom-in",width:475,height:475,onLoadingComplete:()=>b(!0)})})]})]}),x&&(0,a.jsx)("button",{disabled:!0,className:"bg-black rounded-full text-white font-medium px-4 pt-2 pb-3 mt-8 hover:bg-black/80 w-40",children:(0,a.jsx)("span",{className:"pt-4",children:(0,a.jsx)(g,{color:"white",style:"large"})})}),S&&(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-xl mt-8 max-w-[575px]",role:"alert",children:[(0,a.jsx)("div",{className:"bg-red-500 text-white font-bold rounded-t px-4 py-2",children:"Please try again in 24 hours"}),(0,a.jsx)("div",{className:"border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700",children:S})]}),(0,a.jsxs)("div",{className:"flex space-x-2 justify-center",children:[t&&!x&&(0,a.jsx)("button",{onClick:()=>{s(null),l(null),b(!1),C(null)},className:"bg-black rounded-full text-white font-medium px-4 py-2 mt-8 hover:bg-black/80 transition",children:"Upload New Photo"}),f&&(0,a.jsx)("button",{onClick:()=>{let e;!function(e,t){fetch(e,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then(e=>e.blob()).then(e=>{var s;let a;s=window.URL.createObjectURL(e),(a=document.createElement("a")).download=t,a.href=s,document.body.appendChild(a),a.click(),a.remove()}).catch(e=>console.error(e))}(r,(e=T.indexOf("."),T.substring(0,e).concat("-new",T.substring(e))))},className:"bg-white rounded-full text-black border font-medium px-4 py-2 mt-8 hover:bg-gray-100 transition",children:"Download Restored Photo"})]})]})]}),(0,a.jsx)(h.Z,{})]})};var C=S},2437:function(e){e.exports={loading:"loading-dots_loading__LomzL",spacer:"loading-dots_spacer__nBBvk",blink:"loading-dots_blink__yy72w",loading2:"loading-dots_loading2___zCAu"}},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},4616:function(){},5042:function(){}},function(e){e.O(0,[864,904,723,974,132,883,225,802,774,888,179],function(){return e(e.s=2989)}),_N_E=e.O()}]);