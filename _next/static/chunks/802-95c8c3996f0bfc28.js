(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{6570:function(e){!function(){"use strict";var t={};t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){}function i(e,t,n){if(!e.s){if(n instanceof o){if(n.s)1&t&&(t=n.s),n=n.v;else{n.o=i.bind(null,e,t);return}}if(n&&n.then){n.then(i.bind(null,e,t),i.bind(null,e,2));return}e.s=t,e.v=n;var r=e.o;r&&r(e)}}t.r(n),t.d(n,{AuthManager:function(){return eV},BaseAPI:function(){return A},BinaryResult:function(){return $},BytescaleApiClientConfigUtils:function(){return T},BytescaleApiError:function(){return O},CancelledError:function(){return C},CommonTypesNoOp:function(){return eo},FileApi:function(){return j},FolderApi:function(){return q},JSONApiResponse:function(){return D},JobApi:function(){return J},UploadApi:function(){return ei},UploadManager:function(){return eP},UrlBuilder:function(){return ep},UrlBuilderTypesNoOp:function(){return ed},VoidApiResponse:function(){return P},querystring:function(){return R}});var o=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,a=this.s;if(a){var o=1&a?t:n;if(!o)return this;try{i(r,1,o(this.v))}catch(e){i(r,2,e)}return r}return this.o=function(e){try{var a=e.v;1&e.s?i(r,1,t?t(a):a):n?i(r,1,n(a)):i(r,2,a)}catch(e){i(r,2,e)}},r},e}();function s(e){return e instanceof o&&1&e.s}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(a.key),a)}}var l=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.mutex=void 0,this.resolver=void 0}return e=[{key:"safe",value:function(e){try{var t,n,r=this;return t=r.acquire(),n=function(){return function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(e,function(e,t){return r.release(),function(e,t){if(e)throw t;return t}(e,t)})},t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t}catch(e){return Promise.reject(e)}}},{key:"acquire",value:function(){try{var e,t,n=this;return e=function(e,t,n){for(;;){var r,a=e();if(s(a)&&(a=a.v),!a)return u;if(a.then){r=0;break}var u=n();if(u&&u.then){if(s(u))u=u.s;else{r=1;break}}if(t){var l=t();if(l&&l.then&&!s(l)){r=2;break}}}var c=new o,h=i.bind(null,c,2);return(0===r?a.then(p):1===r?u.then(f):l.then(d)).then(void 0,h),c;function f(r){u=r;do{if(t&&(l=t())&&l.then&&!s(l)){l.then(d).then(void 0,h);return}if(!(a=e())||s(a)&&!a.v){i(c,1,u);return}if(a.then){a.then(p).then(void 0,h);return}s(u=n())&&(u=u.v)}while(!u||!u.then);u.then(f).then(void 0,h)}function p(e){e?(u=n())&&u.then?u.then(f).then(void 0,h):f(u):i(c,1,u)}function d(){(a=e())?a.then?a.then(p).then(void 0,h):p(a):i(c,1,u)}}(function(){return void 0!==n.mutex},void 0,function(){var e;return(e=n.mutex)&&e.then?e.then(a):Promise.resolve()}),t=function(){n.mutex=new Promise(function(e){n.resolver=e})},e&&e.then?e.then(t):t(e)}catch(e){return Promise.reject(e)}}},{key:"release",value:function(){if(void 0===this.resolver)throw Error("Unable to release mutex: already released.");this.resolver(),this.resolver=void 0,this.mutex=void 0}}],u(n.prototype,e),t&&u(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"getMutex",value:function(){var e=t.mutexKey,n=window[e];return void 0===n&&(n=new l,window[e]=n),n}},{key:"setSession",value:function(e){window[t.stateKey]=e}},{key:"getSession",value:function(){if("undefined"!=typeof window)return window[t.stateKey]}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(r.key),r)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function d(e){var t=y();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,v(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)})(e)}function g(e,t,n){return(g=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&b(a,n.prototype),a}).apply(null,arguments)}function y(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function x(){}function _(e,t){return e&&e.then?e.then(t):t(e)}function k(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function S(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function E(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}h.stateKey="BytescaleSessionState",h.mutexKey="BytescaleSessionStateMutex";var T=function(){function e(){S(this,e)}return E(e,null,[{key:"getApiUrl",value:function(t){var n;return null!==(n=t.apiUrl)&&void 0!==n?n:e.defaultApiUrl}},{key:"getCdnUrl",value:function(t){var n;return null!==(n=t.cdnUrl)&&void 0!==n?n:e.defaultCdnUrl}},{key:"getFetchApi",value:function(e){var t;return null!==(t=e.fetchApi)&&void 0!==t?t:fetch}},{key:"getAccountId",value:function(t){var n,r,a;if(e.specialApiKeys.includes(t.apiKey))a=e.specialApiKeyAccountId;else if((a=null!==(r=null===(n=t.apiKey.split("_")[1])||void 0===n?void 0:n.substr(0,e.accountIdLength))&&void 0!==r?r:"").length!==e.accountIdLength)throw Error("Invalid Bytescale API key.");return a}},{key:"validate",value:function(t){var n;if((null!=t?t:void 0)===void 0)throw Error("Config parameter required.");if((null!==(n=t.apiKey)&&void 0!==n?n:void 0)===void 0)throw Error("Please provide an API key via the 'apiKey' config parameter.");if(t.apiKey.trim()!==t.apiKey)throw Error("API key needs trimming (whitespace detected).");e.getAccountId(t)}}]),e}();T.defaultApiUrl="https://api.bytescale.com",T.defaultCdnUrl="https://upcdn.io",T.specialApiKeys=["free","demo"],T.specialApiKeyAccountId="W142hJk",T.accountIdLength=7;var A=function(){function e(t){S(this,e),this.config=t,T.validate(t)}return E(e,[{key:"request",value:function(t,n,r){try{var a,i,o,s,u=this,l=u.config.apiKey;t.headers.Authorization="Bearer ".concat(l);var c=h.getSession();(null==c?void 0:c.accessToken)!==void 0&&(t.headers["Authorization-Token"]=c.accessToken);var f=(a={},i=T.defaultCdnUrl,o=T.getCdnUrl(u.config),(i=N(i))in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a);return k(u.createFetchParams(t,n,void 0===r?void 0:null!==(s=f[r])&&void 0!==s?s:r),function(t){var n=t.url,r=t.init;return e.fetch(n,r,Object.assign(Object.assign({},u.config),{isBytescaleApi:!0}))})}catch(e){return Promise.reject(e)}}},{key:"encodeParam",value:function(e,t){if("filePath"===e){if(!t.startsWith("/"))throw Error("The 'filePath' parameter must begin with a '/' character.");return t}return encodeURIComponent(t)}},{key:"createFetchParams",value:function(e,t,n){try{var r=(null!=n?n:T.getApiUrl(this.config))+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(r+="?"+R(e.query));var a=this.config.headers,i=Object.assign({},e.headers);return k(void 0===a?{}:a(),function(n){var a=Object.assign(i,n);Object.keys(a).forEach(function(e){return void 0===a[e]?delete a[e]:{}});var o={method:e.method,headers:a,body:e.body},s=Object.assign({},o);return k(("function"==typeof t?t:function(){return k(t)})({init:o,context:e}),function(e){var t=Object.assign(s,e),n=Object.assign(Object.assign({},t),{body:JSON.stringify(t.body)});return{url:r,init:n}})},void 0===a)}catch(e){return Promise.reject(e)}}}],[{key:"fetch",value:function(e,t,n){try{var r,a,i;return _(w(function(){return k(T.getFetchApi(n)(e,Object.assign(Object.assign({},t),{cache:"no-store"})),function(e){i=e})},function(t){throw Error(n.isBytescaleApi?"Unable to resolve the Bytescale API: ".concat(t.message," If the problem persists, and your network connection is OK, then please contact support@bytescale.com and provide: (a) time of failed request in UTC (b) screenshot of failed network response header + body (c) screenshot of failed network request header + body (d) browser and OS version."):"Unable to resolve URL (".concat(e,"): ").concat(t.message))}),function(o){var s,u;return i.status>=200&&i.status<300?i:(s=function(n){throw Error("Failure status code (".concat(i.status,") received for request: ").concat(null!==(a=t.method)&&void 0!==a?a:"GET"," ").concat(e))},(u=function(){if(n.isBytescaleApi){var e=void 0;return _(w(function(){return k(i.json(),function(t){e=t})},x),function(){if("string"==typeof(null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.code))throw new O(e);throw Error("Unable to connect to the Bytescale API (".concat(i.status,"): please try again."))})}}())&&u.then?u.then(s):s(u))})}catch(e){return Promise.reject(e)}}}]),e}(),C=function(e){p(n,e);var t=d(n);function n(){var e;return S(this,n),(e=t.call(this,"Operation cancelled by caller.")).name="CancelledError",e}return E(n)}(m(Error)),O=function(e){p(n,e);var t=d(n);function n(e){var r;return S(this,n),(r=t.call(this,e.error.message)).name="BytescaleApiError",r.errorCode=e.error.code,r.details=e.error.details,r}return E(n)}(m(Error));function R(e){return Object.keys(e).map(function(t){var n;return(n=e[t])instanceof Object?R(n):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(String(n)))}).filter(function(e){return e.length>0}).join("&")}var D=function(){function e(t){S(this,e),this.raw=t}return E(e,[{key:"value",value:function(){try{return k(this.raw.json())}catch(e){return Promise.reject(e)}}}]),e}(),P=function(){function e(t){S(this,e),this.raw=t}return E(e,[{key:"value",value:function(){return k(void 0)}}]),e}(),$=function(){function e(t){S(this,e),this.raw=t}return E(e,[{key:"stream",value:function(){if(this.raw.bodyUsed)throw Error("Response body has already been consumed.");if(null===this.raw.body)throw Error("Response body does not exist.");return this.raw.body}},{key:"text",value:function(){try{return k(this.raw.text())}catch(e){return Promise.reject(e)}}},{key:"blob",value:function(){try{return k(this.raw.blob())}catch(e){return Promise.reject(e)}}},{key:"json",value:function(){try{return k(this.raw.json())}catch(e){return Promise.reject(e)}}}]),e}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F(t)?t:String(t)}(r.key),r)}}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=U(i);if(t){var r=U(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"copyFile",value:function(e){try{var t={};return t["Content-Type"]="application/json",M(this.request({path:"/v2/accounts/{accountId}/files/copy".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFileRequest},void 0,[][0]),function(e){return M(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"copyFileBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",M(this.request({path:"/v2/accounts/{accountId}/files/copy/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFileBatchRequest},void 0,[][0]),function(e){return M(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFile",value:function(e){try{var t={};return void 0!==e.filePath&&(t.filePath=e.filePath),M(this.request({path:"/v2/accounts/{accountId}/files".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:{},query:t},void 0,[][0]),function(e){return M(new P(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFileBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",M(this.request({path:"/v2/accounts/{accountId}/files/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:t,query:{},body:e.deleteFileBatchRequest},void 0,[][0]),function(e){return M(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"downloadFile",value:function(e){try{var t={};return void 0!==e.cache&&(t.cache=e.cache),void 0!==e.cacheTtl&&(t.cache_ttl=e.cacheTtl),void 0!==e.version&&(t.version=e.version),M(this.request({path:"/{accountId}/raw{filePath}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),this.encodeParam("filePath",e.filePath)),method:"GET",headers:{},query:t},void 0,"https://upcdn.io"),function(e){return new $(e)})}catch(e){return Promise.reject(e)}}},{key:"getFileDetails",value:function(e){try{var t={};return void 0!==e.filePath&&(t.filePath=e.filePath),M(this.request({path:"/v2/accounts/{accountId}/files/details".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return M(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"processFile",value:function(e){try{var t={};return void 0!==e.artifact&&(t.artifact=e.artifact),void 0!==e.cache&&(t.cache=e.cache),void 0!==e.cachePerm&&(t.cache_perm=e.cachePerm),void 0!==e.cacheTtl&&(t.cache_ttl=e.cacheTtl),void 0!==e.large&&(t.large=e.large),void 0!==e.transformationParams&&(t.transformationParams=e.transformationParams),void 0!==e.version&&(t.version=e.version),M(this.request({path:"/{accountId}/{transformation}{filePath}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),this.encodeParam("filePath",e.filePath)).replace("{".concat("transformation","}"),this.encodeParam("transformation",e.transformation)),method:"GET",headers:{},query:t},void 0,"https://upcdn.io"),function(e){return new $(e)})}catch(e){return Promise.reject(e)}}},{key:"processFileAndSave",value:function(e){try{var t={};void 0!==e.transformationParams&&(t.transformationParams=e.transformationParams);var n={};return n["Content-Type"]="application/json",M(this.request({path:"/{accountId}/save/{transformation}{filePath}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),this.encodeParam("filePath",e.filePath)).replace("{".concat("transformation","}"),this.encodeParam("transformation",e.transformation)),method:"POST",headers:n,query:t,body:e.processFileAndSaveRequest},void 0,"https://upcdn.io"),function(e){return M(new D(e).value())})}catch(e){return Promise.reject(e)}}}],B(i.prototype,n),r&&B(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(A);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===z(t)?t:String(t)}(r.key),r)}}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=H(i);if(t){var r=H(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"copyFolder",value:function(e){try{var t={};return t["Content-Type"]="application/json",W(this.request({path:"/v2/accounts/{accountId}/folders/copy".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFolderRequest},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"copyFolderBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",W(this.request({path:"/v2/accounts/{accountId}/folders/copy/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFolderBatchRequest},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFolder",value:function(e){try{var t={};return t["Content-Type"]="application/json",W(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:t,query:{},body:e.deleteFolderRequest},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFolderBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",W(this.request({path:"/v2/accounts/{accountId}/folders/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:t,query:{},body:e.deleteFolderBatchRequest},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"getFolderDetails",value:function(e){try{var t={};return void 0!==e.folderPath&&(t.folderPath=e.folderPath),W(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"listFolder",value:function(e){try{var t={};return void 0!==e.cursor&&(t.cursor=e.cursor),void 0!==e.dryRun&&(t.dryRun=e.dryRun),void 0!==e.folderPath&&(t.folderPath=e.folderPath),void 0!==e.includeFiles&&(t.includeFiles=e.includeFiles),void 0!==e.includeOverriddenStorage&&(t.includeOverriddenStorage=e.includeOverriddenStorage),void 0!==e.includePhysicalFolders&&(t.includePhysicalFolders=e.includePhysicalFolders),void 0!==e.includeVirtualFolders&&(t.includeVirtualFolders=e.includeVirtualFolders),void 0!==e.limit&&(t.limit=e.limit),void 0!==e.recursive&&(t.recursive=e.recursive),W(this.request({path:"/v2/accounts/{accountId}/folders/list".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"putFolder",value:function(e){try{var t={};return t["Content-Type"]="application/json",W(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"PUT",headers:t,query:{},body:e.putFolderRequest},void 0,[][0]),function(e){return W(new D(e).value())})}catch(e){return Promise.reject(e)}}}],V(i.prototype,n),r&&V(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(A);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==X(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==X(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===X(t)?t:String(t)}(r.key),r)}}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=Q(i);if(t){var r=Q(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"cancelJob",value:function(e){try{return K(this.request({path:"/v2/accounts/{accountId}/jobs/{jobType}/{jobId}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("jobId","}"),this.encodeParam("jobId",e.jobId)).replace("{".concat("jobType","}"),this.encodeParam("jobType",e.jobType)),method:"DELETE",headers:{},query:{}},void 0,[][0]),function(e){return K(new P(e).value())})}catch(e){return Promise.reject(e)}}},{key:"getJob",value:function(e){try{return K(this.request({path:"/v2/accounts/{accountId}/jobs/{jobType}/{jobId}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("jobId","}"),this.encodeParam("jobId",e.jobId)).replace("{".concat("jobType","}"),this.encodeParam("jobType",e.jobType)),method:"GET",headers:{},query:{}},void 0,[][0]),function(e){return K(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"listRecentJobs",value:function(e){try{var t={};return e.jobType&&(t.jobType=e.jobType),K(this.request({path:"/v2/accounts/{accountId}/jobs".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return K(new D(e).value())})}catch(e){return Promise.reject(e)}}}],Z(i.prototype,n),r&&Z(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(A);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function en(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==ee(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ee(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ee(t)?t:String(t)}(r.key),r)}}function er(e,t){return(er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&er(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=ea(i);if(t){var r=ea(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"beginMultipartUpload",value:function(e){try{var t={};return t["Content-Type"]="application/json",et(this.request({path:"/v2/accounts/{accountId}/uploads".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.beginMultipartUploadRequest},void 0,[][0]),function(e){return et(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"completeUploadPart",value:function(e){try{var t={};return t["Content-Type"]="application/json",et(this.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts/{uploadPartIndex}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),this.encodeParam("uploadId",e.uploadId)).replace("{".concat("uploadPartIndex","}"),this.encodeParam("uploadPartIndex",e.uploadPartIndex)),method:"PUT",headers:t,query:{},body:e.completeUploadPartRequest},void 0,[][0]),function(e){return et(new P(e).value())})}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e){try{return et(this.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts/{uploadPartIndex}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),this.encodeParam("uploadId",e.uploadId)).replace("{".concat("uploadPartIndex","}"),this.encodeParam("uploadPartIndex",e.uploadPartIndex)),method:"GET",headers:{},query:{}},void 0,[][0]),function(e){return et(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"listUploadParts",value:function(e){try{return et(this.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),this.encodeParam("uploadId",e.uploadId)),method:"GET",headers:{},query:{}},void 0,[][0]),function(e){return et(new D(e).value())})}catch(e){return Promise.reject(e)}}},{key:"uploadFromUrl",value:function(e){try{var t={};return t["Content-Type"]="application/json",et(this.request({path:"/v2/accounts/{accountId}/uploads/url".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.uploadFromUrlRequest},void 0,[][0]),function(e){return et(new D(e).value())})}catch(e){return Promise.reject(e)}}}],en(i.prototype,n),r&&en(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(A),eo=!1;function es(e){return void 0!==e[1]&&null!==e[1]}function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function el(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||eh(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ec(e){return function(e){if(Array.isArray(e))return ef(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eh(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eh(e,t){if(e){if("string"==typeof e)return ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ef(e,t)}}function ef(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ep=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"url",value:function(e){var t;return(null===(t=e.options)||void 0===t?void 0:t.transformation)===void 0?this.raw(e):this.transformation(e,e.options)}},{key:"raw",value:function(e){var t,n=this.getBaseUrl(e,"raw"),r=this.getCommonQueryParams(null!==(t=e.options)&&void 0!==t?t:{});return this.addQueryParams(n,r)}},{key:"transformation",value:function(e,t){var n,r=this.getBaseUrl(e,"preset"===t.transformation?t.transformationPreset:t.transformation),a="preset"===t.transformation?[]:this.getTransformationParams(t),i=this.getCommonQueryParams(null!==(n=e.options)&&void 0!==n?n:{}),o=this.getCommonTransformationQueryParams(t);return this.addQueryParams(r,[].concat(ec(a),ec(i),ec(o)))}},{key:"getBaseUrl",value:function(e,t){var n=T.defaultCdnUrl;return"".concat(n,"/").concat(e.accountId,"/").concat(t).concat(e.filePath)}},{key:"getCommonTransformationQueryParams",value:function(e){return this.makeQueryParams(["cachePermanently","large","artifact"],{cachePermanently:"cache_perm"})(e)}},{key:"getCommonQueryParams",value:function(e){return this.makeQueryParams(["auth","cache","cacheTtl","version","forceDownloadPrompt"],{cacheTtl:"cache_ttl",forceDownloadPrompt:"download"})(e)}},{key:"makeQueryParams",value:function(e,t){return function(n){var r=[];return e.forEach(function(e){var a,i=n[e];void 0!==i&&r.push([null!==(a=t[e])&&void 0!==a?a:e,i.toString()])}),r}}},{key:"getTransformationParams",value:function(e){var t=e.transformationParams;if(void 0===t)return[];var n=function(e){return Object.entries(e).filter(es).map(function(e){var t=el(e,2);return[t[0],t[1].toString()]})};return Array.isArray(t)?t.flatMap(n):n(t)}},{key:"addQueryParams",value:function(e,t){return 0===t.length?e:"".concat(e,"?").concat(t.map(function(e){var t=el(e,2),n=t[0],r=t[1];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))}).join("&"))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==eu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eu(t)?t:String(t)}(r.key),r)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),ed=!1;function em(e){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eg(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function ey(e,t,n){if(!e.s){if(n instanceof eb){if(n.s)1&t&&(t=n.s),n=n.v;else{n.o=ey.bind(null,e,t);return}}if(n&&n.then){n.then(ey.bind(null,e,t),ey.bind(null,e,2));return}e.s=t,e.v=n;var r=e.o;r&&r(e)}}var eb=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,a=this.s;if(a){var i=1&a?t:n;if(!i)return this;try{ey(r,1,i(this.v))}catch(e){ey(r,2,e)}return r}return this.o=function(e){try{var a=e.v;1&e.s?ey(r,1,t?t(a):a):n?ey(r,1,n(a)):ey(r,2,a)}catch(e){ey(r,2,e)}},r},e}();function ev(e){return e instanceof eb&&1&e.s}function ew(e){return function(e){if(Array.isArray(e))return ex(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ex(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ex(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ex(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function e_(){}function ek(e,t){if(!t)return e&&e.then?e.then(e_):Promise.resolve()}function eS(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function eI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==em(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==em(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===em(t)?t:String(t)}(r.key),r)}}function eE(e){return(eE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==eE(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eE(t)?t:String(t)}(r.key),r)}}function eT(e,t){return(eT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eA(e){return(eA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eC(e){return(eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==eC(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eC(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eC(t)?t:String(t)}(r.key),r)}}function eR(e,t){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eP=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eR(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eD(i);if(t){var r=eD(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eC(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"doPutUploadPart",value:function(e,t,n,r,a){try{var i=this,o=new XMLHttpRequest,s=!0;return a(function(){s&&o.abort()}),function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(function(){var t,a;return(t=new Promise(function(t,a){o.upload.addEventListener("progress",function(e){e.lengthComputable&&r(e.loaded)},!1),o.addEventListener("load",function(){var e,n=null!==(e=o.getResponseHeader("etag"))&&void 0!==e?e:void 0;t({etag:n,status:o.status})}),o.onabort=function(){return a(new C)},o.onerror=function(){return a(Error("File upload error."))},o.ontimeout=function(){return a(Error("File upload timeout."))},o.open("PUT",e.uploadUrl),o.send(i.getRequestBody(e,n))})).then||(t=Promise.resolve(t)),a?t.then(a):t},function(e,t){return s=!1,function(e,t){if(e)throw t;return t}(e,t)})}catch(e){return Promise.reject(e)}}}],eO(i.prototype,n),r&&eO(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eT(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eA(i);if(t){var r=eA(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eE(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"processUploadSource",value:function(e){if("string"==typeof e)return{type:"Blob",value:new Blob([e],{type:this.stringMimeType})};if(void 0!==e.byteLength)return{type:"ArrayBuffer",value:e};if(void 0!==e.size)return{type:"Blob",value:e};throw Error("Unsupported type for 'data' parameter. Please provide a String, Blob, ArrayBuffer, or File object (from a file input element).")}},{key:"getPreUploadInfoPartial",value:function(e,t){switch(t.type){case"Blob":return this.getBlobInfo(t);case"ArrayBuffer":return{mime:void 0,size:t.value.byteLength,originalFileName:void 0,maxConcurrentUploadParts:void 0};default:!function(e){throw Error("Didn't expect to get here: ".concat(JSON.stringify(e)))}(t)}}},{key:"preUpload",value:function(e){}},{key:"postUpload",value:function(e){var t,n;return t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t}},{key:"getRequestBody",value:function(e,t){return -1===e.range.inclusiveEnd?new Blob:t.value.slice(e.range.inclusiveStart,e.range.inclusiveEnd+1)}}],eN(i.prototype,n),r&&eN(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.config=e,this.stringMimeType="text/plain",this.defaultMaxConcurrentUploadParts=4,this.intervalMs=500,this.uploadApi=new ei(e),this.accountId=T.getAccountId(e)}return e=[{key:"upload",value:function(e){try{var t=this;t.assertNotCancelled(e);var n=t.processUploadSource(e.data),r=t.getPreUploadInfo(e,n),a=r.size,i=t.makeOnProgressForPartFactory(e,a),o=t.preUpload(n);return void 0!==e.onProgress&&e.onProgress(t.makeProgressEvent(0,a)),eS(t.beginUpload(e,r),function(a){var s,u,l=a.uploadParts.count,c=ew(Array(l).keys()),h=t.makeCancellationMethods(),f=h.cancel,p=h.addCancellationHandler,d=setInterval(t.onIntervalTick(e,f),t.intervalMs);return s=function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(function(){return eS(t.mapAsync(c,r.maxConcurrentUploadParts,eg(function(r){return t.uploadPart(e,n,r,a,i(),p)})),function(){return ek(t.postUpload(o))})},function(e,t){return clearInterval(d),function(e,t){if(e)throw t;return t}(e,t)}),u=function(){return a.file},s&&s.then?s.then(u):u(s)})}catch(e){return Promise.reject(e)}}},{key:"getBlobInfo",value:function(e){var t=e.value,n=t.name,r=t.size;return{mime:t.type,size:r,originalFileName:n,maxConcurrentUploadParts:void 0}}},{key:"onIntervalTick",value:function(e,t){var n=this;return function(){n.isCancelled(e)&&t()}}},{key:"makeCancellationMethods",value:function(){var e=[];return{cancel:function(){return e.forEach(function(e){return e()})},addCancellationHandler:function(t){e.push(t)}}}},{key:"makeOnProgressForPartFactory",value:function(e,t){var n=this,r=e.onProgress;if(void 0===r)return function(){return function(){}};var a=0;return function(){var e=0;return function(i){var o=i-e;e+=o,a+=o,r(n.makeProgressEvent(a,t))}}}},{key:"makeProgressEvent",value:function(e,t){return{bytesTotal:t,bytesSent:e,progress:Math.round(e/t*100)}}},{key:"assertNotCancelled",value:function(e){if(this.isCancelled(e))throw new C}},{key:"isCancelled",value:function(e){var t;return(null===(t=e.cancellationToken)||void 0===t?void 0:t.isCancelled)===!0}},{key:"beginUpload",value:function(e,t){var n=t.size,r=t.mime,a=t.originalFileName;try{return eS(this.uploadApi.beginMultipartUpload({accountId:this.accountId,beginMultipartUploadRequest:{metadata:e.metadata,mime:r,originalFileName:a,path:e.path,protocol:"1.1",size:n,tags:e.tags}}))}catch(e){return Promise.reject(e)}}},{key:"uploadPart",value:function(e,t,n,r,a,i){try{var o=this;return o.assertNotCancelled(e),eS(o.getUploadPart(n,r),function(s){return o.assertNotCancelled(e),eS(o.putUploadPart(s,t,a,i),function(t){return o.assertNotCancelled(e),ek(o.uploadApi.completeUploadPart({accountId:o.accountId,uploadId:r.uploadId,uploadPartIndex:n,completeUploadPartRequest:{etag:t}}))})})}catch(e){return Promise.reject(e)}}},{key:"putUploadPart",value:function(e,t,n,r){try{var a=e.range.inclusiveEnd+1-e.range.inclusiveStart;return eS(this.doPutUploadPart(e,a,t,n,r),function(e){var t=e.status,r=e.etag;if(2!==Math.floor(t/100))throw Error("Failed to upload part (".concat(t,")."));if(void 0===r)throw Error("No 'etag' response header found in upload part response.");return n(a),r})}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e,t){try{if(0===e)return t.uploadParts.first;return eS(this.uploadApi.getUploadPart({uploadId:t.uploadId,accountId:this.accountId,uploadPartIndex:e}))}catch(e){return Promise.reject(e)}}},{key:"getPreUploadInfo",value:function(e,t){var n,r,a,i=this.getPreUploadInfoPartial(e,t);return{maxConcurrentUploadParts:null!==(n=i.maxConcurrentUploadParts)&&void 0!==n?n:this.defaultMaxConcurrentUploadParts,originalFileName:null!==(r=e.originalFileName)&&void 0!==r?r:i.originalFileName,mime:null!==(a=e.mime)&&void 0!==a?a:i.mime,size:i.size}}},{key:"mapAsync",value:function(e,t,n){try{var r=ew(e);return ek(Promise.all(ew(Array(t).keys()).map(eg(function(){return function(e){if(e&&e.then)return e.then(e_)}(function(e,t,n){for(;;){var r,a=e();if(ev(a)&&(a=a.v),!a)return i;if(a.then){r=0;break}var i=n();if(i&&i.then){if(ev(i))i=i.s;else{r=1;break}}if(t){var o=t();if(o&&o.then&&!ev(o)){r=2;break}}}var s=new eb,u=ey.bind(null,s,2);return(0===r?a.then(c):1===r?i.then(l):o.then(h)).then(void 0,u),s;function l(r){i=r;do{if(t&&(o=t())&&o.then&&!ev(o)){o.then(h).then(void 0,u);return}if(!(a=e())||ev(a)&&!a.v){ey(s,1,i);return}if(a.then){a.then(c).then(void 0,u);return}ev(i=n())&&(i=i.v)}while(!i||!i.then);i.then(l).then(void 0,u)}function c(e){e?(i=n())&&i.then?i.then(l).then(void 0,u):l(i):ey(s,1,i)}function h(){(a=e())?a.then?a.then(c).then(void 0,u):c(a):ey(s,1,i)}}(function(){return r.length>0},void 0,function(){var e=r.shift();return function(e){var t=e();if(t&&t.then)return t.then(e_)}(function(){if(void 0!==e)return ek(n(e))})}))}))))}catch(e){return Promise.reject(e)}}}],eI(n.prototype,e),t&&eI(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}()));function e$(e){return(e$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eF=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"error",value:function(e){console.error(t.prefix(e))}},{key:"warn",value:function(e){console.warn(t.prefix(e))}},{key:"prefix",value:function(e){return"[bytescale-sdk] ".concat(e)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==e$(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==e$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e$(t)?t:String(t)}(r.key),r)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function eM(e){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eB(){}function eL(e,t){if(!t)return e&&e.then?e.then(eB):Promise.resolve()}function eU(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ej(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function ez(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eW(r.key),r)}}function eW(e){var t=function(e,t){if("object"!==eM(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eM(t)?t:String(t)}var eV=new(function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.contentType="content-type",this.contentTypeJson="application/json",this.contentTypeText="text/plain",this.minJwtTtlSeconds=10,this.maxJwtTtlSeconds=2147483,this.retryAuthAfterErrorSeconds=5,this.refreshBeforeExpirySeconds=20,this.authSessionMutex=h.getMutex()}return e=[{key:"isAuthSessionActive",value:function(){return void 0!==h.getSession()}},{key:"beginAuthSession",value:function(e){try{var t=this,n={accessToken:void 0,accessTokenRefreshHandle:void 0,params:e,isActive:!0};return eU(t.authSessionMutex.safe(ej(function(){if(t.isAuthSessionActive())throw Error("Auth session already active: see AuthManager.isAuthSessionActive(). Please call 'await endAuthSession()' and then 'await beginAuthSession(...)' if you want to start a new auth session.");return h.setSession(n),eU()})),function(){return eL(t.refreshAccessToken(n))})}catch(e){return Promise.reject(e)}}},{key:"endAuthSession",value:function(){try{var e=this;return eL(e.authSessionMutex.safe(ej(function(){var t=h.getSession();if(void 0!==t)return h.setSession(void 0),t.isActive=!1,void 0!==t.accessTokenRefreshHandle&&clearTimeout(t.accessTokenRefreshHandle),eL(e.deleteAccessToken(t.params))})))}catch(e){return Promise.reject(e)}}},{key:"refreshAccessToken",value:function(e){try{var t=this;return eL(t.authSessionMutex.safe(ej(function(){if(e.isActive){var n=t.retryAuthAfterErrorSeconds;return function(e){if(e&&e.then)return e.then(eB)}(function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(function(){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){var r=t.getAccessToken,a=e.params;return eU(e.params.authHeaders(),function(i){return eU(r.call(t,a,i),function(r){return eU(t.setAccessToken(e.params,r),function(r){var a=r.ttlSeconds-t.refreshBeforeExpirySeconds;n=Math.max(a,t.minJwtTtlSeconds),a!==n&&eF.warn("JWT expiration is too short: waiting for ".concat(n," seconds before refreshing.")),n=Math.min(n,t.maxJwtTtlSeconds),e.accessToken=r.accessToken})})})},function(e){eF.error("Error when refreshing access token: ".concat(e))})},function(r,a){return e.accessTokenRefreshHandle=window.setTimeout(function(){t.refreshAccessToken(e).then(function(){},function(e){return eF.error("Unexpected error when refreshing access token: ".concat(e))})},1e3*n),function(e,t){if(e)throw t;return t}(r,a)}))}})))}catch(e){return Promise.reject(e)}}},{key:"getAccessTokenUrl",value:function(e){var t,n=T.getCdnUrl(null!==(t=e.options)&&void 0!==t?t:{});return"".concat(n,"/api/v1/access_tokens/").concat(e.accountId)}},{key:"deleteAccessToken",value:function(e){try{var t;return eL(A.fetch(this.getAccessTokenUrl(e),{method:"DELETE",credentials:"include",headers:{}},{isBytescaleApi:!0,fetchApi:null===(t=e.options)||void 0===t?void 0:t.fetchApi}))}catch(e){return Promise.reject(e)}}},{key:"setAccessToken",value:function(e,t){try{var n,r,a,i;return eU(A.fetch(this.getAccessTokenUrl(e),{method:"PUT",credentials:"include",headers:(r={},a=this.contentType,i=this.contentTypeJson,(a=eW(a))in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r),body:JSON.stringify({accessToken:t})},{isBytescaleApi:!0,fetchApi:null===(n=e.options)||void 0===n?void 0:n.fetchApi}),function(e){return eU(e.json())})}catch(e){return Promise.reject(e)}}},{key:"getAccessToken",value:function(e,t){try{var n,r,a=this,i="Your auth API endpoint",o=a.contentTypeText;return eU(A.fetch(e.authUrl,{method:"GET",headers:t},{isBytescaleApi:!1,fetchApi:null===(n=e.options)||void 0===n?void 0:n.fetchApi}),function(e){var t=null!==(r=e.headers.get(a.contentType))&&void 0!==r?r:"";if(t.split(";")[0]!==o)throw Error("".concat(i,' returned "').concat(t,'" for the ').concat(a.contentType,' response header, but the Bytescale SDK requires "').concat(o,'".'));return eU(e.text(),function(e){if(0===e.length)throw Error("".concat(i," returned an empty string. Please return a valid JWT instead."));if(e.trim().length!==e.length)throw Error("".concat(i," returned whitespace around the JWT, please remove it."));return e})})}catch(e){return Promise.reject(e)}}}],ez(n.prototype,e),t&&ez(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}());e.exports=n}()},2339:function(e,t,n){!function(){"use strict";var t={};t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};t.r(r),t.d(r,{UploadButton:function(){return h},UploadDropzone:function(){return d}});var a=n(7294),i=t.n(a),o=n(2307),s=t.n(o);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t,n,r,i=function(e){if(Array.isArray(e))return e}(t=(0,a.useState)(void 0))||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0],l=i[1],c=(r=(0,a.useRef)(),s()(e,r.current)||(r.current=e),null!==(n=r.current)&&void 0!==n?n:e);return(0,a.useEffect)(function(){void 0!==o&&o.updateConfig(e)},[c,o]),Object.assign(Object.assign({},e),{onInit:function(t){(null==e?void 0:e.onInit)!==void 0&&e.onInit(t),l(t)}})}var c=n(662),h=function(e){var t=e.options,n=e.onComplete,r=e.onUpdate,a=e.children,i=l(Object.assign(Object.assign({},t),void 0===r?{}:{onUpdate:r}));return a({onClick:function(e){e.preventDefault(),c.UploadWidget.open(i).then(function(e){void 0!==n&&n(e)},function(e){return console.error("Uploader error.",e)})}})};function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t,n,r,o,s,u=e.options,h=e.onComplete,d=e.onUpdate,m=e.minWidth,g=e.width,y=e.height,b=e.className,v=function(e){if(Array.isArray(e))return e}((r=(n=function(e){if(Array.isArray(e))return e}(t=(0,a.useState)(void 0))||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=n[1],s=[r,(0,a.useCallback)(function(e){o(null!=e?e:void 0)},[])]))||function(e,t){var n,r,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(s,2)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}}(s,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=v[0],x=v[1],_=l(Object.assign(Object.assign(Object.assign({},u),void 0===d?{}:{onUpdate:d}),{layout:"inline",container:w}));return"undefined"!=typeof window&&(0,a.useLayoutEffect)(function(){void 0!==w&&c.UploadWidget.open(_).then(function(e){void 0!==h&&h(e)},function(e){return console.error("Uploader error.",e)})},[w]),i().createElement("div",Object.assign({},void 0===b?{}:{className:b},{ref:x,style:{position:"relative",width:"100%",minWidth:null!=m?m:"280px",maxWidth:null!=g?g:"600px",height:null!=y?y:"375px"}}))};e.exports=r}()},8103:function(e,t,n){var r=n(4139).w,a=n(1071),i=n(4797);function o(){throw Error("Promises not supported in your environment. Use the callback argument or a Promise polyfill.")}var s={then:o,catch:o};e.exports=function(e,t){e=e||{},t=t||function(){},"function"==typeof Promise?n=new Promise(function(e,n){o=function(n){t(null,n),e(n)},u=function(e){t(e),n(e)}}):(n=s,o=function(e){t(null,e)},u=t);var n,o,u,l=e.url;if(!l)return u(Error('"url" option is required.')),n;var c=e.frames;if(!c&&0!==c)return u(Error('"frames" option is required.')),n;var h=e.outputType||"jpg",f=e.quality,p=e.cumulative,d="all"===c?"all":new r(c);return a(l,"undefined"==typeof window?"image/gif":".GIF",function(e,t,n){if(e){u(e);return}if(t.shape.length<4){u(Error('"url" input should be multi-frame GIF.'));return}for(var r=[],a=0,s=0;s<t.shape[0];s++)("all"===d||d.has(s))&&function(e){r.push({getImage:function(){if(p&&e>a){for(var n=t.pick(a),r=a+1;r<=e;r++){for(var o=t.pick(r),s=0;s<o.shape[0];s++)for(var u=0;u<o.shape[1];u++)0===o.get(s,u,3)&&(o.set(s,u,0,n.get(s,u,0)),o.set(s,u,1,n.get(s,u,1)),o.set(s,u,2,n.get(s,u,2)),o.set(s,u,3,n.get(s,u,3)));n=o}a=e}return i(t.pick(e),h,{quality:f})},frameIndex:e,frameInfo:n&&n[e]})}(s);o(r)}),n}},4797:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(7041),i=n(3525).y,o=n(2861),s=n(8897),u=n(6547);function l(e,t,n){if(4===e.shape.length)return l(e.pick(n),t,0);if(3===e.shape.length){if(3===e.shape[2])s.assign(o(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),e),s.assigns(o(t,[e.shape[0]*e.shape[1]],[4],3),255);else if(4===e.shape[2])s.assign(o(t,[e.shape[0],e.shape[1],4],[4,4*e.shape[0],1]),e);else{if(1!==e.shape[2])return Error("Incompatible array shape");s.assign(o(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),o(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),s.assigns(o(t,[e.shape[0]*e.shape[1]],[4],3),255)}}else{if(2!==e.shape.length)return Error("Incompatible array shape");s.assign(o(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),o(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),s.assigns(o(t,[e.shape[0]*e.shape[1]],[4],3),255)}return t}function c(e){var t=u();return t.emit("error",e),t}e.exports=function(e,t,n){switch(n=n||{},t.toUpperCase()){case"JPG":case".JPG":case"JPEG":case".JPEG":case"JPE":case".JPE":var o=e.shape[0],s=e.shape[1],u=new r(o*s*4);return{data:u=l(e,u),width:o,height:s};case"GIF":case".GIF":var h=4===e.shape.length?e.shape[0]:1,o=4===e.shape.length?e.shape[1]:e.shape[0],s=4===e.shape.length?e.shape[2]:e.shape[1],u=new r(o*s*4),f=new a(o,s);f.writeHeader();for(var p=0;p<h;p++)u=l(e,u,p),f.addFrame(u);return f.finish(),f;case"PNG":case".PNG":var d=new i({width:e.shape[0],height:e.shape[1]}),u=l(e,d.data);if("Error"==typeof u)return c(u);return d.data=u,d.pack();case"CANVAS":var m=document.createElement("canvas"),g=m.getContext("2d");m.width=e.shape[0],m.height=e.shape[1];var y=g.getImageData(0,0,m.width,m.height),u=y.data;if("Error"==typeof(u=l(e,u)))return c(u);return g.putImageData(y,0,0),m;default:return c(Error("Unsupported file type: "+t))}}},9610:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(13);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(){let e,t,n,a,i,o,s,u,l,c;return 2===(0,r.OBj)().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",i="texture",o="outputColor",s="out vec4 outputColor;",u=(0,r.OBj)().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",a="varying",i="texture2D",o="gl_FragColor",s="",u=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:u,defineSpecialInf:l,defineRound:c}}},8110:function(e,t,n){"use strict";n.d(t,{Kn:function(){return i},RW:function(){return a},al:function(){return o},ku:function(){return s},nc:function(){return u},ye:function(){return l}});var r=n(13);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t,n="index"){let a=r.D5U.computeStrides(t);return a.map((t,r)=>{let i=`int ${e[r]} = ${n} / ${t}`,o=r===a.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${t}`:`index -= ${e[r]} * ${t}`;return`${i}; ${o};`}).join("")}function i(e,t,n="index"){let a=r.D5U.computeStrides(t);return a.map((t,r)=>{let i=`int ${e[r]} = ${n} / outShapeStrides[${r}]`,o=r===a.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`;return`${i}; ${o};`}).join("")}function o(e,t,n="index"){let r=e.map((e,t)=>t),a=function(e,t){let n=e.length,r=e.map(e=>`${t}[${e}]`),a=Array(n-1);a[n-2]=r[n-1];for(let e=n-3;e>=0;--e)a[e]=`(${a[e+1]} * ${r[e+1]})`;return a}(r,t);return a.map((t,r)=>{let i=`int ${e[r]} = ${n} / ${a[r]}`,o=r===a.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${a[r]}`:`index -= ${e[r]} * ${a[r]}`;return`${i}; ${o};`}).join("")}function s(e){let t=r.D5U.computeStrides(e).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function u(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}let l=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`},8713:function(e,t,n){"use strict";n.d(t,{JL:function(){return r},Zu:function(){return a}});class r{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class a{refCount(e){return i("refCount")}incRef(e){return i("incRef")}timerAvailable(){return!0}time(e){return i("time")}read(e){return i("read")}readSync(e){return i("readSync")}readToGPU(e,t){return i("readToGPU")}numDataIds(){return i("numDataIds")}disposeData(e,t){return i("disposeData")}write(e,t,n){return i("write")}move(e,t,n,r,a){return i("move")}memory(){return i("memory")}floatPrecision(){return i("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return i("dispose")}}function i(e){throw Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},8329:function(e,t,n){"use strict";function r(e,t){return e>t?1:e<t?-1:0}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t,n,r,a){return s(e,t,n,r,a,0)}function i(e,t,n,r,a,i){return s(e,t,n,r,a,0,!1,i,!0)}function o(e,t,n,r,a,i){return s(e,t,n,r,a,i,!0)}function s(e,t,n,a,i,o,s=!1,l=!1,c=!1){let h=[];for(let e=0;e<t.length;e++)t[e]>i&&h.push({score:t[e],boxIndex:e,suppressBeginIndex:0});h.sort(u);let f=o>0?-.5/o:0,p=[],d=[];for(;p.length<n&&h.length>0;){let t=h.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=t;if(n<i)break;let l=!1;for(let n=p.length-1;n>=s;--n){let r=function(e,t,n){let r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),h=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-i)*(u-o),d=(h-l)*(f-c);if(p<=0||d<=0)return 0;let m=Math.max(i,l),g=Math.max(o,c),y=Math.min(s,h),b=Math.min(u,f),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(p+d-v)}(e,o,p[n]);if(r>=a){l=!0;break}if(t.score=t.score*function(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}(a,f,r),t.score<=i)break}t.suppressBeginIndex=p.length,!l&&(t.score===n?(p.push(o),d.push(t.score)):t.score>i&&/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let a=function(e,t,n){let r=0,a=e.length,i=0,o=!1;for(;r<a;){i=r+(a-r>>>1);let s=n(t,e[i]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||r);e.splice(a<0?-(a+1):a,0,t)}(h,t,u))}let m=p.length,g=n-m;l&&g>0&&(p.push(...Array(g).fill(0)),d.push(...Array(g).fill(0)));let y={selectedIndices:p};return s&&(y.selectedScores=d),c&&(y.validOutputs=m),y}function u(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}n.d(t,{GP:function(){return a},qP:function(){return i},pA:function(){return o}})},8333:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2657);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t){let n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);let a=(0,r.f)(e,"int32"),i=(0,r.f)([n.length,e.length],"int32");for(let t=0;t<n.length;t++){let r=a.indexToLoc(n[t]),o=t*e.length;i.values.set(r,o)}return i.toTensor()}},196:function(e,t,n){"use strict";n.d(t,{BV:function(){return v},wv:function(){return b}});var r=n(8713),a=n(2885),i=n(5938),o=n(9121),s=n(6151),u=n(4706),l=n(3418),c=n(569);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new f)}profileKernel(e,t,n){let r,i;let o=()=>{r=n()},s=l.now();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{for(let e of(o(),r))e.dataSync();i=Promise.resolve({kernelMs:l.now()-s})}if((0,a.OB)().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){let n=r[t];n.data().then(t=>{!function(e,t,n){if("float32"===t)for(let t=0;t<e.length;t++){let r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}}(t,n.dtype,e)})}let u={kernelName:e,outputs:r,inputs:t,timeMs:i.then(e=>e.kernelMs),extraInfo:i.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")};return u}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:i}=e;n.forEach(e=>{Promise.all([e.data(),r,i]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}}class f{logKernelProfile(e,t,n,r,a,i){let o="number"==typeof r?c.oj(`${r}ms`,9):r.error,s=c.oj(e,25),u=t.rank,l=t.size,h=c.oj(t.shape.toString(),14),f="";for(let e in a){let n=a[e];if(null!=n){let r=n.shape||t.shape,a=r.length;f+=`${e}: ${a}D ${a>0?r:""} `}}console.log(`%c${s}	%c${o}	%c${u}D ${h}	%c${l}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}var p=n(974),d=n(747);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m(e){return null!=e.kernelName}class g{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}}class y{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new g}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],r=await this.initializeBackend(n).success;if(r){await this.setBackend(n);return}}throw Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(u.Z(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e),r=n?await t:t;if(!r)return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new h(this.backendInstance),!0}setupRegisteredKernels(){let e=(0,s.tr)(this.backendName);e.forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){let t=(0,s.tr)(e);t.forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(!n||n instanceof r.Zu||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>!(t<this.pendingBackendInitId)&&(this.pendingBackendInit=null,u.Z(`Initialization of backend ${e} failed`),u.Z(n.stack||n.message),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return u.Z(`Initialization of backend ${e} failed`),u.Z(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>((n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{let e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return y.nextTensorId++}nextVariableId(){return y.nextVariableId++}clone(e){let t=v.runKernel(o.iJz,{x:e}),n=e=>({x:()=>v.runKernel(o.RFZ,{x:e},{dtype:"float32"})});return this.addTapeNode(this.state.activeScope.name,{x:e},[t],n,[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;let r=null!=(0,s.pI)(e,this.backendName);if(!r)throw Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});let i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw Error(`Backend '${this.backendName}' has an internal memory leak (${o} data ids) after running '${e}'`)}runKernelFunc(e){let t,n,r,a;let i=[],o=this.isTapeOn(),u=this.state.numBytes,l=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;let h=m(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(m(e)){let{kernelName:t,inputs:a,attrs:u}=e;null==this.backendName&&this.backend;let l=(0,s.pI)(t,this.backendName);c.hu(null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),n=()=>{let e=this.backend.numDataIds();r=l.kernelFunc({inputs:a,attrs:u,backend:this.backend});let n=Array.isArray(r)?r:[r];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,n);let s=n.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(o){let e=this.getTensorsForGradient(t,a,s);i=this.saveTensorsForBackwardMode(e)}return s}}else{let{forwardFunc:t}=e,a=e=>{o&&(i=e.map(e=>this.keep(this.clone(e))))};n=()=>{let e=this.backend.numDataIds();r=this.tidy(()=>t(this.backend,a));let n=Array.isArray(r)?r:[r];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,e,n),n}}let{inputs:f,attrs:p}=e,d=m(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(a=this.profiler.profileKernel(h,f,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(a),t=a.outputs):t=n()}),o&&this.addTapeNode(h,f,t,d,i,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:h,bytesAdded:this.state.numBytes-u,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-l,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(e=>null!=f[e]?f[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:a.timeMs,extraInfo:a.extraInfo}),Array.isArray(r)?t:t[0]}saveTensorsForBackwardMode(e){let t=e.map(e=>this.keep(this.clone(e)));return t}getTensorsForGradient(e,t,n){let r=(0,s.uk)(e);if(null!=r){let e;let a=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(c.hu(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=a.map(e=>t[e]);let o=n.filter((e,t)=>i[t]);return e.concat(o)}return[]}makeTensor(e,t,n,r){if(null==e)throw Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&c.HD(e[0])&&(a=e.map(e=>l.encodeString(e)));let i=r.write(a,t,n),o=new p.es(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){let e=this.state.tensorInfo.get(i),t=(0,c.Ub)(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return o}makeTensorFromDataId(e,t,n,r){n=n||"float32";let a={dataId:e,shape:t,dtype:n};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){let{dataId:n,shape:r,dtype:a}=e,i=new p.es(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));let a=new p._w(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw Error(`Variable with name ${a.name} was already registered`);return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*c.bT(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof p._w||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*c.bT(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;for(let r of(this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,this.state.activeProfile.kernels))r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,i){let o={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=(0,s.uk)(e);null!=u&&(r=u.gradFunc),null!=r&&(o.gradient=e=>r((e=e.map((e,t)=>{if(null==e){let e=n[t],r=c.wT(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e})).length>1?e:e[0],a,i)),this.state.activeTape.push(o)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=(0,d.getTensorsInContainer)(e),n=new Set(t.map(e=>e.id));for(let e=0;e<this.state.activeScope.track.length;e++){let t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{e.kept||e.scopeId!==r.id||this.track(e)})}gradients(e,t,n,r=!1){if(c.hu(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));c.hu(a instanceof p.es,()=>"The result y returned by f() must be a tensor.");let i=/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r={},a={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){let i=e[n],o=i.inputs;for(let e in o){let n=o[e],s=!1;for(let e=0;e<t.length;e++)if(r[n.id]){i.outputs.forEach(e=>r[e.id]=!0),s=!0,a[i.id]=!0;break}if(s)break}}let i={};i[n.id]=!0;let o={};for(let t=e.length-1;t>=0;t--){let n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(i[n.outputs[e].id]){for(let e in r)i[r[e].id]=!0,o[n.id]=!0;break}}let s=[];for(let t=0;t<e.length;t++){let n=e[t];if(a[n.id]&&o[n.id]){let e={};for(let t in n.inputs){let a=n.inputs[t];r[a.id]&&(e[t]=a)}let t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,s.push(t)}}return s}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[a.id]=null==n?function(e){let t=(0,c.p8)((0,c.NA)(e),"float32");return v.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){let i=t[a],o=[];if(i.outputs.forEach(t=>{let n=e[t.id];null!=n?o.push(n):o.push(null)}),null==i.gradient)throw Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);let s=i.gradient(o);for(let t in i.inputs){if(!(t in s))throw Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);let a=n(()=>s[t]());if("float32"!==a.dtype)throw Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${a.dtype}'`);let o=i.inputs[t];if(!c.cO(a.shape,o.shape))throw Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${t}' has shape '${a.shape}', which does not match the shape of the input '${o.shape}'`);if(null==e[o.id])e[o.id]=a;else{let t=e[o.id];e[o.id]=r(t,a),t.dispose()}}}}(e,i,e=>this.tidy(e),w);let r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){return c.hu(c.mf(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{let n;c.hu(t.every(e=>e instanceof p.es),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r={};t.forEach((e,t)=>{r[t]=e});let a=(r,a)=>(n=e(...[...t,a]),c.hu(n.value instanceof p.es,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),c.hu(c.mf(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),i=(e,r)=>{let a=n.gradFunc(e,r),i=Array.isArray(a)?a:[a];c.hu(i.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),c.hu(i.every(e=>e instanceof p.es),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let o={};return i.forEach((e,t)=>{o[t]=()=>e}),o};return this.runKernelFunc({forwardFunc:a,backwardsFunc:i,inputs:r})}}readSync(e){let t=this.state.tensorInfo.get(e);return t.backend.readSync(e)}read(e){let t=this.state.tensorInfo.get(e);return t.backend.read(e)}readToGPU(e,t){let n=this.state.tensorInfo.get(e);return n.backend.readToGPU(e,t)}async time(e){let t=(0,l.now)(),n=await this.backend.time(e);return n.wallMs=(0,l.now)()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){for(let e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new g,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function b(){let e=(0,i.D)();if(null==e._tfengine){let t=new a.qA(e);e._tfengine=new y(t)}return(0,a.iG)(e._tfengine.ENV),(0,p.Vi)(()=>e._tfengine),e._tfengine}y.nextTensorId=0,y.nextVariableId=0;let v=b();function w(e,t){return v.runKernel(o.mm_,{a:e,b:t})}},2885:function(e,t,n){"use strict";n.d(t,{OB:function(){return s},Vi:function(){return u},iG:function(){return l},qA:function(){return i}});var r=n(569);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let a="tfjsflags";class i{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=o,this.populateURLFlags()}setPlatform(e,t){null==this.platform||u.getBool("IS_TEST")||u.getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){let t=this.urlFlags[e];u.getBool("IS_TEST")||u.getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if((0,r.tI)(t))throw Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);if(a in e){let t=e[a].split(",");t.forEach(e=>{let[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(`${+t}`===t)return+t;throw Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)})}}}function o(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>{var r,a,i;return r=t,a=n[0],i=n[1],r[decodeURIComponent(a)]=decodeURIComponent(i||""),n.join("=")}),t}function s(){return u}let u=null;function l(e){u=e}},5938:function(e,t,n){"use strict";let r;n.d(t,{D:function(){return i},R:function(){return o}});var a=n(3454);function i(){if(null==r){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if(void 0!==a)e=a;else if("undefined"!=typeof self)e=self;else throw Error("Could not find a global object");r=e}return r}function o(e,t){let n=function(){let e=i();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}},4368:function(e,t,n){"use strict";n.d(t,{B9:function(){return g},CQ:function(){return v},Cd:function(){return w},Cn:function(){return y},G4:function(){return s},MX:function(){return c},N5:function(){return d},N8:function(){return h},N_:function(){return x},R:function(){return u},SR:function(){return f},VY:function(){return N},XV:function(){return b},cF:function(){return l},cj:function(){return _},jq:function(){return I},lu:function(){return m},sq:function(){return p},x3:function(){return k},y3:function(){return E},ze:function(){return S}});var r=n(196),a=n(2885),i=n(974),o=n(747);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s(){(0,a.OB)().set("PROD",!0)}function u(){(0,a.OB)().set("DEBUG",!0)}function l(){(0,a.OB)().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function c(e){(0,a.OB)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function h(){r.BV.disposeVariables()}function f(){return r.BV}function p(){return r.BV.memory()}function d(e){return r.BV.profile(e)}function m(e,t){return r.BV.tidy(e,t)}function g(e){let t=(0,o.getTensorsInContainer)(e);t.forEach(e=>e.dispose())}function y(e){return r.BV.keep(e)}function b(e){return r.BV.time(e)}function v(e){return r.BV.setBackend(e)}function w(){return r.BV.ready()}function x(){return r.BV.backendName}function _(e){r.BV.removeBackend(e)}function k(e){return r.BV.findBackend(e)}function S(e){return r.BV.findBackendFactory(e)}function I(e,t,n=1){return r.BV.registerBackend(e,t,n)}function E(){return r.BV.backend}function N(e,t){(0,a.OB)().setPlatform(e,t)}(0,i.FZ)(c)},633:function(e,t,n){"use strict";n.d(t,{UQ:function(){return s},cb:function(){return f},fN:function(){return c},h7:function(){return l},pn:function(){return h},ti:function(){return u}});var r=n(196),a=n(974),i=n(3740),o=n(569);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s(e){return o.hu(o.mf(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let a=(0,i._1)(t,"x","tf.grad","string_or_numeric"),s=null!=n?(0,i._1)(n,"dy","tf.grad"):null;return r.BV.tidy(()=>{let{value:t,grads:n}=r.BV.gradients(()=>e(a),[a],s);return null!=s&&o.k5(t.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),p(n),n[0]})}}function u(e){return o.hu(o.mf(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{o.hu(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let a=(0,i.sI)(t,"args","tf.grads","string_or_numeric"),s=null!=n?(0,i._1)(n,"dy","tf.grads"):null;return r.BV.tidy(()=>{let{value:t,grads:n}=r.BV.gradients(()=>e(...a),a,s);return null!=s&&o.k5(t.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(n),n})}}function l(e){return o.hu(o.mf(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{o.hu(t instanceof a.es,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),o.hu(null==n||n instanceof a.es,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:i,value:s}=r.BV.gradients(()=>e(t),[t],n);return p(i),{grad:i[0],value:s}}}function c(e){return o.hu(o.mf(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{o.hu(Array.isArray(t)&&t.every(e=>e instanceof a.es),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),o.hu(null==n||n instanceof a.es,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let i=r.BV.gradients(()=>e(...t),t,n);return null!=n&&o.k5(i.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),p(i.grads),i}}function h(e,t){o.hu(o.mf(e),()=>"The f passed in variableGrads(f) must be a function"),o.hu(null==t||Array.isArray(t)&&t.every(e=>e instanceof a._w),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=t;if(!n)for(let e in t=[],r.BV.registeredVariables)t.push(r.BV.registeredVariables[e]);let i=n?t.filter(e=>!e.trainable):null,s=t.length;t=t.filter(e=>e.trainable),o.hu(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);let{value:u,grads:l}=r.BV.gradients(e,t,null,!0);o.hu(l.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),o.hu(0===u.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${u.rank} tensor`);let c={};return t.forEach((e,t)=>{null!=l[t]&&(c[e.name]=l[t])}),null!=i&&i.forEach(e=>c[e.name]=null),{value:u,grads:c}}function f(e){return r.BV.customGrad(e)}function p(e){let t=e.filter(e=>null==e).length;if(t>0)throw Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}},13:function(e,t,n){"use strict";let r,a,i;n.d(t,{SYM:function(){return eX.SYM},VGw:function(){return eX.VGw},SpW:function(){return eX.SpW},zJI:function(){return t_},HeW:function(){return tS},a4z:function(){return tN},DBS:function(){return tC},mm_:function(){return eX.mm_},Xze:function(){return eX.Xze},oT6:function(){return eX.oT6},IKK:function(){return eX.IKK},sJF:function(){return eX.sJF},aJk:function(){return eX.aJk},M2y:function(){return eX.M2y},qw7:function(){return eX.qw7},jMg:function(){return eX.jMg},QCc:function(){return eX.QCc},Oyi:function(){return eX.Oyi},JhU:function(){return eX.JhU},_k9:function(){return eX._k9},IMb:function(){return eX.IMb},ROF:function(){return eX.ROF},XLW:function(){return eX.XLW},zws:function(){return eX.zws},zvY:function(){return eX.zvY},eEB:function(){return eX.eEB},Ly9:function(){return eX.Ly9},RFZ:function(){return eX.RFZ},gJX:function(){return eX.gJX},xnO:function(){return eX.xnO},Zz9:function(){return eX.Zz9},yj2:function(){return eX.yj2},Eh3:function(){return eX.Eh3},mhS:function(){return eX.mhS},wUP:function(){return eX.wUP},wm:function(){return eX.wm},x12:function(){return eX.x12},o2y:function(){return eX.o2y},ik2:function(){return eX.ik2},mc4:function(){return eX.mc4},TR1:function(){return eX.TR1},VcC:function(){return eX.VcC},Byc:function(){return eX.Byc},iHb:function(){return eX.iHb},JLz:function(){return nF.JL},QRR:function(){return eX.QRR},T0n:function(){return eX.T0n},cie:function(){return eX.cie},sL$:function(){return eX.sL$},y7R:function(){return eX.y7R},$w:function(){return eX.$w},p4S:function(){return eX.p4S},Vn9:function(){return eX.Vn9},ekb:function(){return eX.ekb},ViN:function(){return _.Vi},$g6:function(){return eX.$g6},SX0:function(){return eX.SX0},HEU:function(){return eX.HEU},qAh:function(){return _.qA},hdR:function(){return eX.hdR},Omj:function(){return eX.Omj},NEP:function(){return eX.NEP},YFo:function(){return eX.YFo},Y0y:function(){return eX.Y0y},vwp:function(){return eX.vwp},deh:function(){return eX.deh},Uyb:function(){return eX.Uyb},OR:function(){return eX.OR},jeX:function(){return eX.jeX},eBW:function(){return eX.eBW},sHE:function(){return eX.sHE},_V0:function(){return eX._V0},luS:function(){return eX.luS},q1x:function(){return eX.q1x},qi_:function(){return eX.qi_},iZT:function(){return eX.iZT},Acj:function(){return eX.Acj},Qg5:function(){return eX.Qg5},iJz:function(){return eX.iJz},J_u:function(){return eX.J_u},avt:function(){return eX.avt},iWB:function(){return eX.iWB},r7n:function(){return eX.r7n},Zuw:function(){return nF.Zu},eZ0:function(){return eX.eZ0},Hhh:function(){return eX.Hhh},J$2:function(){return eX.J$2},vtC:function(){return eX.vtC},CAk:function(){return eX.CAk},e7N:function(){return eX.e7N},ZbH:function(){return eX.ZbH},kU:function(){return eX.kU},qCd:function(){return eX.qCd},PYm:function(){return eX.PYm},VfG:function(){return eX.VfG},MZg:function(){return eX.MZg},w6g:function(){return eX.w6g},qIC:function(){return eX.qIC},YoZ:function(){return eX.YoZ},mTV:function(){return eX.mTV},OAf:function(){return eX.OAf},OU7:function(){return eX.OU7},OV7:function(){return eX.OV7},vFR:function(){return eX.vFR},BMI:function(){return eX.BMI},q2K:function(){return eX.q2K},c17:function(){return eX.c17},q8u:function(){return eX.q8u},jQs:function(){return eX.jQs},Vbg:function(){return eX.Vbg},rIn:function(){return tR},NZg:function(){return eX.NZg},wYn:function(){return eX.wYn},kuV:function(){return eX.kuV},uv1:function(){return eX.uv1},cye:function(){return eX.cye},W0H:function(){return eX.W0H},yQU:function(){return eX.yQU},zvA:function(){return tF.zvA},we_:function(){return eX.we_},qWM:function(){return eX.qWM},gaJ:function(){return tx},eEe:function(){return tP},QiL:function(){return eX.QiL},lyA:function(){return eX.lyA},Kgp:function(){return eX.Kgp},pe_:function(){return eX.pe_},o0g:function(){return eX.o0g},DlI:function(){return eX.DlI},gVI:function(){return tD},dDz:function(){return eX.dDz},BiW:function(){return eX.BiW},e6w:function(){return eX.e6w},yw1:function(){return t$.yw},xJR:function(){return eX.xJR},oHH:function(){return eX.oHH},$HU:function(){return eX.$HU},IH3:function(){return tM.I},qkr:function(){return eX.qkr},SbG:function(){return eX.SbG},HZH:function(){return eX.HZH},_Yw:function(){return eX._Yw},zbQ:function(){return eX.zbQ},dpD:function(){return eX.dpD},Hmb:function(){return eX.Hmb},mKl:function(){return eX.mKl},b9H:function(){return eX.b9H},e07:function(){return eX.e07},bV0:function(){return eX.bV0},DYp:function(){return tO},xQA:function(){return eX.xQA},nr8:function(){return eX.nr8},PhF:function(){return eX.PhF},oFR:function(){return eX.oFR},a5O:function(){return eX.a5O},i5y:function(){return eX.i5y},RQH:function(){return eX.RQH},wYB:function(){return eX.wYB},p2w:function(){return eX.p2w},Gcp:function(){return eX.Gcp},MRv:function(){return eX.MRv},TQc:function(){return eX.TQc},O3z:function(){return eX.O3z},nhH:function(){return eX.nhH},w3H:function(){return eX.w3H},ZjV:function(){return eX.ZjV},D2d:function(){return eX.D2d},L8s:function(){return eX.L8s},FKq:function(){return eX.FKq},bK0:function(){return eX.bK0},_tC:function(){return eX._tC},h8e:function(){return eX.h8e},jQk:function(){return eX.jQk},_JP:function(){return eX._JP},s1s:function(){return eX.s1s},XkS:function(){return eX.XkS},Tr8:function(){return eX.Tr8},GBy:function(){return eX.GBy},sEM:function(){return eX.sEM},MIZ:function(){return eX.MIZ},esB:function(){return eb.es},YDk:function(){return eb.YD},n9L:function(){return eX.n9L},cWu:function(){return eX.cWu},wx7:function(){return eX.wx7},G3Y:function(){return eX.G3Y},kpP:function(){return eX.kpP},ToN:function(){return eX.ToN},Qvg:function(){return eX.Qvg},XDQ:function(){return eX.XDQ},_wD:function(){return eb._w},RuY:function(){return eX.RuY},usg:function(){return eX.usg},WnP:function(){return tF.WnP},Khb:function(){return tF.Khb},__u:function(){return tF.__u},IHx:function(){return tF.IHx},QBD:function(){return tF.QBD},$6P:function(){return tF.$6P},YjB:function(){return tF.YjB},NqF:function(){return tF.NqF},vHJ:function(){return tF.vHJ},ZRM:function(){return tF.ZRM},VfV:function(){return tF.VfV},z4N:function(){return tF.z4N},fvJ:function(){return tF.fvJ},C80:function(){return tF.C80},wS1:function(){return tF.wS1},uR5:function(){return tF.uR5},y3$:function(){return tf.y3},Wap:function(){return g},zEQ:function(){return tF.zEQ},tgs:function(){return tF.tgs},Dxk:function(){return tF.Dxk},JY5:function(){return tF.JY5},p3b:function(){return tF.p3b},E4h:function(){return tF.E4h},yE8:function(){return tF.yE8},anm:function(){return tF.anm},XsQ:function(){return tF.XsQ},UFq:function(){return tF.UFq},Jyw:function(){return eq},Xhn:function(){return h},f3b:function(){return tF.f3b},pju:function(){return tF.pju},mDi:function(){return tF.mDi},iUl:function(){return tF.iUl},d9v:function(){return tF.d9v},PYB:function(){return tF.PYB},zoF:function(){return tF.zoF},gME:function(){return tF.gME},Izb:function(){return tF.Izb},MNy:function(){return tF.MNy},ZaL:function(){return tF.ZaL},PAt:function(){return tF.PAt},Tek:function(){return tF.Tek},bc:function(){return tF.bc},pdZ:function(){return tF.pdZ},$QV:function(){return tF.$QV},T3b:function(){return eK.T3},mCk:function(){return tF.mCk},f9Y:function(){return tF.f9Y},mew:function(){return tF.mew},$Gn:function(){return tF.$Gn},zbp:function(){return tF.zbp},cbc:function(){return tv.cb},ppE:function(){return tF.ppE},MXe:function(){return tf.MX},nTT:function(){return tF.nTT},B10:function(){return tF.B10},C2$:function(){return u},Ka3:function(){return tF.Ka3},WmZ:function(){return tF.WmZ},cFr:function(){return tf.cF},B90:function(){return tf.B9},N8o:function(){return tf.N8},hiC:function(){return tF.hiC},NTj:function(){return tF.NTj},AKD:function(){return tF.AKD},rvX:function(){return tF.rvX},WYO:function(){return tF.WYO},pyx:function(){return tF.pyx},Ra$:function(){return tf.R},G48:function(){return tf.G4},GRh:function(){return tF.GRh},SRH:function(){return tf.SR},OBj:function(){return _.OB},DgJ:function(){return tF.DgJ},qNN:function(){return tF.qNN},d2q:function(){return tF.d2q},Qqt:function(){return tF.Qqt},dt4:function(){return tF.dt4},t$B:function(){return tF.t$B},iyy:function(){return tF.iyy},kp_:function(){return tF.kp_},hlL:function(){return tF.hlL},x3e:function(){return tf.x3},zel:function(){return tf.ze},GWj:function(){return tF.GWj},qPi:function(){return tF.qPi},imm:function(){return tF.imm},Iqj:function(){return tF.Iqj},dbB:function(){return tF.dbB},DaI:function(){return f},N_N:function(){return tf.N_},ukX:function(){return eK.uk},pIF:function(){return eK.pI},trD:function(){return eK.tr},UQy:function(){return tv.UQ},tiA:function(){return tv.ti},pjt:function(){return tF.pjt},brS:function(){return tF.brS},Sxn:function(){return tF.Sxn},asL:function(){return tF.asL},BHj:function(){return tF.BHj},V3u:function(){return tF.V3u},io:function(){return l},wx0:function(){return tF.wx0},xVT:function(){return tF.xVT},UWc:function(){return tF.UWc},i2d:function(){return tF.i2d},CnY:function(){return tf.Cn},GDt:function(){return y},hi7:function(){return tF.hi7},d9m:function(){return tF.d9m},zN1:function(){return tF.zN1},$r2:function(){return tF.$r2},SX3:function(){return tF.SX3},G9k:function(){return tF.G9k},cM7:function(){return tF.cM7},Krr:function(){return tF.Krr},e_t:function(){return tF.e_t},CmS:function(){return tF.CmS},l_t:function(){return tF.l_t},HvI:function(){return tF.HvI},hJK:function(){return tF.hJK},K5V:function(){return tF.K5V},egP:function(){return tF.egP},MB5:function(){return tF.MB5},eab:function(){return tF.eab},OI3:function(){return tF.OI3},mAU:function(){return c},Fp7:function(){return tF.Fp7},_sB:function(){return tF._sB},YQQ:function(){return tF.YQQ},Ip$:function(){return tF.Ip$},gWQ:function(){return tF.gWQ},J69:function(){return tF.J69},sq6:function(){return tf.sq},ry_:function(){return tF.ry_},VV$:function(){return tF.VV$},LTh:function(){return tF.LTh},VdP:function(){return tF.VdP},wQq:function(){return tF.wQq},Gi7:function(){return tF.Gi7},p_:function(){return tF.p_},dC7:function(){return tF.dC7},rq4:function(){return tF.rq4},SJ_:function(){return tF.SJ_},W76:function(){return tF.W76},glt:function(){return tU},KOy:function(){return tF.KOy},Quu:function(){return tF.Quu},lfX:function(){return tF.lfX},iUs:function(){return tF.iUs},JpU:function(){return tF.JpU},op:function(){return tF.op},N2O:function(){return tF.N2O},vku:function(){return tF.vku},pNR:function(){return tF.pNR},koy:function(){return tF.koy},t1L:function(){return tF.t1L},lGY:function(){return tF.lGY},d_R:function(){return tF.d_R},sQ3:function(){return tF.sQ3},AL3:function(){return tF.AL3},S0v:function(){return tF.S0v},WVs:function(){return tF.WVs},N5s:function(){return tf.N5},$gW:function(){return tF.$gW},N89:function(){return tF.N89},TN_:function(){return tF.TN_},wzB:function(){return tF.wzB},nGf:function(){return tF.nGf},ruB:function(){return tF.ruB},LGj:function(){return tF.LGj},w6H:function(){return tF.w6H},Cd_:function(){return tf.Cd},kwC:function(){return tF.kwC},M25:function(){return tF.M25},jqO:function(){return tf.jq},LiG:function(){return eK.Li},wCN:function(){return eK.wC},UYe:function(){return tF.UYe},btT:function(){return tF.btT},cjG:function(){return tf.cj},XLQ:function(){return tF.XLQ},GYS:function(){return tF.GYS},SDf:function(){return tF.SDf},diP:function(){return tF.diP},sx7:function(){return tF.sx7},mG2:function(){return tF.mG2},QEs:function(){return tF.QEs},NMM:function(){return tF.NMM},bp0:function(){return tF.bp0},iD$:function(){return tF.iD$},snQ:function(){return tF.snQ},yV1:function(){return e2},zcT:function(){return tF.zcT},U8D:function(){return tF.U8D},U_I:function(){return tF.U_I},m7h:function(){return p},CQI:function(){return tf.CQ},VYu:function(){return tf.VY},ODp:function(){return tF.ODp},XD2:function(){return tF.XD2},Xxe:function(){return tF.Xxe},tdS:function(){return tF.tdS},O$l:function(){return tF.O$l},R_K:function(){return tF.R_K},tPi:function(){return tF.tPi},jZU:function(){return tF.jZU},SmN:function(){return tF.SmN},CnO:function(){return tF.CnO},p0P:function(){return tF.p0P},kuN:function(){return e3},XAC:function(){return tF.XAC},Wvh:function(){return tF.Wvh},fBT:function(){return tF.fBT},rVs:function(){return tF.rVs},ers:function(){return tF.ers},uN7:function(){return tF.uN7},Vl2:function(){return tF.Vl2},_b3:function(){return tF._b3},h62:function(){return tF.h62},$i:function(){return tF.$i},L9e:function(){return tF.L9e},knu:function(){return tF.knu},Nbs:function(){return tF.Nbs},NXj:function(){return tF.NXj},Z_8:function(){return tF.Z_8},luU:function(){return tF.luU},Smz:function(){return tF.Smz},z4k:function(){return t$.z4},ORZ:function(){return tF.ORZ},AEp:function(){return tF.AEp},XeE:function(){return tF.XeE},RRF:function(){return tF.RRF},odF:function(){return tF.odF},wOQ:function(){return tF.wOQ},yXz:function(){return tF.yXz},Bfx:function(){return tF.Bfx},xZs:function(){return tF.xZs},piX:function(){return e8},p3L:function(){return d},lub:function(){return tf.lu},Gg6:function(){return tF.Gg6},XVJ:function(){return tf.XV},hg7:function(){return tF.hg7},p_j:function(){return tB},p4s:function(){return tF.p4s},Xu6:function(){return tF.Xu6},Two:function(){return tF.Two},bt3:function(){return eK.bt},nEe:function(){return eK.nE},pUJ:function(){return tF.pUJ},HHK:function(){return tF.HHK},x8V:function(){return t$.x8},GaM:function(){return tF.GaM},D5U:function(){return e7},h76:function(){return tv.h7},fNQ:function(){return tv.fN},VD$:function(){return tF.VD$},pnJ:function(){return tv.pn},jTM:function(){return th},arb:function(){return tF.arb},itS:function(){return tF.itS},lls:function(){return tF.lls},P84:function(){return tF.P84}});var o,s,u={};n.r(u),n.d(u,{isBrowser:function(){return x},isMobile:function(){return w},mockIsMobile:function(){return v}});var l={};n.r(l),n.d(l,{browserFiles:function(){return eS},browserHTTPRequest:function(){return eD},concatenateArrayBuffers:function(){return P},copyModel:function(){return ec},decodeWeights:function(){return O},encodeWeights:function(){return C},fromMemory:function(){return eM},fromMemorySync:function(){return eB},getLoadHandlers:function(){return G},getModelArtifactsForJSON:function(){return B},getModelArtifactsForJSONSync:function(){return M},getModelArtifactsInfoForJSON:function(){return L},getSaveHandlers:function(){return V},getWeightSpecs:function(){return U},http:function(){return eR},isHTTPScheme:function(){return eC},listModels:function(){return eu},loadWeights:function(){return eN},moveModel:function(){return eh},registerLoadRouter:function(){return W},registerSaveRouter:function(){return z},removeModel:function(){return el},weightsLoaderFactory:function(){return eT},withSaveHandler:function(){return eL},withSaveHandlerSync:function(){return eU}});var c={};n.r(c),n.d(c,{confusionMatrix:function(){return eH}});var h={};n.r(h),n.d(h,{fromPixels:function(){return e0},fromPixelsAsync:function(){return eQ},toPixels:function(){return eJ}});var f={};n.r(f),n.d(f,{prepareAndValidate:function(){return e1}});var p={};n.r(p),n.d(p,{Serializable:function(){return e4},SerializationMap:function(){return e6},registerClass:function(){return e5}});var d={};n.r(d),n.d(d,{TEST_EPSILON_FLOAT16:function(){return e9},createVideoElement:function(){return tl},encodeStrings:function(){return function e(t){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?e(r):t[n]=(0,e7.encodeString)(r)}return t}},expectArrayBuffersEqual:function(){return tu},expectArraysClose:function(){return te},expectArraysEqual:function(){return ta},expectNumbersClose:function(){return ti},expectPromiseToFail:function(){return tr},expectValuesInRange:function(){return ts},play:function(){return tc},testEpsilon:function(){return tt}});var m={};n.r(m),n.d(m,{collectGatherOpShapeInfo:function(){return nO},computeOutShape:function(){return nC},segOpComputeOptimalWindowSize:function(){return nA}});var g={};n.r(g),n.d(g,{ERF_A1:function(){return t5},ERF_A2:function(){return t8},ERF_A3:function(){return t7},ERF_A4:function(){return t9},ERF_A5:function(){return ne},ERF_P:function(){return t6},PARALLELIZE_THRESHOLD:function(){return tZ},RowPartitionType:function(){return s},SELU_SCALE:function(){return t4.$},SELU_SCALEALPHA:function(){return t4.y},applyActivation:function(){return tG.QH},assertAndGetBroadcastShape:function(){return eq.assertAndGetBroadcastShape},assertAxesAreInnerMostDims:function(){return tj.lB},assertParamsConsistent:function(){return tz},assignToTypedArray:function(){return ns},axesAreInnerMostDims:function(){return tj.YB},calculateShapes:function(){return e2.calculateShapes},checkEinsumDimSizes:function(){return np},checkPadOnDimRoundingMode:function(){return tV.m},combineLocations:function(){return tj.Vh},combineRaggedTensorToTensorShapes:function(){return tH},complexWithEvenIndex:function(){return na},complexWithOddIndex:function(){return ni},computeConv2DInfo:function(){return tV.Ix},computeConv3DInfo:function(){return tV.jw},computeDefaultPad:function(){return tV.aO},computeDilation2DInfo:function(){return tV.Rf},computeOptimalWindowSize:function(){return tY},computeOutAndReduceShapes:function(){return tj.kz},computeOutShape:function(){return tW},computePool2DInfo:function(){return tV.Xw},computePool3DInfo:function(){return tV.pl},convertConv2DDataFormat:function(){return tV.sl},decodeEinsumEquation:function(){return nh},eitherStridesOrDilationsAreOne:function(){return tV.jT},expandShapeToKeepDim:function(){return tj.rv},exponent:function(){return nl},exponents:function(){return nu},fromStringArrayToUint8:function(){return nD},fromUint8ToStringArray:function(){return nR},getAxesPermutation:function(){return tj.Q3},getBroadcastDims:function(){return eq.getBroadcastDims},getComplexWithIndex:function(){return no},getEinsumComputePath:function(){return nd},getEinsumPermutation:function(){return nf},getFusedBiasGradient:function(){return tG.pf},getFusedDyActivation:function(){return tG.Fr},getImageCenter:function(){return tQ},getInnerMostAxes:function(){return tj.sY},getPermuted:function(){return t0},getRaggedRank:function(){return tX},getReductionAxes:function(){return eq.getReductionAxes},getReshaped:function(){return tJ},getReshapedPermuted:function(){return t1},getRowPartitionTypesHelper:function(){return tq},getSliceBeginCoords:function(){return t2},getSliceSize:function(){return t3},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return ny},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return nb},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return nv},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return n_},getSparseReshapeInputOutputMismatchErrorMessage:function(){return nS},getSparseReshapeInputOutputMultipleErrorMessage:function(){return nk},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return nw},getSparseReshapeNegativeOutputDimErrorMessage:function(){return nx},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return nT},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return nI},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return nE},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return nN},getUndoAxesPermutation:function(){return tj.LJ},isIdentityPermutation:function(){return nm},log:function(){return nt.c},mergeRealAndImagArrays:function(){return nn},prepareAndValidate:function(){return e1},prepareSplitSize:function(){return ng},segment_util:function(){return m},shouldFuse:function(){return tG.uy},slice_util:function(){return e3},splitRealAndImagArrays:function(){return nr},tupleValuesAreOne:function(){return tV.I0},upcastType:function(){return t$.x8},validateDefaultValueShape:function(){return tK},validateInput:function(){return e2.validateInput},validateUpdateShape:function(){return e2.validateUpdateShape},warn:function(){return nt.Z}});var y={};n.r(y),n.d(y,{nonMaxSuppressionV3Impl:function(){return nP.GP},nonMaxSuppressionV4Impl:function(){return nP.qP},nonMaxSuppressionV5Impl:function(){return nP.pA},whereImpl:function(){return n$.Z}});var b=n(196);function v(e){r=e}function w(e){if(void 0!==r)return r;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;let t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){let t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function x(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var _=n(2885),k=n(3454);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let S=(0,_.OB)();S.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),S.registerFlag("IS_BROWSER",()=>x()),S.registerFlag("IS_NODE",()=>void 0!==k&&void 0!==k.versions&&void 0!==k.versions.node),S.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),S.registerFlag("PROD",()=>!1),S.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>S.getBool("DEBUG")),S.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),S.registerFlag("IS_TEST",()=>!1),S.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0),S.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),S.registerFlag("ENGINE_COMPILE_ONLY",()=>!1),S.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),S.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var I=n(1661),E=n(701),N=n(569);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let T={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var A=n(1876).Buffer;async function C(e,t){let n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let i=0;i<a.length;++i){let o=a[i],s=Array.isArray(e)?e[i].tensor:e[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw Error(`Unsupported dtype in weight '${o}': ${s.dtype}`);let u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){let e=new Promise(async e=>{let t=await s.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n),a=0;for(let e=0;e<t.length;e++){let n=t[e],i=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(i,a),a+=4,r.set(n,a),a+=n.length}e(r)});r.push(e)}else r.push(s.data());null!=t&&(u.group=t),n.push(u)}let i=await Promise.all(r);return{data:function(e){if(null===e)throw Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0,n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)});let r=new Uint8Array(t),a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}(i),specs:n}}function O(e,t){let n;let r={},a=0;for(let i of t){let t;let o=i.name,s=i.dtype,u=i.shape,l=(0,N.NA)(u);if("quantization"in i){let r=i.quantization;if("uint8"===r.dtype||"uint16"===r.dtype){if(!("min"in r&&"scale"in r))throw Error(`Weight ${i.name} with quantization ${r.dtype} doesn't have corresponding metadata min and scale.`)}else if("float16"===r.dtype){if("float32"!==s)throw Error(`Weight ${i.name} is quantized with ${r.dtype} which only supports weights of type float32 not ${s}.`)}else throw Error(`Weight ${i.name} has unknown quantization dtype ${r.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let u=T[r.dtype],c=e.slice(a,a+l*u),h="uint8"===r.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===s){if("uint8"===r.dtype||"uint16"===r.dtype){t=new Float32Array(h.length);for(let e=0;e<h.length;e++){let n=h[e];t[e]=n*r.scale+r.min}}else if("float16"===r.dtype)void 0===n&&(n=function(){let e=function(){let e=e=>{let t=e<<13,n=0;for(;(8388608&t)==0;)n-=8388608,t<<=1;return(t&=-8388609)|(n+=947912704)},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{let a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let a=0;a<r.length;a++){let o=r[a],s=e[n[o>>10]+(1023&o)]+t[o>>10];i[a]=s}return new Float32Array(a)}}()),t=n(h);else throw Error(`Unsupported quantization type ${r.dtype} for weight type float32.`)}else if("int32"===s){if("uint8"!==r.dtype&&"uint16"!==r.dtype)throw Error(`Unsupported quantization type ${r.dtype} for weight type int32.`);t=new Int32Array(h.length);for(let e=0;e<h.length;e++){let n=h[e];t[e]=Math.round(n*r.scale+r.min)}}else throw Error(`Unsupported dtype in weight '${o}': ${s}`);a+=l*u}else if("string"===s){let n=(0,N.NA)(i.shape);t=[];for(let r=0;r<n;r++){let n=new Uint32Array(e.slice(a,a+4))[0];a+=4;let r=new Uint8Array(e.slice(a,a+n));t.push(r),a+=n}}else{let n=T[s],i=e.slice(a,a+l*n);if("float32"===s)t=new Float32Array(i);else if("int32"===s)t=new Int32Array(i);else if("bool"===s)t=new Uint8Array(i);else if("complex64"===s){t=new Float32Array(i);let e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<e.length;r++)e[r]=t[2*r],n[r]=t[2*r+1];let a=(0,E.X)(e,u,"float32"),s=(0,E.X)(n,u,"float32");r[o]=(0,I.P)(a,s),a.dispose(),s.dispose()}else throw Error(`Unsupported dtype in weight '${o}': ${s}`);a+=l*n}"complex64"!==s&&(r[o]=(0,E.X)(t,u,s))}return r}let R=void 0!==A&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function D(e){return R?A.byteLength(e):new Blob([e]).size}function P(e){if(1===e.length)return e[0];let t=0;e.forEach(e=>{t+=e.byteLength});let n=new Uint8Array(t),r=0;return e.forEach(e=>{n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function $(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function F(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function M(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),r}async function B(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),M(e,n,r)}function L(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:D(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:D(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function U(e){let t=[];for(let n of e)t.push(...n.weights);return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class j{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==j.instance&&(j.instance=new j),j.instance}static registerSaveRouter(e){j.getInstance().saveRouters.push(e)}static registerLoadRouter(e){j.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return j.getHandlers(e,"save")}static getLoadHandlers(e,t){return j.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[],a="load"===t?j.getInstance().loadRouters:j.getInstance().saveRouters;return a.forEach(t=>{let a=t(e,n);null!==a&&r.push(a)}),r}}let z=e=>j.registerSaveRouter(e),W=e=>j.registerLoadRouter(e),V=e=>j.getSaveHandlers(e),G=(e,t)=>j.getLoadHandlers(e,t),H="tensorflowjs",q="models_store",X="model_info_store";function K(){if(!(0,_.OB)().getBool("IS_BROWSER"))throw Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw Error("The current browser does not appear to support IndexedDB.");return t}function Z(e){let t=e.result;t.createObjectStore(q,{keyPath:"modelPath"}),t.createObjectStore(X,{keyPath:"modelPath"})}class Y{constructor(e){if(this.indexedDB=K(),null==e||!e)throw Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{let r=this.indexedDB.open(H,1);r.onupgradeneeded=()=>Z(r),r.onsuccess=()=>{let a=r.result;if(null==t){let t=a.transaction(q,"readonly"),r=t.objectStore(q),i=r.get(this.modelPath);i.onsuccess=()=>{if(null==i.result)return a.close(),n(Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(i.result.modelArtifacts)},i.onerror=e=>(a.close(),n(i.error)),t.oncomplete=()=>a.close()}else{let r;let i=L(t),o=a.transaction(X,"readwrite"),s=o.objectStore(X),u=s.put({modelPath:this.modelPath,modelArtifactsInfo:i});u.onsuccess=()=>{r=a.transaction(q,"readwrite");let u=r.objectStore(q),l=u.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:i});l.onsuccess=()=>e({modelArtifactsInfo:i}),l.onerror=e=>{s=o.objectStore(X);let t=s.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(l.error)),t.onerror=e=>(a.close(),n(l.error))}},u.onerror=e=>(a.close(),n(u.error)),o.oncomplete=()=>{null==r?a.close():r.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}}Y.URL_SCHEME="indexeddb://";let Q=e=>{var t;return(0,_.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Y.URL_SCHEME)?(t=e.slice(Y.URL_SCHEME.length),new Y(t)):null};j.registerSaveRouter(Q),j.registerLoadRouter(Q);let J="tensorflowjs_models",ee="info";function et(e){return{info:[J,e,ee].join("/"),topology:[J,e,"model_topology"].join("/"),weightSpecs:[J,e,"weight_specs"].join("/"),weightData:[J,e,"weight_data"].join("/"),modelMetadata:[J,e,"model_metadata"].join("/")}}function en(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}class er{constructor(e){if(!(0,_.OB)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=et(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=L(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(R)return A.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(e.weightData));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:r}}catch(e){throw en(this.keys),Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;let a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){let e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}let i=this.LS.getItem(this.keys.weightData);if(null==i)throw Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(R){let t=A.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(i),t}}er.URL_SCHEME="localstorage://";let ea=e=>{var t;return(0,_.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(er.URL_SCHEME)?(t=e.slice(er.URL_SCHEME.length),new er(t)):null};j.registerSaveRouter(ea),j.registerLoadRouter(ea);class ei{constructor(){this.managers={}}static getInstance(){return null==ei.instance&&(ei.instance=new ei),ei.instance}static registerManager(e,t){(0,N.hu)(null!=e,()=>"scheme must not be undefined or null."),e.endsWith("://")&&(e=e.slice(0,e.indexOf("://"))),(0,N.hu)(e.length>0,()=>"scheme must not be an empty string.");let n=ei.getInstance();(0,N.hu)(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=ei.getInstance().managers[e];if(null==t)throw Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(ei.getInstance().managers)}}function eo(e){if(-1===e.indexOf("://"))throw Error(`The url string provided does not contain a scheme. Supported schemes are: ${ei.getSchemes().join(",")}`);return{scheme:e.split("://")[0],path:e.split("://")[1]}}async function es(e,t,n=!1){(0,N.hu)(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=j.getLoadHandlers(e);(0,N.hu)(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),(0,N.hu)(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let a=r[0],i=j.getSaveHandlers(t);(0,N.hu)(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),(0,N.hu)(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let o=i[0],s=eo(e).scheme,u=eo(e).path,l=s===eo(e).scheme,c=await a.load();n&&l&&await ei.getManager(s).removeModel(u);let h=await o.save(c);return n&&!l&&await ei.getManager(s).removeModel(u),h.modelArtifactsInfo}async function eu(){let e=ei.getSchemes(),t={};for(let n of e){let e=await ei.getManager(n).listModels();for(let r in e){let a=n+"://"+r;t[a]=e[r]}}return t}async function el(e){let t=eo(e),n=ei.getManager(t.scheme);return n.removeModel(t.path)}async function ec(e,t){return es(e,t,!1)}async function eh(e,t){return es(e,t,!0)}if((0,_.OB)().get("IS_BROWSER")){(0,_.OB)().setPlatform("browser",new /**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){if(!window||!(0,_.OB)().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,t);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation();let t=this.functionRefs[e.data.index];t(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}});try{ei.registerManager(er.URL_SCHEME,new class{constructor(){(0,N.hu)((0,_.OB)().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),(0,N.hu)("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=J+"/",n="/"+ee;for(let r=0;r<this.LS.length;++r){let a=this.LS.key(r);if(a.startsWith(t)&&a.endsWith(n)){let t=function(e){let t=e.split("/");if(t.length<3)throw Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join("/")}(a);e[t]=JSON.parse(this.LS.getItem(a))}}return e}async removeModel(e){var t;e=(t=e).startsWith(er.URL_SCHEME)?t.slice(er.URL_SCHEME.length):t;let n=et(e);if(null==this.LS.getItem(n.info))throw Error(`Cannot find model at path '${e}'`);let r=JSON.parse(this.LS.getItem(n.info));return en(n),r}})}catch(e){}try{ei.registerManager(Y.URL_SCHEME,new class{constructor(){this.indexedDB=K()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(H,1);n.onupgradeneeded=()=>Z(n),n.onsuccess=()=>{let r=n.result,a=r.transaction(X,"readonly"),i=a.objectStore(X),o=i.getAll();o.onsuccess=()=>{let t={};for(let e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){var t;return e=(t=e).startsWith(Y.URL_SCHEME)?t.slice(Y.URL_SCHEME.length):t,new Promise((t,n)=>{let r=this.indexedDB.open(H,1);r.onupgradeneeded=()=>Z(r),r.onsuccess=()=>{let a;let i=r.result,o=i.transaction(X,"readwrite"),s=o.objectStore(X),u=s.get(e);u.onsuccess=()=>{if(null==u.result)return i.close(),n(Error(`Cannot find model with path '${e}' in IndexedDB.`));{let r=s.delete(e),o=()=>{a=i.transaction(q,"readwrite");let r=a.objectStore(q),o=r.delete(e);o.onsuccess=()=>t(u.result.modelArtifactsInfo),o.onerror=e=>n(u.error)};r.onsuccess=o,r.onerror=e=>(o(),i.close(),n(u.error))}},u.onerror=e=>(i.close(),n(u.error)),o.oncomplete=()=>{null==a?i.close():a.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)})}})}catch(e){}}var ef=n(3454);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ep={importFetch:()=>n(5410)};(0,_.OB)().get("IS_NODE")&&!(0,_.OB)().get("IS_BROWSER")&&(0,_.OB)().setPlatform("node",new class{constructor(){this.util=n(8628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=(0,_.OB)().global.fetch?(0,_.OB)().global.fetch(e,t):(null==a&&(a=ep.importFetch()),a(e,t))}now(){let e=ef.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}});var ed=n(2657),em=n(2271),eg=n(8723),ey=n(9798),eb=n(974);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,b.wv)();let ev={buffer:ed.f,cast:em.p,clone:eg.d,print:ey.S};function ew(e){return new Promise(e=>setTimeout(e)).then(e)}(0,eb.Vp)(ev);class ex{constructor(e){if(!(0,_.OB)().getBool("IS_BROWSER"))throw Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(ex.URL_SCHEME)&&(e=e.slice(ex.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw Error("Browser downloads are not supported in this environment since `document` is not present");let t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r=F(e,n),a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=a,await ew(()=>i.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await ew(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:L(e)}}}}ex.URL_SCHEME="downloads://";class e_{constructor(e){if(null==e||e.length<1)throw Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=n=>{let r=JSON.parse(n.target.result),a=r.modelTopology;if(null==a){t(Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}let i=r.weightsManifest;if(null==i){t(Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(0===this.weightsFiles.length){e({modelTopology:a});return}let o=B(r,e=>this.loadWeights(e));e(o)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let r of e)t.push(...r.weights),n.push(...r.paths);let r=this.checkManifestAndWeightFiles(e),a=n.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(a).then(e=>[t,P(e)])}loadWeightsFile(e,t){return new Promise((n,r)=>{let a=new FileReader;a.onload=e=>{let t=e.target.result;n(t)},a.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(e=>$(e.name)),r={};for(let a of e)a.paths.forEach(e=>{let a=$(e);if(-1!==t.indexOf(a))throw Error(`Duplicate file basename found in weights manifest: '${a}'`);if(t.push(a),-1===n.indexOf(a))throw Error(`Weight file with basename '${a}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(a)]});if(t.length!==this.weightsFiles.length)throw Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}let ek=e=>(0,_.OB)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ex.URL_SCHEME)?function(e="model"){return new ex(e)}(e.slice(ex.URL_SCHEME.length)):null;function eS(e){return new e_(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eI(e,t,n,r){var a,i;(0,N.hu)(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array"),a=n=null==n?0:n,i=r=null==r?1:r,(0,N.hu)(a>=0&&a<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${a}`),(0,N.hu)(i>=0&&i<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${i}`),(0,N.hu)(i>=a,()=>`startFraction must be no more than endFraction, but got startFraction ${a} and endFraction ${i}`);let o=0,s=a=>(a.then(a=>{let i=n+ ++o/e.length*(r-n);return t(i),a}),a);return Promise.all(e.map(s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function eE(e,t){null==t&&(t={});let n=null==t.fetchFunc?(0,_.OB)().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=null==t.onProgress?await Promise.all(r):await eI(r,t.onProgress,0,.5),i=a.map(e=>e.arrayBuffer()),o=null==t.onProgress?await Promise.all(i):await eI(i,t.onProgress,.5,1);return o}async function eN(e,t="",n,r){let a=e=>eE(e,{requestInit:r}),i=eT(a);return i(e,t,n)}function eT(e){return async(t,n="",r)=>{let a=t.map(()=>!1),i={},o=null!=r?r.map(()=>!1):[],s=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{let u="quantization"in e?e.quantization.dtype:e.dtype,l=T[u]*N.NA(e.shape),c=()=>{a[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=r?r.forEach((t,n)=>{t===e.name&&(c(),o[n]=!0)}):c(),s.push(e.name),n+=l})}),!o.every(e=>e)){let e=r.filter((e,t)=>!o[t]);throw Error(`Could not find weights in manifest with names: ${e.join(", ")}. 
Manifest JSON has weights with names: ${s.join(", ")}.`)}let u=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),l=[];u.forEach(e=>{t[e].paths.forEach(e=>{let t=n+(n.endsWith("/")?"":"/")+e;l.push(t)})});let c=await e(l),h={},f=0;return u.forEach(e=>{let n=t[e].paths.length,r=0;for(let e=0;e<n;e++)r+=c[f+e].byteLength;let a=new ArrayBuffer(r),o=new Uint8Array(a),s=0;for(let e=0;e<n;e++){let t=new Uint8Array(c[f+e]);o.set(t,s),s+=t.byteLength}let u=i[e];u.forEach(e=>{let t=a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=O(t,[e.manifestEntry]);for(let e in n)h[e]=n[e]}),f+=n}),h}}j.registerSaveRouter(ek);class eA{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?((0,N.hu)("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=(0,_.OB)().platform.fetch,(0,N.hu)(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&(0,N.hu)(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r=F(e,n);t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");let a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:L(e),responses:[a]};throw Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){let e;let t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);try{e=await t.json()}catch(t){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",Error(e)}let n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return B(e,e=>this.loadWeights(e))}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,i=U(e),o=[],s=[];for(let t of e)for(let e of t.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):o.push(a+e+r);this.weightUrlConverter&&o.push(...await Promise.all(s));let u=await eE(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,P(u)]}}function eC(e){return null!=e.match(eA.URL_SCHEME_REGEX)}eA.URL_SCHEME_REGEX=/^https?:\/\//;let eO=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc));else if(Array.isArray(e)?e.every(e=>eC(e)):eC(e))return eR(e,t);return null};function eR(e,t){return new eA(e,t)}function eD(e,t){return eR(e,t)}j.registerSaveRouter(eO),j.registerLoadRouter(eO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eP{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class e${constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class eF{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}}function eM(e,t,n,r){let a=arguments;return new eF(eB(...a))}function eB(e,t,n,r){if(1!=arguments.length)return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new eP({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r});{let t=null!=e.modelTopology||null!=e.weightSpecs;return t?new eP(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new eP({modelTopology:e}))}}function eL(e){return new e$(e)}function eU(e){return new e$(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ej=n(3740),ez=n(8687),eW=n(6708),eV=n(2668),eG=n(9065);let eH=(0,eV.op)({confusionMatrix_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,ej._1)(e,"labels","confusionMatrix"),a=(0,ej._1)(t,"predictions","confusionMatrix");N.hu(null==n||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),N.hu(1===r.rank,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),N.hu(1===a.rank,()=>`Expected the rank of predictions to be 1, but got ${a.rank}`),N.hu(r.shape[0]===a.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${a.shape[0]}. Labels and predictions should have the same number of elements.`),N.hu(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);let i=(0,eW.l)((0,em.p)(r,"int32"),n),o=(0,eW.l)((0,em.p)(a,"int32"),n),s=(0,eG.p)(i),u=(0,ez.O)(s,o);return(0,em.p)(u,"int32")}});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var eq=n(2200),eX=n(9121),eK=n(6151),eZ=n(9906);function eY(e,t=3){let n,r;if(t>4)throw Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw Error("pixels passed to tf.browser.fromPixels() can not be null");let a=!1,o=!1,s=!1,u=!1,l=!1,c=!1;if(e.data instanceof Uint8Array)a=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)o=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)s=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)u=!0;else if(null!=e.getContext)l=!0;else if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)c=!0;else throw Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);let h=(0,eK.pI)(eX.eBW,b.BV.backendName);if(null!=h)return b.BV.runKernel(eX.eBW,{pixels:e},{numChannels:t});let[f,p]=s?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(l)n=e.getContext("2d").getImageData(0,0,f,p).data;else if(o||a)n=e.data;else if(u||s||c){if(null==i){if("undefined"==typeof document){if("undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof OffscreenCanvasRenderingContext2D)i=new OffscreenCanvas(1,1).getContext("2d");else throw Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.")}else i=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}i.canvas.width=f,i.canvas.height=p,i.drawImage(e,0,0,f,p),n=i.getImageData(0,0,f,p).data}if(4===t)r=new Int32Array(n);else{let e=f*p;r=new Int32Array(e*t);for(let a=0;a<e;a++)for(let e=0;e<t;++e)r[a*t+e]=n[4*a+e]}return(0,eZ.w)(r,[p,f,t],"int32")}async function eQ(e,t=3){var n;let r=null;if((0,_.OB)().getBool("WRAP_TO_IMAGEBITMAP")&&"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&null!=(n=e)&&0!==n.width&&0!==n.height&&!(null!=e&&e.data instanceof Uint8Array)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}r=null!=t&&t.width===e.width&&t.height===e.height?t:e}else r=e;return eY(r,t)}async function eJ(e,t){let n=(0,ej._1)(e,"img","toPixels");if(!(e instanceof eb.es)){let e=n;n=(0,em.p)(e,"int32"),e.dispose()}if(2!==n.rank&&3!==n.rank)throw Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);let[r,a]=n.shape.slice(0,2),i=2===n.rank?1:n.shape[2];if(i>4||2===i)throw Error(`toPixels only supports depth of size 1, 3 or 4 but got ${i}`);if("float32"!==n.dtype&&"int32"!==n.dtype)throw Error(`Unsupported type for toPixels: ${n.dtype}. Please use float32 or int32 tensors.`);let o=await n.data(),s="float32"===n.dtype?255:1,u=new Uint8ClampedArray(a*r*4);for(let e=0;e<r*a;++e){let t=[0,0,0,255];for(let r=0;r<i;r++){let a=o[e*i+r];if("float32"===n.dtype){if(a<0||a>1)throw Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${a}.`)}else if("int32"===n.dtype&&(a<0||a>255))throw Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${a}.`);1===i?(t[0]=a*s,t[1]=a*s,t[2]=a*s):t[r]=a*s}let r=4*e;u[r+0]=Math.round(t[0]),u[r+1]=Math.round(t[1]),u[r+2]=Math.round(t[2]),u[r+3]=Math.round(t[3])}if(null!=t){t.width=a,t.height=r;let e=t.getContext("2d"),n=new ImageData(u,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),u}let e0=(0,eV.op)({fromPixels_:eY});function e1(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===(0,N.NA)(e.shape))throw Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let a=t.shape,i=a[a.length-1],o=1;for(let e=0;e<a.length-1;++e)o*=a[e];let s=e.shape,u=a.slice();u.pop();let l=1;for(let e=i;e<n;++e)l*=s[e],u.push(s[e]);let c=[...(0,N.e3)(e.shape).map(e=>e/l),1].slice(0,i);return[u,o,l,c]}var e2=n(3028),e3=n(7650);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e4{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class e6{constructor(){this.classNameMap={}}static getMap(){return null==e6.instance&&(e6.instance=new e6),e6.instance}static register(e){e6.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function e5(e){(0,N.hu)(null!=e.className,()=>"Class being registered does not have the static className property defined."),(0,N.hu)("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),(0,N.hu)(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),e6.register(e)}var e8=n(747),e7=n(3418);let e9=.1;function te(e,t,n){return null==n&&(n=tt()),tn(e,t,(e,t)=>to(e,t,n))}function tt(){return 32===b.BV.backend.floatPrecision()?.001:e9}function tn(e,t,n){let r=!0;if(((0,N.fU)(e)||(0,N.fU)(t))&&(r=!1),(0,N.fU)(e)&&(0,N.fU)(t)&&(r=!0),r){let n=e.constructor.name,r=t.constructor.name;if(n!==r)throw Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){let n=(0,ej.C)(e),r=(0,ej.C)(t);if(!(0,N.cO)(n,r))throw Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}let a=(0,N.fU)(e)?e:(0,N.xH)(e),i=(0,N.fU)(t)?t:(0,N.xH)(t);if(a.length!==i.length)throw Error(`Arrays have different lengths actual: ${a.length} vs expected: ${i.length}.
Actual:   ${a}.
Expected: ${i}.`);for(let e=0;e<i.length;++e){let t=a[e],r=i[e];if(!n(t,r))throw Error(`Arrays differ: actual[${e}] = ${t}, expected[${e}] = ${r}.
Actual:   ${a}.
Expected: ${i}.`)}"undefined"!=typeof expect&&expect().nothing()}function tr(e,t){e().then(()=>t.fail(),()=>t()),"undefined"!=typeof expect&&expect().nothing()}function ta(e,t){return(0,N.HD)(e)||(0,N.HD)(e[0])||(0,N.HD)(t)||(0,N.HD)(t[0])?tn(e,"string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t,(e,t)=>e==t):tn(e,t,(e,t)=>to(e,t,0))}function ti(e,t,n){if(null==n&&(n=tt()),!to(e,t,n))throw Error(`Numbers differ: actual === ${e}, expected === ${t}`);"undefined"!=typeof expect&&expect().nothing()}function to(e,t,n){return!(isFinite(e)||isFinite(t))||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function ts(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function tu(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let e=0;e<r.length;e++)if(n[e]!==r[e])throw Error(`Expected ArrayBuffer value at ${e} to be ${r[e]} but got ${n[e]} instead`)}function tl(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(e=>{t.addEventListener("loadeddata",n=>e(t)),t.load()})}async function tc(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}/** @license See the LICENSE file. */let th="3.21.0";var tf=n(4368),tp=n(6407),td=n(1274),tm=n(4841),tg=n(3261),ty=n(248),tb=n(6577),tv=n(633),tw=n(9494);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tx extends e4{minimize(e,t=!1,n){let{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){let e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return((0,tf.B9)(a),t)?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return(0,tv.pn)(e,t)}dispose(){null!=this.iterations_&&(0,tf.B9)(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:(0,tw.i)(this.iterations_,"int32")}}async getWeights(){throw Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(tx,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t_ extends tx{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=b.BV.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{let r=b.BV.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:(0,tf.lu)(()=>(0,tb.P)(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:(0,tf.lu)(()=>(0,tb.P)(r).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let i=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;(0,tf.lu)(()=>{let e=(0,tp.I)((0,tm.d)(i,this.rho),(0,tm.d)((0,ty.h)(a),1-this.rho)),t=(0,tm.d)((0,td.h)((0,tg._)((0,tp.I)(o,this.epsilon)),(0,tg._)((0,tp.I)(i,this.epsilon))),a),n=(0,tp.I)((0,tm.d)(o,this.rho),(0,tm.d)((0,ty.h)(t),1-this.rho));i.assign(e),o.assign(n);let s=(0,tp.I)((0,tm.d)(t,-this.learningRate),r);r.assign(s)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&((0,tf.B9)(this.accumulatedGrads.map(e=>e.variable)),(0,tf.B9)(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=e.length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}t_.className="Adadelta",e5(t_);var tk=n(4006);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tS extends tx{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{let r=b.BV.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:(0,tf.lu)(()=>(0,tk.h)(r.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let i=this.accumulatedGrads[n].variable;(0,tf.lu)(()=>{let e=(0,tp.I)(i,(0,ty.h)(a));i.assign(e);let t=(0,tp.I)((0,tm.d)((0,td.h)(a,(0,tg._)((0,tp.I)(e,b.BV.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&(0,tf.B9)(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}tS.className="Adagrad",e5(tS);var tI=n(3453),tE=n(827);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tN extends tx{constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],(0,tf.lu)(()=>{this.accBeta1=(0,tw.i)(t).variable(),this.accBeta2=(0,tw.i)(n).variable()}),null==r&&(this.epsilon=b.BV.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);(0,tf.lu)(()=>{let n=(0,tE.l)(1,this.accBeta1),r=(0,tE.l)(1,this.accBeta2);t.forEach((t,a)=>{let i=b.BV.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:(0,tf.lu)(()=>(0,tb.P)(i).variable(!1))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:`${t}/v`,variable:(0,tf.lu)(()=>(0,tb.P)(i).variable(!1))});let o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;let s=this.accumulatedFirstMoment[a].variable,u=this.accumulatedSecondMoment[a].variable,l=(0,tp.I)((0,tm.d)(s,this.beta1),(0,tm.d)(o,1-this.beta1)),c=(0,tp.I)((0,tm.d)(u,this.beta2),(0,tm.d)((0,ty.h)(o),1-this.beta2)),h=(0,td.h)(l,n),f=(0,td.h)(c,r);s.assign(l),u.assign(c);let p=(0,tp.I)((0,tm.d)((0,td.h)(h,(0,tp.I)((0,tg._)(f),this.epsilon)),-this.learningRate),i);i.assign(p)}),this.accBeta1.assign((0,tm.d)(this.accBeta1,this.beta1)),this.accBeta2.assign((0,tm.d)(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&(0,tf.B9)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&(0,tf.B9)(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),(0,tf.lu)(()=>{this.accBeta1.assign((0,tI.s)(this.beta1,this.iterations_+1)),this.accBeta2.assign((0,tI.s)(this.beta2,this.iterations_+1))});let t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}tN.className="Adam",e5(tN);var tT=n(6235),tA=n(632);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tC extends tx{constructor(e,t,n,r=null,a=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],(0,tf.lu)(()=>{this.iteration=(0,tw.i)(0).variable(),this.accBeta1=(0,tw.i)(t).variable()}),null==r&&(this.epsilon=b.BV.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);(0,tf.lu)(()=>{let n=(0,tE.l)(1,this.accBeta1),r=(0,td.h)(-this.learningRate,(0,tp.I)((0,tm.d)(this.iteration,this.decay),1));t.forEach((t,a)=>{let i=b.BV.registeredVariables[t];null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:`${t}/m`,variable:(0,tb.P)(i).variable(!1)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:`${t}/v`,variable:(0,tb.P)(i).variable(!1)});let o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;let s=this.accumulatedFirstMoment[a].variable,u=this.accumulatedWeightedInfNorm[a].variable,l=(0,tp.I)((0,tm.d)(s,this.beta1),(0,tm.d)(o,1-this.beta1)),c=(0,tm.d)(u,this.beta2),h=(0,tT.W)(o),f=(0,tA.g)(c,h);s.assign(l),u.assign(f);let p=(0,tp.I)((0,tm.d)((0,td.h)(r,n),(0,td.h)(l,(0,tp.I)(f,this.epsilon))),i);i.assign(p)}),this.iteration.assign((0,tp.I)(this.iteration,1)),this.accBeta1.assign((0,tm.d)(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&(0,tf.B9)(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&(0,tf.B9)(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}tC.className="Adamax",e5(tC);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tO extends tx{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;let a=b.BV.registeredVariables[t];(0,tf.lu)(()=>{let e=(0,tp.I)((0,tm.d)(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=(0,tf.Cn)((0,tw.i)(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}tO.className="SGD",e5(tO);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tR extends tO{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=(0,tw.i)(this.momentum)}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{let r=b.BV.registeredVariables[t];null==this.accumulations[n]&&(this.accumulations[n]={originalName:`${t}/momentum`,variable:(0,tf.lu)(()=>(0,tb.P)(r).variable(!1))});let a=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];null!=i&&(0,tf.lu)(()=>{let e;let t=(0,tp.I)((0,tm.d)(this.m,a),i);e=this.useNesterov?(0,tp.I)((0,tm.d)(this.c,(0,tp.I)(i,(0,tm.d)(t,this.m))),r):(0,tp.I)((0,tm.d)(this.c,t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&(0,tf.B9)(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}tR.className="Momentum",e5(tR);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tD extends tx{constructor(e,t=.9,n=0,r=null,a=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=b.BV.backend.epsilon()),null==e)throw Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);t.forEach((t,n)=>{let r=b.BV.registeredVariables[t];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:(0,tf.lu)(()=>(0,tb.P)(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:(0,tf.lu)(()=>(0,tb.P)(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:(0,tf.lu)(()=>(0,tb.P)(r).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let i=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;(0,tf.lu)(()=>{let e=(0,tp.I)((0,tm.d)(i,this.decay),(0,tm.d)((0,ty.h)(a),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[n].variable,s=(0,tp.I)((0,tm.d)(t,this.decay),(0,tm.d)(a,1-this.decay)),u=(0,td.h)((0,tm.d)(a,this.learningRate),(0,tg._)((0,tE.l)(e,(0,tp.I)((0,ty.h)(s),this.epsilon)))),l=(0,tp.I)((0,tm.d)(o,this.momentum),u);i.assign(e),t.assign(s),o.assign(l);let c=(0,tE.l)(r,l);r.assign(c)}else{let e=(0,tp.I)((0,tm.d)(i,this.decay),(0,tm.d)((0,ty.h)(a),1-this.decay)),t=(0,tp.I)((0,tm.d)(o,this.momentum),(0,td.h)((0,tm.d)(a,this.learningRate),(0,tg._)((0,tp.I)(e,this.epsilon))));i.assign(e),o.assign(t);let n=(0,tE.l)(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&(0,tf.B9)(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&(0,tf.B9)(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&(0,tf.B9)(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}tD.className="RMSProp",e5(tD);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tP{static sgd(e){return new tO(e)}static momentum(e,t,n=!1){return new tR(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,a=!1){return new tD(e,t,n,r,a)}static adam(e=.001,t=.9,n=.999,r=null){return new tN(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new t_(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,a=0){return new tC(e,t,n,r,a)}static adagrad(e,t=.1){return new tS(e,t)}}var t$=n(1221),tF=n(5318),tM=n(9876);let tB={sgd:tP.sgd,momentum:tP.momentum,adadelta:tP.adadelta,adagrad:tP.adagrad,rmsprop:tP.rmsprop,adamax:tP.adamax,adam:tP.adam},tL="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function tU(){return new Promise(e=>tL(()=>e()))}var tj=n(3591);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tz(e,t){let n=e[0].length;e.forEach((e,t)=>{N.hu(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),N.hu(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((e,a)=>{for(let i=0;i<n;i++)N.hu(i===t||e[i]===r[i],()=>`Error in concat${n}D: Shape of tensors[${a}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${a}.`)})}function tW(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}var tV=n(2582),tG=n(9323);function tH(e,t,n){let r=[];if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let a=1;a<n.length;++a){let i=n[a],o=r[r.length-n.length+a],s=r[o];if(i>=0){if(s>=0){if(s!==i)throw Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${a+e}] = ${i} but shape[${a+e}] = ${s}`)}else r[o]=i}}return r}function tq(e){let t={FIRST_DIM_SIZE:s.FIRST_DIM_SIZE,VALUE_ROWIDS:s.VALUE_ROWIDS,ROW_LENGTHS:s.ROW_LENGTHS,ROW_SPLITS:s.ROW_SPLITS,ROW_LIMITS:s.ROW_LIMITS,ROW_STARTS:s.ROW_STARTS},n=[];for(let r of e)if(r in t)n.push(t[r]);else break;return n}function tX(e){return 0===e.length?0:e[0]===s.FIRST_DIM_SIZE?e.length-1:e.length}function tK(e,t){if(null==e||null==t)return;let n=e.length,r=t.length;if(n>=r)throw Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let a=0;a<Math.min(n,r-1);++a){let n=e[a],r=t[a+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${a-e.length}] = ${n} but ragged tensor input.flatValues.shape[${a-e.length}] = ${r}`)}}(o=s||(s={}))[o.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",o[o.VALUE_ROWIDS=1]="VALUE_ROWIDS",o[o.ROW_LENGTHS=2]="ROW_LENGTHS",o[o.ROW_SPLITS=3]="ROW_SPLITS",o[o.ROW_LIMITS=4]="ROW_LIMITS",o[o.ROW_STARTS=5]="ROW_STARTS";/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tZ=30;function tY(e){return e<=tZ?e:(0,N.jP)(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tQ(e,t,n){let r=n*("number"==typeof e?e:e[0]),a=t*("number"==typeof e?e:e[1]);return[r,a]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(e,t,n,r=!0){let a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);let n=t.length;for(let r=0;r<n;++r)a=a.concat([e[r+1]/t[r],t[r]]);a=a.concat(e.slice(n+1))}return a}function t0(e,t,n=!0){let r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{let n=[],a=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?a.push(r):n.push(r);r.push(...n),r.push(0),r.push(...a)}return r}function t1(e,t,n,r=!0){let a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?a.push(t[n-1]*e[n]):a.push(e[n]/t[n-1]):a.push(e[n]);return a}function t2(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function t3(e,t,n){let r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var t4=n(3179);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t6=.3275911,t5=.254829592,t8=-.284496736,t7=1.421413741,t9=-1.453152027,ne=1.061405429;var nt=n(4706);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nn(e,t){if(e.length!==t.length)throw Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function nr(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function na(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function ni(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function no(e,t){let n=e[2*t],r=e[2*t+1];return{real:n,imag:r}}function ns(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function nu(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function nl(e,t,n){let r=(n?2:-2)*Math.PI*(e/t),a=Math.cos(r),i=Math.sin(r);return{real:a,imag:i}}let nc=/->/g;function nh(e,t){e=e.replace(/\s/g,"");let n=(e.length-e.replace(nc,"").length)/2;if(n<1)throw Error("Equations without an arrow are not supported.");if(n>1)throw Error('Equation must contain exactly one arrow ("->").');let[r,a]=e.split("->");(0,N.hu)(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let i=r.split(","),o=i.length;if(t!==o)throw Error(`Expected ${o} input tensors, received ${t}`);if(o>2)throw Error("Support for more than 2 input tensors is not implemented yet.");let s=[];for(let e=0;e<a.length;++e){let t=a[e];if(!i.some(e=>-1!==e.indexOf(t)))throw Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<r.length;++e){let t=r[e];-1===s.indexOf(t)&&","!==t&&s.push(t)}let u=Array(i.length);for(let e=0;e<o;++e){if(new Set(i[e].split("")).size!==i[e].length)throw Error(`Found duplicate axes in input component ${i[e]}. Support for duplicate axes in input is not implemented yet.`);u[e]=[];for(let t=0;t<i[e].length;++t)u[e].push(s.indexOf(i[e][t]))}let l=s.length,c=a.length,h=[];for(let e=c;e<l;++e)h.push(e);return{allDims:s,summedDims:h,idDims:u}}function nf(e,t){let n=Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;let r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function np(e,t,n){let r=Array(e);for(let e=0;e<n.length;++e){let a=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=a[n]:(0,N.hu)(r[t[e][n]]===a[n],()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(a)}, but got dimension ${a[n]}`)}}function nd(e,t){let n=[],r=0;0===e.length&&e.push(-1),r=e.length+1;for(let e=0;e<r;++e)n.push([]);let a=[];for(let r=0;r<e.length;++r){let i=e[r],o=function(e,t){let n=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}(t,i);for(let e of o)-1===a.indexOf(e)&&(n[r].push(e),a.push(e))}return{path:e,steps:n}}function nm(e){return e.every((e,t)=>e===t)}function ng(e,t,n=0){let r=[];if("number"==typeof t)(0,N.hu)(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=Array(t).fill(e.shape[n]/t);else{let a=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);(0,N.hu)(a<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(-1!==i){let r=t.reduce((e,t)=>t>0?e+t:e);t[i]=e.shape[n]-r}(0,N.hu)(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ny(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function nb(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function nv(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nw(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function nx(e,t){return`size ${e} must be non-negative, not ${t}`}function n_(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function nk(e,t){let n=(0,N.NA)(e),r=(0,N.NA)(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function nS(e,t){let n=(0,N.NA)(e),r=(0,N.NA)(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nI(){return"segment ids must be >= 0"}function nE(){return"segment ids are not increasing"}function nN(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function nT(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nA(e,t){let n,r=!1;for(e<=tZ?(n=e,r=!0):n=(0,N.jP)(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=(0,N.jP)(e,n+1);return n}function nC(e,t,n){let r=[],a=e.length;for(let i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function nO(e,t,n,r){let a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw Error(`Expect batchDims in the range of [-${a}, ${a}], but got ${r}`);if(r<0&&(r+=a),r>i)throw Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);let o=e.shape[n],s=[],u=1,l=1,c=1;for(let t=0;t<r;++t)s.push(e.shape[t]),u*=e.shape[t];for(let t=r;t<n;t++)s.push(e.shape[t]),l*=e.shape[t];for(let e=r;e<a;e++)s.push(t.shape[e]);for(let t=n+1;t<i;t++)s.push(e.shape[t]),c*=e.shape[t];return{batchSize:u,sliceSize:c,outerSize:l,dimSize:o,outputShape:s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nR(e){try{return e.map(e=>(0,e7.decodeString)(e))}catch(e){throw Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function nD(e){return e.map(e=>(0,e7.encodeString)(e))}var nP=n(8329),n$=n(8333),nF=n(8713);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */},9121:function(e,t,n){"use strict";n.d(t,{$HU:function(){return ta},$g6:function(){return J},$w:function(){return X},Acj:function(){return eg},BMI:function(){return eB},BiW:function(){return tt},Byc:function(){return U},CAk:function(){return eI},D2d:function(){return tP},DlI:function(){return e9},Eh3:function(){return O},FKq:function(){return tI},G3Y:function(){return tq},GBy:function(){return tE},Gcp:function(){return tA},HEU:function(){return et},HZH:function(){return to},Hhh:function(){return eF},Hmb:function(){return tu},IKK:function(){return l},IMb:function(){return w},J$2:function(){return ek},J_u:function(){return ev},JhU:function(){return y},Kgp:function(){return e5},L8s:function(){return tT},Ly9:function(){return S},M2y:function(){return f},MIZ:function(){return tW},MRv:function(){return tS},MZg:function(){return eO},NEP:function(){return ea},NZg:function(){return eK},O3z:function(){return tC},OAf:function(){return ej},OR:function(){return ec},OU7:function(){return ez},OV7:function(){return eU},Omj:function(){return en},Oyi:function(){return m},PYm:function(){return eA},PhF:function(){return ty},QCc:function(){return g},QRR:function(){return W},Qg5:function(){return eb},QiL:function(){return e4},Qvg:function(){return tZ},RFZ:function(){return E},ROF:function(){return b},RQH:function(){return tw},RuY:function(){return tQ},SX0:function(){return ee},SYM:function(){return r},SbG:function(){return th},SpW:function(){return i},T0n:function(){return V},TQc:function(){return tN},TR1:function(){return L},ToN:function(){return tK},Tr8:function(){return tj},Uyb:function(){return el},VGw:function(){return a},Vbg:function(){return eX},VcC:function(){return z},VfG:function(){return eC},Vn9:function(){return Y},W0H:function(){return e1},XDQ:function(){return tY},XLW:function(){return x},XkS:function(){return tU},Xze:function(){return s},Y0y:function(){return eo},YFo:function(){return ei},YoZ:function(){return eM},ZbH:function(){return eN},ZjV:function(){return tD},Zz9:function(){return A},_JP:function(){return tB},_V0:function(){return t3},_Yw:function(){return tl},_k9:function(){return v},_tC:function(){return t$},a5O:function(){return tk},aJk:function(){return h},avt:function(){return ew},b9H:function(){return t1},bK0:function(){return tF},bV0:function(){return td},c17:function(){return eG},cWu:function(){return tG},cie:function(){return G},cye:function(){return e0},dDz:function(){return te},deh:function(){return eu},dpD:function(){return ts},e07:function(){return tp},e6w:function(){return tn},e7N:function(){return eE},eBW:function(){return t0},eEB:function(){return I},eZ0:function(){return e$},ekb:function(){return Z},gJX:function(){return N},h8e:function(){return tJ},hdR:function(){return er},i5y:function(){return t_},iHb:function(){return j},iJz:function(){return ey},iWB:function(){return ex},iZT:function(){return em},ik2:function(){return M},jMg:function(){return d},jQk:function(){return tM},jQs:function(){return eq},jeX:function(){return eh},kU:function(){return eT},kpP:function(){return tX},kuV:function(){return eY},luS:function(){return t4},lyA:function(){return e6},mKl:function(){return tf},mTV:function(){return eL},mc4:function(){return B},mhS:function(){return R},mm_:function(){return o},n9L:function(){return tV},nhH:function(){return tO},nr8:function(){return tg},o0g:function(){return e7},o2y:function(){return F},oFR:function(){return tb},oHH:function(){return Q},oT6:function(){return u},p2w:function(){return tv},p4S:function(){return K},pe_:function(){return e8},q1x:function(){return ed},q2K:function(){return eV},q8u:function(){return eH},qCd:function(){return eD},qIC:function(){return eP},qWM:function(){return e2},qi_:function(){return ep},qkr:function(){return ti},qw7:function(){return p},r7n:function(){return e_},s1s:function(){return tL},sEM:function(){return tz},sHE:function(){return ef},sJF:function(){return c},sL$:function(){return H},usg:function(){return t2},uv1:function(){return eJ},vFR:function(){return eW},vtC:function(){return eS},vwp:function(){return es},w3H:function(){return tR},w6g:function(){return eR},wUP:function(){return D},wYB:function(){return tx},wYn:function(){return eZ},we_:function(){return e3},wm:function(){return P},wx7:function(){return tH},x12:function(){return $},xJR:function(){return tr},xQA:function(){return tm},xnO:function(){return T},y7R:function(){return q},yQU:function(){return eQ},yj2:function(){return C},zbQ:function(){return tc},zvY:function(){return k},zws:function(){return _}});let r="Abs",a="Acos",i="Acosh",o="Add",s="AddN",u="All",l="Any",c="ArgMax",h="ArgMin",f="Asin",p="Asinh",d="Atan",m="Atanh",g="Atan2",y="AvgPool",b="AvgPoolGrad",v="AvgPool3D",w="AvgPool3DGrad",x="BatchMatMul",_="BatchToSpaceND",k="Bincount",S="BroadcastTo",I="BroadcastArgs",E="Cast",N="Ceil",T="ClipByValue",A="Complex",C="ComplexAbs",O="Concat",R="Conv2D",D="Conv2DBackpropFilter",P="Conv2DBackpropInput",$="Conv3D",F="Conv3DBackpropFilterV2",M="Conv3DBackpropInputV2",B="Cos",L="Cosh",U="Cumprod",j="Cumsum",z="CropAndResize",W="DenseBincount",V="DepthToSpace",G="DepthwiseConv2dNative",H="DepthwiseConv2dNativeBackpropFilter",q="DepthwiseConv2dNativeBackpropInput",X="Diag",K="Dilation2D",Z="Dilation2DBackpropInput",Y="Dilation2DBackpropFilter",Q="RealDiv",J="Einsum",ee="Elu",et="EluGrad",en="Erf",er="Equal",ea="Exp",ei="ExpandDims",eo="Expm1",es="FFT",eu="Fill",el="FlipLeftRight",ec="Floor",eh="FloorDiv",ef="FusedBatchNorm",ep="GatherV2",ed="GatherNd",em="Greater",eg="GreaterEqual",ey="Identity",eb="IFFT",ev="Imag",ew="IsFinite",ex="IsInf",e_="IsNan",ek="LeakyRelu",eS="Less",eI="LessEqual",eE="LinSpace",eN="Log",eT="Log1p",eA="LogicalAnd",eC="LogicalNot",eO="LogicalOr",eR="LogicalXor",eD="LogSoftmax",eP="LowerBound",e$="LRN",eF="LRNGrad",eM="Max",eB="Maximum",eL="MaxPool",eU="MaxPoolGrad",ej="MaxPool3D",ez="MaxPool3DGrad",eW="MaxPoolWithArgmax",eV="Mean",eG="Min",eH="Minimum",eq="MirrorPad",eX="Mod",eK="Multinomial",eZ="Multiply",eY="Neg",eQ="NotEqual",eJ="NonMaxSuppressionV3",e0="NonMaxSuppressionV4",e1="NonMaxSuppressionV5",e2="OnesLike",e3="OneHot",e4="Pack",e6="PadV2",e5="Pool",e8="Pow",e7="Prelu",e9="Prod",te="RaggedGather",tt="RaggedTensorToTensor",tn="Range",tr="Real",ta="Reciprocal",ti="Relu",to="Reshape",ts="ResizeNearestNeighbor",tu="ResizeNearestNeighborGrad",tl="ResizeBilinear",tc="ResizeBilinearGrad",th="Relu6",tf="Reverse",tp="Round",td="Rsqrt",tm="ScatterNd",tg="SearchSorted",ty="Select",tb="Selu",tv="Slice",tw="Sin",tx="Sinh",t_="Sign",tk="Sigmoid",tS="Softplus",tI="Sqrt",tE="Sum",tN="SpaceToBatchND",tT="SplitV",tA="Softmax",tC="SparseFillEmptyRows",tO="SparseReshape",tR="SparseSegmentMean",tD="SparseSegmentSum",tP="SparseToDense",t$="SquaredDifference",tF="Square",tM="StridedSlice",tB="StringNGrams",tL="StringSplit",tU="StringToHashBucketFast",tj="Sub",tz="Tan",tW="Tanh",tV="Tile",tG="TopK",tH="Transform",tq="Transpose",tX="Unique",tK="Unpack",tZ="UnsortedSegmentSum",tY="UpperBound",tQ="ZerosLike",tJ="Step",t0="FromPixels",t1="RotateWithOffset",t2="_FusedMatMul",t3="FusedConv2D",t4="FusedDepthwiseConv2D"},6151:function(e,t,n){"use strict";n.d(t,{Li:function(){return f},T3:function(){return m},bt:function(){return d},nE:function(){return p},pI:function(){return u},tr:function(){return c},uk:function(){return l},wC:function(){return h}});var r=n(2885),a=n(5938),i=n(4706);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o=(0,a.R)("kernelRegistry",()=>new Map),s=(0,a.R)("gradRegistry",()=>new Map);function u(e,t){let n=g(e,t);return o.get(n)}function l(e){return s.get(e)}function c(e){let t=o.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[i,o]=a,[s]=i.split("_");s===e&&n.push(o)}return n}function h(e){let{kernelName:t,backendName:n}=e,r=g(t,n);o.has(r)&&i.Z(`The kernel '${t}' for backend '${n}' is already registered`),o.set(r,e)}function f(e){let{kernelName:t}=e;s.has(t)&&(0,r.OB)().getBool("DEBUG")&&i.Z(`Overriding the gradient for '${t}'`),s.set(t,e)}function p(e,t){let n=g(e,t);if(!o.has(n))throw Error(`The kernel '${e}' for backend '${t}' is not registered`);o.delete(n)}function d(e){if(!s.has(e))throw Error(`The gradient '${e}' for backend is not registered`);s.delete(e)}function m(e,t){let n=c(e);n.forEach(e=>{let n=Object.assign({},e,{backendName:t});h(n)})}function g(e,t){return`${t}_${e}`}},4706:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},c:function(){return i}});var r=n(2885);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(...e){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.warn(...e)}function i(...e){(0,r.OB)().getBool("IS_TEST")||(0,r.OB)().getBool("PROD")||console.log(...e)}},6235:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({abs_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","abs");return"complex64"===t.dtype?r.BV.runKernel(a.yj2,{x:t}):r.BV.runKernel(a.SYM,{x:t})}})},7839:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({acos_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","acos");return r.BV.runKernel(a.VGw,{x:t})}})},1470:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({acosh_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","acosh");return r.BV.runKernel(a.SpW,{x:t})}})},6407:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({add_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","add"),s=(0,o._1)(t,"b","add");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.mm_,u)}})},781:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({all_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let o=(0,i._1)(e,"x","all","bool");return r.BV.runKernel(a.oT6,{x:o},{axis:t,keepDims:n})}})},2998:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({any_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let o=(0,i._1)(e,"x","any","bool");return r.BV.runKernel(a.IKK,{x:o},{axis:t,keepDims:n})}})},47:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({argMax_:/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i._1)(e,"x","argMax");return r.BV.runKernel(a.sJF,{x:n},{axis:t})}})},7394:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({argMin_:/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i._1)(e,"x","argMin");return r.BV.runKernel(a.aJk,{x:n},{axis:t})}})},2421:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({asin_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","asin");return r.BV.runKernel(a.M2y,{x:t})}})},1891:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({asinh_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","asinh");return r.BV.runKernel(a.qw7,{x:t})}})},7037:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({atan_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","atan");return r.BV.runKernel(a.jMg,{x:t})}})},9812:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({atan2_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","atan2"),s=(0,o._1)(t,"b","atan2");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.QCc,u)}})},369:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({atanh_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","atanh");return r.BV.runKernel(a.Oyi,{x:t})}})},5176:function(e,t,n){"use strict";n.d(t,{w:function(){return h}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2271),u=n(2582),l=n(2668),c=n(4968);let h=(0,l.op)({avgPool_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,l,h){let f=(0,i._1)(e,"x","avgPool","float32");o.hu(u.jT(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let p=f,d=!1;3===f.rank&&(d=!0,p=(0,c.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),o.hu(4===p.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${p.rank}.`),u.m("avgPool",l,h);let m={x:p},g=r.BV.runKernel(a.JhU,m,{filterSize:t,strides:n,pad:l,dimRoundingMode:h});return(g=(0,s.p)(g,f.dtype),d)?(0,c.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},3591:function(e,t,n){"use strict";n.d(t,{LJ:function(){return c},Q3:function(){return l},Vh:function(){return i},YB:function(){return a},kz:function(){return o},lB:function(){return u},rv:function(){return s},sY:function(){return h}});var r=n(569);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function i(e,t,n){let r=e.length+t.length,a=[],i=0,o=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function o(e,t){let n=[],r=e.length;for(let a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);let a=t.map(t=>e[t]);return[n,a]}function s(e,t){let n=t.map(e=>1);return i(e,n,t)}function u(e,t,n){r.hu(a(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function l(e,t){if(a(e,t))return null;let n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function c(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function h(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}},8441:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({batchToSpaceND_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let s=(0,i._1)(e,"x","batchToSpaceND"),u=t.reduce((e,t)=>e*t);return o.hu(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),o.hu(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),o.hu(s.shape[0]%u==0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${u}`),r.BV.runKernel(a.zws,{x:s},{blockShape:t,crops:n})}})},94:function(e,t,n){"use strict";n.d(t,{t:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(4968),u=n(2668);let l=(0,u.op)({batchNorm_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,u,l,c){let h,f;null==c&&(c=.001);let p=(0,i._1)(e,"x","batchNorm"),d=(0,i._1)(t,"mean","batchNorm"),m=(0,i._1)(n,"variance","batchNorm");null!=l&&(h=(0,i._1)(l,"scale","batchNorm")),null!=u&&(f=(0,i._1)(u,"offset","batchNorm")),o.hu(d.rank===m.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),o.hu(null==f||d.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),o.hu(null==h||d.rank===h.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let g=0===p.rank||1===p.rank?(0,s.X)(p,[1,1,1,p.size]):2===p.rank?(0,s.X)(p,[1,1,p.shape[0],p.shape[1]]):3===p.rank?(0,s.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]]):p,y={x:g,scale:h,offset:f,mean:d,variance:m},b={varianceEpsilon:c},v=r.BV.runKernel(a.sHE,y,b);return(0,s.X)(v,p.shape)}})},8247:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(8723),s=n(2668),u=n(4968);let l=(0,s.op)({broadcastTo_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"broadcastTo","x"),s=n.shape;if(t.some(e=>!(e>0)||e%1!=0))throw Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=(0,u.X)(n,e)}let l=n.shape,c=Array.from(t);for(let e=t.length-1;e>=0;e--)if(l[e]===t[e])c[e]=1;else if(1!==n.shape[e])throw Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);let h=c.map((e,t)=>e>1?t:-1).filter(e=>e>=0);if(0===h.length)return(0,o.d)(n);let f={x:n};return r.BV.runKernel(a.n9L,f,{reps:c})}})},2200:function(e,t,n){"use strict";/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r(e,t){let n=e.length,r=[];for(let a=0;a<n;a++){let i=n-1-a,o=e[i]||1,s=t[t.length-1-a]||1;s>1&&1===o&&r.unshift(i)}return r}function a(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function i(e,t){let n=[],r=Math.max(e.length,t.length);for(let a=0;a<r;a++){let r=e[e.length-a-1];null==r&&(r=1);let i=t[t.length-a-1];if(null==i&&(i=1),1===r)n.unshift(i);else if(1===i)n.unshift(r);else if(r!==i){let n=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(n)}else n.unshift(r)}return n}n.r(t),n.d(t,{assertAndGetBroadcastShape:function(){return i},getBroadcastDims:function(){return r},getReductionAxes:function(){return a}})},2657:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var r=n(974),a=n(569);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(e,t="float32",n){return t=t||"float32",a.Mu(e),new r.YD(e,t,n)}},2271:function(e,t,n){"use strict";n.d(t,{p:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({cast_:/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"x","cast");if(!o.LP(t))throw Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw Error("Only strings can be casted to strings");return r.BV.runKernel(a.RFZ,{x:n},{dtype:t})}})},6825:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({ceil_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","ceil","float32");return r.BV.runKernel(a.gJX,{x:t})}})},2279:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(4006),u=n(2668);let l=(0,u.op)({clipByValue_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let u=(0,i._1)(e,"x","clipByValue");return(o.hu(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)?(0,s.h)(u.shape,t,u.dtype):r.BV.runKernel(a.xnO,{x:u},{clipValueMin:t,clipValueMax:n})}})},8723:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({clone_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","clone","string_or_numeric");return r.BV.runKernel(a.iJz,{x:t})}})},1661:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({complex_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"real","complex"),s=(0,i._1)(t,"imag","complex");return o.k5(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`),r.BV.runKernel(a.Zz9,{real:n,imag:s})}})},6884:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(8723),u=n(2668);let l=(0,u.op)({concat_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){(0,o.hu)(e.length>=1,()=>"Pass at least one tensor to concat");let n=(0,i.sI)(e,"tensors","concat","string_or_numeric");return("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${e.dtype}. `)}),1===n.length)?(0,s.d)(n[0]):r.BV.runKernel(a.Eh3,n,{axis:t})}})},1355:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var r=n(3740),a=n(569),i=n(4794),o=n(2582),s=n(2668),u=n(4968);let l=(0,s.op)({conv1d_:function(e,t,n,s,l="NWC",c=1,h){let f=(0,r._1)(e,"x","conv1d"),p=(0,r._1)(t,"filter","conv1d"),d=f,m=!1;2===f.rank&&(m=!0,d=(0,u.X)(f,[1,f.shape[0],f.shape[1]])),a.hu(3===d.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${d.rank}.`),a.hu(3===p.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${p.rank}.`),o.m("conv1d",s,h),a.hu(d.shape[2]===p.shape[1],()=>`Error in conv1d: depth of input (${d.shape[2]}) must match input depth for filter ${p.shape[1]}.`),a.hu(o.jT(n,c),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${c}'`),a.hu("NWC"===l,()=>`Error in conv1d: got dataFormat of ${l} but only NWC is currently supported.`);let g=(0,u.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]]),y=(0,u.X)(d,[d.shape[0],1,d.shape[1],d.shape[2]]),b=(0,i.T)(y,g,[1,n],s,"NHWC",[1,c],h);return m?(0,u.X)(b,[b.shape[2],b.shape[3]]):(0,u.X)(b,[b.shape[0],b.shape[2],b.shape[3]])}})},4794:function(e,t,n){"use strict";n.d(t,{T:function(){return c}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2582),u=n(2668),l=n(4968);let c=(0,u.op)({conv2d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,u,c="NHWC",h=[1,1],f){let p=(0,i._1)(e,"x","conv2d","float32"),d=(0,i._1)(t,"filter","conv2d","float32"),m=p,g=!1;3===p.rank&&(g=!0,m=(0,l.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.hu(4===m.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${m.rank}.`),o.hu(4===d.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${d.rank}.`),s.m("conv2d",u,f);let y="NHWC"===c?m.shape[3]:m.shape[1];o.hu(y===d.shape[2],()=>`Error in conv2d: depth of input (${y}) must match input depth for filter ${d.shape[2]}.`),o.hu(s.jT(n,h),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${h}'`);let b={x:m,filter:d},v=r.BV.runKernel(a.mhS,b,{strides:n,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f});return g?(0,l.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},6013:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(196),a=n(9121),i=n(569),o=n(2582),s=n(2668),u=n(4968);let l=(0,s.op)({conv2DBackpropFilter_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,s,l,c="NHWC",h){let f=e;3===e.rank&&(f=(0,u.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let p=t;3===p.rank&&(p=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]])),i.hu(4===f.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${f.shape}.`),i.hu(4===p.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${p.shape}.`),i.hu(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let d="NHWC"===c?f.shape[3]:f.shape[1],m="NHWC"===c?p.shape[3]:p.shape[1];i.hu(d===n[2],()=>`Error in conv2dDerFilter: depth of input ${d}) must match input depth in filter (${n[2]}.`),i.hu(m===n[3],()=>`Error in conv2dDerFilter: depth of dy (${m}) must match output depth for filter (${n[3]}).`),o.m("conv2dDerFilter",l,h);let g={x:f,dy:p};return r.BV.runKernel(a.wUP,g,{strides:s,pad:l,dataFormat:c,dimRoundingMode:h,filterShape:n})}})},9832:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(196),a=n(9121),i=n(569),o=n(2582),s=n(2668),u=n(4968);let l=(0,s.op)({conv2DBackpropInput_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,s,l,c="NHWC",h){i.hu(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let f=e,p=t,d=!1;3===t.rank&&(d=!0,p=(0,u.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]),f=[1,e[0],e[1],e[2]]),i.hu(4===f.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${f.length}.`),i.hu(4===p.rank,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${p.rank}`),i.hu(4===n.rank,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);let m="NHWC"===c?f[3]:f[1],g="NHWC"===c?p.shape[3]:p.shape[1];i.hu(m===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${m}) must match input depth for filter ${n.shape[2]}.`),i.hu(g===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${g}) must match output depth for filter ${n.shape[3]}.`),o.m("conv2dDerInput",l,h);let y={dy:p,filter:n},b={strides:s,pad:l,dataFormat:c,dimRoundingMode:h,inputShape:f},v=r.BV.runKernel(a.wm,y,b);return d?(0,u.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},1405:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(3740),a=n(9832),i=n(2668);let o=(0,i.op)({conv2dTranspose_:function(e,t,n,i,o,s){let u=(0,r._1)(e,"x","conv2dTranspose"),l=(0,r._1)(t,"filter","conv2dTranspose");return(0,a._)(n,u,l,i,o,"NHWC",s)}})},7594:function(e,t,n){"use strict";n.d(t,{_:function(){return u}});var r=n(196),a=n(9121),i=n(569),o=n(2668),s=n(4968);let u=(0,o.op)({conv3DBackpropInput_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,o,u){i.hu(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let l=e,c=t,h=!1;4===t.rank&&(h=!0,c=(0,s.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),l=[1,e[0],e[1],e[2],e[3]]);let f=l[4],p=c.shape[4];i.hu(5===l.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${l.length}.`),i.hu(5===c.rank,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${c.rank}`),i.hu(5===n.rank,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),i.hu(f===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[3]}.`),i.hu(p===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[4]}.`);let d={dy:c,filter:n},m={pad:u,strides:o,inputShape:l},g=r.BV.runKernel(a.ik2,d,m);return h?(0,s.X)(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}})},2582:function(e,t,n){"use strict";n.d(t,{I0:function(){return d},Ix:function(){return s},Rf:function(){return a},Xw:function(){return i},aO:function(){return l},jT:function(){return m},jw:function(){return u},m:function(){return y},pl:function(){return o},sl:function(){return g}});var r=n(569);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a(e,t,n,r,a="NHWC",i){let o=e[3],u=[...t,o],l=g(a);return s(e,u,n,i,r,null,null,l)}function i(e,t,n,r,a,i,o="channelsLast"){let u;let[l,h]=c(t);if("channelsLast"===o)u=[l,h,e[3],e[3]];else if("channelsFirst"===o)u=[l,h,e[1],e[1]];else throw Error(`Unknown dataFormat ${o}`);return s(e,u,n,r,a,i,!1,o)}function o(e,t,n,r,a,i,o="NDHWC"){let s,l;let[c,f,p]=h(t);if("NDHWC"===o)l="channelsLast",s=[c,f,p,e[4],e[4]];else if("NCDHW"===o)l="channelsFirst",s=[c,f,p,e[1],e[1]];else throw Error(`Unknown dataFormat ${o}`);return u(e,s,n,r,a,!1,l,i)}function s(e,t,n,r,a,i,o=!1,s="channelsLast"){let u,[h,d,m,g]=[-1,-1,-1,-1];if("channelsLast"===s)[h,d,m,g]=e;else if("channelsFirst"===s)[h,g,d,m]=e;else throw Error(`Unknown dataFormat ${s}`);let[y,b,,v]=t,[w,x]=c(n),[_,k]=c(r),S=f(y,_),I=f(b,k),{padInfo:E,outHeight:N,outWidth:T}=function(e,t,n,r,a,i,o,s,u){let c,h,f;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};let a=function(e,t,n,r,a){null==r&&(r=l(e,t,n));let i=e[0],o=e[1],s=p((i-t+2*r)/n+1,a),u=p((o-t+2*r)/n+1,a);return[s,u]}([t,n],i,r,e,s);h=a[0],f=a[1]}else if("same"===e){h=Math.ceil(t/r),f=Math.ceil(n/a);let e=Math.max(0,(h-1)*r+i-t),s=Math.max(0,(f-1)*a+o-n),u=Math.floor(e/2),l=Math.floor(s/2);c={top:u,bottom:e-u,left:l,right:s-l,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},h=Math.ceil((t-i+1)/r),f=Math.ceil((n-o+1)/a);else if("object"==typeof e){let l="channelsLast"===u?e[1][0]:e[2][0],d="channelsLast"===u?e[1][1]:e[2][1],m="channelsLast"===u?e[2][0]:e[3][0],g="channelsLast"===u?e[2][1]:e[3][1];c={top:l,bottom:d,left:m,right:g,type:0===l&&0===d&&0===m&&0===g?"VALID":"EXPLICIT"},h=p((t-i+l+d)/r+1,s),f=p((n-o+m+g)/a+1,s)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:h,outWidth:f}}(a,d,m,w,x,S,I,i,s),A=o?v*g:v;return"channelsFirst"===s?u=[h,A,N,T]:"channelsLast"===s&&(u=[h,N,T,A]),{batchSize:h,dataFormat:s,inHeight:d,inWidth:m,inChannels:g,outHeight:N,outWidth:T,outChannels:A,padInfo:E,strideHeight:w,strideWidth:x,filterHeight:y,filterWidth:b,effectiveFilterHeight:S,effectiveFilterWidth:I,dilationHeight:_,dilationWidth:k,inShape:e,outShape:u,filterShape:t}}function u(e,t,n,r,a,i=!1,o="channelsLast",s){let u,[c,d,m,g,y]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[c,d,m,g,y]=e;else if("channelsFirst"===o)[c,y,d,m,g]=e;else throw Error(`Unknown dataFormat ${o}`);let[b,v,w,,x]=t,[_,k,S]=h(n),[I,E,N]=h(r),T=f(b,I),A=f(v,E),C=f(w,N),{padInfo:O,outDepth:R,outHeight:D,outWidth:P}=function(e,t,n,r,a,i,o,s,u,c,h){let f,d,m,g;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};let i=function(e,t,n,r,a,i){null==a&&(a=l(e,t,r));let o=e[0],s=e[1],u=e[2],c=p((o-t+2*a)/r+1,i),h=p((s-t+2*a)/r+1,i),f=p((u-t+2*a)/r+1,i);return[c,h,f,1]}([t,n,r,1],s,0,a,e,h);d=i[0],m=i[1],g=i[2]}else if("same"===e){d=Math.ceil(t/a),m=Math.ceil(n/i),g=Math.ceil(r/o);let e=(d-1)*a+s-t,l=(m-1)*i+u-n,h=(g-1)*o+c-r,p=Math.floor(e/2),y=Math.floor(l/2),b=Math.floor(h/2);f={top:y,bottom:l-y,left:b,right:h-b,front:p,back:e-p,type:"SAME"}}else if("valid"===e)f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-s+1)/a),m=Math.ceil((n-u+1)/i),g=Math.ceil((r-c+1)/o);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:f,outDepth:d,outHeight:m,outWidth:g}}(a,d,m,g,_,k,S,T,A,C,s),$=i?x*y:x;return"channelsFirst"===o?u=[c,$,R,D,P]:"channelsLast"===o&&(u=[c,R,D,P,$]),{batchSize:c,dataFormat:o,inDepth:d,inHeight:m,inWidth:g,inChannels:y,outDepth:R,outHeight:D,outWidth:P,outChannels:$,padInfo:O,strideDepth:_,strideHeight:k,strideWidth:S,filterDepth:b,filterHeight:v,filterWidth:w,effectiveFilterDepth:T,effectiveFilterHeight:A,effectiveFilterWidth:C,dilationDepth:I,dilationHeight:E,dilationWidth:N,inShape:e,outShape:u,filterShape:t}}function l(e,t,n,r=1){let a=f(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function c(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function h(e){return"number"==typeof e?[e,e,e]:e}function f(e,t){return t<=1?e:e+(e-1)*(t-1)}function p(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw Error(`Unknown roundingMode ${t}`)}}function d(e){let[t,n,r]=c(e);return 1===t&&1===n&&1===r}function m(e,t){return d(e)||d(t)}function g(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw Error(`Unknown dataFormat ${e}`)}function y(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)r.hu(r.GN(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if("object"==typeof t)t.forEach(t=>{t.forEach(t=>{r.hu(r.GN(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}},173:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({cos_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","cos","float32");return r.BV.runKernel(a.mc4,{x:t})}})},2699:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({cosh_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","cosh","float32");return r.BV.runKernel(a.TR1,{x:t})}})},9640:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({cumprod_:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0,n=!1,o=!1){let s=(0,i._1)(e,"x","cumprod");return r.BV.runKernel(a.Byc,{x:s},{axis:t,exclusive:n,reverse:o})}})},7405:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({cumsum_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0,n=!1,o=!1){let s=(0,i._1)(e,"x","cumsum");return r.BV.runKernel(a.iHb,{x:s},{axis:t,exclusive:n,reverse:o})}})},9112:function(e,t,n){"use strict";n.d(t,{n:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({depthToSpace_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n="NHWC"){let s=(0,i._1)(e,"x","depthToSpace","float32"),u="NHWC"===n?s.shape[1]:s.shape[2],l="NHWC"===n?s.shape[2]:s.shape[3],c="NHWC"===n?s.shape[3]:s.shape[1];return o.hu(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),o.hu(u*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${u} and ${t}  for depthToSpace with input shape
    ${s.shape}`),o.hu(l*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${l} and ${t} for depthToSpace with input shape
        ${s.shape}`),o.hu(c%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${c} for depthToSpace with input shape ${s.shape}`),r.BV.runKernel(a.T0n,{x:s},{blockSize:t,dataFormat:n})}})},4718:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2582),u=n(2668),l=n(4968);let c=(0,u.op)({depthwiseConv2d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,u,c="NHWC",h=[1,1],f){let p=(0,i._1)(e,"x","depthwiseConv2d","float32"),d=(0,i._1)(t,"filter","depthwiseConv2d","float32"),m=p,g=!1;3===p.rank&&(g=!0,m=(0,l.X)(p,[1,p.shape[0],p.shape[1],p.shape[2]])),o.hu(4===m.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),o.hu(4===d.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`);let y="NHWC"===c?m.shape[3]:m.shape[1];o.hu(y===d.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${y}) must match the inChannels dimension in filter ${d.shape[2]}.`),s.m("depthwiseConv2d",u,f);let b={x:m,filter:d},v=r.BV.runKernel(a.cie,b,{strides:n,pad:u,dataFormat:c,dilations:h,dimRoundingMode:f});return g?(0,l.X)(v,[v.shape[1],v.shape[2],v.shape[3]]):v}})},8098:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var r=n(196),a=n(9121),i=n(2668),o=n(4968);let s=(0,i.op)({depthwiseConv2dNativeBackpropFilter_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,i,s,u=[1,1],l){let c=e;3===e.rank&&(c=(0,o.X)(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let h=t;3===h.rank&&(h=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let f={x:c,dy:h};return r.BV.runKernel(a.sL$,f,{strides:i,pad:s,dimRoundingMode:l,dilations:u,filterShape:n})}})},4375:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(196),a=n(9121),i=n(2668),o=n(4968);let s=(0,i.op)({depthwiseConv2dNativeBackpropInput_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,i,s,u=[1,1],l){let c=t,h=!1;3===t.rank&&(h=!0,c=(0,o.X)(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let f={dy:c,filter:n},p=r.BV.runKernel(a.y7R,f,{strides:i,pad:s,dimRoundingMode:l,dilations:u,inputShape:e});return h?(0,o.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},557:function(e,t,n){"use strict";n.d(t,{W:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668),u=n(4968);let l=(0,s.op)({dilation2d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,s,l=[1,1],c="NHWC"){let h=(0,i._1)(e,"x","dilation2d"),f=(0,i._1)(t,"filter","dilation2d");o.hu(3===h.rank||4===h.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${h.rank}.`),o.hu(3===f.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${f.rank}.`),o.hu("NHWC"===c,()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${c}`);let p=h,d=!1;3===h.rank&&(p=(0,u.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]]),d=!0);let m={x:p,filter:f},g=r.BV.runKernel(a.p4S,m,{strides:n,pad:s,dilations:l});return d?(0,u.X)(g,[g.shape[1],g.shape[2],g.shape[3]]):g}})},1274:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(9165),u=n(2668);let l=(0,u.op)({div_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","div"),u=(0,o._1)(t,"b","div");if([n,u]=(0,i.makeTypesMatch)(n,u),"int32"===n.dtype&&"int32"===u.dtype)return(0,s.q)(n,u);let l={a:n,b:u};return r.BV.runKernel(a.oHH,l,{})}})},9322:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var r=n(747),a=n(3740),i=n(1274),o=n(6477),s=n(2668),u=n(5912),l=n(6577);let c=(0,s.op)({divNoNan_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,a._1)(e,"a","div"),s=(0,a._1)(t,"b","div");[n,s]=(0,r.makeTypesMatch)(n,s);let c=(0,i.h)(n,s),h=(0,l.P)(c),f=(0,o.D)(s,h);return(0,u.a)(f,h,c)}})},548:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(3740),a=n(569),i=n(8687),o=n(2668),s=n(4968);let u=(0,o.op)({dot_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,r._1)(e,"t1","dot"),o=(0,r._1)(t,"t2","dot");a.hu((1===n.rank||2===n.rank)&&(1===o.rank||2===o.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${o.rank}.`);let u=1===n.rank?n.size:n.shape[1],l=1===o.rank?o.size:o.shape[0];if(a.hu(u===l,()=>`Error in dot: inner dimensions of inputs must match, but got ${u} and ${l}.`),1===n.rank&&1===o.rank){let e=(0,s.X)(n,[1,-1]),t=(0,s.X)(o,[-1,1]),r=(0,i.O)(e,t);return(0,s.X)(r,[])}if(1===n.rank&&2===o.rank){let e=(0,s.X)(n,[1,-1]),t=(0,s.X)(o,[o.shape[0],o.shape[1]]),r=(0,i.O)(e,t);return(0,s.X)(r,[r.size])}if(2===n.rank&&1===o.rank){let e=(0,s.X)(o,[-1,1]),t=(0,i.O)(n,e);return(0,s.X)(t,[t.size])}{let e=(0,s.X)(o,[o.shape[0],o.shape[1]]),t=(0,i.O)(n,e);return t}}})},3233:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({elu_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","elu","float32");return r.BV.runKernel(a.SX0,{x:t})}})},6477:function(e,t,n){"use strict";n.d(t,{D:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({equal_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","equal","string_or_numeric"),u=(0,o._1)(t,"b","equal","string_or_numeric");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a.hdR,l)}})},4650:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2271),u=n(2668);let l=(0,u.op)({erf_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","erf");o.hu("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=(0,s.p)(t,"float32"));let n={x:t};return r.BV.runKernel(a.Omj,n)}})},1954:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(3561),a=n(2668);let i=(0,a.op)({euclideanNorm_:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){return(0,r.K)(e,"euclidean",t,n)}})},4842:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({exp_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","exp");return r.BV.runKernel(a.NEP,{x:t})}})},1300:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({expandDims_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i._1)(e,"x","expandDims","string_or_numeric");return o.hu(t<=n.rank,()=>"Axis must be <= rank of the tensor"),r.BV.runKernel(a.YFo,{input:n},{dim:t})}})},3426:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({expm1_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","expm1");return r.BV.runKernel(a.Y0y,{x:t})}})},4006:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(196),a=n(9121);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(e,t,n){return r.BV.runKernel(a.deh,{},{shape:e,value:t,dtype:n})}},6943:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({floor_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","floor","float32");return r.BV.runKernel(a.OR,{x:t})}})},9165:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({floorDiv_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","floorDiv"),s=(0,o._1)(t,"b","floorDiv");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.jeX,u)}})},9323:function(e,t,n){"use strict";n.d(t,{Fr:function(){return d},QH:function(){return g},pf:function(){return m},uy:function(){return y}});var r=n(2200),a=n(3233),i=n(9133),o=n(4841),s=n(8151),u=n(7409),l=n(3582),c=n(4968),h=n(625),f=n(1901),p=n(5475);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return(0,o.d)(e,(0,f.N)(t));throw Error(`Cannot compute gradient for fused activation ${n}.`)}function m(e,t){let n=t,a=r.getReductionAxes(e.shape,t.shape);return a.length>0&&(n=(0,p.S)(n,a)),(0,c.X)(n,e.shape)}function g(e,t,n,r){if("linear"===t)return e;if("relu"===t)return(0,u.U)(e);if("elu"===t)return(0,a.p)(e);if("relu6"===t)return(0,l.b)(e);if("prelu"===t)return(0,s.A)(e,n);if("leakyrelu"===t)return(0,i.h)(e,r);if("sigmoid"===t)return(0,h.X)(e);throw Error(`Unknown fused activation ${t}.`)}let y=(e,t)=>!(e>0)||"linear"===t},4926:function(e,t,n){"use strict";n.d(t,{I:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({gather_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=0,o=0){let s=(0,i._1)(e,"x","gather"),u=(0,i._1)(t,"indices","gather","int32");return r.BV.runKernel(a.qi_,{x:s,indices:u},{axis:n,batchDims:o})}})},636:function(e,t,n){"use strict";n.d(t,{p:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({greater_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","greater","string_or_numeric"),u=(0,o._1)(t,"b","greater","string_or_numeric");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a.iZT,l)}})},7630:function(e,t,n){"use strict";n.d(t,{b:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({greaterEqual_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","greaterEqual","string_or_numeric"),u=(0,o._1)(t,"b","greaterEqual","string_or_numeric");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a.Acj,l)}})},4386:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({imag_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"input","imag");return r.BV.runKernel(a.J_u,{input:t})}})},3305:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668),u=n(4968);let l=(0,s.op)({resizeBilinear_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=!1,s=!1){let l=(0,i._1)(e,"images","resizeBilinear");o.hu(3===l.rank||4===l.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${l.rank}.`),o.hu(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),o.hu(!1===s||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let c=l,h=!1;3===l.rank&&(h=!0,c=(0,u.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));let[]=t,f={images:c},p=r.BV.runKernel(a._Yw,f,{alignCorners:n,halfPixelCenters:s,size:t});return h?(0,u.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},5098:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668),u=n(4968);let l=(0,s.op)({resizeNearestNeighbor_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=!1,s=!1){let l=(0,i._1)(e,"images","resizeNearestNeighbor");o.hu(3===l.rank||4===l.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${l.rank}.`),o.hu(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),o.hu("float32"===l.dtype||"int32"===l.dtype,()=>"`images` must have `int32` or `float32` as dtype"),o.hu(!1===s||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let c=l,h=!1;3===l.rank&&(h=!0,c=(0,u.X)(l,[1,l.shape[0],l.shape[1],l.shape[2]]));let[]=t,f={images:c},p=r.BV.runKernel(a.dpD,f,{alignCorners:n,halfPixelCenters:s,size:t});return h?(0,u.X)(p,[p.shape[1],p.shape[2],p.shape[3]]):p}})},3963:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({isFinite_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","isFinite");return r.BV.runKernel(a.avt,{x:t})}})},4365:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({isInf_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","isInf");return r.BV.runKernel(a.iWB,{x:t})}})},6230:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({isNaN_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","isNaN");return r.BV.runKernel(a.r7n,{x:t})}})},9133:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({leakyRelu_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=.2){let n=(0,i._1)(e,"x","leakyRelu");return r.BV.runKernel(a.J$2,{x:n},{alpha:t})}})},6573:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({less_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","less","string_or_numeric"),u=(0,o._1)(t,"b","less","string_or_numeric");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a.vtC,l)}})},624:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({lessEqual_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","lessEqual","string_or_numeric"),u=(0,o._1)(t,"b","lessEqual","string_or_numeric");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a.CAk,l)}})},9648:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668),u=n(4968);let l=(0,s.op)({localResponseNormalization_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=5,n=1,s=1,l=.5){let c=(0,i._1)(e,"x","localResponseNormalization");o.hu(4===c.rank||3===c.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${c.rank}.`),o.hu(o.GN(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let h=c,f=!1;3===c.rank&&(f=!0,h=(0,u.X)(c,[1,c.shape[0],c.shape[1],c.shape[2]]));let p={x:h},d=r.BV.runKernel(a.eZ0,p,{depthRadius:t,bias:n,alpha:s,beta:l});return f?(0,u.X)(d,[d.shape[1],d.shape[2],d.shape[3]]):d}})},2597:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({log_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","log","float32");return r.BV.runKernel(a.ZbH,{x:t})}})},7474:function(e,t,n){"use strict";n.d(t,{K:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({log1p_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","log1p");return r.BV.runKernel(a.kU,{x:t})}})},3888:function(e,t,n){"use strict";n.d(t,{e:function(){return c}});var r=n(633),a=n(3740),i=n(4841),o=n(7370),s=n(2668),u=n(625),l=n(3694);let c=(0,s.op)({logSigmoid_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,a._1)(e,"x","logSigmoid"),n=(0,r.cb)(e=>{let t=(0,o.W)((0,l.W)((0,o.W)(e))),n=t=>{let n=(0,i.d)(t,(0,u.X)((0,o.W)(e)));return n};return{value:t,gradFunc:n}});return n(t)}})},1510:function(e,t,n){"use strict";n.d(t,{C:function(){return p}});var r=n(633),a=n(3740),i=n(2271),o=n(4842),s=n(2597),u=n(3307),l=n(4841),c=n(2668),h=n(827),f=n(5475);let p=(0,c.op)({logSoftmax_:/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=-1){let n=(0,a._1)(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);let c=(0,r.cb)((e,n)=>{let r=(0,u.F)(e,t,!0),a=(0,h.l)(e,r),c=(0,h.l)((0,i.p)(a,"float32"),(0,s.c)((0,f.S)((0,o.Q)(a),t,!0)));n([c]);let p=(e,n)=>{let[r]=n,a=(0,o.Q)(r);return(0,h.l)(e,(0,l.d)((0,f.S)(e,t,!0),a))};return{value:c,gradFunc:p}});return c(n)}})},1391:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var r=n(3740),a=n(569),i=n(6407),o=n(3591),s=n(4842),u=n(2597),l=n(3307),c=n(2668),h=n(4968),f=n(827),p=n(5475);let d=(0,c.op)({logSumExp_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let c=(0,r._1)(e,"x","logSumExp"),d=(0,a.EC)(t,c.shape),m=(0,l.F)(c,d,!0),g=(0,f.l)(c,m),y=(0,s.Q)(g),b=(0,p.S)(y,d),v=(0,u.c)(b),w=(0,i.I)((0,h.X)(m,v.shape),v);if(n){let e=(0,o.rv)(w.shape,d);return(0,h.X)(w,e)}return w}})},2856:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(2200),s=n(2668);let u=(0,s.op)({logicalAnd_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"a","logicalAnd","bool"),s=(0,i._1)(t,"b","logicalAnd","bool");return(0,o.assertAndGetBroadcastShape)(n.shape,s.shape),r.BV.runKernel(a.PYm,{a:n,b:s})}})},8651:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({logicalNot_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","logicalNot","bool");return r.BV.runKernel(a.VfG,{x:t})}})},5750:function(e,t,n){"use strict";n.d(t,{K:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(2200),s=n(2668);let u=(0,s.op)({logicalOr_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"a","logicalOr","bool"),s=(0,i._1)(t,"b","logicalOr","bool");return(0,o.assertAndGetBroadcastShape)(n.shape,s.shape),r.BV.runKernel(a.MZg,{a:n,b:s})}})},596:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(3740),a=n(2200),i=n(2856),o=n(8651),s=n(5750),u=n(2668);let l=(0,u.op)({logicalXor_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,r._1)(e,"a","logicalXor","bool"),u=(0,r._1)(t,"b","logicalXor","bool");return(0,a.assertAndGetBroadcastShape)(n.shape,u.shape),(0,i.H)((0,s.K)(e,t),(0,o.h)((0,i.H)(e,t)))}})},9876:function(e,t,n){"use strict";var r,a;n.d(t,{I:function(){return r}}),(a=r||(r={}))[a.NONE=0]="NONE",a[a.MEAN=1]="MEAN",a[a.SUM=2]="SUM",a[a.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"},8687:function(e,t,n){"use strict";n.d(t,{O:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({matMul_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=!1,s=!1){let u=(0,o._1)(e,"a","matMul"),l=(0,o._1)(t,"b","matMul");[u,l]=(0,i.makeTypesMatch)(u,l);let c={a:u,b:l};return r.BV.runKernel(a.XLW,c,{transposeA:n,transposeB:s})}})},3307:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({max_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let o=(0,i._1)(e,"x","max");return r.BV.runKernel(a.YoZ,{x:o},{reductionIndices:t,keepDims:n})}})},1174:function(e,t,n){"use strict";n.d(t,{_:function(){return c}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2582),u=n(2668),l=n(4968);let c=(0,u.op)({maxPool_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,u,c){let h=(0,i._1)(e,"x","maxPool"),f=h,p=!1;3===h.rank&&(p=!0,f=(0,l.X)(h,[1,h.shape[0],h.shape[1],h.shape[2]])),o.hu(4===f.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${f.rank}.`),o.hu(s.jT(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),s.m("maxPool",u,c);let d={x:f},m=r.BV.runKernel(a.mTV,d,{filterSize:t,strides:n,pad:u,dimRoundingMode:c});return p?(0,l.X)(m,[m.shape[1],m.shape[2],m.shape[3]]):m}})},632:function(e,t,n){"use strict";n.d(t,{g:function(){return c}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2271),l=n(2668);let c=(0,l.op)({maximum_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","maximum"),l=(0,o._1)(t,"b","maximum");[n,l]=(0,i.makeTypesMatch)(n,l),"bool"===n.dtype&&(n=(0,u.p)(n,"int32"),l=(0,u.p)(l,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let c={a:n,b:l};return r.BV.runKernel(a.BMI,c)}})},5130:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({mean_:/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let o=(0,i._1)(e,"x","mean");return r.BV.runKernel(a.q2K,{x:o},{axis:t,keepDims:n})}})},5735:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({min_:/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let o=(0,i._1)(e,"x","min");return r.BV.runKernel(a.c17,{x:o},{axis:t,keepDims:n})}})},4513:function(e,t,n){"use strict";n.d(t,{L:function(){return c}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2271),l=n(2668);let c=(0,l.op)({minimum_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","minimum"),l=(0,o._1)(t,"b","minimum");[n,l]=(0,i.makeTypesMatch)(n,l),"bool"===n.dtype&&(n=(0,u.p)(n,"int32"),l=(0,u.p)(l,"int32")),(0,s.assertAndGetBroadcastShape)(n.shape,l.shape);let c={a:n,b:l};return r.BV.runKernel(a.q8u,c)}})},1483:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({mirrorPad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){o.hu("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let s=(0,i._1)(e,"x","mirrorPad");if(0===s.rank)throw Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");o.hu(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);let u="reflect"===n?1:0;for(let e=0;e<s.rank;e++)o.hu(2===t[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),o.hu(t[e][0]>=0&&t[e][0]<=s.shape[e]-u&&t[e][1]>=0&&t[e][1]<=s.shape[e]-u,()=>`Padding in dimension ${e} cannot be greater than or equal to ${s.shape[e]-u} or less than 0 for input of shape ${s.shape}`);return r.BV.runKernel(a.jQs,{x:s},{paddings:t,mode:n})}})},5228:function(e,t,n){"use strict";n.d(t,{w:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({mod_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","mod"),s=(0,o._1)(t,"b","mod");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.Vbg,u)}})},4841:function(e,t,n){"use strict";n.d(t,{d:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({mul_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","mul"),s=(0,o._1)(t,"b","mul");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.wYn,u)}})},7370:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({neg_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","neg");return r.BV.runKernel(a.kuV,{x:t})}})},3561:function(e,t,n){"use strict";n.d(t,{K:function(){return g}});var r=n(3740),a=n(569),i=n(6235),o=n(3591),s=n(3307),u=n(5735),l=n(2668),c=n(3453),h=n(4968),f=n(9494),p=n(3261),d=n(248),m=n(5475);let g=(0,l.op)({norm_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t="euclidean",n=null,l=!1){e=(0,r._1)(e,"x","norm");let g=function e(t,n,r=null){if(0===t.rank)return(0,i.W)(t);if(1!==t.rank&&null===r)return e((0,h.X)(t,[-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return(0,m.S)((0,i.W)(t),r);if(n===1/0)return(0,s.F)((0,i.W)(t),r);if(n===-1/0)return(0,u.V)((0,i.W)(t),r);if("euclidean"===n||2===n)return(0,p._)((0,m.S)((0,c.s)((0,i.W)(t),(0,f.i)(2,"int32")),r));throw Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(r)&&2===r.length){if(1===n)return(0,s.F)((0,m.S)((0,i.W)(t),r[0]),r[1]-1);if(n===1/0)return(0,s.F)((0,m.S)((0,i.W)(t),r[1]),r[0]);if(n===-1/0)return(0,u.V)((0,m.S)((0,i.W)(t),r[1]),r[0]);if("fro"===n||"euclidean"===n)return(0,p._)((0,m.S)((0,d.h)(t),r));throw Error(`Error in norm: invalid ord value: ${n}`)}throw Error(`Error in norm: invalid axis: ${r}`)}(e,t,n),y=g.shape;if(l){let t=(0,a.EC)(n,e.shape);y=o.rv(g.shape,t)}return(0,h.X)(g,y)}})},6500:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({notEqual_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","notEqual","string_or_numeric"),u=(0,o._1)(t,"b","notEqual","string_or_numeric");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a.yQU,l)}})},6708:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({oneHot_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=1,o=0,s="int32"){if(t<2)throw Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let u=(0,i._1)(e,"indices","oneHot","int32");return r.BV.runKernel(a.we_,{indices:u},{dtype:s,depth:t,onValue:n,offValue:o})}})},4917:function(e,t,n){"use strict";n.d(t,{i:function(){return(/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t,n="float32"){if("complex64"===n){let n=e(t,"float32"),r=(0,o.l)(t,"float32");return(0,i.P)(n,r)}let s=(0,a.p8)((0,a.NA)(t),n);return r.BV.makeTensor(s,t,n)})}});var r=n(196),a=n(569),i=n(1661),o=n(723)},7846:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({onesLike_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","onesLike");return r.BV.runKernel(a.qWM,{x:t})}})},2668:function(e,t,n){"use strict";n.d(t,{op:function(){return o},z:function(){return i}});var r=n(196),a=n(569);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let i="__op";function o(e){let t=Object.keys(e);if(1!==t.length)throw Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],o=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=i;let s=(...e)=>{r.BV.startScope(n);try{let t=o(...e);return(0,a.tI)(t)&&console.error("Cannot return a Promise inside of tidy."),r.BV.endScope(t),t}catch(e){throw r.BV.endScope(null),e}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}},5318:function(e,t,n){"use strict";n.d(t,{zvA:function(){return f.z},WnP:function(){return a.W},Khb:function(){return i.K},__u:function(){return o._},IHx:function(){return s.I},QBD:function(){return p},$6P:function(){return d.$},YjB:function(){return m.Y},NqF:function(){return g.N},vHJ:function(){return y.v},ZRM:function(){return b.Z},VfV:function(){return v.V},z4N:function(){return w.z},fvJ:function(){return x.f},C80:function(){return _.C},wS1:function(){return k.w},uR5:function(){return N},zEQ:function(){return P},tgs:function(){return F.t},Dxk:function(){return M},JY5:function(){return B},p3b:function(){return L},E4h:function(){return $.E},yE8:function(){return U},anm:function(){return nO},XsQ:function(){return j},UFq:function(){return z.U},f3b:function(){return W.f},pju:function(){return I.p},mDi:function(){return V.m},iUl:function(){return G.i},d9v:function(){return H.d},PYB:function(){return q.P},zoF:function(){return T.z},gME:function(){return X},Izb:function(){return K},MNy:function(){return Z},ZaL:function(){return Y},PAt:function(){return Q.P},Tek:function(){return J.T},bc:function(){return ee.b},pdZ:function(){return et},$QV:function(){return er},mCk:function(){return ea.m},f9Y:function(){return ei.f},mew:function(){return nz},$Gn:function(){return eo.$},zbp:function(){return es.z},ppE:function(){return eu},nTT:function(){return el.n},B10:function(){return ec.B},Ka3:function(){return eh},WmZ:function(){return ef.W},hiC:function(){return ep.h},NTj:function(){return ed.N},AKD:function(){return em.A},rvX:function(){return nU},WYO:function(){return eg},pyx:function(){return ey.p},GRh:function(){return nj},DgJ:function(){return eb.D},qNN:function(){return ev.q},d2q:function(){return ew.d},Qqt:function(){return ex.Q},dt4:function(){return e_.d},t$B:function(){return ek.t},iyy:function(){return eI},kp_:function(){return t5.k},hlL:function(){return eE.h},GWj:function(){return eN.G},qPi:function(){return eT.q},imm:function(){return r},Iqj:function(){return eA.I},dbB:function(){return nL},pjt:function(){return eC.p},brS:function(){return eO.b},Sxn:function(){return t8.S},asL:function(){return eR.a},BHj:function(){return r$},V3u:function(){return nV},wx0:function(){return t7.w},xVT:function(){return eD.x},UWc:function(){return eP.U},i2d:function(){return e$.i},hi7:function(){return eF.h},d9m:function(){return eM.d},zN1:function(){return eB.z},$r2:function(){return rF},SX3:function(){return eL},G9k:function(){return eU.G},cM7:function(){return ej.c},Krr:function(){return ez.K},e_t:function(){return eW.e},CmS:function(){return eV.C},l_t:function(){return eG.l},HvI:function(){return eH.H},hJK:function(){return eq.h},K5V:function(){return eX.K},egP:function(){return eK.e},MB5:function(){return rM},eab:function(){return eY},OI3:function(){return A.O},Fp7:function(){return eQ.F},_sB:function(){return eJ._},YQQ:function(){return e0},Ip$:function(){return e1},gWQ:function(){return e2.g},J69:function(){return e3.J},ry_:function(){return e5},VV$:function(){return e8.V},LTh:function(){return e7.L},VdP:function(){return e9.V},wQq:function(){return te.w},Gi7:function(){return ta},p_:function(){return n$},dC7:function(){return C.d},rq4:function(){return ti},SJ_:function(){return to},W76:function(){return ts.W},KOy:function(){return nD.K},Quu:function(){return tu.Q},lfX:function(){return tl.l},iUs:function(){return e4.i},JpU:function(){return tc.J},op:function(){return f.op},N2O:function(){return th},vku:function(){return tf.v},pNR:function(){return tp},koy:function(){return td},t1L:function(){return tm},lGY:function(){return tg},d_R:function(){return ty.d},sQ3:function(){return tb.s},AL3:function(){return tv.A},S0v:function(){return tw.S},WVs:function(){return tx.W},$gW:function(){return t_},N89:function(){return tk},TN_:function(){return tS},wzB:function(){return tA},nGf:function(){return tC},ruB:function(){return tO},LGj:function(){return tR},w6H:function(){return tD},kwC:function(){return tP.k},M25:function(){return t$.M},UYe:function(){return tF.U},btT:function(){return tM.b},XLQ:function(){return E.X},GYS:function(){return tB.G},SDf:function(){return tL},diP:function(){return tU},sx7:function(){return tj},mG2:function(){return tz},QEs:function(){return t9.Q},NMM:function(){return tW.N},bp0:function(){return tV.b},iD$:function(){return tG.i},snQ:function(){return nM},zcT:function(){return eZ},U8D:function(){return tH.U},U_I:function(){return tq.U},ODp:function(){return tK},XD2:function(){return O.X},Xxe:function(){return tZ.X},tdS:function(){return rP},O$l:function(){return tY.O},R_K:function(){return tQ.R},tPi:function(){return R.t},jZU:function(){return tJ},SmN:function(){return t0},CnO:function(){return t1},p0P:function(){return t2},XAC:function(){return t3.X},Wvh:function(){return t4.W},fBT:function(){return t6.f},rVs:function(){return rB},ers:function(){return nB},uN7:function(){return rD},Vl2:function(){return ne.V},_b3:function(){return nt._},h62:function(){return tn.h},$i:function(){return nn.$},L9e:function(){return nr.L},knu:function(){return na.k},Nbs:function(){return ni.N},NXj:function(){return no.N},Z_8:function(){return rL},luU:function(){return tr.l},Smz:function(){return ns.S},ORZ:function(){return nu.O},AEp:function(){return D.A},XeE:function(){return nl.X},RRF:function(){return nh},odF:function(){return nf},wOQ:function(){return np.w},yXz:function(){return nd},Bfx:function(){return nm},xZs:function(){return ng},Gg6:function(){return eS.G},hg7:function(){return ny.h},p4s:function(){return nR.p},Xu6:function(){return nb},Two:function(){return nv.T},pUJ:function(){return nw.p},HHK:function(){return nx.H},GaM:function(){return n_},VD$:function(){return nk},arb:function(){return nS.a},itS:function(){return nN},lls:function(){return nT.l},P84:function(){return nA.P}});var r={};n.r(r),n.d(r,{conv2d:function(){return nZ},depthwiseConv2d:function(){return nJ},matMul:function(){return n0}});var a=n(6235),i=n(7839),o=n(1470),s=n(6407),u=n(196),l=n(9121),c=n(3740),h=n(569),f=n(2668);let p=(0,f.op)({addN_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){h.hu(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),h.hu(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);let t=e.map((e,t)=>(0,c._1)(e,`tensors${t}`,"addN")),n=t[0];return t.forEach(e=>{if(e.dtype!==n.dtype)throw Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!h.cO(e.shape,n.shape))throw Error("All tensors passed to tf.addN() must have the same shape")}),u.BV.runKernel(l.Xze,t)}});var d=n(781),m=n(2998),g=n(47),y=n(7394),b=n(2421),v=n(1891),w=n(7037),x=n(9812),_=n(369),k=n(5176),S=n(2582),I=n(2271),E=n(4968);let N=(0,f.op)({avgPool3d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,i="NDHWC"){let o=(0,c._1)(e,"x","avgPool3d","float32"),s=o,f=!1;4===o.rank&&(f=!0,s=(0,E.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),h.hu(5===s.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),h.hu("NDHWC"===i,()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),(0,S.m)("avgPool3d",r,a);let p={x:s},d=u.BV.runKernel(l._k9,p,{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i});return(d=(0,I.p)(d,s.dtype),f)?(0,E.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var T=n(6884),A=n(8687),C=n(4841),O=n(625),R=n(2676),D=n(1869);let P=(0,f.op)({basicLSTMCell_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,i){let o=(0,c._1)(e,"forgetBias","basicLSTMCell"),u=(0,c._1)(t,"lstmKernel","basicLSTMCell"),l=(0,c._1)(n,"lstmBias","basicLSTMCell"),h=(0,c._1)(r,"data","basicLSTMCell"),f=(0,c._1)(a,"c","basicLSTMCell"),p=(0,c._1)(i,"h","basicLSTMCell"),d=(0,T.z)([h,p],1),m=(0,A.O)(d,u),g=(0,s.I)(m,l),y=g.shape[0],b=g.shape[1]/4,v=[y,b],w=(0,R.t)(g,[0,0],v),x=(0,R.t)(g,[0,b],v),_=(0,R.t)(g,[0,2*b],v),k=(0,R.t)(g,[0,3*b],v),S=(0,s.I)((0,C.d)((0,O.X)(w),(0,D.A)(x)),(0,C.d)(f,(0,O.X)((0,s.I)(o,_)))),I=(0,C.d)((0,D.A)(S),(0,O.X)(k));return[S,I]}});var $=n(8441),F=n(94);let M=(0,f.op)({batchNorm2d_:function(e,t,n,r,a,i){let o,s;let u=(0,c._1)(e,"x","batchNorm"),l=(0,c._1)(t,"mean","batchNorm"),f=(0,c._1)(n,"variance","batchNorm");return null!=a&&(o=(0,c._1)(a,"scale","batchNorm")),null!=r&&(s=(0,c._1)(r,"offset","batchNorm")),h.hu(2===u.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${u.rank}.`),h.hu(2===l.rank||1===l.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${l.rank}.`),h.hu(2===f.rank||1===f.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${f.rank}.`),null!=o&&h.hu(2===o.rank||1===o.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${o.rank}.`),null!=s&&h.hu(2===s.rank||1===s.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${s.rank}.`),(0,F.t)(u,l,f,s,o,i)}}),B=(0,f.op)({batchNorm3d_:function(e,t,n,r,a,i){let o,s;let u=(0,c._1)(e,"x","batchNorm"),l=(0,c._1)(t,"mean","batchNorm"),f=(0,c._1)(n,"variance","batchNorm");return null!=a&&(o=(0,c._1)(a,"scale","batchNorm")),null!=r&&(s=(0,c._1)(r,"offset","batchNorm")),h.hu(3===u.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${u.rank}.`),h.hu(3===l.rank||1===l.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${l.rank}.`),h.hu(3===f.rank||1===f.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${f.rank}.`),null!=o&&h.hu(3===o.rank||1===o.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${o.rank}.`),null!=s&&h.hu(3===s.rank||1===s.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${s.rank}.`),(0,F.t)(u,l,f,s,o,i)}}),L=(0,f.op)({batchNorm4d_:function(e,t,n,r,a,i){let o,s;let u=(0,c._1)(e,"x","batchNorm"),l=(0,c._1)(t,"mean","batchNorm"),f=(0,c._1)(n,"variance","batchNorm");return null!=a&&(o=(0,c._1)(a,"scale","batchNorm")),null!=r&&(s=(0,c._1)(r,"offset","batchNorm")),h.hu(4===u.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${u.rank}.`),h.hu(4===l.rank||1===l.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${l.rank}.`),h.hu(4===f.rank||1===f.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${f.rank}.`),null!=o&&h.hu(4===o.rank||1===o.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${o.rank}.`),null!=s&&h.hu(4===s.rank||1===s.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${s.rank}.`),(0,F.t)(u,l,f,s,o,i)}}),U=(0,f.op)({bincount_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"x","bincount"),a=(0,c._1)(t,"weights","bincount");return h.hu("int32"===r.dtype,()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),h.hu(n>=0,()=>`size must be non-negative, but got ${n}.`),h.hu(a.size===r.size||0===a.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${a.shape}.`),u.BV.runKernel(l.zvY,{x:r,weights:a},{size:n})}}),j=(0,f.op)({broadcastArgs_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(e,"s0","broadcastArgs","int32"),r=(0,c._1)(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(1!==r.rank)throw Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);return u.BV.runKernel(l.eEB,{s0:n,s1:r})}});var z=n(8247),W=n(2657),V=n(6825),G=n(2279),H=n(8723),q=n(1661);let X=(0,f.op)({concat1d_:function(e){return(0,T.z)(e,0)}}),K=(0,f.op)({concat2d_:function(e,t){return(0,T.z)(e,t)}}),Z=(0,f.op)({concat3d_:function(e,t){return(0,T.z)(e,t)}}),Y=(0,f.op)({concat4d_:function(e,t){return(0,T.z)(e,t)}});var Q=n(1355),J=n(4794),ee=n(1405);let et=(0,f.op)({conv3d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a="NDHWC",i=[1,1,1]){let o=(0,c._1)(e,"x","conv3d"),s=(0,c._1)(t,"filter","conv3d"),f=o,p=!1;4===o.rank&&(p=!0,f=(0,E.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),h.hu(5===f.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${f.rank}.`),h.hu(5===s.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),h.hu(f.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${f.shape[4]}) must match input depth for filter ${s.shape[3]}.`),h.hu((0,S.jT)(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),h.hu("NDHWC"===a,()=>`Error in conv3d: got dataFormat of ${a} but only NDHWC is currently supported.`);let d={x:f,filter:s},m=u.BV.runKernel(l.x12,d,{strides:n,pad:r,dataFormat:a,dilations:i});return p?(0,E.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}});var en=n(7594);let er=(0,f.op)({conv3dTranspose_:function(e,t,n,r,a){let i=(0,c._1)(e,"x","conv3dTranspose"),o=(0,c._1)(t,"filter","conv3dTranspose");return(0,en._)(n,i,o,r,a)}});var ea=n(173),ei=n(2699),eo=n(9640),es=n(7405);let eu=(0,f.op)({denseBincount_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=!1){let a=(0,c._1)(e,"x","denseBincount"),i=(0,c._1)(t,"weights","denseBincount");return h.hu("int32"===a.dtype,()=>`Error in denseBincount: input dtype must be int32, but got ${a.dtype}`),h.hu(a.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${a.rank}.`),h.hu(n>=0,()=>`size must be non-negative, but got ${n}.`),h.hu(i.size===a.size||0===i.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${a.shape}, weights shape: ${i.shape}.`),u.BV.runKernel(l.QRR,{x:a,weights:i},{size:n,binaryOutput:r})}});var el=n(9112),ec=n(4718);let eh=(0,f.op)({diag_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,c._1)(e,"x","diag");return u.BV.runKernel(l.$w,{x:t})}});var ef=n(557),ep=n(1274),ed=n(9322),em=n(548);let eg=(0,f.op)({einsum_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,...t){let n=t.map((e,t)=>(0,c._1)(e,`tensors${t}`,"einsum"));return u.BV.runKernel(l.$g6,n,{equation:e})}});var ey=n(3233),eb=n(6477),ev=n(4650),ew=n(1954),ex=n(4842),e_=n(1300),ek=n(3426),eS=n(7501);let eI=(0,f.op)({eye_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r="float32"){null==t&&(t=e);let a=(0,W.f)([e,t],r),i=e<=t?e:t;for(let e=0;e<i;++e)a.set(1,e,e);let o=(0,E.X)(a.toTensor(),[e,t]);if(null==n)return o;if(1===n.length)return(0,eS.G)((0,e_.d)(o,0),[n[0],1,1]);if(2===n.length)return(0,eS.G)((0,e_.d)((0,e_.d)(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return(0,eS.G)((0,e_.d)((0,e_.d)((0,e_.d)(o,0),0),0),[n[0],n[1],n[2],1,1]);throw Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var eE=n(4006),eN=n(6943),eT=n(9165),eA=n(4926),eC=n(636),eO=n(7630),eR=n(4386),eD=n(3963),eP=n(4365),e$=n(6230),eF=n(9133),eM=n(6573),eB=n(624);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eL(e,t,n){if(n<=0)throw Error("The number of values should be positive.");return u.BV.runKernel(l.e7N,{},{start:e,stop:t,num:n})}var eU=n(9648),ej=n(2597),ez=n(7474),eW=n(3888),eV=n(1510),eG=n(1391),eH=n(2856),eq=n(8651),eX=n(5750),eK=n(596);let eZ=(0,f.op)({searchSorted_:function(e,t,n="left"){let r=(0,c._1)(e,"sortedSequence","searchSorted"),a=(0,c._1)(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=(0,E.X)(r,[-1,i]),f=(0,E.X)(a,[-1,o]);if(s.rank<2)throw Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==f.shape[0])throw Error("Leading dimension of 'sortedSequence' and 'values' must match.");if((0,h.NA)(f.shape)>=2147483648)throw Error("values tensor size must less than 2147483648");if(s.shape[1]>=2147483648)throw Error(`trailing dim_size must less than 2147483648 for int32 output type, was ${s.shape[1]}`);return u.BV.runKernel(l.nr8,{sortedSequence:s,values:f},{side:n})}});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(e,t){return eZ(e,t,"left")}var eQ=n(3307),eJ=n(1174);let e0=(0,f.op)({maxPool3d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=[1,1,1],n,r,a,i="NDHWC"){let o=(0,c._1)(e,"x","maxPool3d"),s=o,f=!1;4===o.rank&&(f=!0,s=(0,E.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),h.hu(5===s.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),h.hu("NDHWC"===i,()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),(0,S.m)("maxPool3d",r,a);let p={x:s},d=u.BV.runKernel(l.OAf,p,{filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i});return f?(0,E.X)(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),e1=(0,f.op)({maxPoolWithArgmax_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a=!1){let i=(0,c._1)(e,"x","maxPoolWithArgmax"),o=u.BV.runKernel(l.vFR,{x:i},{filterSize:t,strides:n,pad:r,includeBatchInIndex:a});return{result:o[0],indexes:o[1]}}});var e2=n(632),e3=n(5130),e4=n(4917),e6=n(974);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e5(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw TypeError(`${n} is not a valid third argument to meshgrid`);if(void 0===e)return[];let r=(0,c._1)(e,"x","meshgrid",e instanceof e6.es?e.dtype:"float32");if(void 0===t)return[r];let a=(0,c._1)(t,"y","meshgrid",t instanceof e6.es?t.dtype:"float32"),i=(0,h.NA)(r.shape),o=(0,h.NA)(a.shape);return"xy"===n?(r=(0,E.X)(r,[1,-1]),a=(0,E.X)(a,[-1,1]),[(0,A.O)((0,e4.i)([o,1],r.dtype),r),(0,A.O)(a,(0,e4.i)([1,i],a.dtype))]):(r=(0,E.X)(r,[-1,1]),a=(0,E.X)(a,[1,-1]),[(0,A.O)(r,(0,e4.i)([1,o],r.dtype)),(0,A.O)((0,e4.i)([i,1],a.dtype),a)])}var e8=n(5735),e7=n(4513),e9=n(1483),te=n(5228),tt=n(3591),tn=n(248),tr=n(827);let ta=(0,f.op)({moments_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){e=(0,c._1)(e,"x","moments");let r=(0,h.EC)(t,e.shape),a=(0,e3.J)(e,r,n),i=a.shape;n||(i=(0,tt.rv)(a.shape,r));let o=(0,tn.h)((0,tr.l)((0,I.p)(e,"float32"),(0,E.X)(a,i))),s=(0,e3.J)(o,r,n);return{mean:a,variance:s}}}),ti=(0,f.op)({multiRNNCell_:function(e,t,n,r){let a=(0,c._1)(t,"data","multiRNNCell"),i=(0,c.sI)(n,"c","multiRNNCell"),o=(0,c.sI)(r,"h","multiRNNCell"),s=a,u=[];for(let t=0;t<e.length;t++){let n=e[t](s,i[t],o[t]);u.push(n[0]),u.push(n[1]),s=n[1]}let l=[],h=[];for(let e=0;e<u.length;e+=2)l.push(u[e]),h.push(u[e+1]);return[l,h]}}),to=(0,f.op)({multinomial_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=!1){let a=(0,c._1)(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();let s=1===o?(0,E.X)(a,[1,-1]):a,h={numSamples:t,seed:n,normalized:r},f=u.BV.runKernel(l.NZg,{logits:s},h);return 1===o?(0,E.X)(f,[f.size]):f}});var ts=n(7370),tu=n(6500),tl=n(6708),tc=n(7846);let th=(0,f.op)({outerProduct_:function(e,t){let n=(0,c._1)(e,"v1","outerProduct"),r=(0,c._1)(t,"v2","outerProduct");h.hu(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let a=(0,E.X)(n,[-1,1]),i=(0,E.X)(r,[1,-1]);return(0,A.O)(a,i)}});var tf=n(9682);let tp=(0,f.op)({pad1d_:function(e,t,n=0){return(0,h.hu)(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),(0,tf.v)(e,[t],n)}}),td=(0,f.op)({pad2d_:function(e,t,n=0){return(0,h.hu)(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,tf.v)(e,t,n)}}),tm=(0,f.op)({pad3d_:function(e,t,n=0){return(0,h.hu)(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,tf.v)(e,t,n)}}),tg=(0,f.op)({pad4d_:function(e,t,n=0){return(0,h.hu)(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),(0,tf.v)(e,t,n)}});var ty=n(5860),tb=n(3453),tv=n(8151),tw=n(9798),tx=n(9451);let t_=(0,f.op)({raggedGather_:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=e.map((e,t)=>(0,c._1)(e,`tensors${t}`,"raggedGather","int32")),i=(0,c._1)(t,"paramsDenseValues","raggedGather"),o=(0,c._1)(n,"indices","raggedGather","int32"),s=u.BV.runKernel(l.dDz,{paramsNestedSplits:a,paramsDenseValues:i,indices:o},{outputRaggedRank:r});return{outputNestedSplits:s.slice(0,s.length-1),outputDenseValues:s[s.length-1]}}}),tk=(0,f.op)({raggedTensorToTensor_:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let i=(0,c._1)(e,"shape","raggedTensorToTensor","int32"),o=(0,c._1)(t,"values","raggedTensorToTensor"),s=(0,c._1)(n,"defaultValue","raggedTensorToTensor",o.dtype),h=r.map((e,t)=>(0,c._1)(e,`tensors${t}`,"raggedTensorToTensor","int32"));return u.BV.runKernel(l.BiW,{shape:i,values:o,defaultValue:s,rowPartitionTensors:h},{rowPartitionTypes:a})}}),tS=(0,f.op)({rand_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,h.NA)(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else if("bool"===n)a=new Uint8Array(r);else throw Error(`Unknown data type ${n}`);for(let e=0;e<r;e++)a[e]=t();return u.BV.makeTensor(a,e,n)}});var tI=n(6377);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tE{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let i=a||Math.random();this.random=tI.alea(i.toString())}nextValue(){let e,t;if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let n=!1;for(;!n;){let r,a,i;do i=(r=2*this.random()-1)*r+(a=2*this.random()-1)*a;while(i>=1||0===i);let o=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*o,t=this.mean+this.stdDev*a*o,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class tN{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let a=r||Math.random();this.randu=tI.alea(a.toString()),this.randn=new tE(0,1,n,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,i;for(;;){do r=this.randn.nextValue(),i=1+this.c*r;while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}class tT{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=tI.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}let tA=(0,f.op)({randomGamma_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=1,r="float32",a){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw Error(`Unsupported data type ${r}`);let i=new tN(t,n,r,a),o=(0,W.f)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=i.nextValue();return o.toTensor()}}),tC=(0,f.op)({randomNormal_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw Error(`Unsupported data type ${r}`);let i=new tE(t,n,r,!1,a),o=(0,W.f)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=i.nextValue();return o.toTensor()}}),tO=(0,f.op)({randomStandardNormal_:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){if(null!=t&&"bool"===t)throw Error(`Unsupported data type ${t}`);return tC(e,0,1,t,n)}}),tR=(0,f.op)({randomUniform_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0,n=1,r="float32",a){let i=(0,W.f)(e,r),o=new tT(t,n,null,a);for(let e=0;e<i.values.length;e++)i.values[e]=o.nextValue();return i.toTensor()}});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tD(e,t,n=1,r="float32"){if(0===n)throw Error("Cannot have a step of zero");return u.BV.runKernel(l.e6w,{},{start:e,stop:t,step:n,dtype:r})}var tP=n(766),t$=n(9036),tF=n(7409),tM=n(3582),tB=n(7486);let tL=(0,f.op)({reverse1d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,c._1)(e,"x","reverse");return h.hu(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),(0,tB.G)(t,0)}}),tU=(0,f.op)({reverse2d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(e,"x","reverse");return h.hu(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),(0,tB.G)(n,t)}}),tj=(0,f.op)({reverse3d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(e,"x","reverse");return h.hu(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),(0,tB.G)(n,t)}}),tz=(0,f.op)({reverse4d_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(e,"x","reverse");return h.hu(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),(0,tB.G)(n,t)}});var tW=n(7809),tV=n(2634),tG=n(9494),tH=n(5503),tq=n(8678);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function tX(e,t){let n=(0,c._1)(e,"x","setdiff1d"),r=(0,c._1)(t,"y","setdiff1d");h.hu(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),h.hu(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),h.hu(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);let a=await n.data(),i=await r.data(),o=new Set(i),s=0;for(let e=0;e<a.length;e++)!o.has(a[e])&&s++;let u=new e6.YD([s],n.dtype),l=new e6.YD([s],"int32");for(let e=0,t=0;e<a.length;e++)!o.has(a[e])&&(u.values[t]=a[e],l.values[t]=e,t++);return[u.toTensor(),l.toTensor()]}let tK=tX;var tZ=n(4434),tY=n(9331),tQ=n(3254);let tJ=(0,f.op)({slice1d_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"x","slice1d");return h.hu(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),(0,R.t)(r,[t],[n])}}),t0=(0,f.op)({slice2d_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"x","slice2d");return h.hu(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),(0,R.t)(r,t,n)}}),t1=(0,f.op)({slice3d_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"x","slice3d");return h.hu(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),(0,R.t)(r,t,n)}}),t2=(0,f.op)({slice4d_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"x","slice4d");return h.hu(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),(0,R.t)(r,t,n)}});var t3=n(682),t4=n(3694),t6=n(7918),t5=n(7020),t8=n(8447),t7=n(4415),t9=n(3710),ne=n(8644),nt=n(3261),nn=n(5265),nr=n(9590),na=n(2991),ni=n(1901),no=n(5158),ns=n(5475),nu=n(1173),nl=n(701),nc=n(7852);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nh(e,t){(0,h.Cq)(e);let n=(0,c.C)(e,t);if(1!==n.length)throw Error("tensor1d() requires values to be a flat/TypedArray");return(0,nc.H)(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nf(e,t,n){if((0,h.Cq)(e),null!=t&&2!==t.length)throw Error("tensor2d() requires shape to have two numbers");let r=(0,c.C)(e,n);if(2!==r.length&&1!==r.length)throw Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return(0,nc.H)(e,t,r,n)}var np=n(9906);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nd(e,t,n){if((0,h.Cq)(e),null!=t&&4!==t.length)throw Error("tensor4d() requires shape to have four numbers");let r=(0,c.C)(e,n);if(4!==r.length&&1!==r.length)throw Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw Error("tensor4d() requires shape to be provided when `values` are a flat array");return(0,nc.H)(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nm(e,t,n){if((0,h.Cq)(e),null!=t&&5!==t.length)throw Error("tensor5d() requires shape to have five numbers");let r=(0,c.C)(e,n);if(5!==r.length&&1!==r.length)throw Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw Error("tensor5d() requires shape to be provided when `values` are a flat array");return(0,nc.H)(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ng(e,t,n){if((0,h.Cq)(e),null!=t&&6!==t.length)throw Error("tensor6d() requires shape to have six numbers");let r=(0,c.C)(e,n);if(6!==r.length&&1!==r.length)throw Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,(0,nc.H)(e,t,r,n)}var ny=n(3243);let nb=(0,f.op)({truncatedNormal_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0,n=1,r,a){if(null!=r&&"bool"===r)throw Error("Unsupported data type $ { dtype }");let i=new tE(t,n,r,!0,a),o=(0,W.f)(e,r);for(let e=0;e<o.values.length;e++)o.values[e]=i.nextValue();return o.toTensor()}});var nv=n(9608),nw=n(8749),nx=n(4136);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n_(e,t){return eZ(e,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nk(e,t=!0,n,r){return u.BV.makeVariable(e,t,n,r)}var nS=n(5912),nI=n(8333);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nE(e){let t=(0,c._1)(e,"condition","whereAsync","bool"),n=await t.data(),r=(0,nI.Z)(t.shape,n);return e!==t&&t.dispose(),r}let nN=nE;var nT=n(723),nA=n(6577);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nC(e,t,n){let r=(0,c._1)(e,"tensor","boolMask"),a=(0,c._1)(t,"mask","boolMask","bool"),i=null==n?0:n,o=a.rank,s=r.shape;h.hu(o>0,()=>"mask cannot be scalar"),h.k5(s.slice(i,i+o),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let e=i;e<i+o;e++)u*=s[e];let l=s.slice(0,i).concat([u],s.slice(i+o)),f=(0,E.X)(r,l),p=(0,E.X)(a,[-1]),d=await nN(p),m=(0,nr.L)(d,[1]),g=(0,eA.I)(f,m,i);return e!==r&&r.dispose(),t!==a&&a.dispose(),m.dispose(),f.dispose(),p.dispose(),d.dispose(),g}let nO=nC;var nR=n(9065),nD=n(3561),nP=n(747);let n$=(0,f.op)({movingAverage_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a=!0){let i=(0,c._1)(e,"v","movingAverage"),o=(0,c._1)(t,"x","movingAverage"),u=(0,c._1)(n,"decay","movingAverage");(0,nP.assertTypesMatch)(i,o),h.hu(h.cO(i.shape,o.shape),()=>"Shape mismatch in v and x");let l=(0,tG.i)(1),f=(0,tr.l)(l,u),p=(0,C.d)((0,tr.l)(o,i),f);if(a){h.hu(null!=r,()=>"When using zeroDebias: true, step is required.");let e=(0,c._1)(r,"step","movingAverage");p=(0,ep.h)(p,(0,tr.l)(l,(0,tb.s)(u,e)))}return(0,s.I)(i,p)}});var nF=n(3028);let nM=(0,f.op)({scatterND_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"indices","scatterND","int32"),a=(0,c._1)(t,"updates","scatterND");return nF.validateInput(a,r,n),u.BV.runKernel(l.xQA,{indices:r,updates:a},{shape:n})}}),nB=(0,f.op)({sparseToDense_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=0){let a=(0,c._1)(e,"sparseIndices","sparseToDense","int32"),i=(0,c._1)(t,"sparseValues","sparseToDense","string_or_numeric"),o=(0,c._1)(r,"defaultValue","sparseToDense",i.dtype);return!function(e,t,n,r){if("int32"!==e.dtype)throw Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);let o=t.size;if(!(0===t.rank||1===t.rank&&o===a))throw Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${a}]`);if(t.dtype!==r.dtype)throw Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o),u.BV.runKernel(l.D2d,{sparseIndices:a,sparseValues:i,defaultValue:o},{outputShape:n})}}),nL=(0,f.op)({gatherND_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(t,"indices","gatherND","int32"),r=(0,c._1)(e,"x","gatherND","string_or_numeric");return u.BV.runKernel(l.q1x,{params:r,indices:n})}}),nU=(0,f.op)({dropout_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=(0,c._1)(e,"x","dropout");if(h.hu("float32"===a.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${a.dtype} tensor instead.`),h.hu(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof e6.es?a.clone():a;let i=/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){if(null==t)return e.shape.slice();if(h.cO(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,u=(0,ep.h)((0,eN.G)((0,s.I)(tR(i,0,1,"float32",r),o)),o);return(0,C.d)(a,u)}});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nj(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function nz(e,t,n){let r=1-e%2,a=new Float32Array(e);for(let i=0;i<e;++i){let o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return nh(a,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nW(e,t,n=1){let r=(0,c._1)(e,"predictions","inTopK"),a=(0,c._1)(t,"targets","inTopK");(0,h.hu)(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),(0,h.hu)(r.rank-1===a.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${a.rank}`),(0,h.k5)(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];(0,h.hu)(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);let o=await r.data(),s=await a.data(),[u,l]=[o.length/i,i],f=(0,h.WP)("bool",u);for(let e=0;e<u;e++){let t=e*l,r=o.subarray(t,t+l),a=[];for(let e=0;e<r.length;e++)a.push({value:r[e],index:e});a.sort((e,t)=>t.value-e.value),f[e]=0;for(let t=0;t<n;t++)if(a[t].index===s[e]){f[e]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),(0,nl.X)(f,a.shape,"bool")}let nV=nW;var nG=n(633),nH=n(2200),nq=n(6013),nX=n(9832),nK=n(9323);let nZ=(0,f.op)({fusedConv2d_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:f,activation:p="linear",preluActivationWeights:d,leakyreluAlpha:m}){let g,y;if(p=p||"linear",!1===(0,nK.uy)(u.BV.state.gradientDepth,p)){h.hu("NHWC"===a,()=>`Error in fused conv2d: got dataFormat of ${a} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let u=(0,J.T)(e,t,n,r,a,i,o);return null!=f&&(u=(0,s.I)(u,f)),(0,nK.QH)(u,p,d,m)}let b=(0,c._1)(e,"x","conv2d","float32"),v=(0,c._1)(t,"filter","conv2d","float32"),w=b,x=!1;3===b.rank&&(x=!0,w=(0,E.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),h.hu(4===w.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${w.rank}.`),h.hu(4===v.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${v.rank}.`),S.m("fused conv2d",r,o);let _="NHWC"===a?w.shape[3]:w.shape[1];h.hu(v.shape[2]===_,()=>`Error in conv2d: depth of input (${_}) must match input depth for filter ${v.shape[2]}.`),h.hu(S.jT(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let k=S.Ix(w.shape,v.shape,n,i,r,o);if(null!=f&&(g=(0,c._1)(f,"bias","fused conv2d"),[g]=(0,nP.makeTypesMatch)(g,b),"NHWC"===a?nH.assertAndGetBroadcastShape(k.outShape,g.shape):(h.hu(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),h.hu(0===g.shape.length||g.shape[0]===k.outChannels||1===g.shape[0],()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${k.outChannels})`))),null!=d){let e=d.shape;if(h.hu(e.length<=1||3===e.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`),1===e.length)h.hu(1===e[0]||e[0]===k.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${k.outChannels}).`);else if(3===e.length)try{nH.assertAndGetBroadcastShape(e,k.outShape)}catch(n){let t=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${k.outShape}).`;throw Error(t)}y=(0,c._1)(d,"prelu weights","fused conv2d")}let I=(e,t)=>{h.hu("NHWC"===a,()=>`Error in gradient of fused conv2D: got dataFormat of ${a} but only NHWC is currently supported.`);let[o,s,u,l]=t,c=(0,nK.Fr)(e,u,p);h.hu(S.I0(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let f=(0,nX._)(s.shape,c,o,n,r),d=(0,nq.p)(s,c,o.shape,n,r),m=[f,d];if(null!=l){let e=(0,nK.pf)(l,c);m.push(e)}return m},N={x:w,filter:v,bias:g,preluActivationWeights:y},T={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:p,leakyreluAlpha:m};if(null==f){let e=(0,nG.cb)((e,t,n)=>{let r=u.BV.runKernel(l._V0,N,T);return n([t,e,r]),x&&(r=(0,E.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}});return e(w,v)}{let e=(0,nG.cb)((e,t,n,r)=>{let a=u.BV.runKernel(l._V0,N,T);return r([t,e,a,n]),x&&(a=(0,E.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}});return e(w,v,g)}}});var nY=n(8098),nQ=n(4375);let nJ=(0,f.op)({fusedDepthwiseConv2d_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function({x:e,filter:t,strides:n,pad:r,dataFormat:a="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:f,activation:p="linear",preluActivationWeights:d,leakyreluAlpha:m}){let g,y;if(!1===(0,nK.uy)(u.BV.state.gradientDepth,p)){let u=(0,ec.B)(e,t,n,r,a,i,o);return null!=f&&(u=(0,s.I)(u,f)),(0,nK.QH)(u,p,d,m)}let b=(0,c._1)(e,"x","depthwiseConv2d","float32"),v=(0,c._1)(t,"filter","depthwiseConv2d","float32"),w=b,x=!1;3===b.rank&&(x=!0,w=(0,E.X)(b,[1,b.shape[0],b.shape[1],b.shape[2]])),h.hu(4===w.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${w.rank}.`),h.hu(4===v.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${v.rank}.`),h.hu(w.shape[3]===v.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${w.shape[3]}) must match the inChannels dimension in filter ${v.shape[2]}.`),null==i&&(i=[1,1]),h.hu(S.jT(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),S.m("fused depthwiseConv2d",r,o);let _=S.Ix(w.shape,v.shape,n,i,r,o,!0);null!=f&&(g=(0,c._1)(f,"bias","fused conv2d"),[g]=(0,nP.makeTypesMatch)(g,b),nH.assertAndGetBroadcastShape(_.outShape,g.shape)),null!=d&&(y=(0,c._1)(d,"prelu weights","fused depthwiseConv2d"));let k=(e,t)=>{h.hu(S.I0(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);let[a,s,u,l]=t,c=(0,nK.Fr)(e,u,p),f=(0,nQ.v)(s.shape,c,a,n,r,i,o),d=(0,nY.z)(s,c,a.shape,n,r,i,o);if(null!=l){let e=(0,nK.pf)(g,c);return[f,d,e]}return[f,d]},I={x:w,filter:v,bias:g,preluActivationWeights:y},N={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o,activation:p,leakyreluAlpha:m};if(null==f){let e=(0,nG.cb)((e,t,n)=>{let r=u.BV.runKernel(l.luS,I,N);return n([t,e,r]),x&&(r=(0,E.X)(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:k}});return e(w,v)}{let e=(0,nG.cb)((e,t,n,r)=>{let a=u.BV.runKernel(l.luS,I,N);return r([t,e,a,n]),x&&(a=(0,E.X)(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:k}});return e(w,v,g)}}}),n0=(0,f.op)({fusedMatMul_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:a,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:f=.2}){let p,d;if(!1===(0,nK.uy)(u.BV.state.gradientDepth,i)){let u=(0,A.O)(e,t,n,r);return null!=a&&(u=(0,s.I)(u,a)),(0,nK.QH)(u,i,o,f)}let m=(0,c._1)(e,"a","fused matMul"),g=(0,c._1)(t,"b","fused matMul");[m,g]=(0,nP.makeTypesMatch)(m,g);let y=n?m.shape[m.rank-2]:m.shape[m.rank-1],b=r?g.shape[g.rank-1]:g.shape[g.rank-2],v=n?m.shape[m.rank-1]:m.shape[m.rank-2],w=r?g.shape[g.rank-2]:g.shape[g.rank-1],x=m.shape.slice(0,-2),_=g.shape.slice(0,-2),k=h.NA(x),S=h.NA(_);h.hu(y===b,()=>`Error in fused matMul: inner shapes (${y}) and (${b}) of Tensors with shapes ${m.shape} and ${g.shape} and transposeA=${n} and transposeB=${r} must match.`);let I=nH.assertAndGetBroadcastShape(m.shape.slice(0,-2),g.shape.slice(0,-2)),N=I.concat([v,w]),T=n?(0,E.X)(m,[k,y,v]):(0,E.X)(m,[k,v,y]),C=r?(0,E.X)(g,[S,w,b]):(0,E.X)(g,[S,b,w]);null!=a&&(p=(0,c._1)(a,"bias","fused matMul"),[p]=(0,nP.makeTypesMatch)(p,m),nH.assertAndGetBroadcastShape(N,p.shape)),null!=o&&(d=(0,c._1)(o,"prelu weights","fused matMul"));let O=(e,t)=>{let o,s;let[u,l,c,h]=t,f=(0,nK.Fr)((0,E.X)(e,c.shape),c,i);if(n||r?!n&&r?(o=(0,A.O)(f,l,!1,!1),s=(0,A.O)(f,u,!0,!1)):n&&!r?(o=(0,A.O)(l,f,!1,!0),s=(0,A.O)(u,f,!1,!1)):(o=(0,A.O)(l,f,!0,!0),s=(0,A.O)(f,u,!0,!0)):(o=(0,A.O)(f,l,!1,!0),s=(0,A.O)(u,f,!0,!1)),null==a)return[o,s];{let e=(0,nK.pf)(h,f);return[o,s,e]}},R={a:T,b:C,bias:p,preluActivationWeights:d},D={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:f};if(null==a){let e=(0,nG.cb)((e,t,n)=>{let r=u.BV.runKernel(l.usg,R,D);return n([e,t,r]),{value:(0,E.X)(r,N),gradFunc:O}});return e(T,C)}{let e=(0,nG.cb)((e,t,n,r)=>{let a=u.BV.runKernel(l.usg,R,D);return r([e,t,a,n]),{value:(0,E.X)(a,N),gradFunc:O}});return e(T,C,p)}}}),n1=(0,f.op)({hammingWindow_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){return nz(e,.54,.46)}}),n2=(0,f.op)({hannWindow_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){return nz(e,.5,.5)}}),n3=(0,f.op)({frame_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=!1,a=0){let i=0,o=[];for(;i+t<=e.size;)o.push((0,R.t)(e,i,t)),i+=n;if(r)for(;i<e.size;){let r=i+t-e.size,s=(0,T.z)([(0,R.t)(e,i,t-r),(0,eE.h)([r],a)]);o.push(s),i+=n}return 0===o.length?nf([],[0,t]):(0,E.X)((0,T.z)(o),[o.length,t])}}),n4=(0,f.op)({stft_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a=n2){null==r&&(r=nj(t));let i=n3(e,t,n),o=(0,C.d)(i,a(t));return(0,t9.Q)(o,r)}}),n6=(0,f.op)({cropAndResize_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a="bilinear",i=0){let o=(0,c._1)(e,"image","cropAndResize"),s=(0,c._1)(t,"boxes","cropAndResize","float32"),f=(0,c._1)(n,"boxInd","cropAndResize","int32"),p=s.shape[0];h.hu(4===o.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),h.hu(2===s.rank&&4===s.shape[1],()=>`Error in cropAndResize: boxes must be have size [${p},4] but had shape ${s.shape}.`),h.hu(1===f.rank&&f.shape[0]===p,()=>`Error in cropAndResize: boxInd must be have size [${p}] but had shape ${s.shape}.`),h.hu(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),h.hu(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),h.hu("bilinear"===a||"nearest"===a,()=>`method must be bilinear or nearest, but was ${a}`);let d=u.BV.runKernel(l.VcC,{image:o,boxes:s,boxInd:f},{method:a,extrapolationValue:i,cropSize:r});return d}}),n5=(0,f.op)({flipLeftRight_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,c._1)(e,"image","flipLeftRight","float32");h.hu(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let n=u.BV.runKernel(l.Uyb,{image:t},{});return n}}),n8=(0,f.op)({grayscaleToRGB_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,c._1)(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];h.hu(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),h.hu(1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let a=Array(t.rank);return a.fill(1,0,n),a[n]=3,(0,eS.G)(t,a)}}),n7=(0,f.op)({rotateWithOffset_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=0,r=.5){let a=(0,c._1)(e,"image","rotateWithOffset","float32");h.hu(4===a.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${a.rank}.`);let i=u.BV.runKernel(l.b9H,{image:a},{radians:t,fillValue:n,center:r});return i}});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);let o=e.shape[0];return n=Math.min(n,o),h.hu(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),h.hu(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),h.hu(4===e.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),h.hu(1===t.rank,()=>"scores must be a 1D tensor"),h.hu(t.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${t.shape[0]}`),h.hu(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}let re=(0,f.op)({nonMaxSuppression_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let i=(0,c._1)(e,"boxes","nonMaxSuppression","float32"),o=(0,c._1)(t,"scores","nonMaxSuppression","float32"),s=n9(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;let h={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return u.BV.runKernel(l.uv1,{boxes:i,scores:o},h)}});var rt=n(8329);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function rn(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY){let i=(0,c._1)(e,"boxes","nonMaxSuppressionAsync"),o=(0,c._1)(t,"scores","nonMaxSuppressionAsync"),s=n9(i,o,n,r,a);n=s.maxOutputSize,r=s.iouThreshold,a=s.scoreThreshold;let u=await Promise.all([i.data(),o.data()]),l=u[0],h=u[1],{selectedIndices:f}=(0,rt.GP)(l,h,n,r,a);return i!==e&&i.dispose(),o!==t&&o.dispose(),nh(f,"int32")}let rr=(0,f.op)({nonMaxSuppressionWithScore_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){let o=(0,c._1)(e,"boxes","nonMaxSuppression"),s=(0,c._1)(t,"scores","nonMaxSuppression"),h=n9(o,s,n,r,a,i);n=h.maxOutputSize,r=h.iouThreshold,a=h.scoreThreshold,i=h.softNmsSigma;let f={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},p=u.BV.runKernel(l.W0H,{boxes:o,scores:s},f);return{selectedIndices:p[0],selectedScores:p[1]}}});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ra(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=0){let o=(0,c._1)(e,"boxes","nonMaxSuppressionAsync"),s=(0,c._1)(t,"scores","nonMaxSuppressionAsync"),u=n9(o,s,n,r,a,i);n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,i=u.softNmsSigma;let l=await Promise.all([o.data(),s.data()]),h=l[0],f=l[1],{selectedIndices:p,selectedScores:d}=(0,rt.pA)(h,f,n,r,a,i);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:nh(p,"int32"),selectedScores:nh(d)}}let ri=(0,f.op)({nonMaxSuppressionPadded_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){let o=(0,c._1)(e,"boxes","nonMaxSuppression"),s=(0,c._1)(t,"scores","nonMaxSuppression"),h=n9(o,s,n,r,a,null),f=h.maxOutputSize,p=h.iouThreshold,d=h.scoreThreshold,m=u.BV.runKernel(l.cye,{boxes:o,scores:s},{maxOutputSize:f,iouThreshold:p,scoreThreshold:d,padToMaxOutputSize:i});return{selectedIndices:m[0],validOutputs:m[1]}}});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ro(e,t,n,r=.5,a=Number.NEGATIVE_INFINITY,i=!1){let o=(0,c._1)(e,"boxes","nonMaxSuppressionAsync"),s=(0,c._1)(t,"scores","nonMaxSuppressionAsync"),u=n9(o,s,n,r,a,null),l=u.maxOutputSize,h=u.iouThreshold,f=u.scoreThreshold,[p,d]=await Promise.all([o.data(),s.data()]),{selectedIndices:m,validOutputs:g}=(0,rt.qP)(p,d,l,h,f,i);return o!==e&&o.dispose(),s!==t&&s.dispose(),{selectedIndices:nh(m,"int32"),validOutputs:(0,tG.i)(g,"int32")}}var rs=n(3305),ru=n(5098);let rl=(0,f.op)({threshold_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t="binary",n=!1,r=.5){let a,i,o,u;let l=(0,c._1)(e,"image","threshold"),f=l.shape[0]*l.shape[1],p=(0,C.d)(nh([r]),255);if(h.hu(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),h.hu(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),h.hu("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),h.hu("otsu"===t||"binary"===t,()=>`Method must be binary or otsu, but was ${t}`),3===l.shape[2]){[a,i,o]=(0,ne.V)(l,[1,1,1],-1);let e=(0,C.d)(a,.2989),t=(0,C.d)(i,.587),n=(0,C.d)(o,.114);u=(0,s.I)((0,s.I)(e,t),n)}else u=e;if("otsu"===t){let e=U((0,I.p)((0,tW.N)(u),"int32"),(0,nl.X)([]),256);p=function(e,t){let n,r,a,i,o,u,l=nh([-1]),c=nh([0]),h=nh([0]);for(let f=0;f<e.size-1;f++){n=(0,R.t)(e,0,f+1),r=(0,R.t)(e,f+1),o=(0,ep.h)((0,ns.S)(n),t),u=(0,ep.h)((0,ns.S)(r),t);let p=(0,ns.S)((0,C.d)(n,tD(0,n.size)));a=(0,ep.h)(p,(0,ns.S)(n));let d=(0,eE.h)(r.shape,n.size),m=(0,s.I)(tD(0,r.size),d),g=(0,C.d)(r,m);i=(0,ep.h)((0,ns.S)(g),(0,ns.S)(r));let y=(0,tr.l)(a,i),b=(0,tr.l)(a,i),v=(0,C.d)(o,u);h=(0,C.d)((0,C.d)(v,y),b);let w=(0,eC.p)(h,c);c=(0,nS.a)(w,h,c),l=(0,nS.a)(w,nh([f]),l)}return l}(e,f)}let d=n?(0,eB.z)(u,p):(0,eC.p)(u,p),m=(0,I.p)((0,C.d)(d,255),"int32");return m}}),rc=(0,f.op)({transform_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n="nearest",r="constant",a=0,i){let o=(0,c._1)(e,"image","transform","float32"),s=(0,c._1)(t,"transforms","transform","float32");return h.hu(4===o.rank,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),h.hu(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),h.hu(null==i||2===i.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`),u.BV.runKernel(l.wx7,{image:o,transforms:s},{interpolation:n,fillMode:r,fillValue:a,outputShape:i})}}),rh=(0,f.op)({bandPart_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){(0,h.hu)(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),(0,h.hu)(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);let r=(0,c._1)(e,"a","bandPart");(0,h.hu)(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let a=r.shape,[i,o]=r.shape.slice(-2);if(!(t<=i))throw Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${i}).`);if(!(n<=o))throw Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`);t<0&&(t=i),n<0&&(n=o);let s=(0,E.X)(tD(0,i,1,"int32"),[-1,1]),u=tD(0,o,1,"int32"),l=(0,tr.l)(s,u),f=(0,eH.H)((0,eB.z)(l,(0,tG.i)(+t,"int32")),(0,eO.b)(l,(0,tG.i)(-n,"int32"))),p=(0,nT.l)([i,o],r.dtype);return(0,E.X)((0,na.k)((0,nx.H)((0,E.X)(r,[-1,i,o])).map(e=>(0,nS.a)(f,e,p))),a)}}),rf=(0,f.op)({gramSchmidt_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;if(Array.isArray(e)){t=!1,(0,h.hu)(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let t=1;t<e.length;++t)(0,h.hu)(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=(0,ne.V)(e,e.shape[0],0).map(e=>(0,nr.L)(e,[0]));(0,h.hu)(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let t=0;t<e.length;++t)n.push(u.BV.tidy(()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){let t=(0,C.d)((0,ns.S)((0,C.d)(n[r],e)),n[r]);e=(0,tr.l)(e,t)}return(0,ep.h)(e,(0,nD.K)(e,"euclidean"))}));return t?(0,na.k)(n,0):n}});var rp=n(4368);function rd(e,t=!1){return u.BV.tidy(()=>{(0,h.hu)(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],a=eI(n),i=(0,H.d)(e),o=nf([[1]],[1,1]),s=(0,H.d)(o),l=n>=r?r:n;for(let e=0;e<l;++e){let t=i,l=s,c=a;[s,i,a]=u.BV.tidy(()=>{let t=(0,R.t)(i,[e,e],[n-e,1]),u=(0,nD.K)(t),l=(0,R.t)(i,[e,e],[1,1]),c=(0,nS.a)((0,eC.p)(l,0),nf([[-1]]),nf([[1]])),h=(0,tr.l)(l,(0,C.d)(c,u)),f=(0,ep.h)(t,h);s=1===f.shape[0]?(0,H.d)(o):(0,T.z)([o,(0,R.t)(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);let p=(0,ts.W)((0,ep.h)((0,A.O)(c,h),u)),d=(0,R.t)(i,[e,0],[n-e,r]),m=(0,C.d)(p,s),g=(0,nR.p)(s);if(0===e)i=(0,tr.l)(d,(0,A.O)(m,(0,A.O)(g,d)));else{let t=(0,tr.l)(d,(0,A.O)(m,(0,A.O)(g,d)));i=(0,T.z)([(0,R.t)(i,[0,0],[e,r]),t],0)}let y=(0,nR.p)(m),b=(0,R.t)(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=(0,tr.l)(b,(0,A.O)((0,A.O)(b,s),y));else{let t=(0,tr.l)(b,(0,A.O)((0,A.O)(b,s),y));a=(0,T.z)([(0,R.t)(a,[0,0],[n,e]),t],1)}return[s,i,a]}),(0,rp.B9)([t,l,c])}return!t&&n>r&&(a=(0,R.t)(a,[0,0],[n,r]),i=(0,R.t)(i,[0,0],[r,r])),[a,i]})}let rm=(0,f.op)({qr_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=!1){if((0,h.hu)(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),2===e.rank)return rd(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=(0,nx.H)((0,E.X)(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(e=>{let[n,r]=rd(e,t);a.push(n),i.push(r)});let o=(0,E.X)((0,na.k)(a,0),e.shape),s=(0,E.X)((0,na.k)(i,0),e.shape);return[o,s]}}});var rg=n(9876);let ry=(0,f.op)({computeWeightedLoss_:function(e,t,n=rg.I.SUM_BY_NONZERO_WEIGHTS){let r=(0,c._1)(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=(0,c._1)(t,"weights","computeWeightedLoss"));let i=null==a?r:(0,C.d)(r,a);if(n===rg.I.NONE)return i;if(n===rg.I.SUM)return(0,ns.S)(i);if(n===rg.I.MEAN){if(null==a)return(0,e3.J)(i);{let e=r.size/a.size,t=(0,ep.h)((0,ns.S)(i),(0,ns.S)(a));return e>1?(0,ep.h)(t,(0,tG.i)(e)):t}}if(n===rg.I.SUM_BY_NONZERO_WEIGHTS){if(null==a)return(0,ep.h)((0,ns.S)(i),(0,tG.i)(r.size));{let e=(0,C.d)(a,(0,e4.i)(r.shape)),t=(0,I.p)((0,ns.S)((0,tu.Q)(e,(0,tG.i)(0))),"float32");return(0,ep.h)((0,ns.S)(i),t)}}throw Error(`Unknown reduction: ${n}`)}}),rb=(0,f.op)({absoluteDifference_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=rg.I.SUM_BY_NONZERO_WEIGHTS){let i=(0,c._1)(e,"labels","absoluteDifference"),o=(0,c._1)(t,"predictions","absoluteDifference"),s=null;null!=n&&(s=(0,c._1)(n,"weights","absoluteDifference")),(0,h.k5)(i.shape,o.shape,"Error in absoluteDifference: ");let u=(0,a.W)((0,tr.l)(i,o));return ry(u,s,r)}}),rv=(0,f.op)({cosineDistance_:function(e,t,n,r,a=rg.I.SUM_BY_NONZERO_WEIGHTS){let i=(0,c._1)(e,"labels","cosineDistance"),o=(0,c._1)(t,"predictions","cosineDistance"),s=null;null!=r&&(s=(0,c._1)(r,"weights","cosineDistance")),(0,h.k5)(i.shape,o.shape,"Error in cosineDistance: ");let u=(0,tG.i)(1),l=(0,tr.l)(u,(0,ns.S)((0,C.d)(i,o),n,!0));return ry(l,s,a)}}),rw=(0,f.op)({hingeLoss_:function(e,t,n,r=rg.I.SUM_BY_NONZERO_WEIGHTS){let a=(0,c._1)(e,"labels","hingeLoss"),i=(0,c._1)(t,"predictions","hingeLoss"),o=null;null!=n&&(o=(0,c._1)(n,"weights","hingeLoss")),(0,h.k5)(a.shape,i.shape,"Error in hingeLoss: ");let s=(0,tG.i)(1);a=(0,tr.l)((0,C.d)((0,tG.i)(2),a),s);let u=(0,tF.U)((0,tr.l)(s,(0,C.d)(a,i)));return ry(u,o,r)}}),rx=(0,f.op)({huberLoss_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=1,i=rg.I.SUM_BY_NONZERO_WEIGHTS){let o=(0,c._1)(e,"labels","huberLoss"),u=(0,c._1)(t,"predictions","huberLoss"),l=null;null!=n&&(l=(0,c._1)(n,"weights","huberLoss")),(0,h.k5)(o.shape,u.shape,"Error in huberLoss: ");let f=(0,tG.i)(r),p=(0,a.W)((0,tr.l)(u,o)),d=(0,e7.L)(p,f),m=(0,tr.l)(p,d),g=(0,s.I)((0,C.d)((0,tG.i)(.5),(0,tn.h)(d)),(0,C.d)(f,m));return ry(g,l,i)}}),r_=(0,f.op)({logLoss_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=1e-7,a=rg.I.SUM_BY_NONZERO_WEIGHTS){let i=(0,c._1)(e,"labels","logLoss"),o=(0,c._1)(t,"predictions","logLoss"),u=null;null!=n&&(u=(0,c._1)(n,"weights","logLoss")),(0,h.k5)(i.shape,o.shape,"Error in logLoss: ");let l=(0,tG.i)(1),f=(0,tG.i)(r),p=(0,ts.W)((0,C.d)(i,(0,ej.c)((0,s.I)(o,f)))),d=(0,C.d)((0,tr.l)(l,i),(0,ej.c)((0,s.I)((0,tr.l)(l,o),f))),m=(0,tr.l)(p,d);return ry(m,u,a)}}),rk=(0,f.op)({meanSquaredError_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=rg.I.SUM_BY_NONZERO_WEIGHTS){let a=(0,c._1)(e,"labels","meanSquaredError"),i=(0,c._1)(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=(0,c._1)(n,"weights","meanSquaredError")),(0,h.k5)(a.shape,i.shape,"Error in meanSquaredError: ");let s=(0,nn.$)(a,i);return ry(s,o,r)}}),rS=(0,f.op)({sigmoidCrossEntropy_:function(e,t,n,r=0,i=rg.I.SUM_BY_NONZERO_WEIGHTS){let o=(0,c._1)(e,"multiClassLabels","sigmoidCrossEntropy"),u=(0,c._1)(t,"logits","sigmoidCrossEntropy"),l=null;if(null!=n&&(l=(0,c._1)(n,"weights","sigmoidCrossEntropy")),(0,h.k5)(o.shape,u.shape,"Error in sigmoidCrossEntropy: "),r>0){let e=(0,tG.i)(r),t=(0,tG.i)(1),n=(0,tG.i)(.5);o=(0,s.I)((0,C.d)(o,(0,tr.l)(t,e)),(0,C.d)(n,e))}let f=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(e,"labels","sigmoidCrossEntropyWithLogits"),r=(0,c._1)(t,"logits","sigmoidCrossEntropyWithLogits");(0,h.k5)(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=(0,tF.U)(r),o=(0,C.d)(r,n),u=(0,ez.K)((0,ex.Q)((0,ts.W)((0,a.W)(r))));return(0,s.I)((0,tr.l)(i,o),u)}(o,u);return ry(f,l,i)}}),rI=(0,f.op)({softmaxCrossEntropy_:function(e,t,n,r=0,a=rg.I.SUM_BY_NONZERO_WEIGHTS){let i=(0,c._1)(e,"onehotLabels","softmaxCrossEntropy"),o=(0,c._1)(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=(0,c._1)(n,"weights","softmaxCrossEntropy")),(0,h.k5)(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){let e=(0,tG.i)(r),t=(0,tG.i)(1),n=(0,tG.i)(i.shape[1]);i=(0,s.I)((0,C.d)(i,(0,tr.l)(t,e)),(0,ep.h)(e,n))}let l=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);let r=(0,nG.cb)((e,t,r)=>{let a=(0,eG.l)(t,[n],!0),i=(0,tr.l)((0,I.p)(t,"float32"),a);r([e,i]);let o=(0,ts.W)((0,C.d)(i,e)),s=(0,ns.S)(o,[n]),u=(e,t)=>{let[r,a]=t,i=(0,tt.rv)(e.shape,[n]);return[(0,C.d)((0,E.X)(e,i),(0,tr.l)((0,I.p)(r,"float32"),(0,ex.Q)(a))),(0,C.d)((0,E.X)(e,i),(0,tr.l)((0,ex.Q)(a),(0,I.p)(r,"float32")))]};return{value:s,gradFunc:u}});return r(e,t)}(i,o);return ry(l,u,a)}}),rE=(0,f.op)({sparseFillEmptyRows_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=(0,c._1)(e,"indices","sparseFillEmptyRows","int32"),i=(0,c._1)(t,"values","sparseFillEmptyRows"),o=(0,c._1)(n,"denseShape","sparseFillEmptyRows","int32"),s=(0,c._1)(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw Error(`Indices should be Tensor2D but received shape
        ${a.shape}`);if(1!==i.rank)throw Error(`Values should be Tensor1D but received shape ${i.shape}`);if(1!==o.rank)throw Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(0!==s.rank)throw Error(`Default value should be a scalar but received shape ${s.shape}`);let h=u.BV.runKernel(l.O3z,{indices:a,values:i,denseShape:o,defaultValue:s});return{outputIndices:h[0],outputValues:h[1],emptyRowIndicator:h[2],reverseIndexMap:h[3]}}}),rN=(0,f.op)({sparseReshape_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"inputIndices","sparseReshape","int32"),a=(0,c._1)(t,"inputShape","sparseReshape","int32"),i=(0,c._1)(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(1!==a.rank)throw Error(`Input shape should be Tensor1D but received shape ${a.shape}`);if(1!==i.rank)throw Error(`New shape should be Tensor1D but received shape ${i.shape}`);let o=u.BV.runKernel(l.nhH,{inputIndices:r,inputShape:a,newShape:i});return{outputIndices:o[0],outputShape:o[1]}}}),rT=(0,f.op)({sparseSegmentMean_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"data","sparseSegmentMean"),a=(0,c._1)(t,"indices","sparseSegmentMean","int32"),i=(0,c._1)(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw Error(`Indices should be Tensor1D but received shape
          ${a.shape}`);if(1!==i.rank)throw Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);return u.BV.runKernel(l.w3H,{data:r,indices:a,segmentIds:i})}}),rA=(0,f.op)({sparseSegmentSum_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=(0,c._1)(e,"data","sparseSegmentSum"),a=(0,c._1)(t,"indices","sparseSegmentSum","int32"),i=(0,c._1)(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw Error(`Indices should be Tensor1D but received shape
         ${a.shape}`);if(1!==i.rank)throw Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);return u.BV.runKernel(l.ZjV,{data:r,indices:a,segmentIds:i})}}),rC=(0,f.op)({stringNGrams_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,i,o,s){let h=(0,c._1)(e,"data","stringNGrams","string");if("string"!==h.dtype)throw Error("Data must be of datatype string");if(1!==h.shape.length)throw Error(`Data must be a vector, saw: ${h.shape}`);let f=(0,c._1)(t,"dataSplits","stringNGrams");if("int32"!==f.dtype)throw Error("Data splits must be of datatype int32");let p=u.BV.runKernel(l._JP,{data:h,dataSplits:f},{separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s});return{nGrams:p[0],nGramsSplits:p[1]}}}),rO=(0,f.op)({stringSplit_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=!0){let r=(0,c._1)(e,"input","stringSplit","string"),a=(0,c._1)(t,"delimiter","stringSplit","string");if(1!==r.rank)throw Error(`Input should be Tensor1D but received shape ${r.shape}`);if(0!==a.rank)throw Error(`Delimiter should be a scalar but received shape ${a.shape}`);let i=u.BV.runKernel(l.s1s,{input:r,delimiter:a},{skipEmpty:n});return{indices:i[0],values:i[1],shape:i[2]}}}),rR=(0,f.op)({stringToHashBucketFast_:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,c._1)(e,"input","stringToHashBucketFast","string");if(t<=0)throw Error("Number of buckets must be at least 1");return u.BV.runKernel(l.XkS,{input:n},{numBuckets:t})}}),rD={fft:t5.k,ifft:t8.S,rfft:t9.Q,irfft:t7.w},rP={hammingWindow:n1,hannWindow:n2,frame:n3,stft:n4},r$={flipLeftRight:n5,grayscaleToRGB:n8,resizeNearestNeighbor:ru.j,resizeBilinear:rs.I,rotateWithOffset:n7,cropAndResize:n6,nonMaxSuppression:re,nonMaxSuppressionAsync:rn,nonMaxSuppressionWithScore:rr,nonMaxSuppressionWithScoreAsync:ra,nonMaxSuppressionPadded:ri,nonMaxSuppressionPaddedAsync:ro,threshold:rl,transform:rc},rF={bandPart:rh,gramSchmidt:rf,qr:rm},rM={absoluteDifference:rb,computeWeightedLoss:ry,cosineDistance:rv,hingeLoss:rw,huberLoss:rx,logLoss:r_,meanSquaredError:rk,sigmoidCrossEntropy:rS,softmaxCrossEntropy:rI},rB={sparseFillEmptyRows:rE,sparseReshape:rN,sparseSegmentMean:rT,sparseSegmentSum:rA},rL={stringNGrams:rC,stringSplit:rO,stringToHashBucketFast:rR}},9682:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({pad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=0){let o=(0,i._1)(e,"x","pad");if(0===o.rank)throw Error("pad(scalar) is not defined. Pass non-scalar to pad");return r.BV.runKernel(a.lyA,{x:o},{paddings:t,constantValue:n})}})},5860:function(e,t,n){"use strict";n.d(t,{d:function(){return f}});var r=n(3740),a=n(569),i=n(5176),o=n(8441),s=n(2582),u=n(1174),l=n(2668),c=n(4968),h=n(7918);let f=(0,l.op)({pool_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,l,f,p,d){let m;null==f&&(f=[1,1]),null==p&&(p=1),0===l&&(l="valid");let g=(0,r._1)(e,"x","maxPool"),y=g,b=!1;3===g.rank&&(b=!0,y=(0,c.X)(g,[1,g.shape[0],g.shape[1],g.shape[2]])),a.hu(s.jT(p,f),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${p} and dilations '${f}'`);let v=s.Xw(y.shape,t,p,f,l),w=[v.dilationHeight,v.dilationWidth];m="same"===l?function(e,t){let n=e.map((e,n)=>e+(e-1)*(t[n]-1)),r=n.map(e=>e-1),a=r.map(e=>Math.floor(e/2)),i=r.map((e,t)=>e-a[t]);return r.map((e,t)=>[a[t],i[t]])}([v.filterHeight,v.filterWidth],w):[[0,0],[0,0]];let x=1===w[0]&&1===w[1],[_,k]=function(e,t,n){let r=n.map(e=>e[0]),a=n.map(e=>e[1]),i=e.concat(r,a),o=t.map((e,t)=>(e-i[t]%e)%e),s=a.map((e,t)=>e+o[t]),u=t.map((e,t)=>[r[t],s[t]]),l=t.map((e,t)=>[0,o[t]]);return[u,l]}([v.inHeight,v.inWidth],w,m),S=x?l:"valid",I=x?y:(0,h.f)(y,w,_),E="avg"===n?()=>(0,i.w)(I,t,p,S,d):()=>(0,u._)(I,t,p,S,d),N=E(),T=x?N:(0,o.E)(N,w,k);return b?(0,c.X)(T,[T.shape[1],T.shape[2],T.shape[3]]):T}})},3453:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({pow_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"base","pow"),s=(0,o._1)(t,"exp","pow");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.pe_,u)}})},8151:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({prelu_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"x","prelu"),o=(0,i._1)(t,"alpha","prelu");return r.BV.runKernel(a.o0g,{x:n,alpha:o})}})},9798:function(e,t,n){"use strict";/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r(e,t=!1){console.log(e.toString(t))}n.d(t,{S:function(){return r}})},9451:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(2271),s=n(2668);let u=(0,s.op)({prod_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let s=(0,i._1)(e,"x","prod");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));let u={x:s};return r.BV.runKernel(a.DlI,u,{axis:t,keepDims:n})}})},766:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({real_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"input","real");return r.BV.runKernel(a.xJR,{input:t})}})},9036:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({reciprocal_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","reciprocal");return r.BV.runKernel(a.$HU,{x:t})}})},7409:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({relu_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","relu");return r.BV.runKernel(a.qkr,{x:t})}})},3582:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({relu6_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","relu6");return r.BV.runKernel(a.SbG,{x:t})}})},4968:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({reshape_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"x","reshape","string_or_numeric");return r.BV.runKernel(a.HZH,{x:n},{shape:t})}})},7486:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({reverse_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"x","reverse");return r.BV.runKernel(a.mKl,{x:n},{dims:t})}})},7809:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({round_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","round");return r.BV.runKernel(a.e07,{x:t})}})},2634:function(e,t,n){"use strict";n.d(t,{b:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({rsqrt_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","rsqrt","float32");return r.BV.runKernel(a.bV0,{x:t})}})},9494:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(569),a=n(7852);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(e,t){if(((0,r.fU)(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&(0,r.fU)(e)&&!(e instanceof Uint8Array))throw Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,a.H)(e,[],[],t)}},3028:function(e,t,n){"use strict";n.r(t),n.d(t,{calculateShapes:function(){return o},validateInput:function(){return i},validateUpdateShape:function(){return a}});var r=n(569);function a(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${a}.`;if(n.rank<a)throw Error(i+` update.rank < ${a}. `);if(e.length<r+(n.rank-a))throw Error(i+` Output shape length < ${r+(n.rank-a)}`);if(n.rank!==a+e.length-r)throw Error(i+` update.rank != ${a+e.length-r}`);for(let e=0;e<a;++e)if(n.shape[e]!==t.shape[e])throw Error(i+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-a;++t)if(n.shape[t+a]!==e[t+r])throw Error(i+` updates.shape[${t+a}] (${n.shape[t+a]}) != shape[${t+a}] (${e[t+a]})`)}function i(e,t,n){if(t.rank<1)throw Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw Error(`Updates specified for empty output. updates shape: ${e.shape}`)}a(n,t,e)}function o(e,t,n){let a=t.shape.length,i=a>1?t.shape[a-1]:1,o=n.length,s=1;for(let e=i;e<o;++e)s*=n[e];let u=(0,r.NA)(t.shape)/(i<1?1:i),l=[...(0,r.e3)(n.slice(0,i)),1],c=(0,r.NA)(n);return{sliceRank:i,numUpdates:u,sliceSize:s,strides:l,outputSize:c}}},5503:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({selu_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","selu");return r.BV.runKernel(a.oFR,{x:t})}})},3179:function(e,t,n){"use strict";n.d(t,{$:function(){return a},y:function(){return r}});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r=1.7580993408473768,a=1.0507009873554805},8678:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var r=n(3740),a=n(569),i=n(4794),o=n(4718),s=n(2668),u=n(4968);let l=(0,s.op)({separableConv2d_:function(e,t,n,s,l,c=[1,1],h="NHWC"){let f=(0,r._1)(e,"x","separableConv2d"),p=(0,r._1)(t,"depthwiseFilter","separableConv2d"),d=(0,r._1)(n,"pointwiseFilter","separableConv2d"),m=f,g=!1;if(3===f.rank&&(g=!0,m=(0,u.X)(f,[1,f.shape[0],f.shape[1],f.shape[2]])),"NCHW"===h)throw Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");a.hu(4===m.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${m.rank}.`),a.hu(4===p.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${p.rank}.`),a.hu(4===d.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${p.rank}.`),a.hu(1===d.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${d.shape[0]}.`),a.hu(1===d.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${d.shape[1]}.`);let y=p.shape[2],b=p.shape[3];a.hu(d.shape[2]===y*b,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${y*b}, but got ${d.shape[2]}.`);let v=(0,o.B)(m,p,s,l,h,c),w=(0,i.T)(v,d,1,"valid",h);return g?(0,u.X)(w,[w.shape[1],w.shape[2],w.shape[3]]):w}})},625:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({sigmoid_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","sigmoid","float32");return r.BV.runKernel(a.a5O,{x:t})}})},4434:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({sign_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","sign");return r.BV.runKernel(a.i5y,{x:t})}})},9331:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({sin_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","sin","float32");return r.BV.runKernel(a.RQH,{x:t})}})},3254:function(e,t,n){"use strict";n.d(t,{R:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({sinh_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","sinh");return r.BV.runKernel(a.wYB,{x:t})}})},2676:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({slice_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let o=(0,i._1)(e,"x","slice","string_or_numeric");if(0===o.rank)throw Error("Slicing scalar is not possible");return r.BV.runKernel(a.p2w,{x:o},{begin:t,size:n})}})},7650:function(e,t,n){"use strict";n.r(t),n.d(t,{assertParamsValid:function(){return a},computeFlatOffset:function(){return g},computeOutShape:function(){return o},getNormalizedAxes:function(){return l},isSliceContinous:function(){return m},maskToAxes:function(){return i},parseSliceParams:function(){return y},sliceInfo:function(){return b},startForAxis:function(){return p},startIndicesWithElidedDims:function(){return c},stopForAxis:function(){return d},stopIndicesWithElidedDims:function(){return h},stridesForAxis:function(){return f},stridesWithElidedDims:function(){return s}});var r=n(569);function a(e,t,n){let a=e.shape.length;r.hu(a===t.length,()=>`Error in slice${a}D: Length of begin ${t} must match the rank of the array (${a}).`),r.hu(a===n.length,()=>`Error in slice${a}D: Length of size ${n} must match the rank of the array (${a}).`);for(let i=0;i<a;++i)r.hu(t[i]+n[i]<=e.shape[i],()=>`Error in slice${a}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function i(e){let t=[],n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function o(e,t,n){let r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function s(e,t,n,r){let a=[...e];for(let e=a.length;e<r.length;e++)a.push(1);for(let e=0;e<n;e++)0===e?a[t]=1:(a.splice(t,0,1),a.pop());return a}function u(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function l(e,t,n,r,a,i,o,u,l){let m=e.length,g=Array(m),y=Array(m),b=Array(m);if(t.length&&n>0){let l=t[0],f=n+1;g=c(o,l,f,r,e),y=h(u,l,f,a,e),b=s(i,l,f,e)}else for(let t=0;t<m;t++)g[t]=p(o,r,i,e,t,l),y[t]=d(u,a,i,e,t,l),b[t]=f(i,t,l);return{begin:g,end:y,strides:b}}function c(e,t,n,r,a){let i=[...a],o=u(n,t);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{var s;let o=(s=a)<=t?s:s-(n-1),u=r[o];e&1<<o&&(u=0),i[a]=u}return i}function h(e,t,n,a,i){let o=[...i],s=u(n,t);for(let r=0;r<o.length;r++)if(s.indexOf(r)>-1)o[r]=Number.MAX_SAFE_INTEGER;else{var l;let i=(l=r)<=t?l:l-(n-1),s=a[i];e&1<<i&&(s=Number.MAX_SAFE_INTEGER),o[r]=s}for(let e=0;e<o.length;e++){let t=i[e];o[e]<0&&(o[e]+=t),o[e]=r.uZ(0,o[e],i[e])}return o}function f(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function p(e,t,n,a,i,o){let s=t[i],u=n[i]||1;(e&1<<i||o&1<<i||null==s)&&(s=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let l=a[i];return s<0&&(s+=l),s=r.uZ(0,s,l-1)}function d(e,t,n,a,i,o){let s=t[i],u=n[i]||1;(e&1<<i||o&1<<i||null==s)&&(s=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let l=a[i];return s<0&&(s+=l),s=u>0?r.uZ(0,s,l):r.uZ(-1,s,l-1)}function m(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function g(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function y(e,t,n){let a,i;let o=e.shape.length;return(a="number"==typeof t?[t,...Array(o-1).fill(0)]:t.length<o?t.concat(Array(o-t.length).fill(0)):t.slice()).forEach(e=>{r.hu(-1!==e,()=>"slice() does not support negative begin indexing.")}),i=(i=null==n?Array(o).fill(-1):"number"==typeof n?[n,...Array(o-1).fill(-1)]:n.length<o?n.concat(Array(o-n.length).fill(-1)):n).map((t,n)=>t>=0?t:(r.hu(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-a[n])),[a,i]}function b(e,t,n,r,a,i,o,s,u){let l;if(null==r?(l=Array(t.length)).fill(1):l=r,null!=o&&(o&o-1)!=0)throw Error("Multiple ellipses in slice is not allowed.");let c=!1,h={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};for(let e=0;e<h.dims;e++)c&&(1<<e&s)!=0&&h.numAddAxisAfterEllipsis++,1<<e&o&&(c=!0);!c&&(h.ellipsisMask|=1<<h.dims,h.dims++);let f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=Array(t.dims),t.end=Array(t.dims),t.strides=Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(h,f);let p=!0,d=!0,m=!0,g=[],y=[];for(let t=0;t<e.length;++t){let n;if(0===f.strides[t])throw Error(`strides[${t}] must be non-zero`);let r=!!(f.shrinkAxisMask&1<<t),a=e[t];if(-1===a){g.push(r?1:-1);continue}let i=[f.beginMask&1<<t,f.endMask&1<<t],o=[f.strides[t]>0?0:-1,f.strides[t]>0?a:a-1];if(r&&f.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===f.strides[t];let s=!!(f.beginMask&1<<t&&f.endMask&1<<t);if(f.beginValid&&f.endValid){if(r){let e=f.begin[t]<0?a+f.begin[t]:f.begin[t];if(f.begin[t]=e,f.end[t]=f.begin[t]+1,e<0||e>=a)throw Error(`slice index ${f.begin[t]} of dimension ${t} out of bounds.`)}else f.begin[t]=v(f.begin[t],0,f.strides[t],a,i,o),f.end[t]=v(f.end[t],1,f.strides[t],a,i,o);let e=1===f.strides[t]&&0===f.begin[t]&&f.end[t]===a;p=p&&e,d=d&&(0===t&&1===f.strides[t]||e)}else p=p&&1===f.strides[t]&&s,d=d&&(0===t&&1===f.strides[t]||s);let u=!1;if(f.beginValid&&f.endValid?(n=f.end[t]-f.begin[t],u=!0):r?(n=1,u=!0):s&&a>=0&&(n=f.strides[t]<0?-a:a,u=!0),u){let e;e=0===n||n<0!=f.strides[t]<0?0:Math.trunc(n/f.strides[t])+(n%f.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<f.finalShapeGatherIndices.length;++e){let t=f.finalShapeGatherIndices[e];t>=0?y.push(g[t]):-2===t&&y.push(1)}let b=y.filter((e,t)=>-2!==f.finalShapeGatherIndices[t]);return{finalShapeSparse:b,finalShape:y,isIdentity:p,sliceDim0:d,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function v(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{let t=e<0?r+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}},682:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({softmax_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=-1){let n=(0,i._1)(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let o={dim:t};return r.BV.runKernel(a.Gcp,{logits:n},o)}})},3694:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({softplus_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","softplus");return r.BV.runKernel(a.MRv,{x:t})}})},7918:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({spaceToBatchND_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let s=(0,i._1)(e,"x","spaceToBatchND");return o.hu(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),o.hu(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),o.hu(s.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`),r.BV.runKernel(a.TQc,{x:s},{blockShape:t,paddings:n})}})},7020:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var r=n(196),a=n(9121),i=n(569),o=n(2668);let s=(0,o.op)({fft_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){return(0,i.hu)("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`),r.BV.runKernel(a.vwp,{input:e})}})},8447:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var r=n(196),a=n(9121),i=n(569),o=n(2668);let s=(0,o.op)({ifft_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){return(0,i.hu)("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`),r.BV.runKernel(a.Qg5,{input:e})}})},4415:function(e,t,n){"use strict";n.d(t,{w:function(){return d}});var r=n(1661),a=n(6884),i=n(4386),o=n(4841),s=n(2668),u=n(766),l=n(4968),c=n(7486),h=n(9494),f=n(2676),p=n(8447);let d=(0,s.op)({irfft_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let n=e.shape[e.shape.length-1],s=e.size/n;if(n<=2){let r=(0,l.X)(e,[s,n]);t=(0,p.S)(r)}else{let d=[s,2*(n-1)],m=(0,l.X)((0,u.k)(e),[s,n]),g=(0,l.X)((0,i.a)(e),[s,n]),y=(0,c.G)((0,f.t)(m,[0,1],[s,n-2]),1),b=(0,o.d)((0,c.G)((0,f.t)(g,[0,1],[s,n-2]),1),(0,h.i)(-1)),v=(0,a.z)([m,y],1),w=(0,a.z)([g,b],1),x=(0,l.X)((0,r.P)(v,w),[d[0],d[1]]);t=(0,p.S)(x)}if(t=(0,u.k)(t),3===e.rank&&0!==e.shape[0]){let n=t,r=e.shape[0];t=(0,l.X)(t,[r,t.shape[0]/r,t.shape[1]]),n.dispose()}return t}})},3710:function(e,t,n){"use strict";n.d(t,{Q:function(){return m}});var r=n(569),a=n(1661),i=n(6884),o=n(4386),s=n(2668),u=n(766),l=n(4968),c=n(2676),h=n(8644),f=n(723),p=n(6577),d=n(7020);let m=(0,s.op)({rfft_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n;(0,r.hu)("float32"===e.dtype,()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let s=e.shape[e.shape.length-1],m=e.size/s;if(null!=t&&t<s){let r=e.shape.map(e=>0),a=e.shape.map(e=>e);a[e.shape.length-1]=t,n=(0,c.t)(e,r,a),s=t}else if(null!=t&&t>s){let r=e.shape.map(e=>e);r[e.shape.length-1]=t-s,n=(0,i.z)([e,(0,f.l)(r)],e.shape.length-1),s=t}else n=e;let g=(0,p.P)(n),y=(0,l.X)((0,a.P)(n,g),[m,s]),b=(0,d.k)(y),v=Math.floor(s/2)+1,w=(0,u.k)(b),x=(0,o.a)(b),_=(0,h.V)(w,[v,s-v],w.shape.length-1),k=(0,h.V)(x,[v,s-v],x.shape.length-1),S=n.shape.slice();return S[n.shape.length-1]=v,(0,l.X)((0,a.P)(_[0],k[0]),S)}})},8644:function(e,t,n){"use strict";n.d(t,{V:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({split_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n=0){let o=(0,i._1)(e,"x","split");return r.BV.runKernel(a.L8s,{x:o},{numOrSizeSplits:t,axis:n})}})},3261:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({sqrt_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","sqrt","float32");return r.BV.runKernel(a.FKq,{x:t})}})},248:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(196),a=n(3740),i=n(2668);let o=(0,i.op)({square_:/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,a._1)(e,"x","square");return r.BV.runKernel("Square",{x:t},{})}})},5265:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2200),u=n(2668);let l=(0,u.op)({squaredDifference_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","squaredDifference"),u=(0,o._1)(t,"b","squaredDifference");[n,u]=(0,i.makeTypesMatch)(n,u),(0,s.assertAndGetBroadcastShape)(n.shape,u.shape);let l={a:n,b:u};return r.BV.runKernel(a._tC,l,{})}})},9590:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(3740),a=n(569),i=n(2668),o=n(4968);let s=(0,i.op)({squeeze_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,r._1)(e,"x","squeeze","string_or_numeric");return(0,o.X)(n,(0,a.bp)(n.shape,t).newShape)}})},2991:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({stack_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i.sI)(e,"tensors","stack","string_or_numeric");return o.hu(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&o.hu(t<=n[0].rank,()=>"Axis must be <= rank of the tensor"),r.BV.runKernel(a.QiL,n,{axis:t})}})},1901:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({step_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i._1)(e,"x","step");return r.BV.runKernel(a.h8e,{x:n},{alpha:t})}})},5158:function(e,t,n){"use strict";n.d(t,{N:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({stridedSlice_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,o,s=0,u=0,l=0,c=0,h=0){let f=(0,i._1)(e,"x","stridedSlice","string_or_numeric");return r.BV.runKernel(a.jQk,{x:f},{begin:t,end:n,strides:o,beginMask:s,endMask:u,ellipsisMask:l,newAxisMask:c,shrinkAxisMask:h})}})},827:function(e,t,n){"use strict";n.d(t,{l:function(){return u}});var r=n(196),a=n(9121),i=n(747),o=n(3740),s=n(2668);let u=(0,s.op)({sub_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,o._1)(e,"a","sub"),s=(0,o._1)(t,"b","sub");[n,s]=(0,i.makeTypesMatch)(n,s);let u={a:n,b:s};return r.BV.runKernel(a.Tr8,u)}})},5475:function(e,t,n){"use strict";n.d(t,{S:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(2271),s=n(2668);let u=(0,s.op)({sum_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=null,n=!1){let s=(0,i._1)(e,"x","sum");"bool"===s.dtype&&(s=(0,o.p)(s,"int32"));let u={x:s};return r.BV.runKernel(a.GBy,u,{axis:t,keepDims:n})}})},1173:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({tan_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","tan","float32");return r.BV.runKernel(a.sEM,{x:t})}})},1869:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({tanh_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","tanh","float32");return r.BV.runKernel(a.MIZ,{x:t})}})},701:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(3740),a=n(7852);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i(e,t,n){let i=(0,r.C)(e,n);return(0,a.H)(e,t,i,n)}},9906:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var r=n(3740),a=n(569),i=n(7852);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o(e,t,n){if((0,a.Cq)(e),null!=t&&3!==t.length)throw Error("tensor3d() requires shape to have three numbers");let o=(0,r.C)(e,n);if(3!==o.length&&1!==o.length)throw Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==t)throw Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,i.H)(e,t,o,n)}},7852:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(196),a=n(569),i=n(3418);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o(e,t,n,o){if(null==o&&(o=(0,a.D2)(e)),"complex64"===o)throw Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!(0,a.fU)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){(0,a.Mu)(t);let e=(0,a.NA)(t),r=(0,a.NA)(n);(0,a.hu)(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let e=0;e<n.length;++e){let r=n[e],i=e!==n.length-1||r!==(0,a.NA)(t.slice(e));(0,a.hu)(n[e]===t[e]||!i,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return(0,a.fU)(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==o?(0,i.toTypedArray)(e,o):(0,a.xH)(e,[],!0),r.BV.makeTensor(e,t,o)}},7501:function(e,t,n){"use strict";n.d(t,{G:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({tile_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=(0,i._1)(e,"x","tile","string_or_numeric");return o.hu(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`),r.BV.runKernel(a.n9L,{x:n},{reps:t})}})},3243:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({topk_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=1,n=!0){let o=(0,i._1)(e,"x","topk");if(0===o.rank)throw Error("topk() expects the input to be of rank 1 or higher");let s=o.shape[o.shape.length-1];if(t<0)throw Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>s)throw Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${t}`);let[u,l]=r.BV.runKernel(a.cWu,{x:o},{k:t,sorted:n});return{values:u,indices:l}}})},9065:function(e,t,n){"use strict";n.d(t,{p:function(){return p}});var r=n(196),a=n(4368),i=n(9121),o=n(3740),s=n(569),u=n(1661),l=n(4386),c=n(7370),h=n(2668),f=n(766);let p=(0,h.op)({transpose_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let h=(0,o._1)(e,"x","transpose");if(null==t&&(t=h.shape.map((e,t)=>t).reverse()),s.hu(h.rank===t.length,()=>`Error in transpose: rank of input ${h.rank} must match length of perm ${t}.`),t.forEach(e=>{s.hu(e>=0&&e<h.rank,()=>`All entries in 'perm' must be between 0 and ${h.rank-1} but got ${t}`)}),h.rank<=1)return h.clone();let p={perm:t};return"complex64"===h.dtype?(0,a.lu)(()=>{let e=(0,f.k)(h),t=(0,l.a)(h);return e=r.BV.runKernel(i.G3Y,{x:e},p),t=r.BV.runKernel(i.G3Y,{x:t},p),n&&(t=(0,c.W)(t)),(0,u.P)(e,t)}):r.BV.runKernel(i.G3Y,{x:h},p)}})},9608:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({unique_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i._1)(e,"x","unique","string_or_numeric");(0,o.hu)(n.rank>0,()=>"The input tensor must be at least 1D");let[s,u]=r.BV.runKernel(a.kpP,{x:n},{axis:t});return{values:s,indices:u}}})},8749:function(e,t,n){"use strict";n.d(t,{p:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({unsortedSegmentSum_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let s=(0,i._1)(e,"x","unsortedSegmentSum"),u=(0,i._1)(t,"segmentIds","unsortedSegmentSum","int32");return(0,o.hu)((0,o.GN)(n),()=>"numSegments must be of dtype int"),r.BV.runKernel(a.Qvg,{x:s,segmentIds:u},{numSegments:n})}})},4136:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(196),a=n(9121),i=n(3740),o=n(569),s=n(2668);let u=(0,s.op)({unstack_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t=0){let n=(0,i._1)(e,"x","unstack","string_or_numeric");return o.hu(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`),r.BV.runKernel(a.ToN,{value:n},{axis:t})}})},5912:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(196),a=n(9121),i=n(3740),o=n(8247),s=n(2200),u=n(2668);let l=(0,u.op)({where_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let u=(0,i._1)(t,"a","where"),l=(0,i._1)(n,"b","where"),c=(0,i._1)(e,"condition","where","bool"),h=(0,s.assertAndGetBroadcastShape)((0,s.assertAndGetBroadcastShape)(c.shape,u.shape),l.shape),f=(0,o.U)(c,h),p=(0,o.U)(u,h),d=(0,o.U)(l,h);return r.BV.runKernel(a.PhF,{condition:f,t:p,e:d})}})},723:function(e,t,n){"use strict";n.d(t,{l:function(){return(/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t,n="float32"){if("complex64"===n){let n=e(t,"float32"),r=e(t,"float32");return(0,i.P)(n,r)}let o=(0,a.wT)((0,a.NA)(t),n);return r.BV.makeTensor(o,t,n)})}});var r=n(196),a=n(569),i=n(1661)},6577:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(196),a=n(9121),i=n(3740),o=n(2668);let s=(0,o.op)({zerosLike_:/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,i._1)(e,"x","zerosLike");return r.BV.runKernel(a.RuY,{x:t})}})},974:function(e,t,n){"use strict";n.d(t,{es:function(){return m},YD:function(){return l},_w:function(){return y},t3:function(){return g},FZ:function(){return d},Vp:function(){return p},Vi:function(){return f}});var r=n(5938),a=n(569);function i(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:(0,a.HD)(e)?`'${e}'`:"bool"===n?o(e):parseFloat(e.toFixed(7)).toString(),(0,a.oj)(r,t)}function o(e){return 0===e?"false":"true"}function s(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var u=n(3418);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class l{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=a.NA(e),null!=n){let e=n.length;a.hu(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||a.rQ(t,this.size),this.strides=(0,a.e3)(e)}set(e,...t){0===t.length&&(t=[0]),a.hu(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(let n of e){if(n<0||n>=this.shape[t]){let t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return c().makeTensor(this.values,this.shape,this.dtype)}}let c=null,h=null;function f(e){c=e}function p(e){h=e}function d(e){}class m{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=a.NA(e),this.strides=(0,a.e3)(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return h.buffer(this.shape,this.dtype,e)}bufferSync(){return h.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return(0,a.GX)(this.shape,e,"complex64"===this.dtype)}arraySync(){return(0,a.GX)(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=c().read(this.dataId);if("string"===this.dtype){let t=await e;try{return t.map(e=>u.decodeString(e))}catch(e){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),c().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=c().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>u.decodeString(e))}catch(e){throw Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await c().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(c().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw Error("Tensor is disposed.")}print(e=!1){return h.print(this,e)}clone(){return this.throwIfDisposed(),h.clone(this)}toString(e=!1){let t=this.dataSync();return function(e,t,n,r){let u=(0,a.e3)(t),l=function(e,t,n,r){let o=(0,a.NA)(t),u=r[r.length-1],l=Array(u).fill(0),c=t.length,h="complex64"===n?s(e):e;if(c>1)for(let e=0;e<o/u;e++){let t=e*u;for(let e=0;e<u;e++)l[e]=Math.max(l[e],i(h[t+e],0,n).length)}return l}(e,t,n,u),c=t.length,h=function e(t,n,r,a,u,l=!0){let c="complex64"===r?2:1,h=n[0],f=n.length;if(0===f){if("complex64"===r){let e=s(t);return[i(e[0],0,r)]}return"bool"===r?[o(t[0])]:[t[0].toString()]}if(1===f){if(h>20){let e=Array.from(t.slice(0,3*c)),n=Array.from(t.slice((h-3)*c,h*c));return"complex64"===r&&(e=s(e),n=s(n)),["["+e.map((e,t)=>i(e,u[t],r)).join(", ")+", ..., "+n.map((e,t)=>i(e,u[h-3+t],r)).join(", ")+"]"]}let e="complex64"===r?s(t):Array.from(t);return["["+e.map((e,t)=>i(e,u[t],r)).join(", ")+"]"]}let p=n.slice(1),d=a.slice(1),m=a[0]*c,g=[];if(h>20){for(let n=0;n<3;n++){let a=n*m,i=a+m;g.push(...e(t.slice(a,i),p,r,d,u,!1))}g.push("...");for(let n=h-3;n<h;n++){let a=n*m,i=a+m;g.push(...e(t.slice(a,i),p,r,d,u,n===h-1))}}else for(let n=0;n<h;n++){let a=n*m,i=a+m;g.push(...e(t.slice(a,i),p,r,d,u,n===h-1))}let y=2===f?",":"";g[0]="["+g[0]+y;for(let e=1;e<g.length-1;e++)g[e]=" "+g[e]+y;let b=",\n";for(let e=2;e<f;e++)b+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(l?"":b),g}(e,t,n,u,l),f=["Tensor"];return r&&(f.push(`  dtype: ${n}`),f.push(`  rank: ${c}`),f.push(`  shape: [${t}]`),f.push("  values:")),f.push(h.map(e=>"    "+e).join("\n")),f.join("\n")}(t,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),h.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),c().makeVariable(this,e,t,n)}}function g(){return(0,r.R)("Tensor",()=>m)}Object.defineProperty(m,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),g();class y extends m{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!a.cO(e.shape,this.shape))throw Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);c().disposeTensor(this),this.dataId=e.dataId,c().incRef(this,null)}dispose(){c().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(y,Symbol.hasInstance,{value:e=>e instanceof m&&null!=e.assign&&e.assign instanceof Function})},747:function(e,t,n){"use strict";n.r(t),n.d(t,{assertTypesMatch:function(){return s},getTensorsInContainer:function(){return l},isTensorInList:function(){return u},makeTypesMatch:function(){return o}});var r=n(974),a=n(1221),i=n(569);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o(e,t){if(e.dtype===t.dtype)return[e,t];let n=(0,a.x8)(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function s(e,t){(0,i.hu)(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function u(e,t){return t.some(t=>t.id===e.id)}function l(e){let t=[],n=new Set;return function e(t,n,a){if(null!=t){if(t instanceof r.es){n.push(t);return}if(Array.isArray(t)||"object"==typeof t)for(let r in t){let i=t[r];a.has(i)||(a.add(i),e(i,n,a))}}}(e,t,n),t}},3740:function(e,t,n){"use strict";n.d(t,{C:function(){return u},_1:function(){return c},sI:function(){return h}});var r=n(196),a=n(2885),i=n(974),o=n(569),s=n(3418);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u(e,t){let n=e;if((0,o.fU)(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||(0,o.fU)(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&(0,a.OB)().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],!Array.isArray(t)&&!(0,o.fU)(t)){(0,o.hu)(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}(0,o.hu)(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${t.length} elements`),(0,o.hu)(t.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let a=n.slice(1);for(let n=0;n<t.length;++n)e(t[n],a,r.concat(n))}(e,r,[]),r}function l(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function c(e,t,n,a="numeric"){if(e instanceof i.es)return l(a,e.dtype,t,n),e;let c=(0,o.D2)(e);if("string"!==c&&["bool","int32","float32"].indexOf(a)>=0&&(c=a),l(a,c,t,n),null==e||!(0,o.fU)(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){let r=null==e?"null":e.constructor.name;throw Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}let h=u(e,c);(0,o.fU)(e)||Array.isArray(e)||(e=[e]);let f="string"!==c?(0,s.toTypedArray)(e,c):(0,o.xH)(e,[],!0);return r.BV.makeTensor(f,h,c)}function h(e,t,n,r="numeric"){if(!Array.isArray(e))throw Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,a)=>c(e,`${t}[${a}]`,n,r))}},1221:function(e,t,n){"use strict";var r,a,i,o,s,u,l,c,h,f;n.d(t,{x8:function(){return d},yw:function(){return r},z4:function(){return m}}),(u=r||(r={})).R0="R0",u.R1="R1",u.R2="R2",u.R3="R3",u.R4="R4",u.R5="R5",u.R6="R6",(l=a||(a={})).float32="float32",l.int32="int32",l.bool="int32",l.complex64="complex64",(c=i||(i={})).float32="float32",c.int32="int32",c.bool="bool",c.complex64="complex64",(h=o||(o={})).float32="float32",h.int32="float32",h.bool="float32",h.complex64="complex64",(f=s||(s={})).float32="complex64",f.int32="complex64",f.bool="complex64",f.complex64="complex64";let p={float32:o,int32:a,bool:i,complex64:s};function d(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw Error(`Can not upcast ${e} with ${t}`)}return p[e][t]}function m(e){return d(e,"int32")}},3418:function(e,t,n){"use strict";n.r(t),n.d(t,{arraysEqual:function(){return a.cO},assert:function(){return a.hu},assertNonNegativeIntegerDimensions:function(){return a.Mu},assertNonNull:function(){return a.Cq},assertShapesMatch:function(){return a.k5},bytesFromStringArray:function(){return a.Ub},bytesPerElement:function(){return a.bT},checkConversionForErrors:function(){return a.D5},clamp:function(){return a.uZ},computeStrides:function(){return a.e3},createScalarValue:function(){return v},createShuffledIndices:function(){return a.U$},decodeString:function(){return S},distSquared:function(){return a.E7},encodeString:function(){return k},fetch:function(){return _},fingerPrint64:function(){return b},flatten:function(){return a.xH},getArrayFromDType:function(){return a.rQ},getTypedArrayFromDType:function(){return a.WP},hasEncodingLoss:function(){return a.QB},hexToLong:function(){return u},indexToLoc:function(){return a.NE},inferDtype:function(){return a.D2},inferFromImplicitShape:function(){return a.JZ},isBoolean:function(){return a.jn},isFunction:function(){return a.mf},isInt:function(){return a.GN},isNumber:function(){return a.hj},isPromise:function(){return a.tI},isScalarShape:function(){return a.N9},isString:function(){return a.HD},isTypedArray:function(){return a.fU},isValidDtype:function(){return a.LP},locToIndex:function(){return a.qy},makeOnesTypedArray:function(){return a.p8},makeZerosNestedTypedArray:function(){return a.l6},makeZerosTypedArray:function(){return a.wT},nearestDivisor:function(){return a.jP},nearestLargerEven:function(){return a.nY},now:function(){return x},parseAxisParam:function(){return a.EC},randUniform:function(){return a.bj},repeatedTry:function(){return a.WD},rightPad:function(){return a.oj},shuffle:function(){return a.TV},shuffleCombo:function(){return a.d7},sizeFromShape:function(){return a.NA},sizeToSquarishShape:function(){return a.YP},squeezeShape:function(){return a.bp},sum:function(){return a.Sm},swap:function(){return a.LF},tanh:function(){return a.AE},toNestedArray:function(){return a.GX},toTypedArray:function(){return w}});var r=n(2885),a=n(569),i=n(3720),o=n.n(i);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s=o()||i;function u(e){return s.fromString(e,!0,16)}let l=u("c3a5c85c97cb3127"),c=u("b492b66fbe98f273"),h=u("9ae16a3b2f90404f");function f(e){return e.xor(e.shru(47))}function p(e,t,n){let r=e.slice(t,t+n);return s.fromBytes(Array.from(r),!0,!0)}function d(e,t){return p(e,t,8)}function m(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function g(e,t,n=u("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return(a=a.xor(a.shru(47))).mul(n)}function y(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=m(i.add(a).add(r),21);let o=a;return a=(a=a.add(t)).add(n),i=i.add(m(a,44)),[a.add(r),i.add(o)]}(d(e,t),d(e,t+8),d(e,t+16),d(e,t+24),n,r)}function b(e,t=e.length){let n=s.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){let n=h.add(2*t),r=d(e,0).add(h),a=d(e,t-8),i=m(a,37).mul(n).add(r),o=m(r,25).add(a).mul(n);return g(i,o,n)}if(t>=4){let n=h.add(2*t),r=p(e,0,4);return g(r.shl(3).add(t),p(e,t-4,4),n)}if(t>0){let n=e[0],r=e[t>>1],a=e[t-1];return f(h.mul(n+(r<<8)).xor(l.mul(t+(a<<2)))).mul(h)}return h}(e,t):function(e,t=e.length){let n=h.add(2*t),r=d(e,0).mul(c),a=d(e,8),i=d(e,t-8).mul(n),o=d(e,t-16).mul(h);return g(m(r.add(a),43).add(m(i,30)).add(o),r.add(m(a.add(h),18)).add(i),n)}(e,t);if(t<=64)return function(e,t=e.length){let n=h.add(2*t),r=d(e,0).mul(h),a=d(e,8),i=d(e,t-8).mul(n),o=d(e,t-16).mul(h),s=m(r.add(a),43).add(m(i,30)).add(o),u=g(s,r.add(m(a.add(h),18)).add(i),n),l=d(e,16).mul(n),c=d(e,24),f=s.add(d(e,t-32)).mul(n),p=u.add(d(e,t-24)).mul(n);return g(m(l.add(c),43).add(m(f,30)).add(p),l.add(m(c.add(r),18)).add(f),n)}(e,t);let r=n,a=n.mul(c).add(113),i=f(a.mul(h).add(113)).mul(h),o=[s.UZERO,s.UZERO],u=[s.UZERO,s.UZERO];r=r.mul(h).add(d(e,0));let b=0,v=(t-1>>6)*64;do r=m(r.add(a).add(o[0]).add(d(e,b+8)),37).mul(c),a=m(a.add(o[1]).add(d(e,b+48)),42).mul(c),r=r.xor(u[1]),a=a.add(o[0]).add(d(e,b+40)),i=m(i.add(u[0]),33).mul(c),o=y(e,b,o[1].mul(c),r.add(u[0])),u=y(e,b+32,i.add(u[1]),a.add(d(e,b+16))),[i,r]=[r,i],b+=64;while(b!==v);let w=c.add(i.and(255).shl(1));return b=v+(t-1&63)-63,u[0]=u[0].add(t-1&63),o[0]=o[0].add(u[0]),u[0]=u[0].add(o[0]),r=m(r.add(a).add(o[0]).add(d(e,b+8)),37).mul(w),a=m(a.add(o[1]).add(d(e,b+48)),42).mul(w),r=r.xor(u[1].mul(9)),a=a.add(o[0].mul(9).add(d(e,b+40))),i=m(i.add(u[0]),33).mul(w),o=y(e,b,o[1].mul(w),r.add(u[0])),u=y(e,b+32,i.add(u[1]),a.add(d(e,b+16))),[i,r]=[r,i],g(g(o[0],u[0],w).add(f(a).mul(l)).add(i),g(o[1],u[1],w).add(r),w)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v(e,t){return"string"===t?k(e):w([e],t)}function w(e,t){var n;if("string"===t)throw Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=a.xH(e)),(0,r.OB)().getBool("DEBUG")&&a.D5(e,t),(n=e)instanceof Float32Array&&"float32"===t||n instanceof Int32Array&&"int32"===t||n instanceof Uint8Array&&"bool"===t)return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw Error(`Unknown data type ${t}`)}function x(){return(0,r.OB)().platform.now()}function _(e,t){return(0,r.OB)().platform.fetch(e,t)}function k(e,t="utf-8"){return t=t||"utf-8",(0,r.OB)().platform.encode(e,t)}function S(e,t="utf-8"){return t=t||"utf-8",(0,r.OB)().platform.decode(e,t)}},569:function(e,t,n){"use strict";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,s(e,--t,n)}function a(e,t){if(e.length!==t.length)throw Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,s(e,--n,r),s(t,n,r)}function i(e,t,n){return Math.max(e,Math.min(t,n))}function o(e){return e%2==0?e:e+1}function s(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function u(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function l(e,t){let n=Math.random();return t*n+(1-n)*e}function c(e,t){let n=0;for(let r=0;r<e.length;r++){let a=Number(e[r])-Number(t[r]);n+=a*a}return n}function h(e,t){if(!e)throw Error("string"==typeof t?t:t())}function f(e,t,n=""){h(g(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function p(e){h(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function d(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function m(e){return 0===e.length}function g(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function y(e){return e%1==0}function b(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return -1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function v(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function w(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return r(t),t}function x(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function _(e,t=e=>0,n,r=setTimeout){return new Promise((a,i)=>{let o=0,s=()=>{if(e()){a();return}o++;let u=t(o);if(null!=n&&o>=n){i();return}r(s,u)};s()})}function k(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let a=e.slice();return a[r]=t/n,a}function S(e,t){let n=t.length;return h((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),h(e.every(e=>y(e)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(e=>e<0?n+e:e)}function I(e,t){let n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:S(t,e).sort(),o=0;for(let t=0;t<e.length;++t){if(null!=i){if(i[o]===t&&1!==e[t])throw Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==i[o]||i[o]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),i[o]<=t&&o++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function E(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else throw Error(`Unknown data type ${e}`);return n}function N(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else if("string"===e)n=Array(t);else throw Error(`Unknown data type ${e}`);return n}function T(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function A(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function C(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function O(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function R(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw Error(`Unknown dtype ${e}`)}function D(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function P(e){return"string"==typeof e||e instanceof String}function $(e){return"boolean"==typeof e}function F(e){return"number"==typeof e}function M(e){return!!(e&&e.constructor&&e.call&&e.apply)}function B(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function L(e){let t=e.length;if(t<2)return[];let n=Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function U(e,t,n=!1){if(0===e.length)return t[0];let r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return function e(t,n,r,a=!1){let i=[];if(1===n.length){let e=n[0]*(a?2:1);for(let n=0;n<e;n++)i[n]=r[t+n]}else{let o=n[0],s=n.slice(1),u=s.reduce((e,t)=>e*t)*(a?2:1);for(let n=0;n<o;n++)i[n]=e(t+n*u,s,r,a)}return i}(0,e,t,n)}function j(e,t){let n=z(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function z(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw Error(`Unknown data type ${t}`)}function W(e,t){let n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return U(e,new Float32Array(n));if("int32"===t)return U(e,new Int32Array(n));if("bool"===t)return U(e,new Uint8Array(n));throw Error(`Unknown data type ${t}`)}function V(e){e.forEach(t=>{h(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function G(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function H(e,t,n){if(0===t)return[];if(1===t)return[e];let r=Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function q(e){return e&&e.then&&"function"==typeof e.then}n.d(t,{AE:function(){return b},Cq:function(){return p},D2:function(){return function e(t){if(Array.isArray(t))return e(t[0]);if(t instanceof Float32Array);else if(t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray)return"int32";else if(F(t));else if(P(t))return"string";else if($(t))return"bool";return"float32"}},D5:function(){return T},E7:function(){return c},EC:function(){return S},GN:function(){return y},GX:function(){return U},HD:function(){return P},JZ:function(){return k},LF:function(){return s},LP:function(){return A},Mu:function(){return V},N9:function(){return m},NA:function(){return d},NE:function(){return H},QB:function(){return C},Sm:function(){return u},TV:function(){return r},U$:function(){return w},Ub:function(){return D},WD:function(){return _},WP:function(){return E},YP:function(){return v},bT:function(){return R},bj:function(){return l},bp:function(){return I},cO:function(){return g},d7:function(){return a},e3:function(){return L},fU:function(){return O},hj:function(){return F},hu:function(){return h},jP:function(){return B},jn:function(){return $},k5:function(){return f},l6:function(){return W},mf:function(){return M},nY:function(){return o},oj:function(){return x},p8:function(){return j},qy:function(){return G},rQ:function(){return N},tI:function(){return q},uZ:function(){return i},wT:function(){return z},xH:function(){return function e(t,n=[],r=!1){if(null==n&&(n=[]),Array.isArray(t)||O(t)&&!r)for(let a=0;a<t.length;++a)e(t[a],n,r);else n.push(t);return n}}})},8819:function(e,t,n){"use strict";n.d(t,{GD:function(){return x},Gc:function(){return y},aI:function(){return k}});var r=n(13),a=n(9840),i=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class o extends r.m7h.Serializable{getConfig(){return{}}}class s extends o{apply(e,t=1){return a.py(e,t)}}s.className="elu",r.m7h.registerClass(s);class u extends o{apply(e){return r.U8D(e)}}u.className="selu",r.m7h.registerClass(u);class l extends o{apply(e){return r.UYe(e)}}l.className="relu",r.m7h.registerClass(l);class c extends o{apply(e){return(0,r.lub)(()=>r.LTh(6,r.UYe(e)))}}c.className="relu6",r.m7h.registerClass(c);class h extends o{apply(e){return e}}h.className="linear",r.m7h.registerClass(h);class f extends o{apply(e){return r.XD2(e)}}f.className="sigmoid",r.m7h.registerClass(f);class p extends o{apply(e){return a.HX(e)}}p.className="hardSigmoid",r.m7h.registerClass(p);class d extends o{apply(e){return r.Wvh(e)}}d.className="softplus",r.m7h.registerClass(d);class m extends o{apply(e){return a.O(e)}}m.className="softsign",r.m7h.registerClass(m);class g extends o{apply(e){return r.AEp(e)}}g.className="tanh",r.m7h.registerClass(g);class y extends o{apply(e,t=-1){return r.XAC(e,t)}}y.className="softmax",r.m7h.registerClass(y);class b extends o{apply(e,t=-1){return r.CmS(e,t)}}b.className="logSoftmax",r.m7h.registerClass(b);class v extends o{apply(e,t=1){return(0,r.lub)(()=>r.dC7(r.XD2(r.dC7(e,t)),e))}}v.className="swish",r.m7h.registerClass(v);class w extends o{apply(e){return(0,r.lub)(()=>r.dC7(e,r.AEp(r.Wvh(e))))}}function x(e){return e.getClassName()}function _(e,t={}){return(0,i.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"activation")}function k(e){if(null==e){let e={};return e.className="linear",e.config={},_(e)}if("string"==typeof e){let t={};return t.className=e,t.config={},_(t)}return e instanceof o?e:_(e)}w.className="mish",r.m7h.registerClass(w)},2012:function(e,t,n){"use strict";let r;n.d(t,{Ho:function(){return i},rf:function(){return o}});var a=n(13);function i(){return null==r&&(r=(0,a.y3$)().epsilon()),r}function o(){return"channelsLast"}},1944:function(e,t,n){"use strict";n.d(t,{L:function(){return a},s:function(){return o}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let r=0;function a(){return r++}let i={};function o(e=""){return e in i||(i[e]=0),i[e]+=1,e+i[e].toString()}},9840:function(e,t,n){"use strict";n.d(t,{AK:function(){return w},GZ:function(){return y},Gg:function(){return b},HX:function(){return T},Iq:function(){return x},KC:function(){return A},O:function(){return E},Uz:function(){return f},a2:function(){return S},c9:function(){return p},dt:function(){return l},h6:function(){return _},mV:function(){return g},nG:function(){return v},pj:function(){return u},py:function(){return I},rv:function(){return N},rx:function(){return c},uI:function(){return m},xH:function(){return h}});var r=n(13),a=n(8090),i=n(588),o=n(6040),s=n(2012);function u(e,t){return r.pju(e,t)}function l(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),r.XLQ(e,n)}function c(e,t){return(0,r.lub)(()=>{if(2!==e.shape.length)throw new i.nu(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);let n=l(e,1);return b(n,[1,t,1])})}function h(e){let t=[o.NS(e.shape)];return r.XLQ(e,t)}function f(e){if(e.rank<=1)throw new i.nu(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],o.NS(e.shape,1)];return r.XLQ(e,t)}function p(e,t,n){return(0,r.lub)(()=>{switch(e.rank){case 1:return r.jZU(e,t,n);case 2:return r.SmN(e,[t,0],[n,e.shape[1]]);case 3:return r.CnO(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return r.p0P(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return r.tPi(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return r.tPi(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new i.nu(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function d(e,t,n){return(0,r.lub)(()=>{switch(e.rank){case 1:return r.jZU(e,t,n);case 2:return r.SmN(e,[0,t],[e.shape[0],n]);case 3:return r.CnO(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return r.p0P(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new i.nu(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function m(e,t,n,a){return(0,r.lub)(()=>{switch(e.rank){case 1:return r.jZU(e,t,n);case 2:switch(a){case 1:return p(e,t,n);case 2:return d(e,t,n);default:throw new i.nu(`The axis is not within the rank of the tensor ${a}`)}case 3:switch(a){case 1:return p(e,t,n);case 2:return r.CnO(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return d(e,t,n);default:throw new i.nu(`The axis is not within the rank of the tensor ${a}`)}case 4:switch(a){case 1:return p(e,t,n);case 2:return r.p0P(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return r.p0P(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return d(e,t,n);default:throw new i.nu(`The axis is not within the rank of the tensor ${a}`)}default:throw new i.nu(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function g(e,t=-1){let n;return t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),r.zoF(e,t)}function y(e,t){switch(e.rank){case 1:return r.gME([e,t]);case 2:return r.Izb([e,t],0);case 3:return r.MNy([e,t],0);case 4:return r.ZaL([e,t],0);default:throw new i.nu(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function b(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new i.nu(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return r.Gg6(e,t)}function v(e,t=0,n=1,a,i){return r.nGf(e,t,n,a,i)}function w(e,t,n,a){if(e.rank<2||t.rank<2)throw new i.nj(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){let n=e.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(n!==r)throw new i.nj(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank)return r.imm.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?k(e.rank,a,(0,s.rf)()):null,activation:n});{let i=e.shape.slice(),o=i.pop();e=r.XLQ(e,[-1,o]);let u=t.shape.slice(),l=u.pop(),c=u.pop(),h=[...u,l],f=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=r.XLQ(r.p4s(t,f),[c,-1]);let p=[...i,...h];return r.XLQ(r.imm.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?k(e.rank,a,(0,s.rf)()):null,activation:n}),p)}}function x(e,t,n){return(0,r.lub)(()=>(t=Array.isArray(t)?(0,r.RRF)(t,"int32"):r.pju(t,"int32"),r.Iqj(e,t,n)))}function _(e){return r.dC7(e,e)}function k(e,t,n){let a=t.shape;if(1!==t.rank&&t.rank!==e)throw new i.nu(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===a.length?r.XLQ(t,[1,a[0],1,1,1]):r.XLQ(t,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?r.XLQ(t,[1,1,1,1,a[0]]):r.XLQ(t,[1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?r.XLQ(t,[1,a[0],1,1]):r.XLQ(t,[1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?r.XLQ(t,[1,1,1,a[0]]):r.XLQ(t,[1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?r.XLQ(t,[1,a[0],1]):r.XLQ(t,[1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?r.XLQ(t,[1,1,a[0]]):r.XLQ(t,[1].concat(a))}else if(e<3)return t;throw new i.nu(`Unsupported input rank by biasAdd: ${t.rank}`)}function S(e,t,n){return(0,r.lub)(()=>(null==n&&(n=(0,s.rf)()),(0,a.cj)(n),r.IHx(e,k(e.rank,t,n))))}function I(e,t=1){if(1!==t)throw new i.nj(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return r.pyx(e)}function E(e){return(0,r.lub)(()=>r.hiC(e,r.IHx(r.WnP(e),1)))}function N(e,t,n,a){return(0,r.lub)(()=>r.rvX(e,t,n,a))}function T(e){return(0,r.lub)(()=>{let t=r.IHx(.5,r.dC7(.2,e));return r.iUl(t,0,1)})}function A(e,t,n=!1){return n?e():t()}},8891:function(e,t,n){"use strict";n.d(t,{Ay:function(){return f},BO:function(){return c},CZ:function(){return d},Sk:function(){return m},ex:function(){return l},iT:function(){return p},m$:function(){return g}});var r,a,i=n(13),o=n(588),s=n(3146),u=n(2931);(r=a||(a={}))[r.SILENT=0]="SILENT",r[r.VERBOSE=1]="VERBOSE";class l{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class c{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onEpochBegin(e,t)}async onEpochEnd(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onEpochEnd(e,t)}async onBatchBegin(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onBatchBegin(e,t)}async onBatchEnd(e,t){for(let n of(null==t&&(t={}),this.callbacks))await n.onBatchEnd(e,t)}async onTrainBegin(e){for(let t of(null==e&&(e={}),this.callbacks))await t.onTrainBegin(e)}async onTrainEnd(e){for(let t of(null==e&&(e={}),this.callbacks))await t.onTrainEnd(e)}}class h extends l{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});let n=null==t.size?0:t.size;for(let e in this.seen+=n,t){let r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;let a=(0,i.lub)(()=>(0,i.IHx)(this.totals[e],(0,i.dC7)(r,n)));this.totals[e]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(let e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:(0,i.lub)(()=>{let n=(0,i.dC7)((0,i.hiC)(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),(0,i.CnY)(t[e])}))}}class f extends l{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){for(let n in null==t&&(t={}),this.epoch.push(e),t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let r in this.history){let a=this.history[r];for(let i=0;i<a.length;++i)if("number"!=typeof a[i]){let o=a[i];e.push(o.data()),t.push(r),n.push(i)}}let r=await Promise.all(e);for(let e=0;e<r.length;++e){let a=this.history[t[e]][n[e]];a.dispose(),this.history[t[e]][n[e]]=r[e][0]}}}class p extends l{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||i.glt,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");i.D5U.isNumber(this.yieldEvery)&&(this.maybeWait=u.Ds(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];null!=this.yield&&(await (0,s.Z)(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await (0,s.Z)(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];null!=this.epochEnd&&(await (0,s.Z)(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await (0,s.Z)(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];null!=this.batchEnd&&(await (0,s.Z)(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):i.D5U.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await (0,s.Z)(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await (0,s.Z)(e),await this.trainEnd(e))}}function d(e,t){if(null==e&&(e={}),e instanceof l)return[e];if(Array.isArray(e)&&e[0]instanceof l)return e;let n=u.zZ(e);return n.map(e=>new p(e,t))}class m{constructor(){}static registerCallbackConstructor(e,t){i.D5U.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),m.checkForDuplicate(t),null==m.constructors[e]&&(m.constructors[e]=[]),m.constructors[e].push(t)}static checkForDuplicate(e){for(let t in m.constructors){let n=m.constructors[+t];n.forEach(t=>{if(t===e)throw new o.nu("Duplicate callback constructor.")})}}static clear(){m.constructors={}}static createCallbacks(e){let t=[];for(let n in m.constructors){let r=+n;e>=r&&t.push(...m.constructors[r])}return t.map(e=>new e)}}function g(e,t,n,r,a,i,o,s,u){let l=new f,p=[new h,...m.createCallbacks(t)];null!=e&&p.push(...e),p.push(l);let d=new c(p);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:l}}m.constructors={}},8090:function(e,t,n){"use strict";n.d(t,{Lp:function(){return l},MU:function(){return f},cj:function(){return o},f4:function(){return h},w8:function(){return p},wU:function(){return s},zb:function(){return u}});var r=n(4685),a=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let i=new Map;function o(e){(0,a.xn)(r.PS,"DataFormat",e)}function s(e){(0,a.xn)(r.Mz,"InterpolationFormat",e)}function u(e){(0,a.xn)(r.zx,"PaddingMode",e)}function l(e){(0,a.xn)(r.MK,"PoolMode",e)}let c=[];function h(e,t){c.push(e);try{let e=t();return c.pop(),e}catch(e){throw c.pop(),e}}function f(e){if(!m(e))throw Error("Not a valid tensor name: '"+e+"'");return(0===c.length?"":c.join("/")+"/")+e}function p(e){if(!m(e))throw Error("Not a valid tensor name: '"+e+"'");i.has(e)||i.set(e,0);let t=i.get(e);if(i.set(e,i.get(e)+1),!(t>0))return e;{let n=`${e}_${t}`;return i.set(n,1),n}}let d=RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function m(e){return!!e.match(d)}},4079:function(e,t,n){"use strict";n.d(t,{Ad:function(){return m},Yq:function(){return u},cK:function(){return l},he:function(){return c},iL:function(){return h},xF:function(){return p}});var r=n(13),a=n(2012),i=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o(e,t){return(0,r.lub)(()=>r._b3(r.Smz(r.dC7(e,e),t,!0)))}class s extends r.m7h.Serializable{getConfig(){return{}}}class u extends s{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.lub)(()=>{let t=o(e,this.axis),n=r.iUl(t,0,this.maxValue);return r.dC7(e,r.hiC(n,r.IHx((0,a.Ho)(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}u.className="MaxNorm",r.m7h.registerClass(u);class l extends s{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.lub)(()=>r.hiC(e,r.IHx((0,a.Ho)(),o(e,this.axis))))}getConfig(){return{axis:this.axis}}}l.className="UnitNorm",r.m7h.registerClass(l);class c extends s{apply(e){return r.UYe(e)}}c.className="NonNeg",r.m7h.registerClass(c);class h extends s{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return(0,r.lub)(()=>{let t=o(e,this.axis),n=r.IHx(r.dC7(this.rate,r.iUl(t,this.minValue,this.maxValue)),r.dC7(1-this.rate,t));return r.dC7(e,r.hiC(n,r.IHx((0,a.Ho)(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}h.className="MinMaxNorm",r.m7h.registerClass(h);let f={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function p(e){return(0,i.Kj)(e)}function d(e,t={}){return(0,i.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"constraint")}function m(e){if(null==e)return null;if("string"==typeof e){let t=e in f?f[e]:e;return d({className:t,config:{}})}return e instanceof s?e:d(e)}},1111:function(e,t,n){"use strict";n.d(t,{l2:function(){return l},ht:function(){return p},kS:function(){return f}});var r=n(13),a=n(588);/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class i{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}}var o=n(2931),s=n(4396),u=n(163);class l{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof l)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(null==this.id2Value[e.id])this.id2Value[e.id]=/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return(0,r.pju)(t,e.dtype)}catch(n){throw new a.nu(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n);else throw new a.nu(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof u.Iy){if(null!=this.id2Value[e.id])return this.id2Value[e.id];throw new a.nu(`Nonexistent key: ${e.name}`)}{let t=this.name2Id[e];if(null==t)throw new a.nu(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof u.Iy){if(null!=this.id2Value[e.id])return this.id2Mask[e.id];throw new a.nu(`Nonexistent key: ${e.name}`)}{let t=this.name2Id[e];if(null==t)throw new a.nu(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&(0,r.B90)(this.id2Mask)}}let c=new i,h=new i;function f(e){null!=c&&c.setMaxEntries(e),null!=h&&h.setMaxEntries(e)}function p(e,t,n,a){let i;let u=null!=n&&n.training,f=Array.isArray(e),p=f?e:[e],m=p.map(e=>e.name),g=[],y=t.names();for(let e of m)-1!==y.indexOf(e)?g.push(t.getValue(e)):g.push(null);null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);let b=m.join(",")+"|"+t.names().sort().join(","),v=c.get(b);if(null==v){let e=function(e,t){r.D5U.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],a={};if(1===e.length){let r=d(e[0],t);n=r.sorted,a=r.recipientMap}else{let r=new Set;for(let i of e){let{sorted:e,recipientMap:o}=d(i,t);for(let t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(let e in o)null==a[e]&&(a[e]=new Set),o[e].forEach(t=>a[e].add(t))}}return{sorted:n,recipientCounts:function(e){let t={};for(let n in e)t[n]=e[n].size;return t}(a)}}(p,t);v=e.sorted,i=e.recipientCounts,c.put(b,v),h.put(b,i)}i={},u||Object.assign(i,h.get(b));let w=new l(t);for(let e=0;e<v.length;++e){if(null!=a){let e=(0,r.sq6)().numTensors;e>a.maxNumTensors&&(a.maxNumTensors=e),e<a.minNumTensors&&(a.minNumTensors=e)}let l=v[e],c=l.sourceLayer;if(c instanceof s.l)continue;let h=[],f=[],p=[],d=!1;for(let e of l.inputs){let n=w.getValue(e),r=w.getMask(e);h.push(n),f.push(r),null!=r&&(d=!0),u||(i[e.name]--,0!==i[e.name]||t.hasKey(e)||-1!==m.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||p.push(n))}d&&((n=n||{}).mask=f[0]);let y=(0,o.zZ)(c.apply(h,n)),b=null;c.supportsMasking&&(b=c.computeMask(h,f));let x=function(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(let r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}(l),_=Array.isArray(x)?x:[x];for(let e=0;e<_.length;++e){w.hasKey(_[e])||w.add(_[e],y[e],Array.isArray(b)?b[0]:b);let t=m.indexOf(_[e].name);-1!==t&&(g[t]=y[e])}u||(0,r.B90)(p)}return w.disposeMasks(),f?g:g[0]}function d(e,t){let n=new Set,r=[],a={};for(let e of t.names())n.add(e);let i=[],o=[];for(i.push(e);i.length>0;){let e=i[i.length-1];if(n.has(e.name)){i.pop();continue}let t=o[o.length-1]===i.length-1;if(0===e.inputs.length||t)i.pop(),r.push(e),n.add(e.name),t&&o.pop();else for(let t of(o.push(i.length-1),e.inputs))null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),n.has(t.name)||i.push(t)}return{sorted:r,recipientMap:a}}},4396:function(e,t,n){"use strict";n.d(t,{I:function(){return u},l:function(){return s}});var r=n(13),a=n(1944),i=n(588),o=n(163);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class s extends o.mh{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:(0,a.s)("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new i.nu("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new i.nu("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new i.nu("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new o.Iy(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new o.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new i.nu(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}function u(e){if(null==e.batchShape&&null==e.shape)throw Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new i.nu("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;null==n&&(n="float32");let r=new s({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}),a=r.inboundNodes[0].outputTensors;return a[0]}s.className="InputLayer",r.m7h.registerClass(s)},163:function(e,t,n){"use strict";n.d(t,{Iy:function(){return p},NB:function(){return m},Zg:function(){return f},hA:function(){return function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];{let t=n.inboundNodes[r];if(0===t.inboundLayers.length)return t.inputTensors;{let n=[];for(let r=0;r<t.inboundLayers.length;r++){let a=t.inputTensors[r],i=t.inboundLayers[r],o=t.nodeIndices[r],s=e(a,i,o);for(let e of s)-1===n.indexOf(e)&&n.push(e)}return n}}}},mh:function(){return y}});var r=n(13),a=n(1944),i=n(8090),o=n(588),s=n(2599),u=n(2931),l=n(7538),c=n(3013),h=n(1653);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class f{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class p{constructor(e,t,n,r,o,s,u){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=o,this.outputTensorIndex=u,this.id=(0,a.L)(),null!=s&&(this.originalName=(0,i.MU)(s),this.name=(0,i.w8)(this.originalName)),this.rank=t.length}}let d=0;class m{constructor(e,t){for(let n of(this.callArgs=t,this.id=d++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes,e.inboundLayers))null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let g=0;class y extends r.m7h.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=g++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let e=this.getClassName();t=u.D1(e)+"_"+(0,a.s)(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new o.LH(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new o.nu(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return u.Bq(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return u.Bq(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new o.j1(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new o.j1(`Layer ${this.name} is not connected, no input to return.`);return u.Bq(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new o.j1(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new o.j1(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return u.Bq(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=u.zZ(e),null==this.inputSpec||0===this.inputSpec.length)return;let t=u.zZ(this.inputSpec);if(e.length!==t.length)throw new o.nu(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){let r=e[n],a=t[n];if(null==a)continue;let i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new o.nu(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${a.ndim}, found ndim=${i}`);if(null!=a.maxNDim&&i>a.maxNDim)throw new o.nu(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${a.maxNDim}, found ndim=${i}`);if(null!=a.minNDim&&i<a.minNDim)throw new o.nu(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${a.minNDim}, found ndim=${i}.`);if(null!=a.dtype&&r.dtype!==a.dtype)throw new o.nu(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${a.dtype}, found dtype=${r.dtype}.`);if(a.axes){let e=r.shape;for(let t in a.axes){let r=Number(t),i=a.axes[t],s=r>=0?e[r]:e[e.length+r];if(null!=i&&-1===[i,null].indexOf(s))throw new o.nu(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${i} but got shape ${e}.`)}}if(null!=a.shape)for(let e=0;e<a.shape.length;++e){let t=a.shape[e],i=r.shape[e];if(null!=t&&null!=i&&t!==i)throw new o.nu(`Input ${n} is incompatible with layer ${this.name}: expected shape=${a.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=u.zZ(e),r=!0;for(let e of n)if(!(e instanceof p)){r=!1;break}let a=!0;for(let e of n)if(e instanceof p){a=!1;break}if(r===a)throw new o.nu("Arguments to apply() must be all SymbolicTensors or all Tensors");return(0,i.f4)(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let t=[];for(let n of u.zZ(e))t.push(n.shape);this.build(u.Bq(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t),a=u.zZ(r),i=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),i.push(e);if(r=u.Bq(i),null!=this.activityRegularizer)throw new o.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{let n;let r=function(e){e=u.zZ(e);let t=[];for(let n of e)t.push(n.shape);return u.Bq(t)}(e),a=this.computeOutputShape(r),i="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?r[0]:r),n=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((n,r)=>new p(i,n,this,u.zZ(e),t,this.name,r)):new p(i,a,this,u.zZ(e),t,this.name),this.addInboundNode(e,n,null,null,r,a,t),this._refCount++,null!=this.activityRegularizer)throw new o.nj("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape){if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new o.j1(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new o.j1(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new o.LH(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return c.t(this.weights)}build(e){this.built=!0}getWeights(e=!1){return(0,h.FQ)(e?this.trainableWeights:this.weights)}setWeights(e){(0,r.lub)(()=>{let t=this.weights;if(t.length!==e.length)throw new o.nu(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;let n=[],a=(0,h.FQ)(t);for(let i=0;i<a.length;++i){let s=a[i],u=t[i],l=e[i];if(!r.D5U.arraysEqual(s.shape,l.shape))throw new o.nu(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);n.push([u,l])}(0,h.zb)(n)})}addWeight(e,t,n,r,a,i,u,l){if(-1!==this._addedWeightNames.indexOf(e))throw new o.nu(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=l?l():(0,s.L5)("zeros"));let c=r.apply(t,n),f=new h.fU(c,n,e,i,u);return c.dispose(),null!=a&&this.addLoss(()=>a.apply(f.read())),null==i&&(i=!0),i?this._trainableWeights.push(f):this._nonTrainableWeights.push(f),f}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=u.zZ(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(Array.isArray(t))t.forEach(e=>{if(null!=e)throw TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}return null}return t}addInboundNode(e,t,n,r,a,i,o=null){let s=u.zZ(e);t=u.zZ(t),n=u.zZ(n),r=u.zZ(r),a=l.x6(a),i=l.x6(i);let c=[],h=[],f=[];for(let e of s)c.push(e.sourceLayer),h.push(e.nodeIndex),f.push(e.tensorIndex);new m({outboundLayer:this,inboundLayers:c,nodeIndices:h,tensorIndices:f,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}},8913:function(e,t,n){"use strict";n.d(t,{D:function(){return p},y:function(){return h}});var r=n(13),a=n(8891),i=n(588),o=n(3146),s=n(2931),u=n(6529);function l(e,t){let n,a;n=t.xs,a=t.ys,r.D5U.assert(null!=n&&null!=a,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);let i=c("input",e.inputNames,n),o=c("output",e.outputNames,a),s=i[0].shape[0];r.D5U.assert(i.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),r.D5U.assert(o.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let t=0;t<i.length;t++)r.D5U.assert(i[t].shape[0]===s,()=>`Batch size mismatch: input ${e.inputNames[t]} has ${i[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`);for(let t=0;t<o.length;t++)r.D5U.assert(o[t].shape[0]===s,()=>`Batch size mismatch: output ${e.outputNames[t]} has ${o[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`);return{xs:i,ys:o}}function c(e,t,n){if(n instanceof r.esB)return[n];if(Array.isArray(n))return r.D5U.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{let r=[];for(let a of t){if(null==n[a])throw new i.nu(`The feature data generated by the dataset lacks the required ${e} key '${a}'.`);r.push(n[a])}return r}}async function h(e,t,n){let c=null!=n.batchesPerEpoch;if(r.D5U.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.D5U.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.D5U.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),r.D5U.assert(!c||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),r.D5U.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let h,p,d,m;let g=null!=n.validationData;if(g){if(f(n.validationData))r.D5U.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{let e=function(e){if(3===e.length)throw new i.nj("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);h=e.xs,p=e.ys}}let y=e.makeTrainFunction(),b=e.getDedupedMetricsNames();d=g?b.slice().concat(b.map(e=>"val_"+e)):b.slice();let v=(0,a.CZ)(n.callbacks,n.yieldEvery),w=null==n.verbose?1:n.verbose,{callbackList:x,history:_}=(0,a.m$)(v,w,n.epochs,null,null,(m=null,null!=n.batchesPerEpoch?m=n.batchesPerEpoch:Number.isFinite(t.size)&&(m=t.size),m),null,g,d);x.setModel(e),e.history=_,await x.onTrainBegin(),e.stopTraining_=!1;let k=null==n.initialEpoch?0:n.initialEpoch,S=await t.iterator();for(;k<n.epochs;){let a={};await x.onEpochBegin(k);let i=0,d=0;for(c||(S=await t.iterator());!c||i<n.batchesPerEpoch;){let t=await S.next();if(c&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${i} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=t.value){let{xs:a,ys:s}=l(e,t.value),c={};c.batch=d,c.size=a[0].shape[0],await x.onBatchBegin(d,c);let h=[];if(null!=n.classWeight){let t=(0,u.Vf)(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)h.push(await (0,u.tl)(s[e],null,t[e]))}let f=a.concat(s).concat(h),p=y(f);r.B90(f);for(let e=0;e<b.length;++e){let t=b[e],n=p[e];c[t]=n,r.CnY(n)}await x.onBatchEnd(d,c),(0,o.i)(c),d++,i++}if(c?i>=n.batchesPerEpoch:t.done){if(g){let t;t=f(n.validationData)?(0,s.zZ)(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):(0,s.zZ)(e.evaluate(h,p,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)a[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await x.onEpochEnd(k,a),k++,e.stopTraining_)break}return await x.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function f(e){return"function"==typeof e.iterator}async function p(e,t,n){n=n||{};let a=null!=n.batches,o=e.testFunction,u=[];if(n.verbose>0)throw new i.nj("Verbose mode is not implemented yet.");r.D5U.assert(!a||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);let c="function"==typeof t.next?t:await t.iterator(),h=0,f=0;for(;!a||f<n.batches;){let t=await c.next();if(u=r.lub(()=>{if(t.value){let{xs:n,ys:a}=l(e,t.value),i=n.concat(a),s=r.lub(()=>o(i));if(r.B90(i),0===f)for(let e=0;e<s.length;++e)u.push((0,r.iD$)(0));let c=i[0].shape[0];for(let e=0;e<s.length;++e){let t=s[e],n=u[e];u[e]=r.lub(()=>r.IHx(u[e],r.dC7(c,t))),f>0&&r.B90(n)}r.B90(s),h+=c,++f}return u}),t.done){a&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<u.length;++e){let t=u[e];u[e]=r.hiC(u[e],h),r.B90(t)}return(0,s.Bq)(u)}},6347:function(e,t,n){"use strict";n.d(t,{R_:function(){return f},YV:function(){return m},YX:function(){return h},fQ:function(){return l},kS:function(){return g},sf:function(){return c},uU:function(){return d}});var r=n(13),a=n(9840),i=n(8891),o=n(588),s=n(3146),u=n(6040);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l(e){r.D5U.assert(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function c(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>(0,a.c9)(e,t,n-t)):(0,a.c9)(e,t,n-t)}function h(e,t){return r.lub(()=>null==e?null:Array.isArray(e)?e.map(e=>h(e,t)):(0,a.Iq)(e,"int32"===t.dtype?t:r.pju(t,"int32")))}function f(e,t){let n=[],r=0,a=null;for(;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}async function p(e,t,n,l,c,p,d,m,g,y,b,v,w,x,_){let k;null==c&&(c=32),null==p&&(p=1),null==b&&(b=!0),null==w&&(w=0);let S=!1;if(null!=g&&null!=y&&(S=!0),null!=_&&(S=!0,null==x))throw new o.nu("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let I=e.checkNumSamples(n,c,x,"steps_per_epoch");null!=I&&(k=(0,u.w6)(0,I)),null==d&&(d=1);let{callbackList:E,history:N}=(0,i.m$)(m,d,p,w,I,x,c,S,v);E.setModel(e),e.history=N,await E.onTrainBegin(),e.stopTraining_=!1;for(let i=w;i<p;++i){await E.onEpochBegin(i);let u={};if(null!=x)throw new o.nj("stepsPerEpoch mode is not implemented yet.");{if("batch"===b)throw new o.nj("batch shuffling is not implemneted yet");b&&r.D5U.shuffle(k);let i=(0,r.RRF)(k),p=f(I,c);for(let o=0;o<p.length;++o){let f={};if(await E.onBatchBegin(o,f),r.lub(()=>{let s=p[o][0],d=p[o][1],m=(0,a.c9)(i,s,d-s);f.batch=o,f.size=d-s;let b=h(n,m),v=t(b);for(let e=0;e<l.length;++e){let t=l[e],n=v[e];f[t]=n,r.CnY(n)}if(o===p.length-1&&S){let t=e.testLoop(g,y,c);for(let e=0;e<l.length;++e){let n=l[e],a=t[e];r.CnY(a),u["val_"+n]=a}}}),await E.onBatchEnd(o,f),(0,s.i)(f),e.stopTraining_)break}i.dispose()}if(await E.onEpochEnd(i,u),e.stopTraining_)break}return await E.onTrainEnd(),await e.history.syncData(),e.history}async function d(e,t,n,a={}){let s,u,h,f,d,m,y,b,v;if(e.isTraining)throw Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let r,g,w;let x=null==a.batchSize?32:a.batchSize;l(x);let _=await e.standardizeUserData(t,n,a.sampleWeight,a.classWeight,!1,x);s=_[0],u=_[1],v=_[2];let k=!1;if(null!=a.validationData&&a.validationData.length>0){if(k=!0,2===a.validationData.length)d=a.validationData[0],m=a.validationData[1];else if(3===a.validationData.length)throw new o.nj("validationData including sample weights is not supported yet.");else throw new o.nu(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${a.validationData} is invalid.`);let t=await e.standardizeUserData(d,m,null,null,!0,x);y=t[0],b=t[1],r=y.concat(b)}else if(null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1){k=!0;let e=Math.floor(s[0].shape[0]*(1-a.validationSplit)),t=s[0].shape[0];y=c(s,e,t),h=s,s=c(s,0,e),b=c(u,e,t),f=u,u=c(u,0,e),r=y.concat(b)}else null!=a.validationSteps&&(k=!0);let S=s.concat(u).concat(v);e.checkTrainableWeightsConsistency();let I=e.makeTrainFunction(),E=e.getDedupedMetricsNames();k?(e.makeTestFunction(),g=e.testFunction,w=E.slice().concat(E.map(e=>"val_"+e))):(g=null,r=[],w=E.slice());let N=(0,i.CZ)(a.callbacks,a.yieldEvery),T=await p(e,I,S,E,x,a.epochs,a.verbose,N,g,r,a.shuffle,w,a.initialEpoch,null,null);return T}finally{e.isTraining=!1,g(s,t),g(u,n),g(h,t),g(f,n),g(y,d),g(b,m),null!=v&&r.B90(v)}}function m(e){let t=[];e instanceof r.esB&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(1===r.rank)t.push((0,a.dt)(r,1));else if(0===r.rank)throw Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");else t.push(r)}return t}function g(e,t){if(null==e)return;let n=[];if(t instanceof r.esB)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(let e in t){let r=t[e];n.push(r.id)}let a=[];if(e instanceof r.esB)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&a.push(e)});else if(null!=e)for(let t in e){let r=e[t];-1===n.indexOf(r.id)&&a.push(r)}a.forEach(e=>{e.isDisposed||e.dispose()})}},6529:function(e,t,n){"use strict";n.d(t,{Vf:function(){return a},mo:function(){return o},tl:function(){return i}});var r=n(13);function a(e,t){return(/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t,n){let r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}(e,t,"classWeight"))}async function i(e,t,n,a){if(null!=t||null!=a)throw Error("Support sampleWeight is not implemented yet");if(null==n)return null;{let t=(0,r.lub)(()=>{if(1===e.shape.length)return(0,r.d9v)(e);if(2===e.shape.length){if(e.shape[1]>1)return(0,r.NqF)(e,1);if(1===e.shape[1])return(0,r.XLQ)(e,[e.shape[0]]);throw Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),a=Array.from(await t.data());(0,r.B90)(t);let i=[];return a.forEach(e=>{if(null==n[e])throw Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);i.push(n[e])}),(0,r.RRF)(i,"float32")}}function o(e,t){return(0,r.dC7)(e,t)}},588:function(e,t,n){"use strict";n.d(t,{LH:function(){return a},j1:function(){return r},nj:function(){return o},nu:function(){return i},ps:function(){return s}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}class a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s.prototype)}}},2599:function(e,t,n){"use strict";n.d(t,{sr:function(){return d},Jf:function(){return x},sq:function(){return w},RP:function(){return _},rB:function(){return k},iJ:function(){return b},m7:function(){return h},V9:function(){return S},yD:function(){return I},M6:function(){return p},vG:function(){return E},MD:function(){return g},Is:function(){return m},w8:function(){return y},xc:function(){return v},H_:function(){return f},L5:function(){return C},Cx:function(){return A}});var r=n(13),a=n(9840),i=n(8090),o=n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let s=["fanIn","fanOut","fanAvg"],u=["normal","uniform","truncatedNormal"];var l=n(2931),c=n(6040);class h extends r.m7h.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class f extends h{apply(e,t){return(0,r.lls)(e,t)}}f.className="Zeros",r.m7h.registerClass(f);class p extends h{apply(e,t){return(0,r.iUs)(e,t)}}p.className="Ones",r.m7h.registerClass(p);class d extends h{constructor(e){if(super(),"object"!=typeof e)throw new o.nu(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new o.nu(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return(0,r.lub)(()=>(0,r.dC7)((0,r.iD$)(this.value),(0,r.iUs)(e,t)))}getConfig(){return{value:this.value}}}d.className="Constant",r.m7h.registerClass(d);class m extends h{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return(0,r.LGj)(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}m.className="RandomUniform",r.m7h.registerClass(m);class g extends h{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o.nj(`randomNormal does not support dType ${t}.`);return a.nG(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}g.className="RandomNormal",r.m7h.registerClass(g);class y extends h{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o.nj(`truncatedNormal does not support dType ${t}.`);return(0,r.Xu6)(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}y.className="TruncatedNormal",r.m7h.registerClass(y);class b extends h{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return(0,r.lub)(()=>{if(2===e.length&&e[0]===e[1])return(0,r.dC7)(this.gain,(0,r.iyy)(e[0]));throw new o.nu("Identity matrix initializer can only be used for 2D square matrices.")})}getConfig(){return{gain:this.gain}}}b.className="Identity",r.m7h.registerClass(b);class v extends h{constructor(e){var t,n;if(super(),e.scale<0)throw new o.nu(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,t=this.mode,(0,l.xn)(s,"FanMode",t),this.distribution=null==e.distribution?"normal":e.distribution,n=this.distribution,(0,l.xn)(u,"Distribution",n),this.seed=e.seed}apply(e,t){let n=function(e,t="channelsLast"){let n,r;if((0,i.cj)(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){let t=(0,c.NS)(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){let t=(0,c.NS)(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{let t=(0,c.NS)(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),a=n[0],s=n[1],u=this.scale;if("fanIn"===this.mode?u/=Math.max(1,a):"fanOut"===this.mode?u/=Math.max(1,s):u/=Math.max(1,(a+s)/2),"normal"===this.distribution){let n=Math.sqrt(u);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new o.nj(`${this.getClassName()} does not support dType ${t}.`);return(0,r.Xu6)(e,0,n,t,this.seed)}{let n=Math.sqrt(3*u);return(0,r.LGj)(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}v.className="VarianceScaling",r.m7h.registerClass(v);class w extends v{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return v.className}}w.className="GlorotUniform",r.m7h.registerClass(w);class x extends v{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return v.className}}x.className="GlorotNormal",r.m7h.registerClass(x);class _ extends v{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return v.className}}_.className="HeNormal",r.m7h.registerClass(_);class k extends v{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return v.className}}k.className="HeUniform",r.m7h.registerClass(k);class S extends v{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return v.className}}S.className="LeCunNormal",r.m7h.registerClass(S);class I extends v{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return v.className}}I.className="LeCunNormal",r.m7h.registerClass(I);class E extends h{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new o.nj("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return(0,r.lub)(()=>{if(e.length<2)throw new o.nj("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);let t=e[0]>e[1]?[e[1],e[0]]:e,n=a.nG(t,0,1,"float32"),i=r.$r2.gramSchmidt(n);return e[0]>e[1]&&(i=(0,r.p4s)(i)),(0,r.dC7)(this.gain,i)})}getConfig(){return{gain:this.gain,seed:this.seed}}}E.className="Orthogonal",r.m7h.registerClass(E);let N={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function T(e,t={}){return(0,l.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"initializer")}function A(e){return(0,l.Kj)(e)}function C(e){if("string"==typeof e){let t=e in N?N[e]:e;if("GlorotNormal"===t)return new x;if("GlorotUniform"===t)return new w;{if("HeNormal"===t)return new _;if("HeUniform"===t)return new k;if("LeCunNormal"===t)return new S;if("LeCunUniform"===t)return new I;let e={};return e.className=t,e.config={},T(e)}}return e instanceof h?e:T(e)}},4685:function(e,t,n){"use strict";n.d(t,{MK:function(){return o},Mz:function(){return a},PS:function(){return r},eY:function(){return s},zx:function(){return i}});/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let r=["channelsFirst","channelsLast"],a=["nearest","bilinear"],i=["valid","same","causal"],o=["max","avg"],s=["sum","mul","concat","ave"]},9897:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=n(13),a=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i(e,t={},n=!1){return(0,a.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"layer",n)}},3146:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},i:function(){return i}});var r=n(13);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function a(e){if(null==e)return;let t=[],n=[],a=[];for(let r in e){let i=e[r];"number"!=typeof i&&(t.push(i.data()),n.push(r),a.push(i))}if(t.length>0){let i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];(0,r.B90)(a)}}function i(e){if(null!=e)for(let t in e){let n=e[t];"number"!=typeof n&&n.dispose()}}},6275:function(e,t,n){"use strict";n.d(t,{Eq:function(){return s},FD:function(){return u},KM:function(){return f},Ls:function(){return d},U2:function(){return g},dr:function(){return m},fO:function(){return p},ke:function(){return l},t3:function(){return c},uq:function(){return h}});var r=n(13),a=n(2012),i=n(9840),o=n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s(e,t){return(0,r.lub)(()=>{"float32"!==e.dtype&&(e=r.pju(e,"float32"));let n=r.Smz(i.h6(e),t,!0),o=r.hlL(n.shape,(0,a.Ho)()),s=r._b3(r.gWQ(n,o));return r.hiC(e,s)})}function u(e,t){return(0,r.lub)(()=>r.J69(i.h6(r.luU(t,e)),-1))}function l(e,t){return(0,r.lub)(()=>r.J69(r.WnP(r.luU(t,e)),-1))}function c(e,t){return(0,r.lub)(()=>{let n=r.luU(e,t),i=r.iUl(r.WnP(e),(0,a.Ho)(),Number.MAX_VALUE),o=r.WnP(r.hiC(n,i));return r.dC7(100,r.J69(o,-1))})}function h(e,t,n=!1){return(0,r.lub)(()=>{if(n)t=r.XAC(t);else{let e=r.Smz(t,t.shape.length-1,!0);t=r.hiC(t,e)}return t=r.iUl(t,(0,a.Ho)(),1-(0,a.Ho)()),r.W76(r.Smz(r.dC7(r.pju(e,"float32"),r.cM7(t)),t.shape.length-1))})}function f(e,t,n=!1){return(0,r.lub)(()=>{let o=r.pju(r.GWj(i.xH(e)),"int32");t=r.iUl(t,(0,a.Ho)(),1-(0,a.Ho)());let s=t.shape,u=r.XLQ(r.lfX(o,s[s.length-1]),s);return h(u,t,n)})}function p(e,t){return(0,r.lub)(()=>{let n;return n=r.iUl(t,(0,a.Ho)(),1-(0,a.Ho)()),n=r.cM7(r.hiC(n,r.luU(1,n))),r.J69(function(e,t){if(!r.D5U.arraysEqual(e.shape,t.shape))throw new o.nu(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return(0,r.lub)(()=>{let n=r.UYe(t),a=r.W76(r.WnP(t));return r.IHx(r.luU(n,r.dC7(t,e)),r.Krr(r.Qqt(a)))})}(e,n),-1)})}function d(e,t){return(0,r.lub)(()=>{let n=s(e,-1),a=s(t,-1),i=r.dC7(n,a);return r.W76(r.Smz(i,-1))})}let m={meanSquaredError:u,meanAbsoluteError:l,meanAbsolutePercentageError:c,meanSquaredLogarithmicError:function(e,t){return(0,r.lub)(()=>{let n=r.iUl(t,(0,a.Ho)(),Number.MAX_VALUE),o=r.cM7(r.IHx(1,n)),s=r.iUl(e,(0,a.Ho)(),Number.MAX_VALUE),u=r.cM7(r.IHx(1,s));return r.J69(i.h6(r.luU(o,u)),-1)})},squaredHinge:function(e,t){return(0,r.lub)(()=>{let n=r.gWQ(0,r.luU(1,r.dC7(e,t)));return r.J69(i.h6(n),-1)})},hinge:function(e,t){return(0,r.lub)(()=>{let n=r.gWQ(0,r.luU(1,r.dC7(e,t)));return r.J69(n,-1)})},categoricalHinge:function(e,t){return(0,r.lub)(()=>{let n=r.Smz(r.dC7(e,t),-1),a=r.Fp7(r.dC7(r.luU(1,e),t),-1);return r.gWQ(0,r.IHx(1,r.luU(a,n)))})},logcosh:function(e,t){return(0,r.lub)(()=>{let n=Math.log(2),a=r.luU(t,e),i=r.luU(r.IHx(a,r.Wvh(r.dC7(-2,a))),n);return r.J69(i,-1)})},categoricalCrossentropy:h,sparseCategoricalCrossentropy:f,binaryCrossentropy:p,kullbackLeiblerDivergence:function(e,t){return(0,r.lub)(()=>{let n=r.iUl(e,(0,a.Ho)(),1),i=r.iUl(t,(0,a.Ho)(),1);return r.Smz(r.dC7(e,r.cM7(r.hiC(n,i))),-1)})},poisson:function(e,t){return(0,r.lub)(()=>{let n=r.cM7(r.IHx((0,a.Ho)(),t));return r.J69(r.luU(t,r.dC7(e,n)),-1)})},cosineProximity:d};function g(e){if("string"!=typeof e)return e;{if(e in m)return m[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new o.nu(t)}}},7629:function(e,t,n){"use strict";n.d(t,{G5:function(){return l},KM:function(){return k},TY:function(){return d},U2:function(){return I},_F:function(){return u},aI:function(){return E},ch:function(){return h},fO:function(){return p},uq:function(){return x},wC:function(){return f}});var r=n(13),a=n(9840),i=n(588),o=n(6275),s=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function u(e,t){return(0,r.lub)(()=>{let n=r.dC7(.5,r.JpU(t)),i=a.pj(r.pjt(t,n),e.dtype);return r.J69(r.DgJ(e,i),-1)})}function l(e,t){return(0,r.lub)(()=>a.pj(r.DgJ(r.NqF(e,-1),r.NqF(t,-1)),"float32"))}function c(e,t){return(0,r.lub)(()=>r.pju(r.Smz(r.HvI(r.DgJ(e,1),r.DgJ(t,1))),"float32"))}function h(e,t){return(0,r.lub)(()=>{let n=c(e,t),a=(0,r.lub)(()=>r.pju(r.Smz(r.HvI(r.DgJ(e,0),r.DgJ(t,1))),"float32")),i=r.IHx(n,a);return r.pju(r.arb(r.pjt(i,0),r.hiC(n,i),0),"float32")})}function f(e,t){return(0,r.lub)(()=>{let n=c(e,t),a=(0,r.lub)(()=>r.pju(r.Smz(r.HvI(r.DgJ(e,1),r.DgJ(t,0))),"float32")),i=r.IHx(n,a);return r.pju(r.arb(r.pjt(i,0),r.hiC(n,i),0),"float32")})}function p(e,t){return(0,o.fO)(e,t)}function d(e,t){return e.rank===t.rank&&(e=r.L9e(e,[e.rank-1])),(t=r.NqF(t,-1)).dtype!==e.dtype&&(t=r.pju(t,e.dtype)),r.pju(r.DgJ(e,t),"float32")}let m=o.FD,g=o.FD,y=o.ke,b=o.ke,v=o.t3,w=o.t3,x=o.uq,_=o.Ls,k=o.KM,S={binaryAccuracy:u,categoricalAccuracy:l,precision:h,categoricalCrossentropy:x,sparseCategoricalCrossentropy:k,mse:m,MSE:g,mae:y,MAE:b,mape:v,MAPE:w,cosine:_};function I(e){if("string"==typeof e&&e in S)return S[e];if("string"!=typeof e&&null!=e)return e;throw new i.nu(`Unknown metric ${e}`)}function E(e){if(s.hu(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(let n of Object.keys(o.dr))if(o.dr[n]===e){t=n;break}if(void 0!==t)return t;for(let n of Object.keys(S))if(S[n]===e){t=n;break}return void 0!==t?t:e.name}}},2328:function(e,t,n){"use strict";n.d(t,{j:function(){return o}});var r=n(13),a=n(2012),i=n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o(e){let t={Adagrad:()=>r.p_j.adagrad(.01),Adadelta:()=>r.p_j.adadelta(1,.95,(0,a.Ho)()),Adam:()=>r.p_j.adam(.001,.9,.999,(0,a.Ho)()),Adamax:()=>r.p_j.adamax(.002,.9,.999,(0,a.Ho)(),0),RMSProp:()=>r.p_j.rmsprop(.001,.9,0,(0,a.Ho)()),SGD:()=>r.p_j.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new i.nu(`Unknown Optimizer ${e}`)}},539:function(e,t,n){"use strict";n.d(t,{EC:function(){return d},SG:function(){return f},Xm:function(){return u},l1:function(){return l},l2:function(){return c}});var r=n(13),a=n(9840),i=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o(e){if(null!=e&&"object"!=typeof e)throw Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class s extends r.m7h.Serializable{}class u extends s{constructor(e){super(),o(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return(0,r.lub)(()=>{let t=(0,r.lls)([1]);return this.hasL1&&(t=(0,r.IHx)(t,(0,r.Smz)(r.dC7(this.l1,(0,r.WnP)(e))))),this.hasL2&&(t=(0,r.IHx)(t,(0,r.Smz)(r.dC7(this.l2,a.h6(e))))),r.XLQ(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}function l(e){return o(e),new u({l1:null!=e?e.l1:null,l2:0})}function c(e){return o(e),new u({l2:null!=e?e.l2:null,l1:0})}u.className="L1L2",r.m7h.registerClass(u);let h={l1l2:"L1L2"};function f(e){return(0,i.Kj)(e)}function p(e,t={}){return(0,i.tU)(e,r.m7h.SerializationMap.getMap().classNameMap,t,"regularizer")}function d(e){if(null==e)return null;if("string"==typeof e){let t=e in h?h[e]:e;return p({className:t,config:{}})}return e instanceof s?e:p(e)}},8374:function(e,t,n){"use strict";function r(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let r of n)if("string"!=typeof r||!e(t[r]))return!1;return!0}if(!Array.isArray(t))return!1;for(let n of t)if(!e(n))return!1;return!0}{let e=typeof t;return"string"===e||"number"===e||"boolean"===e}}(e))throw Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}n.d(t,{WE:function(){return r}})},6517:function(e,t,n){"use strict";n.d(t,{$U:function(){return u},AF:function(){return o},kt:function(){return s}});var r=n(588),a=n(2931),i=n(6040);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o(e,t,n){if("number"==typeof e)return(0,a.JE)(e,t);if(e.length!==t)throw new r.nu(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let a=0;a<t;++a){let o=e[a];if(!(0,i.U)(o))throw new r.nu(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function s(e,t,n,r,a=1){return null==e?e:Math.floor((("same"===n?e:e-(t+(t-1)*(a-1))+1)+r-1)/r)}function u(e,t,n,a){if(null==e)return null;if("valid"===a)e=e*t+(0,i.Fp)([n-t,0]);else if("same"===a)e*=t;else throw new r.nu(`Unsupport padding mode: ${a}.`);return e}},2931:function(e,t,n){"use strict";n.d(t,{Bq:function(){return u},D1:function(){return c},Ds:function(){return w},JE:function(){return i},Kj:function(){return p},L7:function(){return m},Mx:function(){return v},QX:function(){return s},Tw:function(){return g},WT:function(){return x},hu:function(){return o},iQ:function(){return function e(t,n){Array.isArray(t)?(r.D5U.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((t,r)=>e(t,`element ${r+1} of ${n}`))):r.D5U.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${function e(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>e(t)).join(",")+"]":"string"==typeof t?`"${t}"`:`${t}`}(t)}.`)}},nK:function(){return y},tU:function(){return d},xn:function(){return b},zW:function(){return h},zZ:function(){return l}});var r=n(13),a=n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{let n=Array(t);return n.fill(e),n}}function o(e,t){if(!e)throw new a.ps(t)}function s(e,t){let n=0;for(let r of e)r===t&&n++;return n}function u(e){return 1===e.length?e[0]:e}function l(e){return Array.isArray(e)?e:[e]}function c(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function h(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}let f={};function p(e){if(null==e)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function d(e,t={},n={},r="object",i=!1){if("string"==typeof e){let i;if(e in n)i=n[e];else if(e in f)i=f[e];else if(null==(i=t[e]))throw new a.nu(`Unknown ${r}: ${e}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}{let o,s;if(null==e.className||null==e.config)throw new a.nu(`${r}: Improper config format: ${JSON.stringify(e)}.
'className' and 'config' must set.`);let u=e.className;if(u in n?[o,s]=n[u]:u in f?[o,s]=f.className:u in t&&([o,s]=t[u]),null==o)throw new a.nu(`Unknown ${r}: ${u}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=s){let t={};for(let e of Object.keys(f))t[e]=f[e];for(let e of Object.keys(n))t[e]=n[e];let r=e.config;r.customObjects=t;let a=Object.assign({},f);for(let e of Object.keys(n))f[e]=n[e];!function e(t){if(null!=t&&"object"==typeof t){if(Array.isArray(t))t.forEach(t=>e(t));else{let n=Object.keys(t);for(let r of n){let n=t[r];null!=n&&"object"==typeof n&&(Array.isArray(n)||"ndarray"!==n.type||"number"!=typeof n.value?e(n):t[r]=n.value)}}}}(e.config);let u=s(o,e.config,n,i);return f=Object.assign({},a),u}{let t=Object.assign({},f);for(let e of Object.keys(n))f[e]=n[e];let r=new o(e.config);return f=Object.assign({},t),r}}}function m(e,t){return -1*(e<t?-1:e>t?1:0)}function g(e){if(null==e)return e;let t=[];for(let n of e)-1===t.indexOf(n)&&t.push(n);return t}function y(e){if(null==e)throw new a.nu(`Invalid value in obj: ${JSON.stringify(e)}`);for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function b(e,t,n){if(null!=n&&0>e.indexOf(n))throw new a.nu(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function v(e,t,n=0,r=1/0){return o(n>=0),o(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function w(e,t,n){let a,i=null!=n?n():r.D5U.now(),o=(...o)=>{let s=null!=n?n():r.D5U.now();return s-i<t?a:(i=s,a=e(...o))};return o}function x(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}},618:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(3013);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e,t,n,a=console.log){let o;let s=function(e){let t=!0,n=[],r=[];for(let t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(let e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(let n of e.layers){let e=!1;for(let a of n.inboundNodes)if(-1!==r.indexOf(a)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),u=["Layer (type)","Input Shape","Output shape","Param #"];if(s?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!s)for(let t in u.push("Receives inputs"),o=[],e.nodesByDepth)o.push(...e.nodesByDepth[t]);a("_".repeat(t)),i(u,n,a),a("=".repeat(t));let l=e.layers;for(let e=0;e<l.length;++e)s?function(e,t,n){let r,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}let o=e.name,s=e.getClassName(),u=[`${o} (${s})`,a,r,e.countParams().toString()];i(u,t,n)}(l[e],n,a):function(e,t,n,r){let a,o;try{o=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){o="multiple"}try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}let s=[];for(let t of e.inboundNodes)if(null==n||!(n.length>0)||-1!==n.indexOf(t))for(let e=0;e<t.inboundLayers.length;++e){let n=t.inboundLayers[e].name,r=t.nodeIndices[e],a=t.tensorIndices[e];s.push(`${n}[${r}][${a}]`)}let u=e.name,l=e.getClassName(),c=0===s.length?"":s[0],h=[`${u} (${l})`,o,a,e.countParams().toString(),c];i(h,t,r);for(let e=1;e<s.length;++e)i(["","","","",s[e]],t,r)}(l[e],n,o,a),a((e===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let c=null!=e.collectedTrainableWeights?(0,r.t)(e.collectedTrainableWeights):(0,r.t)(e.trainableWeights),h=(0,r.t)(e.nonTrainableWeights);a(`Total params: ${c+h}`),a(`Trainable params: ${c}`),a(`Non-trainable params: ${h}`),a("_".repeat(t))}function i(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}},6040:function(e,t,n){"use strict";n.d(t,{Fp:function(){return s},NS:function(){return i},U:function(){return a},VV:function(){return o},w6:function(){return u}});var r=n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e){return e===parseInt(e.toString(),10)}function i(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function o(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function s(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function u(e,t){if(t<e)throw new r.nu(`end (${t}) < begin (${e}) is forbidden.`);let n=[];for(let r=e;r<t;++r)n.push(r);return n}},1977:function(e,t,n){"use strict";n.d(t,{a:function(){return function e(t,n){if(null===t)return null;if("string"==typeof t)return r.zW(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],i=t.length;for(let o=0;o<i;++o){let i=t[o];a(n,o,i)?r.push(i):r.push(e(i,n))}return r}{let n={};for(let a of Object.keys(t)){let i=t[a];if("name"===a&&"string"==typeof i)n[a]=i;else{let t=r.zW(a);n[t]=e(i,t)}}return n}}},q:function(){return function e(t,n){if(null==t)return null;if("string"==typeof t)return r.D1(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],i=t.length;for(let o=0;o<i;++o){let i=t[o];a(n,o,i)?r.push(i):r.push(e(i,n))}return r}{let n={};for(let a of Object.keys(t)){let i=t[a],o=r.D1(a);("name"===a||"className"===a)&&"string"==typeof i?n[o]=i:n[o]=e(i,a)}return n}}}});var r=n(2931);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}},7538:function(e,t,n){"use strict";n.d(t,{Wf:function(){return s},XO:function(){return a},nQ:function(){return o},x6:function(){return i}});var r=n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function a(e){return Array.isArray(e)&&Array.isArray(e[0])}function i(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function o(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new r.nu(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function s(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))return e;if(1===e.length)return e[0];throw new r.nu(`Expected exactly 1 Shape; got ${e.length}`)}},3013:function(e,t,n){"use strict";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r(e){let t=0;for(let n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}n.d(t,{t:function(){return r}})},1653:function(e,t,n){"use strict";n.d(t,{FQ:function(){return u},fU:function(){return s},zb:function(){return l}});var r=n(13),a=n(1944),i=n(8090);n(588);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let o="Variable";class s{constructor(e,t="float32",n=o,s=!0,u=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=(0,a.L)(),n=null==n?o:n,this.originalName=(0,i.MU)(n),this.name=(0,i.w8)(this.originalName),this.trainable_=s,this.constraint=u,this.val=r.VD$(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function u(e){return e.map(e=>e.read())}function l(e){e.forEach(e=>{let t=e[0];t.write(e[1])})}},7385:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});/** @license See the LICENSE file. */let r="3.21.0"},6886:function(e,t,n){"use strict";let r,a,i;n.r(t),n.d(t,{Abs:function(){return K.SYM},Acos:function(){return K.VGw},Acosh:function(){return K.SpW},AdadeltaOptimizer:function(){return K.zJI},AdagradOptimizer:function(){return K.HeW},AdamOptimizer:function(){return K.a4z},AdamaxOptimizer:function(){return K.DBS},Add:function(){return K.mm_},AddN:function(){return K.Xze},All:function(){return K.oT6},Any:function(){return K.IKK},ArgMax:function(){return K.sJF},ArgMin:function(){return K.aJk},Asin:function(){return K.M2y},Asinh:function(){return K.qw7},Atan:function(){return K.jMg},Atan2:function(){return K.QCc},Atanh:function(){return K.Oyi},AvgPool:function(){return K.JhU},AvgPool3D:function(){return K._k9},AvgPool3DGrad:function(){return K.IMb},AvgPoolGrad:function(){return K.ROF},BatchMatMul:function(){return K.XLW},BatchToSpaceND:function(){return K.zws},Bincount:function(){return K.zvY},BroadcastArgs:function(){return K.eEB},BroadcastTo:function(){return K.Ly9},Callback:function(){return su},CallbackList:function(){return aw.BO},Cast:function(){return K.RFZ},Ceil:function(){return K.gJX},ClipByValue:function(){return K.xnO},Complex:function(){return K.Zz9},ComplexAbs:function(){return K.yj2},Concat:function(){return K.Eh3},Conv2D:function(){return K.mhS},Conv2DBackpropFilter:function(){return K.wUP},Conv2DBackpropInput:function(){return K.wm},Conv3D:function(){return K.x12},Conv3DBackpropFilterV2:function(){return K.o2y},Conv3DBackpropInputV2:function(){return K.ik2},Cos:function(){return K.mc4},Cosh:function(){return K.TR1},CropAndResize:function(){return K.VcC},Cumprod:function(){return K.Byc},Cumsum:function(){return K.iHb},CustomCallback:function(){return aw.iT},DataStorage:function(){return K.JLz},DenseBincount:function(){return K.QRR},DepthToSpace:function(){return K.T0n},DepthwiseConv2dNative:function(){return K.cie},DepthwiseConv2dNativeBackpropFilter:function(){return K.sL$},DepthwiseConv2dNativeBackpropInput:function(){return K.y7R},Diag:function(){return K.$w},Dilation2D:function(){return K.p4S},Dilation2DBackpropFilter:function(){return K.Vn9},Dilation2DBackpropInput:function(){return K.ekb},ENV:function(){return K.ViN},EarlyStopping:function(){return sh},Einsum:function(){return K.$g6},Elu:function(){return K.SX0},EluGrad:function(){return K.HEU},Environment:function(){return K.qAh},Equal:function(){return K.hdR},Erf:function(){return K.Omj},Exp:function(){return K.NEP},ExpandDims:function(){return K.YFo},Expm1:function(){return K.Y0y},FFT:function(){return K.vwp},Fill:function(){return K.deh},FlipLeftRight:function(){return K.Uyb},Floor:function(){return K.OR},FloorDiv:function(){return K.jeX},FromPixels:function(){return K.eBW},FusedBatchNorm:function(){return K.sHE},FusedConv2D:function(){return K._V0},FusedDepthwiseConv2D:function(){return K.luS},GatherNd:function(){return K.q1x},GatherV2:function(){return K.qi_},GraphModel:function(){return uF},Greater:function(){return K.iZT},GreaterEqual:function(){return K.Acj},History:function(){return aw.Ay},IFFT:function(){return K.Qg5},Identity:function(){return K.iJz},Imag:function(){return K.J_u},InputSpec:function(){return av.Zg},IsFinite:function(){return K.avt},IsInf:function(){return K.iWB},IsNan:function(){return K.r7n},KernelBackend:function(){return K.Zuw},LRN:function(){return K.eZ0},LRNGrad:function(){return K.Hhh},LayerVariable:function(){return sp.fU},LayersModel:function(){return ax.QV},LeakyRelu:function(){return K.J$2},Less:function(){return K.vtC},LessEqual:function(){return K.CAk},LinSpace:function(){return K.e7N},Log:function(){return K.ZbH},Log1p:function(){return K.kU},LogSoftmax:function(){return K.qCd},LogicalAnd:function(){return K.PYm},LogicalNot:function(){return K.VfG},LogicalOr:function(){return K.MZg},LogicalXor:function(){return K.w6g},LowerBound:function(){return K.qIC},Max:function(){return K.YoZ},MaxPool:function(){return K.mTV},MaxPool3D:function(){return K.OAf},MaxPool3DGrad:function(){return K.OU7},MaxPoolGrad:function(){return K.OV7},MaxPoolWithArgmax:function(){return K.vFR},Maximum:function(){return K.BMI},Mean:function(){return K.q2K},Min:function(){return K.c17},Minimum:function(){return K.q8u},MirrorPad:function(){return K.jQs},Mod:function(){return K.Vbg},MomentumOptimizer:function(){return K.rIn},Multinomial:function(){return K.NZg},Multiply:function(){return K.wYn},Neg:function(){return K.kuV},NonMaxSuppressionV3:function(){return K.uv1},NonMaxSuppressionV4:function(){return K.cye},NonMaxSuppressionV5:function(){return K.W0H},NotEqual:function(){return K.yQU},OP_SCOPE_SUFFIX:function(){return K.zvA},OneHot:function(){return K.we_},OnesLike:function(){return K.qWM},Optimizer:function(){return K.gaJ},OptimizerConstructors:function(){return K.eEe},Pack:function(){return K.QiL},PadV2:function(){return K.lyA},Pool:function(){return K.Kgp},Pow:function(){return K.pe_},Prelu:function(){return K.o0g},Prod:function(){return K.DlI},RMSPropOptimizer:function(){return K.gVI},RNN:function(){return aY.$p},RaggedGather:function(){return K.dDz},RaggedTensorToTensor:function(){return K.BiW},Range:function(){return K.e6w},Rank:function(){return K.yw1},Real:function(){return K.xJR},RealDiv:function(){return K.oHH},Reciprocal:function(){return K.$HU},Reduction:function(){return K.IH3},Relu:function(){return K.qkr},Relu6:function(){return K.SbG},Reshape:function(){return K.HZH},ResizeBilinear:function(){return K._Yw},ResizeBilinearGrad:function(){return K.zbQ},ResizeNearestNeighbor:function(){return K.dpD},ResizeNearestNeighborGrad:function(){return K.Hmb},Reverse:function(){return K.mKl},RotateWithOffset:function(){return K.b9H},Round:function(){return K.e07},Rsqrt:function(){return K.bV0},SGDOptimizer:function(){return K.DYp},ScatterNd:function(){return K.xQA},SearchSorted:function(){return K.nr8},Select:function(){return K.PhF},Selu:function(){return K.oFR},Sequential:function(){return aO},Sigmoid:function(){return K.a5O},Sign:function(){return K.i5y},Sin:function(){return K.RQH},Sinh:function(){return K.wYB},Slice:function(){return K.p2w},Softmax:function(){return K.Gcp},Softplus:function(){return K.MRv},SpaceToBatchND:function(){return K.TQc},SparseFillEmptyRows:function(){return K.O3z},SparseReshape:function(){return K.nhH},SparseSegmentMean:function(){return K.w3H},SparseSegmentSum:function(){return K.ZjV},SparseToDense:function(){return K.D2d},SplitV:function(){return K.L8s},Sqrt:function(){return K.FKq},Square:function(){return K.bK0},SquaredDifference:function(){return K._tC},Step:function(){return K.h8e},StridedSlice:function(){return K.jQk},StringNGrams:function(){return K._JP},StringSplit:function(){return K.s1s},StringToHashBucketFast:function(){return K.XkS},Sub:function(){return K.Tr8},Sum:function(){return K.GBy},SymbolicTensor:function(){return av.Iy},Tan:function(){return K.sEM},Tanh:function(){return K.MIZ},Tensor:function(){return K.esB},TensorBuffer:function(){return K.YDk},Tile:function(){return K.n9L},TopK:function(){return K.cWu},Transform:function(){return K.wx7},Transpose:function(){return K.G3Y},Unique:function(){return K.kpP},Unpack:function(){return K.ToN},UnsortedSegmentSum:function(){return K.Qvg},UpperBound:function(){return K.XDQ},Variable:function(){return K._wD},ZerosLike:function(){return K.RuY},_FusedMatMul:function(){return K.usg},abs:function(){return K.WnP},acos:function(){return K.Khb},acosh:function(){return K.__u},add:function(){return K.IHx},addN:function(){return K.QBD},all:function(){return K.$6P},any:function(){return K.YjB},argMax:function(){return K.NqF},argMin:function(){return K.vHJ},asin:function(){return K.ZRM},asinh:function(){return K.VfV},atan:function(){return K.z4N},atan2:function(){return K.fvJ},atanh:function(){return K.C80},avgPool:function(){return K.wS1},avgPool3d:function(){return K.uR5},backend:function(){return K.y3$},backend_util:function(){return K.Wap},basicLSTMCell:function(){return K.zEQ},batchNorm:function(){return K.tgs},batchNorm2d:function(){return K.Dxk},batchNorm3d:function(){return K.JY5},batchNorm4d:function(){return K.p3b},batchToSpaceND:function(){return K.E4h},bincount:function(){return K.yE8},booleanMaskAsync:function(){return K.anm},broadcastArgs:function(){return K.XsQ},broadcastTo:function(){return K.UFq},broadcast_util:function(){return K.Jyw},browser:function(){return K.Xhn},buffer:function(){return K.f3b},callbacks:function(){return sf},cast:function(){return K.pju},ceil:function(){return K.mDi},clipByValue:function(){return K.iUl},clone:function(){return K.d9v},complex:function(){return K.PYB},concat:function(){return K.zoF},concat1d:function(){return K.gME},concat2d:function(){return K.Izb},concat3d:function(){return K.MNy},concat4d:function(){return K.ZaL},constraints:function(){return x},conv1d:function(){return K.PAt},conv2d:function(){return K.Tek},conv2dTranspose:function(){return K.bc},conv3d:function(){return K.pdZ},conv3dTranspose:function(){return K.$QV},copyRegisteredKernels:function(){return K.T3b},cos:function(){return K.mCk},cosh:function(){return K.f9Y},cosineWindow:function(){return K.mew},cumprod:function(){return K.$Gn},cumsum:function(){return K.zbp},customGrad:function(){return K.cbc},data:function(){return q},denseBincount:function(){return K.ppE},deprecationWarn:function(){return K.MXe},depthToSpace:function(){return K.nTT},depthwiseConv2d:function(){return K.B10},deregisterOp:function(){return sb},device_util:function(){return K.C2$},diag:function(){return K.Ka3},dilation2d:function(){return K.WmZ},disableDeprecationWarnings:function(){return K.cFr},dispose:function(){return K.B90},disposeVariables:function(){return K.N8o},div:function(){return K.hiC},divNoNan:function(){return K.NTj},dot:function(){return K.AKD},dropout:function(){return K.rvX},einsum:function(){return K.WYO},elu:function(){return K.pyx},enableDebugMode:function(){return K.Ra$},enableProdMode:function(){return K.G48},enclosingPowerOfTwo:function(){return K.GRh},engine:function(){return K.SRH},env:function(){return K.OBj},equal:function(){return K.DgJ},erf:function(){return K.qNN},euclideanNorm:function(){return K.d2q},exp:function(){return K.Qqt},expandDims:function(){return K.dt4},expm1:function(){return K.t$B},eye:function(){return K.iyy},fft:function(){return K.kp_},fill:function(){return K.hlL},findBackend:function(){return K.x3e},findBackendFactory:function(){return K.zel},floor:function(){return K.GWj},floorDiv:function(){return K.qPi},fused:function(){return K.imm},gather:function(){return K.Iqj},gatherND:function(){return K.dbB},gather_util:function(){return K.DaI},getBackend:function(){return K.N_N},getGradient:function(){return K.ukX},getKernel:function(){return K.pIF},getKernelsForBackend:function(){return K.trD},grad:function(){return K.UQy},grads:function(){return K.tiA},greater:function(){return K.pjt},greaterEqual:function(){return K.brS},ifft:function(){return K.Sxn},imag:function(){return K.asL},image:function(){return K.BHj},inTopKAsync:function(){return K.V3u},initializers:function(){return _},input:function(){return a$},io:function(){return K.io},irfft:function(){return K.wx0},isFinite:function(){return K.xVT},isInf:function(){return K.UWc},isNaN:function(){return K.i2d},keep:function(){return K.CnY},kernel_impls:function(){return K.GDt},layers:function(){return k},leakyRelu:function(){return K.hi7},less:function(){return K.d9m},lessEqual:function(){return K.zN1},linalg:function(){return K.$r2},linspace:function(){return K.SX3},loadGraphModel:function(){return uM},loadGraphModelSync:function(){return uB},loadLayersModel:function(){return aP},localResponseNormalization:function(){return K.G9k},log:function(){return K.cM7},log1p:function(){return K.Krr},logSigmoid:function(){return K.e_t},logSoftmax:function(){return K.CmS},logSumExp:function(){return K.l_t},logicalAnd:function(){return K.HvI},logicalNot:function(){return K.hJK},logicalOr:function(){return K.K5V},logicalXor:function(){return K.egP},losses:function(){return K.MB5},lowerBound:function(){return K.eab},matMul:function(){return K.OI3},math:function(){return K.mAU},max:function(){return K.Fp7},maxPool:function(){return K._sB},maxPool3d:function(){return K.YQQ},maxPoolWithArgmax:function(){return K.Ip$},maximum:function(){return K.gWQ},mean:function(){return K.J69},memory:function(){return K.sq6},meshgrid:function(){return K.ry_},metrics:function(){return S},min:function(){return K.VV$},minimum:function(){return K.LTh},mirrorPad:function(){return K.VdP},mod:function(){return K.wQq},model:function(){return aR},models:function(){return I},moments:function(){return K.Gi7},movingAverage:function(){return K.p_},mul:function(){return K.dC7},multiRNNCell:function(){return K.rq4},multinomial:function(){return K.SJ_},neg:function(){return K.W76},nextFrame:function(){return K.glt},norm:function(){return K.KOy},notEqual:function(){return K.Quu},oneHot:function(){return K.lfX},ones:function(){return K.iUs},onesLike:function(){return K.JpU},op:function(){return K.op},outerProduct:function(){return K.N2O},pad:function(){return K.vku},pad1d:function(){return K.pNR},pad2d:function(){return K.koy},pad3d:function(){return K.t1L},pad4d:function(){return K.lGY},pool:function(){return K.d_R},pow:function(){return K.sQ3},prelu:function(){return K.AL3},print:function(){return K.S0v},prod:function(){return K.WVs},profile:function(){return K.N5s},raggedGather:function(){return K.$gW},raggedTensorToTensor:function(){return K.N89},rand:function(){return K.TN_},randomGamma:function(){return K.wzB},randomNormal:function(){return K.nGf},randomStandardNormal:function(){return K.ruB},randomUniform:function(){return K.LGj},range:function(){return K.w6H},ready:function(){return K.Cd_},real:function(){return K.kwC},reciprocal:function(){return K.M25},registerBackend:function(){return K.jqO},registerCallbackConstructor:function(){return aF},registerGradient:function(){return K.LiG},registerKernel:function(){return K.wCN},registerOp:function(){return sy},regularizers:function(){return E},relu:function(){return K.UYe},relu6:function(){return K.btT},removeBackend:function(){return K.cjG},reshape:function(){return K.XLQ},reverse:function(){return K.GYS},reverse1d:function(){return K.SDf},reverse2d:function(){return K.diP},reverse3d:function(){return K.sx7},reverse4d:function(){return K.mG2},rfft:function(){return K.QEs},round:function(){return K.NMM},rsqrt:function(){return K.bp0},scalar:function(){return K.iD$},scatterND:function(){return K.snQ},scatter_util:function(){return K.yV1},searchSorted:function(){return K.zcT},selu:function(){return K.U8D},separableConv2d:function(){return K.U_I},sequential:function(){return aD},serialization:function(){return K.m7h},setBackend:function(){return K.CQI},setPlatform:function(){return K.VYu},setdiff1dAsync:function(){return K.ODp},sigmoid:function(){return K.XD2},sign:function(){return K.Xxe},signal:function(){return K.tdS},sin:function(){return K.O$l},sinh:function(){return K.R_K},slice:function(){return K.tPi},slice1d:function(){return K.jZU},slice2d:function(){return K.SmN},slice3d:function(){return K.CnO},slice4d:function(){return K.p0P},slice_util:function(){return K.kuN},softmax:function(){return K.XAC},softplus:function(){return K.Wvh},spaceToBatchND:function(){return K.fBT},sparse:function(){return K.rVs},sparseToDense:function(){return K.ers},spectral:function(){return K.uN7},split:function(){return K.Vl2},sqrt:function(){return K._b3},square:function(){return K.h62},squaredDifference:function(){return K.$i},squeeze:function(){return K.L9e},stack:function(){return K.knu},step:function(){return K.Nbs},stridedSlice:function(){return K.NXj},string:function(){return K.Z_8},sub:function(){return K.luU},sum:function(){return K.Smz},sumOutType:function(){return K.z4k},tan:function(){return K.ORZ},tanh:function(){return K.AEp},tensor:function(){return K.XeE},tensor1d:function(){return K.RRF},tensor2d:function(){return K.odF},tensor3d:function(){return K.wOQ},tensor4d:function(){return K.yXz},tensor5d:function(){return K.Bfx},tensor6d:function(){return K.xZs},tensor_util:function(){return K.piX},test_util:function(){return K.p3L},tidy:function(){return K.lub},tile:function(){return K.Gg6},time:function(){return K.XVJ},topk:function(){return K.hg7},train:function(){return K.p_j},transpose:function(){return K.p4s},truncatedNormal:function(){return K.Xu6},unique:function(){return K.Two},unregisterGradient:function(){return K.bt3},unregisterKernel:function(){return K.nEe},unsortedSegmentSum:function(){return K.pUJ},unstack:function(){return K.HHK},upcastType:function(){return K.x8V},upperBound:function(){return K.GaM},util:function(){return K.D5U},valueAndGrad:function(){return K.h76},valueAndGrads:function(){return K.fNQ},variable:function(){return K.VD$},variableGrads:function(){return K.pnJ},version:function(){return ku},version_converter:function(){return uL},version_core:function(){return K.jTM},version_layers:function(){return sd.i},where:function(){return K.arb},whereAsync:function(){return K.itS},zeros:function(){return K.lls},zerosLike:function(){return K.P84}});var o,s,u,l,c,h,f,p,d,m,g,y,b,v,w,x={};n.r(x),n.d(x,{maxNorm:function(){return r7},minMaxNorm:function(){return at},nonNeg:function(){return ae},unitNorm:function(){return r9}});var _={};n.r(_),n.d(_,{constant:function(){return ai},glorotNormal:function(){return af},glorotUniform:function(){return ah},heNormal:function(){return ap},heUniform:function(){return ad},identity:function(){return al},leCunNormal:function(){return am},leCunUniform:function(){return ag},ones:function(){return aa},orthogonal:function(){return ay},randomNormal:function(){return as},randomUniform:function(){return ao},truncatedNormal:function(){return au},varianceScaling:function(){return ac},zeros:function(){return ar}});var k={};n.r(k),n.d(k,{Layer:function(){return av.mh},RNN:function(){return aY.$p},RNNCell:function(){return aY.ki},activation:function(){return i5},add:function(){return oi},alphaDropout:function(){return oK},average:function(){return oo},averagePooling1d:function(){return om},averagePooling2d:function(){return ob},averagePooling3d:function(){return ox},avgPool1d:function(){return og},avgPool2d:function(){return ov},avgPool3d:function(){return o_},avgPooling1d:function(){return oy},avgPooling2d:function(){return ow},avgPooling3d:function(){return ok},batchNormalization:function(){return of},bidirectional:function(){return oj},concatenate:function(){return os},conv1d:function(){return iY},conv2d:function(){return iQ},conv2dTranspose:function(){return iJ},conv3d:function(){return i0},conv3dTranspose:function(){return i1},convLstm2d:function(){return oM},convLstm2dCell:function(){return oB},cropping2D:function(){return i3},dense:function(){return i8},depthwiseConv2d:function(){return i6},dot:function(){return oh},dropout:function(){return i7},elu:function(){return iG},embedding:function(){return oa},flatten:function(){return oe},gaussianDropout:function(){return oX},gaussianNoise:function(){return oq},globalAveragePooling1d:function(){return oS},globalAveragePooling2d:function(){return oI},globalMaxPool1d:function(){return oW},globalMaxPool2d:function(){return oV},globalMaxPooling1d:function(){return oE},globalMaxPooling2d:function(){return oN},gru:function(){return oO},gruCell:function(){return oR},input:function(){return a$},inputLayer:function(){return iV},layerNormalization:function(){return op},leakyReLU:function(){return iq},lstm:function(){return oD},lstmCell:function(){return oP},masking:function(){return oZ},maxPool1d:function(){return oG},maxPool2d:function(){return oH},maxPooling1d:function(){return oT},maxPooling2d:function(){return oA},maxPooling3d:function(){return oC},maximum:function(){return ou},minimum:function(){return ol},multiply:function(){return oc},permute:function(){return or},prelu:function(){return iX},reLU:function(){return iH},repeatVector:function(){return ot},rescaling:function(){return oY},reshape:function(){return on},rnn:function(){return oL},separableConv2d:function(){return i2},simpleRNN:function(){return o$},simpleRNNCell:function(){return oF},softmax:function(){return iK},spatialDropout1d:function(){return i9},stackedRNNCells:function(){return oU},thresholdedReLU:function(){return iZ},timeDistributed:function(){return oz},upSampling2d:function(){return i4},zeroPadding2d:function(){return od}});var S={};n.r(S),n.d(S,{MAPE:function(){return o9},MSE:function(){return sn},binaryAccuracy:function(){return oJ},binaryCrossentropy:function(){return o0},categoricalAccuracy:function(){return o2},categoricalCrossentropy:function(){return o3},cosineProximity:function(){return o5},mape:function(){return se},meanAbsoluteError:function(){return o8},meanAbsolutePercentageError:function(){return o7},meanSquaredError:function(){return st},mse:function(){return sr},precision:function(){return o4},recall:function(){return o6},sparseCategoricalAccuracy:function(){return o1}});var I={};n.r(I),n.d(I,{modelFromJSON:function(){return aT}});var E={};n.r(E),n.d(E,{l1:function(){return si},l1l2:function(){return sa},l2:function(){return so}});var N={};n.r(N),n.d(N,{json:function(){return sE}});var T={};n.r(T),n.d(T,{json:function(){return sN}});var A={};n.r(A),n.d(A,{json:function(){return sT}});var C={};n.r(C),n.d(C,{json:function(){return sA}});var O={};n.r(O),n.d(O,{json:function(){return sC}});var R={};n.r(R),n.d(R,{json:function(){return sO}});var D={};n.r(D),n.d(D,{json:function(){return sR}});var P={};n.r(P),n.d(P,{json:function(){return sD}});var $={};n.r($),n.d($,{json:function(){return sP}});var F={};n.r(F),n.d(F,{json:function(){return s$}});var M={};n.r(M),n.d(M,{json:function(){return sF}});var B={};n.r(B),n.d(B,{json:function(){return sM}});var L={};n.r(L),n.d(L,{json:function(){return sB}});var U={};n.r(U),n.d(U,{json:function(){return sL}});var j={};n.r(j),n.d(j,{json:function(){return sU}});var z={};n.r(z),n.d(z,{json:function(){return sj}});var W={};n.r(W),n.d(W,{json:function(){return sz}});var V={};n.r(V),n.d(V,{json:function(){return sW}});var G={};n.r(G),n.d(G,{json:function(){return sV}});var H={};n.r(H),n.d(H,{OP_SCOPE_SUFFIX:function(){return s7.zvA},abs:function(){return s7.WnP},acos:function(){return s7.Khb},acosh:function(){return s7.__u},add:function(){return s7.IHx},addN:function(){return s7.QBD},all:function(){return s7.$6P},any:function(){return s7.YjB},argMax:function(){return s7.NqF},argMin:function(){return s7.vHJ},asin:function(){return s7.ZRM},asinh:function(){return s7.VfV},atan:function(){return s7.z4N},atan2:function(){return s7.fvJ},atanh:function(){return s7.C80},avgPool:function(){return s7.wS1},avgPool3d:function(){return s7.uR5},basicLSTMCell:function(){return s7.zEQ},batchNorm:function(){return s7.tgs},batchNorm2d:function(){return s7.Dxk},batchNorm3d:function(){return s7.JY5},batchNorm4d:function(){return s7.p3b},batchToSpaceND:function(){return s7.E4h},bincount:function(){return s7.yE8},booleanMaskAsync:function(){return s7.anm},broadcastArgs:function(){return s7.XsQ},broadcastTo:function(){return s7.UFq},buffer:function(){return s7.f3b},cast:function(){return s7.pju},ceil:function(){return s7.mDi},clipByValue:function(){return s7.iUl},clone:function(){return s7.d9v},complex:function(){return s7.PYB},concat:function(){return s7.zoF},concat1d:function(){return s7.gME},concat2d:function(){return s7.Izb},concat3d:function(){return s7.MNy},concat4d:function(){return s7.ZaL},conv1d:function(){return s7.PAt},conv2d:function(){return s7.Tek},conv2dTranspose:function(){return s7.bc},conv3d:function(){return s7.pdZ},conv3dTranspose:function(){return s7.$QV},cos:function(){return s7.mCk},cosh:function(){return s7.f9Y},cosineWindow:function(){return s7.mew},cumprod:function(){return s7.$Gn},cumsum:function(){return s7.zbp},denseBincount:function(){return s7.ppE},depthToSpace:function(){return s7.nTT},depthwiseConv2d:function(){return s7.B10},diag:function(){return s7.Ka3},dilation2d:function(){return s7.WmZ},div:function(){return s7.hiC},divNoNan:function(){return s7.NTj},dot:function(){return s7.AKD},dropout:function(){return s7.rvX},einsum:function(){return s7.WYO},elu:function(){return s7.pyx},enclosingPowerOfTwo:function(){return s7.GRh},equal:function(){return s7.DgJ},erf:function(){return s7.qNN},euclideanNorm:function(){return s7.d2q},exp:function(){return s7.Qqt},expandDims:function(){return s7.dt4},expm1:function(){return s7.t$B},eye:function(){return s7.iyy},fft:function(){return s7.kp_},fill:function(){return s7.hlL},floor:function(){return s7.GWj},floorDiv:function(){return s7.qPi},fused:function(){return s7.imm},gather:function(){return s7.Iqj},gatherND:function(){return s7.dbB},greater:function(){return s7.pjt},greaterEqual:function(){return s7.brS},ifft:function(){return s7.Sxn},imag:function(){return s7.asL},image:function(){return s7.BHj},inTopKAsync:function(){return s7.V3u},irfft:function(){return s7.wx0},isFinite:function(){return s7.xVT},isInf:function(){return s7.UWc},isNaN:function(){return s7.i2d},leakyRelu:function(){return s7.hi7},less:function(){return s7.d9m},lessEqual:function(){return s7.zN1},linalg:function(){return s7.$r2},linspace:function(){return s7.SX3},localResponseNormalization:function(){return s7.G9k},log:function(){return s7.cM7},log1p:function(){return s7.Krr},logSigmoid:function(){return s7.e_t},logSoftmax:function(){return s7.CmS},logSumExp:function(){return s7.l_t},logicalAnd:function(){return s7.HvI},logicalNot:function(){return s7.hJK},logicalOr:function(){return s7.K5V},logicalXor:function(){return s7.egP},losses:function(){return s7.MB5},lowerBound:function(){return s7.eab},matMul:function(){return s7.OI3},max:function(){return s7.Fp7},maxPool:function(){return s7._sB},maxPool3d:function(){return s7.YQQ},maxPoolWithArgmax:function(){return s7.Ip$},maximum:function(){return s7.gWQ},mean:function(){return s7.J69},meshgrid:function(){return s7.ry_},min:function(){return s7.VV$},minimum:function(){return s7.LTh},mirrorPad:function(){return s7.VdP},mod:function(){return s7.wQq},moments:function(){return s7.Gi7},movingAverage:function(){return s7.p_},mul:function(){return s7.dC7},multiRNNCell:function(){return s7.rq4},multinomial:function(){return s7.SJ_},neg:function(){return s7.W76},norm:function(){return s7.KOy},notEqual:function(){return s7.Quu},oneHot:function(){return s7.lfX},ones:function(){return s7.iUs},onesLike:function(){return s7.JpU},op:function(){return s7.op},outerProduct:function(){return s7.N2O},pad:function(){return s7.vku},pad1d:function(){return s7.pNR},pad2d:function(){return s7.koy},pad3d:function(){return s7.t1L},pad4d:function(){return s7.lGY},pool:function(){return s7.d_R},pow:function(){return s7.sQ3},prelu:function(){return s7.AL3},print:function(){return s7.S0v},prod:function(){return s7.WVs},raggedGather:function(){return s7.$gW},raggedTensorToTensor:function(){return s7.N89},rand:function(){return s7.TN_},randomGamma:function(){return s7.wzB},randomNormal:function(){return s7.nGf},randomStandardNormal:function(){return s7.ruB},randomUniform:function(){return s7.LGj},range:function(){return s7.w6H},real:function(){return s7.kwC},reciprocal:function(){return s7.M25},relu:function(){return s7.UYe},relu6:function(){return s7.btT},reshape:function(){return s7.XLQ},reverse:function(){return s7.GYS},reverse1d:function(){return s7.SDf},reverse2d:function(){return s7.diP},reverse3d:function(){return s7.sx7},reverse4d:function(){return s7.mG2},rfft:function(){return s7.QEs},round:function(){return s7.NMM},rsqrt:function(){return s7.bp0},scalar:function(){return s7.iD$},scatterND:function(){return s7.snQ},searchSorted:function(){return s7.zcT},selu:function(){return s7.U8D},separableConv2d:function(){return s7.U_I},setdiff1dAsync:function(){return s7.ODp},sigmoid:function(){return s7.XD2},sign:function(){return s7.Xxe},signal:function(){return s7.tdS},sin:function(){return s7.O$l},sinh:function(){return s7.R_K},slice:function(){return s7.tPi},slice1d:function(){return s7.jZU},slice2d:function(){return s7.SmN},slice3d:function(){return s7.CnO},slice4d:function(){return s7.p0P},softmax:function(){return s7.XAC},softplus:function(){return s7.Wvh},spaceToBatchND:function(){return s7.fBT},sparse:function(){return s7.rVs},sparseToDense:function(){return s7.ers},spectral:function(){return s7.uN7},split:function(){return s7.Vl2},sqrt:function(){return s7._b3},square:function(){return s7.h62},squaredDifference:function(){return s7.$i},squeeze:function(){return s7.L9e},stack:function(){return s7.knu},step:function(){return s7.Nbs},stridedSlice:function(){return s7.NXj},string:function(){return s7.Z_8},sub:function(){return s7.luU},sum:function(){return s7.Smz},tan:function(){return s7.ORZ},tanh:function(){return s7.AEp},tensor:function(){return s7.XeE},tensor1d:function(){return s7.RRF},tensor2d:function(){return s7.odF},tensor3d:function(){return s7.wOQ},tensor4d:function(){return s7.yXz},tensor5d:function(){return s7.Bfx},tensor6d:function(){return s7.xZs},tile:function(){return s7.Gg6},topk:function(){return s7.hg7},transpose:function(){return s7.p4s},truncatedNormal:function(){return s7.Xu6},unique:function(){return s7.Two},unsortedSegmentSum:function(){return s7.pUJ},unstack:function(){return s7.HHK},upperBound:function(){return s7.GaM},variable:function(){return s7.VD$},where:function(){return s7.arb},whereAsync:function(){return s7.itS},zeros:function(){return s7.lls},zerosLike:function(){return s7.P84}});var q={};n.r(q),n.d(q,{CSVDataset:function(){return lf},Dataset:function(){return lt},FileDataSource:function(){return lN},TextLineDataset:function(){return lo},URLDataSource:function(){return lT},array:function(){return lr},csv:function(){return lA},func:function(){return lC},generator:function(){return lO},microphone:function(){return lD},version_data:function(){return lP},webcam:function(){return lR},zip:function(){return la}});var X={};n.r(X),n.d(X,{addImpl:function(){return ci},bincountImpl:function(){return cQ},bincountReduceImpl:function(){return cJ},castImpl:function(){return ce},ceilImpl:function(){return c2},concatImpl:function(){return c9},equalImpl:function(){return hF},expImpl:function(){return hq},expm1Impl:function(){return hQ},floorImpl:function(){return fr},gatherNdImpl:function(){return fh},gatherV2Impl:function(){return fp},greaterEqualImpl:function(){return fb},greaterImpl:function(){return fm},lessEqualImpl:function(){return fO},lessImpl:function(){return fT},linSpaceImpl:function(){return fP},logImpl:function(){return fF},maxImpl:function(){return fY},maximumImpl:function(){return f0},minimumImpl:function(){return pe},multiplyImpl:function(){return hT},negImpl:function(){return pc},notEqualImpl:function(){return pb},prodImpl:function(){return pO},raggedGatherImpl:function(){return pP},raggedTensorToTensorImpl:function(){return pU},rangeImpl:function(){return pz},rsqrtImpl:function(){return p0},scatterImpl:function(){return p3},sigmoidImpl:function(){return l1},simpleAbsImpl:function(){return cd},sliceImpl:function(){return cX},sparseFillEmptyRowsImpl:function(){return df},sparseReshapeImpl:function(){return dd},sparseSegmentReductionImpl:function(){return dg},sqrtImpl:function(){return dx},squaredDifferenceImpl:function(){return dI},stridedSliceImpl:function(){return dC},stringNGramsImpl:function(){return dD},stringSplitImpl:function(){return d$},stringToHashBucketFastImpl:function(){return dM},subImpl:function(){return h4},tileImpl:function(){return dW},topKImpl:function(){return dH},transposeImpl:function(){return c_},uniqueImpl:function(){return dY}});var K=n(13),Z=n(9121),Y=n(2271),Q=n(4841),J=n(1901);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ee={kernelName:Z.SYM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,(0,J.N)((0,Y.p)(n,"float32"),-1))}}};var et=n(1274),en=n(7370),er=n(9494),ea=n(3261),ei=n(248),eo=n(827);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let es={kernelName:Z.VGw,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,ei.h)((0,Y.p)(n,"float32")),r=(0,ea._)((0,eo.l)((0,er.i)(1),t));return(0,en.W)((0,et.h)(e,r))}}}},eu={kernelName:Z.SpW,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,ea._)((0,eo.l)((0,ei.h)((0,Y.p)(n,"float32")),1));return(0,et.h)(e,t)}}}};var el=n(2200),ec=n(4968),eh=n(5475);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ef={kernelName:Z.mm_,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=el.assertAndGetBroadcastShape(n.shape,r.shape),i=()=>{let t=e,r=el.getReductionAxes(n.shape,a);return r.length>0&&(t=(0,eh.S)(t,r)),(0,ec.X)(t,n.shape)},o=()=>{let t=e,n=el.getReductionAxes(r.shape,a);return n.length>0&&(t=(0,eh.S)(t,n)),(0,ec.X)(t,r.shape)};return{a:i,b:o}}},ep={kernelName:Z.Xze,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}};var ed=n(6577);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let em={kernelName:Z.sJF,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,ed.P)(n)}}},eg={kernelName:Z.aJk,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,ed.P)(n)}}},ey={kernelName:Z.M2y,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,ea._)((0,eo.l)((0,er.i)(1),(0,ei.h)((0,Y.p)(n,"float32")))))}}};var eb=n(6407);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ev={kernelName:Z.qw7,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,ea._)((0,eb.I)((0,er.i)(1),(0,ei.h)((0,Y.p)(n,"float32"))));return(0,et.h)(e,t)}}}},ew={kernelName:Z.QCc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,el.assertAndGetBroadcastShape)(n.shape,r.shape),i=()=>{let t=(0,eb.I)((0,ei.h)(n),(0,ei.h)(r)),i=(0,Q.d)(e,(0,et.h)(r,t)),o=(0,el.getReductionAxes)(n.shape,a);return o.length>0&&(i=(0,eh.S)(i,o)),(0,ec.X)(i,n.shape)},o=()=>{let t=(0,eb.I)((0,ei.h)(n),(0,ei.h)(r)),i=(0,en.W)((0,Q.d)(e,(0,et.h)(n,t))),o=(0,el.getReductionAxes)(r.shape,a);return o.length>0&&(i=(0,eh.S)(i,o)),(0,ec.X)(i,r.shape)};return{a:i,b:o}}},ex={kernelName:Z.jMg,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,eb.I)((0,ei.h)((0,Y.p)(n,"float32")),1))}}},e_={kernelName:Z.Oyi,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,eo.l)((0,er.i)(1),(0,ei.h)((0,Y.p)(n,"float32"))))}}};var ek=n(196),eS=n(3740),eI=n(569),eE=n(2582),eN=n(2668);let eT=(0,eN.op)({avgPool3dGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,i){let o=(0,eS._1)(e,"dy","avgPool3dGrad"),s=(0,eS._1)(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;4===s.rank&&(c=!0,u=(0,ec.X)(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=(0,ec.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),eI.hu(5===u.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),eI.hu(5===l.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${l.rank}.`),(0,eE.m)("avgPool3dGrad",a,i);let h={dy:u,input:l},f=ek.BV.runKernel(Z.IMb,h,{filterSize:n,strides:r,pad:a,dimRoundingMode:i});return c?(0,ec.X)(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}}),eA={kernelName:Z._k9,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:o,dimRoundingMode:s}=n;return{x:()=>eT(e,r,a,i,o,s)}}},eC=(0,eN.op)({avgPoolGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let i=(0,eS._1)(e,"dy","avgPoolGrad"),o=(0,eS._1)(t,"input","avgPoolGrad");eI.hu(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let s=o,u=i,l=!1;3===o.rank&&(l=!0,s=(0,ec.X)(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=(0,ec.X)(i,[1,i.shape[0],i.shape[1],i.shape[2]])),eI.hu(4===u.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${u.rank}.`),eI.hu(4===s.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);let c={dy:u,input:s},h=ek.BV.runKernel(Z.ROF,c,{filterSize:n,strides:r,pad:a});return l?(0,ec.X)(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),eO={kernelName:Z.JhU,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:o}=n;return{x:()=>eC(e,r,a,i,o)}}};var eR=n(8687);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eD={kernelName:Z.XLW,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:i,transposeB:o}=n;return i||o?!i&&o?{a:()=>(0,eR.O)(e,a,!1,!1),b:()=>(0,eR.O)(e,r,!0,!1)}:i&&!o?{a:()=>(0,eR.O)(a,e,!1,!0),b:()=>(0,eR.O)(r,e,!1,!1)}:{a:()=>(0,eR.O)(a,e,!0,!0),b:()=>(0,eR.O)(e,r,!0,!0)}:{a:()=>(0,eR.O)(e,a,!1,!0),b:()=>(0,eR.O)(r,e,!0,!1)}}};var eP=n(7918);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e$={kernelName:Z.zws,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>(0,eP.f)(e,r,a)}}},eF={kernelName:Z.Ly9,gradFunc:(e,t,n)=>{let r=n.inputShape,a=n.shape,i=Array.from(a);for(let e=r.length-1;e>=0;e--)if(r[e]===a[e])i[e]=1;else if(1!==r[e])throw Error(`broadcastTo(): [${r}] cannot be broadcast to [${a}].`);let o=[];for(let e=0;e<i.length;e++)i[e]>1&&o.push(e);return{x:()=>(0,eh.S)(e,o,!0)}}},eM={kernelName:Z.RFZ,gradFunc:e=>({x:()=>e.clone()})},eB={kernelName:Z.gJX,gradFunc:e=>({x:()=>(0,ed.P)(e)})};var eL=n(7630),eU=n(624),ej=n(2856),ez=n(5912);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eW={kernelName:Z.xnO,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>(0,ez.a)((0,ej.H)((0,eL.b)(r,a),(0,eU.z)(r,i)),e,(0,ed.P)(e))}}},eV={kernelName:Z.yj2,inputsToSave:["x"],gradFunc:ee.gradFunc};var eG=n(8644);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eH={kernelName:Z.Eh3,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(e=>e.shape),{axis:a}=n,i=(0,eI.EC)(a,t[0].shape)[0],o=r.map(e=>e[i]),s=(0,eG.V)(e,o,i);return s.map(e=>()=>e)}};var eq=n(6013),eX=n(9832);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eK={kernelName:Z.mhS,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:i,strides:o,pad:s,dataFormat:u}=n;return eI.hu(eE.I0(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>(0,eX._)(r.shape,e,a,o,s,u),filter:()=>(0,eq.p)(r,e,a.shape,o,s,u)}}};var eZ=n(4794);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eY={kernelName:Z.wm,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:i,pad:o,dataFormat:s,dimRoundingMode:u}=n;return{dy:()=>(0,eZ.T)(e,a,i,o,s,1,u),filter:()=>(0,eq.p)(e,r,a.shape,i,o,s,u)}}},eQ=(0,eN.op)({conv3DBackpropFilter_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let i=e;4===e.rank&&(i=(0,ec.X)(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let o=t;4===o.rank&&(o=(0,ec.X)(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),eI.hu(5===i.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),eI.hu(5===o.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),eI.hu(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),eI.hu(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),eI.hu(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);let s={x:i,dy:o};return ek.BV.runKernel(Z.o2y,s,{strides:r,pad:a,filterShape:n})}});var eJ=n(7594);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e0={kernelName:Z.x12,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i}=n;eI.hu((0,eE.I0)(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[o,s]=t;return{x:()=>(0,eJ._)(o.shape,e,s,a,i),filter:()=>eQ(o,e,s.shape,a,i)}}};var e1=n(9331);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e2={kernelName:Z.mc4,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)((0,en.W)((0,e1.O)((0,Y.p)(n,"float32"))),e)}}};var e3=n(3254);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e4={kernelName:Z.TR1,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)((0,e3.R)((0,Y.p)(n,"float32")),e)}}};var e6=n(3591),e5=n(7405),e8=n(9065);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e7={kernelName:Z.iHb,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:i,reverse:o}=n;return{x:()=>{let t=(0,e6.Q3)([a],r.rank),n=(0,e5.z)(e,a,i,!o);return null!=t&&(n=(0,e8.p)(n,t)),n}}}};var e9=n(8098),te=n(4375);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tt={kernelName:Z.cie,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i,dimRoundingMode:o}=n,s=null==r?[1,1]:r;eI.hu(eE.I0(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[u,l]=t;return eI.hu(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${u.rank}.`),eI.hu(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${l.rank}.`),eI.hu(u.shape[3]===l.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),eI.hu(eE.jT(a,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${a} and dilations '${s}'.`),eE.m("depthwiseConv2d",i,o),{x:()=>(0,te.v)(u.shape,e,l,a,i,s,o),filter:()=>(0,e9.z)(u,e,l.shape,a,i,s,o)}}},tn={kernelName:Z.p4S,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,i={x:r,filter:a,dy:e},o={x:r,filter:a,dy:e};return{x:()=>ek.BV.runKernel(Z.ekb,i,n),filter:()=>ek.BV.runKernel(Z.Vn9,o,n)}}},tr={kernelName:Z.SX0,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>ek.BV.runKernel(Z.HEU,r)}}};var ta=n(4842);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ti={kernelName:Z.Omj,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=(0,Q.d)((0,ta.Q)((0,en.W)((0,ei.h)(n))),2/Math.sqrt(Math.PI));return{x:()=>(0,Q.d)(e,r)}}},to={kernelName:Z.NEP,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,n)}}},ts={kernelName:Z.YFo,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>(0,ec.X)(e,n.shape)}}},tu={kernelName:Z.Y0y,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,(0,ta.Q)(n))}}},tl={kernelName:Z.OR,gradFunc:e=>({x:()=>(0,ed.P)(e)})},tc={kernelName:Z.jeX,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,el.assertAndGetBroadcastShape)(n.shape,r.shape),i=()=>{let t=(0,et.h)(e,(0,Y.p)(r,"float32")),i=(0,el.getReductionAxes)(n.shape,a);return i.length>0?(0,ec.X)((0,eh.S)(t,i),n.shape):t},o=()=>{let t=(0,Q.d)(e,(0,Y.p)(n,"float32")),i=(0,el.getReductionAxes)(r.shape,a);i.length>0&&(t=(0,ec.X)((0,eh.S)(t,i),r.shape));let o=(0,ei.h)(r);return(0,en.W)((0,et.h)(t,(0,Y.p)(o,"float32")))};return{a:i,b:o}}};var th=n(2634),tf=n(7501);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tp={kernelName:Z.sHE,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,i,o,s]=t,u=null==s?(0,er.i)(1):s,l=(0,el.getReductionAxes)(i.shape,a.shape),c=[];if(1===i.rank){for(let e=0;e<a.shape.length-1;++e)c.push(a.shape[e]);c.push(1)}let h=(0,eo.l)(a,i),f=(0,Q.d)(e,u),p=(0,th.b)((0,eb.I)(o,(0,er.i)(r))),d=(0,Q.d)((0,Q.d)((0,Q.d)(p,p),p),(0,er.i)(-.5)),m=()=>1===i.rank?(0,ec.X)((0,Q.d)((0,Q.d)(e,(0,tf.G)((0,ec.X)(p,[1,1,1,i.shape[0]]),c)),u),a.shape):(0,ec.X)((0,Q.d)((0,Q.d)(e,p),u),a.shape),g=()=>{let e=(0,Q.d)((0,Q.d)(p,(0,er.i)(-1)),f);return 1===i.rank&&(e=(0,eh.S)(e,l)),(0,ec.X)(e,i.shape)},y=()=>{let e=(0,Q.d)((0,Q.d)(d,h),f);return 1===i.rank&&(e=(0,eh.S)(e,l)),(0,ec.X)(e,i.shape)},b=()=>{let t=(0,Q.d)(h,p),n=(0,Q.d)(e,t);return 1===i.rank&&(n=(0,eh.S)(n,l)),(0,ec.X)(n,i.shape)},v=()=>{let t=e;return 1===i.rank&&(t=(0,eh.S)(t,l)),(0,ec.X)(t,i.shape)};return{x:m,mean:g,variance:y,scale:b,offset:v}}};var td=n(8749);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tm={kernelName:Z.qi_,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:i}=n,o=(0,eI.EC)(i,r.shape)[0],s=()=>{let t=r.shape,n=a.size,s=t.slice(0,o),u=s.length,l=t.slice(i,t.length).slice(1),c=l.length,h=tg(0,u),f=tg(u+1,u+1+c),p=ty([s,[n],l]),d=(0,ec.X)(e,p),m=(0,ec.X)(a,[n]),g=ty([[u],h,f]),y=(0,e8.p)(d,g),b=(0,td.p)(y,m,r.shape[o]),v=(0,e6.LJ)(g);return(0,e8.p)(b,v)};return{x:s,indices:()=>a}}};function tg(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function ty(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tb={kernelName:Z.Acj,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>(0,ed.P)(n),b:()=>(0,ed.P)(r)}}},tv={kernelName:Z.iJz,gradFunc:e=>({x:()=>(0,Y.p)(e,"float32")})},tw={kernelName:Z.avt,gradFunc:e=>({x:()=>(0,ed.P)(e)})},tx={kernelName:Z.iWB,gradFunc:e=>({x:()=>(0,ed.P)(e)})},t_={kernelName:Z.r7n,gradFunc:e=>({x:()=>(0,ed.P)(e)})};var tk=n(636);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tS={kernelName:Z.J$2,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,i=(0,tk.p)(r,0);return{x:()=>(0,ez.a)(i,e,(0,Q.d)(e,a))}}},tI={kernelName:Z.kU,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,eb.I)(n,1))}}},tE={kernelName:Z.ZbH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,Y.p)(n,"float32"))}}},tN={kernelName:Z.qCd,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let t=(0,ta.Q)(r);return(0,eo.l)(e,(0,Q.d)((0,eh.S)(e,a,!0),t))}}}},tT=(0,eN.op)({localResponseNormalizationBackprop_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r=5,a=1,i=1,o=.5){return ek.BV.runKernel(Z.Hhh,{x:e,y:t,dy:n},{depthRadius:r,bias:a,alpha:i,beta:o})}}),tA={kernelName:Z.eZ0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:i,bias:o,alpha:s,beta:u}=n;return{x:()=>tT(r,a,e,i,o,s,u)}}};var tC=n(6477);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tO(e,t,n,r){return t.rank<n.rank&&(t=(0,ec.X)(t,e6.rv(t.shape,r))),e.rank<n.rank&&(e=(0,ec.X)(e,e6.rv(e.shape,r))),{x:()=>{let r=(0,Q.d)(e,(0,Y.p)((0,tC.D)(n,t),e.dtype));return r}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tR={kernelName:Z.YoZ,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let{reductionIndices:r}=n,a=t[0],i=t[1],o=eI.EC(r,a.shape),s=tO(e,i,a,o);return{x:()=>s.x()}}};var tD=n(6573);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tP={kernelName:Z.BMI,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=()=>(0,Q.d)(e,(0,Y.p)((0,eL.b)(n,r),"float32")),i=()=>(0,Q.d)(e,(0,Y.p)((0,tD.d)(n,r),"float32"));return{a:a,b:i}}},t$=(0,eN.op)({maxPool3dGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,i,o){let s=(0,eS._1)(e,"dy","maxPool3dGrad"),u=(0,eS._1)(t,"input","maxPool3dGrad"),l=(0,eS._1)(n,"output","maxPool3dGrad"),c=s,h=u,f=l,p=!1;4===u.rank&&(p=!0,c=(0,ec.X)(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),h=(0,ec.X)(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=(0,ec.X)(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),eI.hu(5===c.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),eI.hu(5===h.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${h.rank}.`),eI.hu(5===f.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),(0,eE.m)("maxPool3dGrad",i,o);let d={dy:c,input:h,output:f},m=ek.BV.runKernel(Z.OU7,d,{filterSize:r,strides:a,pad:i,dimRoundingMode:o});return p?(0,ec.X)(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),tF={kernelName:Z.OAf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:u}=n;return{x:()=>t$(e,r,a,i,o,s,u)}}},tM=(0,eN.op)({maxPoolGrad_:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a,i,o){let s=(0,eS._1)(e,"dy","maxPoolGrad"),u=(0,eS._1)(t,"input","maxPoolGrad"),l=(0,eS._1)(n,"output","maxPoolGrad");return eI.hu(u.rank===s.rank,()=>`Rank of input (${u.rank}) does not match rank of dy (${s.rank})`),eI.hu(4===s.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),eI.hu(4===u.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${u.rank}.`),eE.m("maxPoolGrad",i,o),ek.BV.runKernel(Z.OV7,{dy:s,input:u,output:l},{filterSize:r,strides:a,pad:i,dimRoundingMode:o})}}),tB={kernelName:Z.mTV,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:o,pad:s}=n;return{x:()=>tM(e,r,a,i,o,s)}}};var tL=n(4917);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tU={kernelName:Z.q2K,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=eI.EC(a,r.shape),o=(0,e6.kz)(r.shape,i),s=o[1],u=eI.NA(s),l=()=>{let t=r.shape.slice();i.forEach(e=>{t[e]=1});let n=(0,ec.X)(e,t),a=(0,et.h)((0,Q.d)(n,(0,tL.i)(r.shape,"float32")),u);return a};return{x:l}}},tj={kernelName:Z.c17,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let{axis:r}=n,[a,i]=t,o=eI.EC(r,a.shape),s=tO(e,i,a,o);return{x:()=>s.x()}}},tz={kernelName:Z.q8u,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=()=>(0,Q.d)(e,(0,Y.p)((0,eU.z)(n,r),"float32")),i=()=>(0,Q.d)(e,(0,Y.p)((0,tk.p)(n,r),"float32"));return{a:a,b:i}}};var tW=n(2676);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tV={kernelName:Z.jQs,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>(0,tW.t)(e,i,r.shape)}}};var tG=n(6943);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tH={kernelName:Z.Vbg,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,el.assertAndGetBroadcastShape)(n.shape,r.shape),i=()=>{let t=(0,el.getReductionAxes)(n.shape,a);return t.length>0?(0,ec.X)((0,eh.S)(e,t),n.shape):e},o=()=>{let t=(0,Q.d)(e,(0,en.W)((0,tG.G)((0,et.h)(n,r)))),i=(0,el.getReductionAxes)(r.shape,a);return i.length>0?(0,ec.X)((0,eh.S)(t,i),r.shape):t};return{a:i,b:o}}},tq={kernelName:Z.wYn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,el.assertAndGetBroadcastShape)(n.shape,r.shape),i=()=>{let t=(0,Q.d)(e,(0,Y.p)(r,"float32")),i=(0,el.getReductionAxes)(n.shape,a);return i.length>0?(0,ec.X)((0,eh.S)(t,i),n.shape):t},o=()=>{let t=(0,Q.d)(e,(0,Y.p)(n,"float32")),i=(0,el.getReductionAxes)(r.shape,a);return i.length>0?(0,ec.X)((0,eh.S)(t,i),r.shape):t};return{a:i,b:o}}},tX={kernelName:Z.kuV,gradFunc:e=>({x:()=>(0,en.W)(e)})};var tK=n(723);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tZ={kernelName:Z.we_,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>(0,tK.l)(n.shape,"float32")}}},tY={kernelName:Z.qWM,gradFunc:e=>({x:()=>(0,ed.P)(e)})};var tQ=n(4136);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tJ={kernelName:Z.QiL,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n,a=(0,tQ.H)(e,r);return a.map(e=>()=>e)}},t0={kernelName:Z.lyA,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>(0,tW.t)(e,i,r.shape)}}};var t1=n(2597),t2=n(3453);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t3={kernelName:Z.pe_,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,i=el.assertAndGetBroadcastShape(n.shape,r.shape),o=()=>{let t=(0,Y.p)(r,"float32"),a=(0,Q.d)(e,(0,Q.d)(t,(0,t2.s)(n,(0,eo.l)(t,(0,er.i)(1))))),o=el.getReductionAxes(n.shape,i);return o.length>0&&(a=(0,eh.S)(a,o)),(0,ec.X)(a,n.shape)},s=()=>{let t=(0,tk.p)(n,0),o=(0,ez.a)(t,(0,t1.c)(n),(0,ed.P)(n)),s=(0,Q.d)(e,(0,Q.d)(a,o)),u=el.getReductionAxes(r.shape,i);return u.length>0&&(s=(0,eh.S)(s,u)),(0,ec.X)(s,r.shape)};return{a:o,b:s}}},t4={kernelName:Z.o0g,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,tk.p)(n,0);return{x:()=>(0,ez.a)(a,e,(0,Q.d)(e,r)),alpha:()=>{let t=(0,ez.a)(a,(0,ed.P)(e),(0,Q.d)(e,n)),i=(0,el.getReductionAxes)(r.shape,e.shape);return i.length>0&&(t=(0,eh.S)(t,i)),(0,ec.X)(t,r.shape)}}}};var t6=n(9640);let t5={kernelName:Z.DlI,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=[];return i=null==a?r.shape.map((e,t)=>t):"number"==typeof a?[a]:a,{x:()=>(function(e,t,n){let r=e.shape.length,a=r-n.length,i=e6.Q3(n,r),o=e;null!=i&&(o=(0,e8.p)(e,i));let s=o.shape.slice(),u=s.splice(r-n.length,n.length),l=u.reduce((e,t)=>e*t,1);s.push(l);let c=o.reshape(s),h=/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=e.shape.slice();r[n]=1;let a=(0,ec.X)(t,r),i=(0,t6.$)(e,n,!0,!1),o=(0,t6.$)(e,n,!0,!0),s=(0,Q.d)(i,o);return(0,Q.d)(a,s)}(c,t,a);if(h=h.reshape(o.shape),null!=i){let e=e6.LJ(i);h=(0,e8.p)(h,e)}return h})(r,e,i)}}},t8={kernelName:Z.oHH,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=el.assertAndGetBroadcastShape(n.shape,r.shape),i=()=>{let t=(0,et.h)(e,(0,Y.p)(r,"float32")),i=el.getReductionAxes(n.shape,a);return i.length>0?(0,ec.X)((0,eh.S)(t,i),n.shape):t},o=()=>{let t=(0,Q.d)(e,(0,Y.p)(n,"float32")),i=el.getReductionAxes(r.shape,a);i.length>0&&(t=(0,ec.X)((0,eh.S)(t,i),r.shape));let o=(0,ei.h)(r);return(0,en.W)((0,et.h)(t,(0,Y.p)(o,"float32")))};return{a:i,b:o}}},t7={kernelName:Z.$HU,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,en.W)((0,ei.h)(n)))}}},t9={kernelName:Z.SbG,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=(0,Q.d)((0,eU.z)(n,6),(0,J.N)(n));return{x:()=>(0,Q.d)(e,(0,Y.p)(r,"float32"))}}},ne={kernelName:Z.qkr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,(0,Y.p)((0,J.N)(n),"float32"))}}},nt={kernelName:Z.HZH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,ec.X)(e,n.shape)}}},nn={kernelName:Z._Yw,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r},i=()=>ek.BV.runKernel(Z.zbQ,a,n);return{images:i}}},nr={kernelName:Z.dpD,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r},i=()=>ek.BV.runKernel(Z.Hmb,a,n);return{images:i}}};var na=n(7486);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ni={kernelName:Z.mKl,gradFunc:(e,t,n)=>{let{dims:r}=n,a=(0,eI.EC)(r,e.shape);return{x:()=>(0,na.G)(e,a)}}},no={kernelName:Z.e07,gradFunc:e=>({x:()=>(0,ed.P)(e)})},ns={kernelName:Z.bV0,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,en.W)((0,et.h)(e,(0,Q.d)((0,t2.s)(n,1.5),2)))}}};var nu=n(8651);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nl={kernelName:Z.PhF,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>(0,Y.p)((0,ed.P)(n),"float32"),t:()=>(0,Q.d)(e,(0,Y.p)(n,e.dtype)),e:()=>(0,Q.d)(e,(0,Y.p)((0,nu.h)(n),e.dtype))}}};var nc=n(3179);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nh={kernelName:Z.oFR,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=(0,tk.p)(n,(0,er.i)(0)),r=(0,er.i)(nc.y),a=(0,er.i)(nc.$),i=(0,Q.d)(e,a),o=(0,Q.d)((0,Q.d)(e,r),(0,ta.Q)((0,Y.p)(n,"float32")));return(0,ez.a)(t,i,o)}}}},nf={kernelName:Z.a5O,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,(0,Q.d)(n,(0,eo.l)((0,er.i)(1),n)))}}},np={kernelName:Z.i5y,gradFunc:e=>({x:()=>(0,ed.P)(e)})};var nd=n(173);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nm={kernelName:Z.RQH,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)((0,nd.m)((0,Y.p)(n,"float32")),e)}}};var ng=n(2699);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ny={kernelName:Z.wYB,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)((0,ng.f)((0,Y.p)(n,"float32")),e)}}};var nb=n(9682),nv=n(7650);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nw={kernelName:Z.p2w,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:i}=n,o=r.shape,[s,u]=(0,nv.parseSliceParams)(r,a,i),l=[];for(let t=0;t<e.rank;t++)l.push([s[t],o[t]-s[t]-u[t]]);return{x:()=>(0,nb.v)(e,l)}}},nx={kernelName:Z.Gcp,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,i=(0,Q.d)(e,r);return{logits:()=>(0,eo.l)(i,(0,Q.d)((0,eh.S)(i,[a],!0),r))}}};var n_=n(625);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nk={kernelName:Z.MRv,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,(0,n_.X)(n))}}};var nS=n(8441);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nI={kernelName:Z.TQc,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>(0,nS.E)(e,r,a)}}};var nE=n(6884);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nN={kernelName:Z.L8s,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>(0,nE.z)(e,r)}}},nT={kernelName:Z.FKq,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,Q.d)((0,ea._)((0,Y.p)(n,"float32")),2))}}},nA={kernelName:Z.bK0,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)(e,(0,Q.d)((0,Y.p)(n,"float32"),2))}}},nC={kernelName:Z._tC,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=(0,er.i)(2),i=()=>(0,Q.d)(e,(0,Q.d)(a,(0,eo.l)(n,r))),o=()=>(0,Q.d)(e,(0,Q.d)(a,(0,eo.l)(r,n)));return{a:i,b:o}}},nO={kernelName:Z.h8e,gradFunc:e=>({x:()=>(0,ed.P)(e)})},nR={kernelName:Z.Tr8,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=el.assertAndGetBroadcastShape(n.shape,r.shape),i=()=>{let t=e,r=el.getReductionAxes(n.shape,a);return r.length>0&&(t=(0,eh.S)(t,r)),(0,ec.X)(t,n.shape)},o=()=>{let t=e,n=el.getReductionAxes(r.shape,a);return n.length>0&&(t=(0,eh.S)(t,n)),(0,ec.X)((0,en.W)(t),r.shape)};return{a:i,b:o}}},nD={kernelName:Z.GBy,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:i}=n,o=(0,eI.EC)(i,r.shape);o.forEach(e=>{a[e]=1});let s=(0,ec.X)(e,a),u=(0,Q.d)(s,(0,tL.i)(r.shape,"float32"));return{x:()=>u}}},nP={kernelName:Z.sEM,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,et.h)(e,(0,ei.h)((0,nd.m)(n)))}}},n$={kernelName:Z.MIZ,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>(0,Q.d)((0,eo.l)((0,er.i)(1),(0,ei.h)(n)),e)}}},nF={kernelName:Z.n9L,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n,i=()=>{let t=(0,ed.P)(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=(0,eb.I)(t,(0,tW.t)(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)t=(0,eb.I)(t,(0,tW.t)(e,[n*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let o=0;o<a[2];++o)t=(0,eb.I)(t,(0,tW.t)(e,[n*r.shape[0],i*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(4===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let o=0;o<a[2];++o)for(let s=0;s<a[3];++s)t=(0,eb.I)(t,(0,tW.t)(e,[n*r.shape[0],i*r.shape[1],o*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return t};return{x:i}}},nM={kernelName:Z.G3Y,gradFunc:(e,t,n)=>{let{perm:r}=n,a=e6.LJ(r);return{x:()=>(0,e8.p)(e,a)}}};var nB=n(2991);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nL={kernelName:Z.ToN,gradFunc:(e,t,n)=>{let{axis:r}=n;return{value:()=>(0,nB.k)(e,r)}}};var nU=n(1300),nj=n(4926),nz=n(632);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nW={kernelName:Z.Qvg,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t,r=()=>(function(e,t){let n=(0,nz.g)(t,(0,ed.P)(t)),r=(0,nj.I)(e,n),a=(0,eL.b)(t,(0,er.i)(0,"int32")),i=r.rank-a.rank;for(let e=0;e<i;++e)a=(0,nU.d)(a,e+1);a=(0,ej.H)(a,(0,tL.i)(r.shape,"bool"));let o=(0,ed.P)(r);return(0,ez.a)(a,r,o)})(e,n);return{x:r}}},nV={kernelName:Z.RuY,gradFunc:e=>({x:()=>(0,ed.P)(e)})};var nG=n(6151);for(let e of[ee,es,eu,ef,ep,em,eg,ey,ev,ew,ex,e_,eA,eO,eD,e$,eF,eM,eB,eW,eV,eH,eY,eK,e0,e2,e4,e7,tt,tn,t8,tr,ti,to,ts,tu,tc,tl,tp,tm,tb,tv,tw,tx,t_,tS,tI,tE,tN,tA,tR,tR,tP,tF,tB,tU,tj,tz,tV,tH,tq,tX,tZ,tY,tJ,t0,t0,t3,t4,t5,t7,t9,ne,nt,nn,nr,ni,no,ns,nl,nh,nf,np,nm,ny,nw,nx,nk,nI,nI,nN,nN,nT,nC,nA,nO,nR,nD,nP,n$,nF,nM,nL,nW,nV])(0,nG.Li)(e);var nH=n(6235),nq=n(974);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.abs=function(){return this.throwIfDisposed(),(0,nH.W)(this)};var nX=n(7839);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.acos=function(){return this.throwIfDisposed(),(0,nX.K)(this)};var nK=n(1470);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.acosh=function(){return this.throwIfDisposed(),(0,nK._)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.add=function(e){return this.throwIfDisposed(),(0,eb.I)(this,e)};var nZ=n(781);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.all=function(e,t){return this.throwIfDisposed(),(0,nZ.$)(this,e,t)};var nY=n(2998);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.any=function(e,t){return this.throwIfDisposed(),(0,nY.Y)(this,e,t)};var nQ=n(47);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.argMax=function(e){return this.throwIfDisposed(),(0,nQ.N)(this,e)};var nJ=n(7394);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.argMin=function(e){return this.throwIfDisposed(),(0,nJ.v)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.asScalar=function(){return this.throwIfDisposed(),(0,eI.hu)(1===this.size,()=>"The array must have only 1 element."),(0,ec.X)(this,[])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.asType=function(e){return this.throwIfDisposed(),(0,Y.p)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.as1D=function(){return this.throwIfDisposed(),(0,ec.X)(this,[this.size])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.as2D=function(e,t){return this.throwIfDisposed(),(0,ec.X)(this,[e,t])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),(0,ec.X)(this,[e,t,n])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),(0,ec.X)(this,[e,t,n,r])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),(0,ec.X)(this,[e,t,n,r,a])};var n0=n(2421);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.asin=function(){return this.throwIfDisposed(),(0,n0.Z)(this)};var n1=n(1891);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.asinh=function(){return this.throwIfDisposed(),(0,n1.V)(this)};var n2=n(7037);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.atan=function(){return this.throwIfDisposed(),(0,n2.z)(this)};var n3=n(9812);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.atan2=function(e){return this.throwIfDisposed(),(0,n3.f)(this,e)};var n4=n(369);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.atanh=function(){return this.throwIfDisposed(),(0,n4.C)(this)};var n6=n(5176);(0,nq.t3)().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),(0,n6.w)(this,e,t,n,r)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),(0,nS.E)(this,e,t)};var n5=n(94);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),(0,n5.t)(this,e,t,n,r,a)};var n8=n(8247);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.broadcastTo=function(e){return this.throwIfDisposed(),(0,n8.U)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.cast=function(e){return this.throwIfDisposed(),(0,Y.p)(this,e)};var n7=n(6825);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.ceil=function(){return this.throwIfDisposed(),(0,n7.m)(this)};var n9=n(2279);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),(0,n9.i)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof nq.es&&(e=[e]),(0,nE.z)([this,...e],t)};var re=n(1355);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,re.P)(this,e,t,n,r,a,i)};var rt=n(1405);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),(0,rt.b)(this,e,t,n,r,a)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,eZ.T)(this,e,t,n,r,a,i)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.cos=function(){return this.throwIfDisposed(),(0,nd.m)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.cosh=function(){return this.throwIfDisposed(),(0,ng.f)(this)},/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),(0,t6.$)(this,e,t,n)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),(0,e5.z)(this,e,t,n)};var rn=n(9112);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),(0,rn.n)(this,e,t)};var rr=n(4718);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,rr.B)(this,e,t,n,r,a,i)};var ra=n(557);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),(0,ra.W)(this,e,t,n,r,a)};var ri=n(9322);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.divNoNan=function(e){return this.throwIfDisposed(),(0,ri.N)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.div=function(e){return this.throwIfDisposed(),(0,et.h)(this,e)};var ro=n(548);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.dot=function(e){return this.throwIfDisposed(),(0,ro.A)(this,e)};var rs=n(3233);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.elu=function(){return this.throwIfDisposed(),(0,rs.p)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.equal=function(e){return this.throwIfDisposed(),(0,tC.D)(this,e)};var ru=n(4650);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.erf=function(){return this.throwIfDisposed(),(0,ru.q)(this)};var rl=n(1954);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),(0,rl.d)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.exp=function(){return this.throwIfDisposed(),(0,ta.Q)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.expandDims=function(e){return this.throwIfDisposed(),(0,nU.d)(this,e)};var rc=n(3426);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.expm1=function(){return this.throwIfDisposed(),(0,rc.t)(this)};var rh=n(7020);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.fft=function(){return this.throwIfDisposed(),(0,rh.k)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.flatten=function(){return this.throwIfDisposed(),(0,ec.X)(this,[this.size])},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.floor=function(){return this.throwIfDisposed(),(0,tG.G)(this)};var rf=n(9165);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.floorDiv=function(e){return this.throwIfDisposed(),(0,rf.q)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.gather=function(e,t){return this.throwIfDisposed(),(0,nj.I)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.greaterEqual=function(e){return this.throwIfDisposed(),(0,eL.b)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.greater=function(e){return this.throwIfDisposed(),(0,tk.p)(this,e)};var rp=n(8447);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.ifft=function(){return this.throwIfDisposed(),(0,rp.S)(this)};var rd=n(4415);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.irfft=function(){return this.throwIfDisposed(),(0,rd.w)(this)};var rm=n(3963);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.isFinite=function(){return this.throwIfDisposed(),(0,rm.x)(this)};var rg=n(4365);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.isInf=function(){return this.throwIfDisposed(),(0,rg.U)(this)};var ry=n(6230);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.isNaN=function(){return this.throwIfDisposed(),(0,ry.i)(this)};var rb=n(9133);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.leakyRelu=function(e){return this.throwIfDisposed(),(0,rb.h)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.lessEqual=function(e){return this.throwIfDisposed(),(0,eU.z)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.less=function(e){return this.throwIfDisposed(),(0,tD.d)(this,e)};var rv=n(9648);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),(0,rv.G)(this,e,t,n,r)};var rw=n(3888);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logSigmoid=function(){return this.throwIfDisposed(),(0,rw.e)(this)};var rx=n(1510);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logSoftmax=function(e){return this.throwIfDisposed(),(0,rx.C)(this,e)};var r_=n(1391);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),(0,r_.l)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.log=function(){return this.throwIfDisposed(),(0,t1.c)(this)};var rk=n(7474);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.log1p=function(){return this.throwIfDisposed(),(0,rk.K)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logicalAnd=function(e){return this.throwIfDisposed(),(0,ej.H)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logicalNot=function(){return this.throwIfDisposed(),(0,nu.h)(this)};var rS=n(5750);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logicalOr=function(e){return this.throwIfDisposed(),(0,rS.K)(this,e)};var rI=n(596);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.logicalXor=function(e){return this.throwIfDisposed(),(0,rI.e)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),(0,eR.O)(this,e,t,n)};var rE=n(1174);(0,nq.t3)().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),(0,rE._)(this,e,t,n,r)};var rN=n(3307);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.max=function(e,t){return this.throwIfDisposed(),(0,rN.F)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.maximum=function(e){return this.throwIfDisposed(),(0,nz.g)(this,e)};var rT=n(5130);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.mean=function(e,t){return this.throwIfDisposed(),(0,rT.J)(this,e,t)};var rA=n(5735);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.min=function(e,t){return this.throwIfDisposed(),(0,rA.V)(this,e,t)};var rC=n(4513);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.minimum=function(e){return this.throwIfDisposed(),(0,rC.L)(this,e)};var rO=n(1483);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),(0,rO.V)(this,e,t)};var rR=n(5228);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.mod=function(e){return this.throwIfDisposed(),(0,rR.w)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.mul=function(e){return this.throwIfDisposed(),(0,Q.d)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.neg=function(){return this.throwIfDisposed(),(0,en.W)(this)};var rD=n(3561);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.norm=function(e,t,n){return this.throwIfDisposed(),(0,rD.K)(this,e,t,n)};var rP=n(6500);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.notEqual=function(e){return this.throwIfDisposed(),(0,rP.Q)(this,e)};var r$=n(6708);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),(0,r$.l)(this,e,t,n)};var rF=n(7846);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.onesLike=function(){return this.throwIfDisposed(),(0,rF.J)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.pad=function(e,t){return this.throwIfDisposed(),(0,nb.v)(this,e,t)};var rM=n(5860);(0,nq.t3)().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,rM.d)(this,e,t,n,r,a,i)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.pow=function(e){return this.throwIfDisposed(),(0,t2.s)(this,e)};var rB=n(8151);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.prelu=function(e){return this.throwIfDisposed(),(0,rB.A)(this,e)};var rL=n(9451);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.prod=function(e,t){return this.throwIfDisposed(),(0,rL.W)(this,e,t)};var rU=n(9036);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.reciprocal=function(){return this.throwIfDisposed(),(0,rU.M)(this)};var rj=n(7409);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.relu=function(){return this.throwIfDisposed(),(0,rj.U)(this)};var rz=n(3582);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.relu6=function(){return this.throwIfDisposed(),(0,rz.b)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.reshapeAs=function(e){return this.throwIfDisposed(),(0,ec.X)(this,e.shape)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.reshape=function(e){return this.throwIfDisposed(),(0,ec.X)(this,e)};var rW=n(3305);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),(0,rW.I)(this,e,t,n)};var rV=n(5098);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),(0,rV.j)(this,e,t,n)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.reverse=function(e){return this.throwIfDisposed(),(0,na.G)(this,e)};var rG=n(3710);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.rfft=function(){return this.throwIfDisposed(),(0,rG.Q)(this)};var rH=n(7809);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.round=function(){return this.throwIfDisposed(),(0,rH.N)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.rsqrt=function(){return this.throwIfDisposed(),(0,th.b)(this)};var rq=n(5503);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.selu=function(){return this.throwIfDisposed(),(0,rq.U)(this)};var rX=n(8678);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),(0,rX.U)(this,e,t,n,r,a,i)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sigmoid=function(){return this.throwIfDisposed(),(0,n_.X)(this)};var rK=n(4434);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sign=function(){return this.throwIfDisposed(),(0,rK.X)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sin=function(){return this.throwIfDisposed(),(0,e1.O)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sinh=function(){return this.throwIfDisposed(),(0,e3.R)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.slice=function(e,t){return this.throwIfDisposed(),(0,tW.t)(this,e,t)};var rZ=n(682);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.softmax=function(e){return this.throwIfDisposed(),(0,rZ.X)(this,e)};var rY=n(3694);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.softplus=function(){return this.throwIfDisposed(),(0,rY.W)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),(0,eP.f)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.split=function(e,t){return this.throwIfDisposed(),(0,eG.V)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sqrt=function(){return this.throwIfDisposed(),(0,ea._)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.square=function(){return this.throwIfDisposed(),(0,ei.h)(this)};var rQ=n(5265);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.squaredDifference=function(e){return this.throwIfDisposed(),(0,rQ.$)(this,e)};var rJ=n(9590);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.squeeze=function(e){return this.throwIfDisposed(),(0,rJ.L)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof nq.es?[this,e]:[this,...e];return(0,nB.k)(n,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.step=function(e){return this.throwIfDisposed(),(0,J.N)(this,e)};var r0=n(5158);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),(0,r0.N)(this,e,t,n,r,a,i,o,s)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sub=function(e){return this.throwIfDisposed(),(0,eo.l)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.sum=function(e,t){return this.throwIfDisposed(),(0,eh.S)(this,e,t)};var r1=n(1173);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.tan=function(){return this.throwIfDisposed(),(0,r1.O)(this)};var r2=n(1869);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.tanh=function(){return this.throwIfDisposed(),(0,r2.A)(this)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.tile=function(e){return this.throwIfDisposed(),(0,tf.G)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.toBool=function(){return this.throwIfDisposed(),(0,Y.p)(this,"bool")},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.toFloat=function(){return this.throwIfDisposed(),(0,Y.p)(this,"float32")},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.toInt=function(){return this.throwIfDisposed(),(0,Y.p)(this,"int32")};var r3=n(3243);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.topk=function(e,t){return this.throwIfDisposed(),(0,r3.h)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.transpose=function(e){return this.throwIfDisposed(),(0,e8.p)(this,e)};var r4=n(9608);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.unique=function(e){return this.throwIfDisposed(),(0,r4.T)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),(0,td.p)(this,e,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.unstack=function(e){return this.throwIfDisposed(),(0,tQ.H)(this,e)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.where=function(e,t){return this.throwIfDisposed(),(0,ez.a)(e,this,t)},/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,nq.t3)().prototype.zerosLike=function(){return this.throwIfDisposed(),(0,ed.P)(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var r6=n(1111);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r5=(0,K.OBj)();r5.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,r6.kS);var r8=n(4079);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function r7(e){return new r8.Yq(e)}function r9(e){return new r8.cK(e)}function ae(){return new r8.he}function at(e){return new r8.iL(e)}var an=n(2599);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ar(){return new an.H_}function aa(){return new an.M6}function ai(e){return new an.sr(e)}function ao(e){return new an.Is(e)}function as(e){return new an.MD(e)}function au(e){return new an.w8(e)}function al(e){return new an.iJ(e)}function ac(e){return new an.xc(e)}function ah(e){return new an.sq(e)}function af(e){return new an.Jf(e)}function ap(e){return new an.RP(e)}function ad(e){return new an.rB(e)}function am(e){return new an.V9(e)}function ag(e){return new an.yD(e)}function ay(e){return new an.vG(e)}var ab=n(4396),av=n(163),aw=n(8891),ax=n(5337),a_=n(1944),ak=n(588),aS=n(9897),aI=n(2931),aE=n(1977),aN=n(7538);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function aT(e,t){"modelTopology"in e||(e={modelTopology:e});let n=e.modelTopology;null!=n.model_config&&(n=n.model_config);let r=(0,aE.a)(n),a=(0,aS.v)(r,t);if(null!=e.weightsManifest){let t=await K.io.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map(e=>e.originalName)),n={};for(let e of a.weights)n[e.originalName]=t[e.originalName];a.loadWeights(n),(0,K.B90)(t)}return a}async function aA(e,t){if(null==t&&(t={}),"string"==typeof e){let n=K.io.getLoadHandlers(e,t);if(0===n.length)n.push(K.io.browserHTTPRequest(e,t));else if(n.length>1)throw new ak.nu(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return aC(e,void 0,t)}async function aC(e,t,n){if(null==n&&(n={}),null==e.load)throw new ak.nu("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),a=r.modelTopology;null!=a.model_config&&(a=a.model_config);let i=null==n.strict||n.strict,o=null!=r.weightData&&null!=r.weightSpecs&&i,s=(0,aS.v)((0,aE.a)(a),t,o),u=r.trainingConfig;if(null!=u&&s.loadTrainingConfig(u),null!=r.userDefinedMetadata&&s.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new ak.nu("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:e,optimizerWeights:t}=function(e,t){let n=K.io.decodeWeights(e,t),r={},a=[];return t.forEach(e=>{"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]}),{modelWeights:r,optimizerWeights:a}}(r.weightData,r.weightSpecs);s.loadWeights(e,i),null!=s.optimizer&&t.length>0&&await s.optimizer.setWeights(t),(0,K.B90)(e),(0,K.B90)(t.map(e=>e.tensor))}return s}class aO extends ax.QV{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:(0,a_.s)("sequential_"),null!=e.layers)for(let t of e.layers)this.add(t)}checkShape(e){let t=e.inboundNodes[0].outputTensors[0].shape;if(t.some(e=>e<0))throw new ak.nu(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t;let n=e instanceof aO||e instanceof ax.QV;if(n){if(1!==(t=e).outputs.length)throw new ak.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new ak.nu("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new ak.nu("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let t=(0,ab.I)({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new ak.nu(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new ak.nu("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=(0,av.hA)(this.outputs[0])}this.inboundNodes=[],new av.NB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:aI.JE(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{let t=e.apply(this.outputs[0]);if(Array.isArray(t))throw TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if((0,aN.Wf)(e),0===this.inputs.length||0===this.outputs.length)throw TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ax.QV({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new ak.LH("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new ak.LH("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new ak.LH("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new ak.LH("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let a;let i={};if(t instanceof Array){if(!(null!=t[0].className)||"Merge"===t[0].className)throw new ak.nu("Legacy serialization format not supported yet.");a=t}else K.D5U.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),a=t.layers,delete t.layers,i=t;let o=new e(i);if(!(o instanceof aO))throw new ak.nj(`Sequential.fromConfig called on non-Sequential input: ${o}`);for(let e of a){let t=void 0,n=(0,aS.v)(e,t,r);r&&n.setFastWeightInitDuringBuild(!0),o.add(n)}return o}set stopTraining(e){if(null==this.model)throw new ak.nu("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new ak.nu("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function aR(e){return new ax.QV(e)}function aD(e){return new aO(e)}function aP(e,t){return null==t&&(t={}),aA(e,t)}function a$(e){return(0,ab.I)(e)}function aF(e,t){aw.Sk.registerCallbackConstructor(e,t)}aO.className="Sequential",K.m7h.registerClass(aO);var aM=n(8819),aB=n(539);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aL extends av.mh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=(0,aN.nQ)(e);let n=(0,K.UYe)(e);return null!=this.maxValue&&(n=(0,K.iUl)(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}aL.className="ReLU",K.m7h.registerClass(aL);class aU extends av.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=(0,aN.nQ)(e);return(0,K.hi7)(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}aU.className="LeakyReLU",K.m7h.registerClass(aU);class aj extends av.mh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=(0,an.L5)(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=(0,aB.EC)(e.alphaRegularizer),this.alphaConstraint=(0,r8.Ad)(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if("number"==typeof e.sharedAxes)this.sharedAxes=[e.sharedAxes];else throw new ak.nu(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=(0,aN.Wf)(e);let t=e.slice(1);if(null!=this.sharedAxes)for(let e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new av.Zg({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=(0,aN.nQ)(e),(0,K.AL3)(e,this.alpha.read())}getConfig(){let e={alphaInitializer:(0,an.Cx)(this.alphaInitializer),alphaRegularizer:(0,aB.SG)(this.alphaRegularizer),alphaConstraint:(0,r8.xF)(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}aj.className="PReLU",K.m7h.registerClass(aj);class az extends av.mh{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new ak.nj(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=(0,aN.nQ)(e);return(0,K.pyx)(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}az.className="ELU",K.m7h.registerClass(az);class aW extends av.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){let n=(0,aN.nQ)(e);return(0,K.dC7)(n,(0,K.pju)((0,K.pjt)(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}aW.className="ThresholdedReLU",K.m7h.registerClass(aW);class aV extends av.mh{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=new aM.Gc().apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){let n=(0,aN.nQ)(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}aV.className="Softmax",K.m7h.registerClass(aV);var aG=n(5650),aH=n(2012),aq=n(9840),aX=n(8090),aK=n(6517);class aZ extends aG.nx{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=(0,an.L5)(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=(0,r8.Ad)(e.depthwiseConstraint),this.depthwiseRegularizer=(0,aB.EC)(e.depthwiseRegularizer)}build(e){if((e=(0,aN.Wf)(e)).length<4)throw new ak.nu(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new ak.nu(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return(0,K.lub)(()=>{let t=/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function(e,t,n=[1,1],r="valid",a,i){return(0,K.lub)(()=>{null==a&&(a=(0,aH.rf)()),(0,aX.cj)(a);let i=(0,aG.aP)(e,a);if(4!==e.rank)throw new ak.nu(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new ak.nu(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=K.B10(i,t,n,"same"===r?"same":"valid","NHWC",null),"channelsFirst"===a&&(i=K.p4s(i,[0,3,1,2])),i})}(e=(0,aN.nQ)(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,0);return this.useBias&&(t=aq.a2(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=(0,aN.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=(0,aK.kt)(t,this.kernelSize[0],this.padding,this.strides[0]),i=(0,aK.kt)(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=(0,an.Cx)(this.depthwiseInitializer),e.depthwiseRegularizer=(0,aB.SG)(this.depthwiseRegularizer),e.depthwiseConstraint=(0,r8.xF)(this.depthwiseRegularizer),e}}aZ.className="DepthwiseConv2D",K.m7h.registerClass(aZ);var aY=n(6014),aQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class aJ extends aY.$p{constructor(e){if(e.unroll)throw new ak.nj("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ak.nj("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new av.Zg({ndim:5})]}call(e,t){return K.lub(()=>{if(null!=this.cell.dropoutMask&&(K.B90(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(K.B90(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new ak.nu("ConvRNN2D cell does not support constants");let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...[,,].fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return K.lub(()=>{let{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)],i=K.lls(a);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){K.lub(()=>{if(!this.stateful)throw new ak.j1("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)],i=n[0];if(null==i)throw new ak.nu("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>K.lls(a)):this.states_=[K.lls(a)];else if(null==e)K.B90(this.states_),null!=this.keptStates&&(K.B90(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>K.lls(a)):this.states_[0]=K.lls(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new ak.nu(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):K.B90(this.states_);for(let t=0;t<this.states_.length;++t){let n=e[t];if(!K.D5U.arraysEqual(n.shape,a))throw new ak.nu(`State ${t} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>K.CnY(e.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:i,dilationRate:o}=this.cell,s="channelsFirst"===t,u=e[s?3:2],l=e[s?4:3],c=(0,aK.kt)(u,r[0],a,i[0],o[0]),h=(0,aK.kt)(l,r[1],a,i[1],o[1]),f=[...e.slice(0,2),...s?[n,c,h]:[c,h,n]];return f}}aJ.className="ConvRNN2D";class a0 extends aY.U7{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:o}=e;super(Object.assign({},e,{units:t})),this.filters=t,(0,aI.iQ)(this.filters,"filters"),this.kernelSize=(0,aK.AF)(n,2,"kernelSize"),this.kernelSize.forEach(e=>(0,aI.iQ)(e,"kernelSize")),this.strides=(0,aK.AF)(r||1,2,"strides"),this.strides.forEach(e=>(0,aI.iQ)(e,"strides")),this.padding=a||"valid",(0,aX.zb)(this.padding),this.dataFormat=i||"channelsLast",(0,aX.cj)(this.dataFormat),this.dilationRate=(0,aK.AF)(o||1,2,"dilationRate"),this.dilationRate.forEach(e=>(0,aI.iQ)(e,"dilationRate"))}build(e){var t;e=(0,aN.Wf)(e);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new ak.nu(`The channel dimension of the input should be defined. Found ${e[n]}`);let r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){let n=this.biasInitializer,r=this.filters;e=new((t=class extends an.m7{apply(e,t){let a=n.apply([r]),i=K.iUs([r]),o=n.apply([2*r]);return aq.mV([a,i,o])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return K.lub(()=>{if(3!==e.length)throw new ak.nu(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,r=e[0],a=e[1],i=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=(0,aY._0)({ones:()=>K.JpU(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let o=this.dropoutMask,s=(e,t,n)=>t&&t[n]?K.dC7(t[n],e):e,u=s(r,o,0),l=s(r,o,1),c=s(r,o,2),h=s(r,o,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=(0,aY._0)({ones:()=>K.JpU(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let f=this.recurrentDropoutMask,p=s(a,f,0),d=s(a,f,1),m=s(a,f,2),g=s(a,f,3),[y,b,v,w]=K.Vl2(this.kernel.read(),4,3),[x,_,k,S]=this.useBias?K.Vl2(this.bias.read(),4):[null,null,null,null];u=this.inputConv(u,y,x,this.padding),l=this.inputConv(l,b,_,this.padding),c=this.inputConv(c,v,k,this.padding),h=this.inputConv(h,w,S,this.padding);let[I,E,N,T]=K.Vl2(this.recurrentKernel.read(),4,3);p=this.recurrentConv(p,I),d=this.recurrentConv(d,E),m=this.recurrentConv(m,N),g=this.recurrentConv(g,T);let A=this.recurrentActivation.apply(K.IHx(u,p)),C=this.recurrentActivation.apply(K.IHx(l,d)),O=K.IHx(K.dC7(C,i),K.dC7(A,this.activation.apply(K.IHx(c,m)))),R=K.dC7(this.recurrentActivation.apply(K.IHx(h,g)),this.activation.apply(O));return[R,R,O]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=aQ(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)}inputConv(e,t,n,r){let a=K.Tek(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?aq.a2(a,n,this.dataFormat):a}recurrentConv(e,t){return K.Tek(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}a0.className="ConvLSTM2DCell",K.m7h.registerClass(a0);class a1 extends aJ{constructor(e){let t=new a0(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}}a1.className="ConvLSTM2D",K.m7h.registerClass(a1);var a2=n(6040);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class a3 extends av.mh{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e);if(0<this.rate&&this.rate<1){let e=null!=t.training&&t.training,r=this.getNoiseShape(n),a=aq.KC(()=>aq.rv(n,this.rate,r,this.seed),()=>n,e);return a}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}a3.className="Dropout",K.m7h.registerClass(a3);class a4 extends a3{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}}a4.className="SpatialDropout1D",K.m7h.registerClass(a4);class a6 extends av.mh{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,(0,aI.iQ)(this.units,"units"),this.activation=(0,aM.aI)(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=(0,an.L5)(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=(0,an.L5)(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=(0,r8.Ad)(e.kernelConstraint),this.biasConstraint=(0,r8.Ad)(e.biasConstraint),this.kernelRegularizer=(0,aB.EC)(e.kernelRegularizer),this.biasRegularizer=(0,aB.EC)(e.biasRegularizer),this.activityRegularizer=(0,aB.EC)(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=(0,aN.Wf)(e);let t=e[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){e=(0,aN.Wf)(e);let t=e.slice();return t[t.length-1]=this.units,t}call(e,t){return(0,K.lub)(()=>{let n;this.invokeCallHook(e,t);let r=(0,aN.nQ)(e),a=(0,aI.WT)(this.activation.getClassName());return null!=a?n=aq.AK(r,this.kernel.read(),a,this.bias?this.bias.read():null):(n=aq.AK(r,this.kernel.read()),null!=this.bias&&(n=aq.a2(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:(0,aM.GD)(this.activation),useBias:this.useBias,kernelInitializer:(0,an.Cx)(this.kernelInitializer),biasInitializer:(0,an.Cx)(this.biasInitializer),kernelRegularizer:(0,aB.SG)(this.kernelRegularizer),biasRegularizer:(0,aB.SG)(this.biasRegularizer),activityRegularizer:(0,aB.SG)(this.activityRegularizer),kernelConstraint:(0,r8.xF)(this.kernelConstraint),biasConstraint:(0,r8.xF)(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}a6.className="Dense",K.m7h.registerClass(a6);class a5 extends av.mh{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){for(let t of(e=(0,aN.Wf)(e)).slice(1))if(null==t)throw new ak.nu(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],(0,a2.NS)(e,1)]}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e);if("channelsFirst"===this.dataFormat&&n.rank>1){let e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=(0,K.p4s)(n,e)}return aq.Uz(n)})}getConfig(){let e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}}a5.className="Flatten",K.m7h.registerClass(a5);class a8 extends av.mh{constructor(e){super(e),this.supportsMasking=!0,this.activation=(0,aM.aI)(e.activation)}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e);return this.activation.apply(n)})}getConfig(){let e={activation:(0,aM.GD)(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}a8.className="Activation",K.m7h.registerClass(a8);class a7 extends av.mh{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return(0,K.lub)(()=>(e=(0,aN.nQ)(e),aq.rx(e,this.n)))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}a7.className="RepeatVector",K.m7h.registerClass(a7);class a9 extends av.mh{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null;for(let e=0;e<r.length;++e){let t=r[e];if(this.isUnknown(t)){if(null===i)i=e;else throw new ak.nu("Can only specifiy one unknown dimension.")}else a*=t}let o=(0,a2.NS)(e);if(null!==i){if(0===a||o%a!=0)throw new ak.nu(n);r[i]=o/a}else if(o!==a)throw new ak.nu(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return(0,K.XLQ)(n,a)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}a9.className="Reshape",K.m7h.registerClass(a9);class ie extends av.mh{constructor(e){if(super(e),null==e.dims)throw Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=(0,a2.w6)(1,e.dims.length+1);if(!K.D5U.arraysEqual(e.dims.slice().sort(),t))throw Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new av.Zg({ndim:this.dims.length+1})]}computeOutputShape(e){e=(0,aN.Wf)(e);let t=e.slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return(0,K.p4s)((0,aN.nQ)(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}ie.className="Permute",K.m7h.registerClass(ie);class it extends av.mh{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e?this.maskValue=null==e.maskValue?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=(0,aN.nQ)(e);return(0,K.YjB)((0,K.Quu)(n,this.maskValue),-1)}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e),r=(0,K.YjB)((0,K.Quu)(n,this.maskValue),-1,!0),a=(0,K.dC7)(n,(0,K.pju)(r,n.dtype));return a})}}it.className="Masking",K.m7h.registerClass(it);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ir extends av.mh{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(aI.zZ(e.inputLength))}this.inputDim=e.inputDim,aI.iQ(this.inputDim,"inputDim"),this.outputDim=e.outputDim,aI.iQ(this.outputDim,"outputDim"),this.embeddingsInitializer=(0,an.L5)(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=(0,aB.EC)(e.embeddingsRegularizer),this.activityRegularizer=(0,aB.EC)(e.activityRegularizer),this.embeddingsConstraint=(0,r8.Ad)(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return(0,K.lub)(()=>this.maskZero?(e=(0,aN.nQ)(e),(0,K.Quu)(e,(0,K.P84)(e))):null)}computeOutputShape(e){if(e=(0,aN.Wf)(e),null==this.inputLength)return[...e,this.outputDim];let t=aI.zZ(this.inputLength);if(t.length!==e.length-1)throw new ak.nu(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){let a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new ak.nu(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==a&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e);"int32"!==n.dtype&&(n=aq.pj(n,"int32"));let r=aq.Iq(this.embeddings.read(),(0,K.XLQ)(n,[n.size]));return(0,K.XLQ)(r,(0,aN.Wf)(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:(0,an.Cx)(this.embeddingsInitializer),embeddingsRegularizer:(0,aB.SG)(this.embeddingsRegularizer),activityRegularizer:(0,aB.SG)(this.activityRegularizer),embeddingsConstraint:(0,r8.xF)(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}ir.className="Embedding",K.m7h.registerClass(ir);var ia=n(6275);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ii extends av.mh{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ak.nj}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new ak.nu("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[(0,aN.Wf)(e)]),e.length<2)throw new ak.nu(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let n of e)null!=n&&null!==n[0]&&t.push(n[0]);if((t=aI.Tw(t)).length>1)throw new ak.nu(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){let r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let r=e.map(e=>e.length);-1===e.indexOf(null)&&1===aI.Tw(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return(0,K.lub)(()=>{if(!this.reshapeRequired)return this.mergeFunction(e);{let t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){let r=a2.Fp(n);for(let n of e){let e=n.rank;for(let t=0;t<r-e;++t)n=aq.dt(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(let r of e){let e=r.rank;if(null==e){let e=r.shape,a=e[0],i=e.slice(1).concat([a]),o=K.XLQ(r,[a].concat(a2.NS(e.slice(1))));o=K.p4s(o,[1,0]),o=K.XLQ(o,i),t.push(o),n=!0}else if(e>1){let a=a2.w6(1,e).concat([0]);t.push(K.p4s(r,a)),n=!0}else t.push(r)}let r=this.mergeFunction(t),a=r.rank;if(n){if(null==a){let e=r.shape,t=e.length,n=e[t-1],a=[n].concat(e.slice(0,e.length-1));r=K.XLQ(K.p4s(K.XLQ(r,[-1,n]),[1,0]),a)}else if(a>1){let e=[a-1].concat(a2.w6(0,a-1));r=K.p4s(r,e)}}return r}}})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){let r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(let t of e)null!=t&&null!==t[0]&&n.push(t[0]);return 1===(n=aI.Tw(n)).length?n.concat(t):[null].concat(t)}computeMask(e,t){return K.lub(()=>{if(null==t)return null;if(!Array.isArray(t))throw new ak.nu("`mask` should be an Array");if(!Array.isArray(e))throw new ak.nu("`inputs` should be an Array");if(t.length!==e.length)throw new ak.nu(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:K.dt4(e,0)))[0];for(let e=1;e<t.length-1;++e)n=K.HvI(n,t[e]);return n})}}class io extends ii{constructor(e){super(e)}mergeFunction(e){return(0,K.lub)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=K.IHx(t,e[n]);return t})}}io.className="Add",K.m7h.registerClass(io);class is extends ii{constructor(e){super(e)}mergeFunction(e){return(0,K.lub)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=K.dC7(t,e[n]);return t})}}is.className="Multiply",K.m7h.registerClass(is);class iu extends ii{constructor(e){super(e)}mergeFunction(e){return(0,K.lub)(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=K.IHx(t,e[n]);return K.dC7(1/e.length,t)})}}iu.className="Average",K.m7h.registerClass(iu);class il extends ii{constructor(e){super(e)}mergeFunction(e){return(0,K.lub)(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=K.gWQ(t,e[n]);return t})}}il.className="Maximum",K.m7h.registerClass(il);class ic extends ii{constructor(e){super(e)}mergeFunction(e){return(0,K.lub)(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=K.LTh(t,e[n]);return t})}}ic.className="Minimum",K.m7h.registerClass(ic);class ih extends ii{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||1===e.length)throw new ak.nu("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(let n of e)if(null!=n){t=!1;break}if(t)return;let n=[];for(let t=0;t<e.length;++t){let r=e[t].slice();r.splice(this.axis,1);let a=!1;for(let e of n)if(K.D5U.arraysEqual(e,r)){a=!0;break}a||n.push(r)}if(n.length>1)throw new ak.nu("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return(0,K.lub)(()=>aq.mV(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new ak.nu("A `Concatenate` layer should be called on a list of inputs.");let t=e[0].slice(),n=this.axis<0?t.length+this.axis:this.axis;for(let r of e.slice(1)){if(null==t[n]||null==r[n]){t[n]=null;break}t[n]+=r[n]}return t}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new ak.nu("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new ak.nu("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new ak.nu(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return K.lub(()=>{let n=!0;if(t.forEach(e=>{if(null!=e){n=!1;return}}),n)return null;let r=[];for(let n=0;n<e.length;++n)null==t[n]?r.push(K.pju(K.JpU(e[n]),"bool")):t[n].rank<e[n].rank?r.push(K.dt4(t[n],-1)):r.push(t[n]);let a=K.zoF(r,this.axis);return K.$6P(a,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function ip(e,t){for(;e<0;)e+=t;return e}ih.className="Concatenate",K.m7h.registerClass(ih);class id extends ii{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){K.D5U.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new ak.nj("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new ak.nu(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){let t;if(2!==e.length)throw new ak.nu(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>ip(t,e[n].shape.length)):[ip(this.axes,n.shape.length),ip(this.axes,r.shape.length)],this.normalize&&(n=(0,ia.Eq)(n,t[0]),r=(0,ia.Eq)(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new ak.nj("batchDot is not implemented for tensors of 4D or higher rank yet");if(K.D5U.assert(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),K.D5U.assert(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new ak.nj("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);let i=n;return K.lub(()=>{let n,o;if(r>a){n=r-a;let e=[];for(let t=0;t<n;++t)e.push(1);t=K.XLQ(t,t.shape.concat(e))}else if(a>r){n=a-r;let t=[];for(let e=0;e<n;++e)t.push(1);e=K.XLQ(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?K.Smz(K.dC7(e,t),i[0]):K.Smz(K.dC7(K.p4s(e,[1,0]),t),i[1]);else{let n=i[0]!==e.shape.length-1,r=i[1]===t.shape.length-1;o=K.OI3(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;let t=[];for(let r=e;r<e+n;++r)t.push(r);o=K.L9e(o,t)}return 1===o.shape.length&&(o=K.dt4(o,1)),o})}(n,r,t)}interpretAxes(e,t){return Array.isArray(this.axes)?this.axes:[ip(this.axes,e.length),ip(this.axes,t.length)]}computeOutputShape(e){K.D5U.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new ak.nj("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}id.className="Dot",K.m7h.registerClass(id);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class im extends av.mh{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e),r=()=>(0,K.IHx)(aq.nG(n.shape,0,this.stddev),n),a=aq.KC(r,()=>n,t.training||!1);return a})}}im.className="GaussianNoise",K.m7h.registerClass(im);class ig extends av.mh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t);let n=(0,aN.nQ)(e);if(this.rate>0&&this.rate<1){let e=()=>{let e=Math.sqrt(this.rate/(1-this.rate));return(0,K.dC7)(n,aq.nG(n.shape,1,e))};return aq.KC(e,()=>n,t.training||!1)}return n})}}ig.className="GaussianDropout",K.m7h.registerClass(ig);class iy extends av.mh{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||(0,aN.nQ)(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return(0,K.lub)(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e),r=()=>{let t=(0,aN.nQ)(e),r=(0,K.brS)((0,K.LGj)(n),this.rate);r=aq.pj(r,"float32");let a=((1-this.rate)*(1+3.09091329228798*this.rate))**-.5,i=-(-1.7580993408473766*a)*this.rate,o=(0,K.IHx)((0,K.dC7)(t,r),(0,K.dC7)((0,K.IHx)(r,-1),-1.7580993408473766));return(0,K.IHx)((0,K.dC7)(o,a),i)};return aq.KC(r,()=>(0,aN.nQ)(e),t.training||!1)}return e})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ib(e,t,n,r,a,i=.001){let o;if(2===e.rank)o=K.Dxk(e,t,n,r,a,i);else if(3===e.rank)o=K.JY5(e,t,n,r,a,i);else if(4===e.rank)o=K.p3b(e,t,n,r,a,i);else throw new ak.nj(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return o}iy.className="AlphaDropout",K.m7h.registerClass(iy);class iv extends av.mh{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=(0,an.L5)(e.betaInitializer||"zeros"),this.gammaInitializer=(0,an.L5)(e.gammaInitializer||"ones"),this.movingMeanInitializer=(0,an.L5)(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=(0,an.L5)(e.movingVarianceInitializer||"ones"),this.betaConstraint=(0,r8.Ad)(e.betaConstraint),this.gammaConstraint=(0,r8.Ad)(e.gammaConstraint),this.betaRegularizer=(0,aB.EC)(e.betaRegularizer),this.gammaRegularizer=(0,aB.EC)(e.gammaRegularizer)}build(e){e=(0,aN.Wf)(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new ak.nu(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new av.Zg({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return(0,K.lub)(()=>{let n=null!=t.training&&t.training,r=(0,aN.nQ)(e),a=r.shape,i=a.length,o=a2.w6(0,i),s=this.axis>=0?this.axis:this.axis+i;o.splice(s,1);let u=aI.JE(1,i);u[s]=a[s];let l=o.slice();l.sort();let c=!K.D5U.arraysEqual(l,a2.w6(0,i).slice(0,i-1));if(!n)return(()=>{if(!c)return ib(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon);{let e=(0,K.XLQ)(this.movingMean.read(),u),t=(0,K.XLQ)(this.movingVariance.read(),u),n=this.center?(0,K.XLQ)(this.beta.read(),u):null,a=this.scale?(0,K.XLQ)(this.gamma.read(),u):null;return ib(r,e,t,n,a,this.epsilon)}})();let[h,f,p]=function(e,t,n,r,a=.001){return K.D5U.arraysEqual(r.slice().sort(),a2.w6(0,e.rank-1))?function(e,t,n,r,a=.001){return(0,K.lub)(()=>{let i=K.Gi7(e,r),o=i.mean,s=i.variance,u=ib(e,o,s,n,t,a);return[u,o,s]})}(e,t,n,r,a):function(e,t,n,r,a=.001){return(0,K.lub)(()=>{let i=K.Gi7(e,r),o=i.mean,s=i.variance,u=[];for(let t of a2.w6(0,e.rank))-1!==r.indexOf(t)?u.push(1):u.push(e.shape[t]);let l=(0,K.XLQ)(o,u),c=(0,K.XLQ)(s,u),h=null==t?null:(0,K.XLQ)(t,u),f=null==n?null:(0,K.XLQ)(n,u),p=ib(e,l,c,f,h,a);return[p,o,s]})}(e,t,n,r,a)}(r,this.gamma.read(),this.beta.read(),o,this.epsilon),d=(e,t,n)=>{K.lub(()=>{let r=e.read(),a=K.dC7(K.luU(r,t),1-n);e.write(K.luU(r,a))})};return(()=>{d(this.movingMean,f,this.momentum),d(this.movingVariance,p,this.momentum)})(),h})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,an.Cx)(this.betaInitializer),gammaInitializer:(0,an.Cx)(this.gammaInitializer),movingMeanInitializer:(0,an.Cx)(this.movingMeanInitializer),movingVarianceInitializer:(0,an.Cx)(this.movingVarianceInitializer),betaRegularizer:(0,aB.SG)(this.betaRegularizer),gammaRegularizer:(0,aB.SG)(this.gammaRegularizer),betaConstraint:(0,r8.xF)(this.betaConstraint),gammaConstraint:(0,r8.xF)(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}iv.className="BatchNormalization",K.m7h.registerClass(iv);class iw extends av.mh{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let e of this.axis)if(!Number.isInteger(e))throw Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=(0,an.L5)(e.betaInitializer||"zeros"),this.gammaInitializer=(0,an.L5)(e.gammaInitializer||"ones"),this.betaRegularizer=(0,aB.EC)(e.betaRegularizer),this.gammaRegularizer=(0,aB.EC)(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=(0,aN.Wf)(e);let t=e.length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(let e of this.axis)if(e<0||e>=t)throw Error(`Invalid axis: ${e}`);if(this.axis.length!==aI.Tw(this.axis).length)throw Error(`Found duplicate axes in: ${this.axis}`);let n=this.axis.map(t=>e[t]);this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){let n=(0,aN.nQ)(e),r=n.shape,a=r.length;return(0,K.lub)(()=>{let{mean:e,variance:t}=(0,K.Gi7)(n,this.axis,!0),i=aI.JE(1,a);for(let e of this.axis)i[e]=r[e];let o=e=>null!=e&&e.shape.length!==a?K.XLQ(e,i):e,s=this.scale?o(this.gamma.read()):null,u=this.center?o(this.beta.read()):null,l=[],c=[];for(let e=0;e<a;++e)-1!==this.axis.indexOf(e)?(l.push(r[e]),c.push(1)):(l.push(1),c.push(r[e]));return e=K.Gg6(e,l),t=K.Gg6(t,l),null!=s&&(s=K.Gg6(s,c)),null!=u&&(u=K.Gg6(u,c)),ib(n,e,t,u,s,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:(0,an.Cx)(this.betaInitializer),gammaInitializer:(0,an.Cx)(this.gammaInitializer),betaRegularizer:(0,aB.SG)(this.betaRegularizer),gammaRegularizer:(0,aB.SG)(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}iw.className="LayerNormalization",K.m7h.registerClass(iw);class ix extends av.mh{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?(0,aH.rf)():e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{let t,n;if(e.padding=e.padding,2!==e.padding.length)throw new ak.nu(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new ak.nu(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new ak.nu(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new av.Zg({ndim:4})]}computeOutputShape(e){let t,n;return(e=(0,aN.Wf)(e),"channelsFirst"===this.dataFormat)?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return(0,K.lub)(()=>{var t,n,r;return t=(0,aN.nQ)(e),n=this.padding,r=this.dataFormat,(0,K.lub)(()=>{let e;if(4!==t.rank)throw new ak.nu(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new ak.nu("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==r&&(r=(0,aH.rf)()),"channelsLast"!==r&&"channelsFirst"!==r)throw new ak.nu(`Unknown data format: ${r}. Supported data formats are 'channelsLast' and 'channelsFirst.`);return e="channelsFirst"===r?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],K.vku(t,e)})})}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function i_(e,t,n,r,a,i){return(0,K.lub)(()=>{let o;(0,aX.cj)(a),(0,aX.Lp)(i),(0,aX.zb)(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a=(0,aH.rf)()),null==i&&(i="max"),e=(0,aG.aP)(e,a);let s="same"===r?"same":"valid";return o="max"===i?K._sB(e,t,n,s):K.wS1(e,t,n,s),"channelsFirst"===a&&(o=K.p4s(o,[0,3,1,2])),o})}function ik(e,t,n,r,a,i){return(0,K.lub)(()=>{let o;(0,aX.cj)(a),(0,aX.Lp)(i),(0,aX.zb)(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a=(0,aH.rf)()),null==i&&(i="max"),e=(0,aG.fN)(e,a);let s="same"===r?"same":"valid";return o="max"===i?K.YQQ(e,t,n,s):K.uR5(e,t,n,s),"channelsFirst"===a&&(o=K.p4s(o,[0,4,1,2,3])),o})}ix.className="ZeroPadding2D",K.m7h.registerClass(ix);class iS extends av.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&1===e.poolSize.length&&"number"==typeof e.poolSize[0])this.poolSize=e.poolSize;else throw new ak.nu(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if((0,aI.iQ)(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else if(Array.isArray(e.strides)&&1===e.strides.length&&"number"==typeof e.strides[0])this.strides=e.strides;else throw new ak.nu(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);(0,aI.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,(0,aX.zb)(this.padding),this.inputSpec=[new av.Zg({ndim:3})]}computeOutputShape(e){e=(0,aN.Wf)(e);let t=(0,aK.kt)(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return(0,K.lub)(()=>{this.invokeCallHook(e,t),e=aq.dt((0,aN.nQ)(e),2);let n=this.poolingFunction((0,aN.nQ)(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return K.L9e(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class iI extends iS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,aX.cj)(a),(0,aX.zb)(r),i_(e,t,n,r,a,"max")}}iI.className="MaxPooling1D",K.m7h.registerClass(iI);class iE extends iS{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,aX.cj)(a),(0,aX.zb)(r),i_(e,t,n,r,a,"avg")}}iE.className="AveragePooling1D",K.m7h.registerClass(iE);class iN extends av.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new ak.nu(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];(0,aI.iQ)(this.poolSize,"poolSize"),(0,aI.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,aX.cj)(this.dataFormat),(0,aX.zb)(this.padding),this.inputSpec=[new av.Zg({ndim:4})]}computeOutputShape(e){e=(0,aN.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return(t=(0,aK.kt)(t,this.poolSize[0],this.padding,this.strides[0]),n=(0,aK.kt)(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat)?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return(0,K.lub)(()=>(this.invokeCallHook(e,t),this.poolingFunction((0,aN.nQ)(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class iT extends iN{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,aX.cj)(a),(0,aX.zb)(r),i_(e,t,n,r,a,"max")}}iT.className="MaxPooling2D",K.m7h.registerClass(iT);class iA extends iN{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,aX.cj)(a),(0,aX.zb)(r),i_(e,t,n,r,a,"avg")}}iA.className="AveragePooling2D",K.m7h.registerClass(iA);class iC extends av.mh{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new ak.nu(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];(0,aI.iQ)(this.poolSize,"poolSize"),(0,aI.iQ)(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,aX.cj)(this.dataFormat),(0,aX.zb)(this.padding),this.inputSpec=[new av.Zg({ndim:5})]}computeOutputShape(e){e=(0,aN.Wf)(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return(t=(0,aK.kt)(t,this.poolSize[0],this.padding,this.strides[0]),n=(0,aK.kt)(n,this.poolSize[1],this.padding,this.strides[1]),r=(0,aK.kt)(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat)?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return(0,K.lub)(()=>(this.invokeCallHook(e,t),this.poolingFunction((0,aN.nQ)(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class iO extends iC{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,aX.cj)(a),(0,aX.zb)(r),ik(e,t,n,r,a,"max")}}iO.className="MaxPooling3D",K.m7h.registerClass(iO);class iR extends iC{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return(0,aX.cj)(a),(0,aX.zb)(r),ik(e,t,n,r,a,"avg")}}iR.className="AveragePooling3D",K.m7h.registerClass(iR);class iD extends av.mh{constructor(e){super(e),this.inputSpec=[new av.Zg({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new ak.nj}}class iP extends iD{constructor(e){super(e||{})}call(e,t){return(0,K.lub)(()=>{let t=(0,aN.nQ)(e);return K.J69(t,1)})}}iP.className="GlobalAveragePooling1D",K.m7h.registerClass(iP);class i$ extends iD{constructor(e){super(e||{})}call(e,t){return(0,K.lub)(()=>{let t=(0,aN.nQ)(e);return K.Fp7(t,1)})}}i$.className="GlobalMaxPooling1D",K.m7h.registerClass(i$);class iF extends av.mh{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,(0,aX.cj)(this.dataFormat),this.inputSpec=[new av.Zg({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new ak.nj}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class iM extends iF{call(e,t){return(0,K.lub)(()=>{let t=(0,aN.nQ)(e);return"channelsLast"===this.dataFormat?K.J69(t,[1,2]):K.J69(t,[2,3])})}}iM.className="GlobalAveragePooling2D",K.m7h.registerClass(iM);class iB extends iF{call(e,t){return(0,K.lub)(()=>{let t=(0,aN.nQ)(e);return"channelsLast"===this.dataFormat?K.Fp7(t,[1,2]):K.Fp7(t,[2,3])})}}iB.className="GlobalMaxPooling2D",K.m7h.registerClass(iB);var iL=n(4685);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iU extends av.mh{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=t.layer,a=(0,aS.v)(r,n);delete t.layer;let i={layer:a};return Object.assign(i,t),new e(i)}}class ij extends iU{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=(0,aN.Wf)(e)).length<3)throw new ak.nu(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=(0,aN.Wf)(e);let t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return(0,K.lub)(()=>{e=(0,aN.nQ)(e);let n=(e,n)=>{let r=(0,aN.nQ)(this.layer.call(e,t));return[r,[]]},r=(0,aY.nd)(n,e,[],!1,null,null,!1,!0),a=r[1];return a})}}ij.className="TimeDistributed",K.m7h.registerClass(ij);class iz extends iU{constructor(e){var t;super(e);let n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=(0,aS.v)(r),n.goBackwards=!0!==n.goBackwards;let a={};if(a.className=e.layer.getClassName(),a.config=n,this.backwardLayer=(0,aS.v)(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,t=this.mergeMode,aI.xn(iL.eY,"BidirectionalMergeMode",t),e.weights)throw new ak.nj("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return(Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState&&(r=a.slice(1)),t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState)?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):aI.Bq(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let a=(0,aY.lx)(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);let i=[],o=[];if(null!=n){let e=n.length;if(e%2>0)throw new ak.nu("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);let r=n.map(e=>new av.Zg({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),o.push(...r)}if(null!=r)throw new ak.nj("Support for constants in Bidirectional layers is not implemented yet.");let s=i[0]instanceof av.Iy;for(let e of i)if(e instanceof av.Iy!==s)throw new ak.nu("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(!s)return super.apply(e,t);{let n=[e].concat(i),r=this.inputSpec.concat(o),a=this.inputSpec;this.inputSpec=r;let s=super.apply(n,t);return this.inputSpec=a,s}}call(e,t){return(0,K.lub)(()=>{let n,r,a,i;let o=t.initialState;if(null==o)n=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{let a=o.slice(0,o.length/2),i=o.slice(o.length/2);n=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return(this.returnState&&(Array.isArray(n)&&(a=n.slice(1).concat(r.slice(1))),n=n[0],r=r[0]),this.returnSequences&&(r=K.GYS(r,1)),"concat"===this.mergeMode?i=aq.mV([n,r]):"sum"===this.mergeMode?i=K.IHx(n,r):"ave"===this.mergeMode?i=K.dC7(.5,K.IHx(n,r)):"mul"===this.mergeMode?i=K.dC7(n,r):null==this.mergeMode&&(i=[n,r]),this.returnState)?null==this.mergeMode?i.concat(a):[i].concat(a):i})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){(0,aX.f4)(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),(0,aX.f4)(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,!this.returnState)return n;{let e=this.forwardLayer.states,t=e.map(e=>null);return Array.isArray(n)?n.concat(t).concat(t):[n].concat(t).concat(t)}}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=(0,aS.v)(t.layer);if(delete t.layer,null!=t.numConstants)throw new ak.nj("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}}iz.className="Bidirectional",K.m7h.registerClass(iz);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class iW extends av.mh{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return(0,K.lub)(()=>("float32"!==(e=(0,aN.nQ)(e)).dtype&&(e=aq.pj(e,"float32")),(0,K.IHx)((0,K.dC7)(e,this.scale),this.offset)))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function iV(e){return new ab.l(e)}function iG(e){return new az(e)}function iH(e){return new aL(e)}function iq(e){return new aU(e)}function iX(e){return new aj(e)}function iK(e){return new aV(e)}function iZ(e){return new aW(e)}function iY(e){return new aG.lM(e)}function iQ(e){return new aG.mh(e)}function iJ(e){return new aG.N8(e)}function i0(e){return new aG.x1(e)}function i1(e){return new aG.jz(e)}function i2(e){return new aG.do(e)}function i3(e){return new aG.wg(e)}function i4(e){return new aG.HV(e)}function i6(e){return new aZ(e)}function i5(e){return new a8(e)}function i8(e){return new a6(e)}function i7(e){return new a3(e)}function i9(e){return new a4(e)}function oe(e){return new a5(e)}function ot(e){return new a7(e)}function on(e){return new a9(e)}function or(e){return new ie(e)}function oa(e){return new ir(e)}function oi(e){return new io(e)}function oo(e){return new iu(e)}function os(e){return new ih(e)}function ou(e){return new il(e)}function ol(e){return new ic(e)}function oc(e){return new is(e)}function oh(e){return new id(e)}function of(e){return new iv(e)}function op(e){return new iw(e)}function od(e){return new ix(e)}function om(e){return new iE(e)}function og(e){return om(e)}function oy(e){return om(e)}function ob(e){return new iA(e)}function ov(e){return ob(e)}function ow(e){return ob(e)}function ox(e){return new iR(e)}function o_(e){return ox(e)}function ok(e){return ox(e)}function oS(e){return new iP(e)}function oI(e){return new iM(e)}function oE(e){return new i$(e)}function oN(e){return new iB(e)}function oT(e){return new iI(e)}function oA(e){return new iT(e)}function oC(e){return new iO(e)}function oO(e){return new aY.RJ(e)}function oR(e){return new aY.SM(e)}function oD(e){return new aY.Pl(e)}function oP(e){return new aY.U7(e)}function o$(e){return new aY.s9(e)}function oF(e){return new aY.xR(e)}function oM(e){return new a1(e)}function oB(e){return new a0(e)}function oL(e){return new aY.$p(e)}function oU(e){return new aY._1(e)}function oj(e){return new iz(e)}function oz(e){return new ij(e)}iW.className="Rescaling",K.m7h.registerClass(iW);let oW=oE,oV=oN,oG=oT,oH=oA;function oq(e){return new im(e)}function oX(e){return new ig(e)}function oK(e){return new iy(e)}function oZ(e){return new it(e)}function oY(e){return new iW(e)}var oQ=n(7629);function oJ(e,t){return oQ._F(e,t)}function o0(e,t){return oQ.fO(e,t)}function o1(e,t){return oQ.TY(e,t)}function o2(e,t){return oQ.G5(e,t)}function o3(e,t){return oQ.uq(e,t)}function o4(e,t){return oQ.ch(e,t)}function o6(e,t){return oQ.wC(e,t)}function o5(e,t){return ia.Ls(e,t)}function o8(e,t){return ia.ke(e,t)}function o7(e,t){return ia.t3(e,t)}function o9(e,t){return ia.t3(e,t)}function se(e,t){return ia.t3(e,t)}function st(e,t){return ia.FD(e,t)}function sn(e,t){return ia.FD(e,t)}function sr(e,t){return ia.FD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sa(e){return new aB.Xm(e)}function si(e){return aB.l1(e)}function so(e){return aB.l2(e)}var ss=n(3146);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class su extends aw.ex{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof ax.QV))throw Error("model must be a LayersModel, not some other Container");this.model=e}}function sl(e,t){return e<t}function sc(e,t){return e>t}class sh extends su{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new ak.nj("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=sl:"max"===this.mode?this.monitorFunc=sc:-1!==this.monitor.indexOf("acc")?this.monitorFunc=sc:this.monitorFunc=sl,this.monitorFunc===sl&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===sl?1/0:-1/0}async onEpochEnd(e,t){await (0,ss.Z)(t);let n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});let t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}}let sf={earlyStopping:function(e){return new sh(e)}};var sp=n(1653),sd=n(7385);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sm=(0,K.OBj)();sm.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),(o=d||(d={}))[o.DT_INVALID=0]="DT_INVALID",o[o.DT_FLOAT=1]="DT_FLOAT",o[o.DT_DOUBLE=2]="DT_DOUBLE",o[o.DT_INT32=3]="DT_INT32",o[o.DT_UINT8=4]="DT_UINT8",o[o.DT_INT16=5]="DT_INT16",o[o.DT_INT8=6]="DT_INT8",o[o.DT_STRING=7]="DT_STRING",o[o.DT_COMPLEX64=8]="DT_COMPLEX64",o[o.DT_INT64=9]="DT_INT64",o[o.DT_BOOL=10]="DT_BOOL",o[o.DT_QINT8=11]="DT_QINT8",o[o.DT_QUINT8=12]="DT_QUINT8",o[o.DT_QINT32=13]="DT_QINT32",o[o.DT_BFLOAT16=14]="DT_BFLOAT16",o[o.DT_QINT16=15]="DT_QINT16",o[o.DT_QUINT16=16]="DT_QUINT16",o[o.DT_UINT16=17]="DT_UINT16",o[o.DT_COMPLEX128=18]="DT_COMPLEX128",o[o.DT_HALF=19]="DT_HALF",o[o.DT_RESOURCE=20]="DT_RESOURCE",o[o.DT_VARIANT=21]="DT_VARIANT",o[o.DT_UINT32=22]="DT_UINT32",o[o.DT_UINT64=23]="DT_UINT64",o[o.DT_FLOAT_REF=101]="DT_FLOAT_REF",o[o.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",o[o.DT_INT32_REF=103]="DT_INT32_REF",o[o.DT_UINT8_REF=104]="DT_UINT8_REF",o[o.DT_INT16_REF=105]="DT_INT16_REF",o[o.DT_INT8_REF=106]="DT_INT8_REF",o[o.DT_STRING_REF=107]="DT_STRING_REF",o[o.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",o[o.DT_INT64_REF=109]="DT_INT64_REF",o[o.DT_BOOL_REF=110]="DT_BOOL_REF",o[o.DT_QINT8_REF=111]="DT_QINT8_REF",o[o.DT_QUINT8_REF=112]="DT_QUINT8_REF",o[o.DT_QINT32_REF=113]="DT_QINT32_REF",o[o.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",o[o.DT_QINT16_REF=115]="DT_QINT16_REF",o[o.DT_QUINT16_REF=116]="DT_QUINT16_REF",o[o.DT_UINT16_REF=117]="DT_UINT16_REF",o[o.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",o[o.DT_HALF_REF=119]="DT_HALF_REF",o[o.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",o[o.DT_VARIANT_REF=121]="DT_VARIANT_REF",o[o.DT_UINT32_REF=122]="DT_UINT32_REF",o[o.DT_UINT64_REF=123]="DT_UINT64_REF",(u=(s=m||(m={})).CheckpointFormatVersion||(s.CheckpointFormatVersion={}))[u.LEGACY=0]="LEGACY",u[u.V1=1]="V1",u[u.V2=2]="V2";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sg={};function sy(e,t){sg[e]={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t}}function sb(e){delete sg[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sv(e,t,n,r,a){let i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){let e=i.inputIndexStart,o=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd;if("tensor"===i.type)return sw(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type){let i=t.inputNames.slice(e,o);return i.map(e=>sw(e,n,r,a))}let s=sw(t.inputNames.slice(e)[0],n,r,a),u=s.dataSync();return"number"===i.type?u[0]:K.D5U.toNestedArray(s.shape,u)}let o=t.attrParams[e];return o&&o.value}function sw(e,t,n,r){let[a,i]=sk(e);if(null!=r){let e=r.getHashTableHandleByName(a);if(null!=e)return e}let o=n.currentContextIds.find(e=>!!t[s_(a,e)]);return void 0!==o?t[s_(a,o)][i]:void 0}function sx(e,t){let[n,r,a]=sk(e);return[s_(n,t&&t.currentContextId),r,a]}function s_(e,t){return t?`${e}-${t}`:e}function sk(e){let t=e.split(":");if(1===t.length)return[e,0,void 0];let n=t[0],r=3===t.length?t[1]:void 0,a=Number(t[t.length-1]);return[n,a,r]}function sS(e,t,n){let r=sv("pad",e,t,n);if("explicit"===r){r=sv("explicitPaddings",e,t,n);let a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function sI(e){return e.kept?e:(0,K.d9v)(e)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sE=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sN=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sT=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],sA=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],sC=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],sO=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sR=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],sD=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],sP=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],s$=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],sF=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sM=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],sB=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],sL=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],sU=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],sj=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],sz=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],sW=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],sV=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}];var sG=n(1876).Buffer;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sH{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[].concat(...[N,T,A,C,O,R,D,P,$,F,M,B,L,U,j,z,W,V,G].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){let n=e.node,r=[],a=[],i=[],o=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):(null==t.input||0===t.input.length)&&i.push(e[t.name]),e),{}),s=[],u=[],l={},c={};null!=t&&(l=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));let h=Object.keys(o);h.forEach(e=>{let t=o[e];t.inputNames.forEach((e,n)=>{let[r,,a]=sx(e),i=o[r];if(null!=i.outputs){let e=i.outputs.indexOf(a);if(-1!==e){let a=`${r}:${e}`;t.inputNames[n]=a}}t.inputs.push(i),i.children.push(t)})}),0===Object.keys(c).length?h.forEach(e=>{let t=o[e];0===t.children.length&&u.push(t)}):Object.keys(c).forEach(e=>{let[t]=sx(e),n=o[t];null!=n&&(n.signatureKey=c[e],u.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(e=>{let[t]=sx(e),n=o[t];n&&(n.signatureKey=l[e],s.push(n))}):s=r;let f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));let p={nodes:o,inputs:s,outputs:u,weights:a,placeholders:r,signature:t,functions:f};return i.length>0&&(p.initNodes=i),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=sg[e.op]||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{let r;let a=n.type;switch(n.type){case"string":void 0===(r=sX(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=sX(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=s4(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=s4(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=sZ(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=sZ(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=s3(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=s3(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=sK(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=sK(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=s5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=s5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=s2(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=s2(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=s6(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=s6(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=sJ(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=sJ(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=s0(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=s0(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=sQ(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=sQ(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:r,type:a},t},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));let a=[],i=[];e.signature.inputArg.forEach(e=>{let[t]=sx(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:sY(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n});let o=Object.keys(r);o.forEach(e=>{let t=r[e];t.inputNames.forEach((e,n)=>{let[a,,i]=sx(e),o=r[a];if(null!=o.outputs){let e=o.outputs.indexOf(i);if(-1!==e){let r=`${a}:${e}`;t.inputNames[n]=r}}t.inputs.push(o),o.children.push(t)})});let s=e.ret;e.signature.outputArg.forEach(e=>{let[t,n]=sx(s[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,i.push(a))});let u=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:i,weights:n,placeholders:[],signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}function sq(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){let t=(0,K.OBj)().global;if(void 0!==t.atob)return t.atob(e);if(void 0!==sG)return new sG(e,"base64").toString();throw Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function sX(e,t,n,r=!1){let a=e[t];return null!=a?sq(a.s,r):n}function sK(e,t,n){let r=e[t];return r?r.b:n}function sZ(e,t,n){let r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function sY(e){switch("string"==typeof e&&(e=d[e]),e){case d.DT_FLOAT:case d.DT_HALF:return"float32";case d.DT_INT32:case d.DT_INT64:case d.DT_INT8:case d.DT_UINT8:return"int32";case d.DT_BOOL:return"bool";case d.DT_DOUBLE:return"float32";case d.DT_STRING:return"string";default:return null}}function sQ(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function sJ(e,t,n){let r=e[t];return r&&r.type?sY(r.type):n}function s0(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>sY(e)):n}function s1(e){return e.unknownRank?void 0:null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function s2(e,t,n){let r=e[t];return r&&r.shape?s1(r.shape):n}function s3(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function s4(e,t,n,r=!1){let a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>sq(e,r)):n}function s6(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>s1(e)):n}function s5(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s8{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return sw(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(null!=n.tensor)return sw(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return sZ(this.node.rawAttrs,e,t);if(null!=n.s)return sX(this.node.rawAttrs,e,t);if(null!=n.b)return sK(this.node.rawAttrs,e,t);if(null!=n.shape)return s2(this.node.rawAttrs,e,t);if(null!=n.type)return sJ(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return s3(this.node.rawAttrs,e,t);if(null!=n.list.s)return s4(this.node.rawAttrs,e,t);if(null!=n.list.shape)return s6(this.node.rawAttrs,e,t);if(null!=n.list.b)return s5(this.node.rawAttrs,e,t);if(null!=n.list.type)return s0(this.node.rawAttrs,e,t)}return t}}var s7=n(5318);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s9=(e,t,n,r=H)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(sv("a",e,t,n),sv("b",e,t,n))];case"AddN":return[r.addN(sv("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(sv("a",e,t,n),sv("b",e,t,n))];case"Mul":return[r.mul(sv("a",e,t,n),sv("b",e,t,n))];case"RealDiv":case"Div":return[r.div(sv("a",e,t,n),sv("b",e,t,n))];case"DivNoNan":return[r.divNoNan(sv("a",e,t,n),sv("b",e,t,n))];case"FloorDiv":return[r.floorDiv(sv("a",e,t,n),sv("b",e,t,n))];case"Sub":return[r.sub(sv("a",e,t,n),sv("b",e,t,n))];case"Minimum":return[r.minimum(sv("a",e,t,n),sv("b",e,t,n))];case"Maximum":return[r.maximum(sv("a",e,t,n),sv("b",e,t,n))];case"Pow":return[r.pow(sv("a",e,t,n),sv("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(sv("a",e,t,n),sv("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},ue=(e,t,n,r=H)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(sv("x",e,t,n))];case"Acos":return[r.acos(sv("x",e,t,n))];case"Acosh":return[r.acosh(sv("x",e,t,n))];case"Asin":return[r.asin(sv("x",e,t,n))];case"Asinh":return[r.asinh(sv("x",e,t,n))];case"Atan":return[r.atan(sv("x",e,t,n))];case"Atan2":return[r.atan2(sv("x",e,t,n),sv("y",e,t,n))];case"Atanh":return[r.atanh(sv("x",e,t,n))];case"Ceil":return[r.ceil(sv("x",e,t,n))];case"Complex":return[r.complex(sv("real",e,t,n),sv("imag",e,t,n))];case"Cos":return[r.cos(sv("x",e,t,n))];case"Cosh":return[r.cosh(sv("x",e,t,n))];case"Elu":return[r.elu(sv("x",e,t,n))];case"Erf":return[r.erf(sv("x",e,t,n))];case"Exp":return[r.exp(sv("x",e,t,n))];case"Expm1":return[r.expm1(sv("x",e,t,n))];case"Floor":return[r.floor(sv("x",e,t,n))];case"Log":return[r.log(sv("x",e,t,n))];case"Log1p":return[r.log1p(sv("x",e,t,n))];case"Imag":return[r.imag(sv("x",e,t,n))];case"Neg":return[r.neg(sv("x",e,t,n))];case"Reciprocal":return[r.reciprocal(sv("x",e,t,n))];case"Real":return[r.real(sv("x",e,t,n))];case"Relu":return[r.relu(sv("x",e,t,n))];case"Round":return[r.round(sv("x",e,t,n))];case"Selu":return[r.selu(sv("x",e,t,n))];case"Sigmoid":return[r.sigmoid(sv("x",e,t,n))];case"Sin":return[r.sin(sv("x",e,t,n))];case"Sign":return[r.sign(sv("x",e,t,n))];case"Sinh":return[r.sinh(sv("x",e,t,n))];case"Softplus":return[r.softplus(sv("x",e,t,n))];case"Sqrt":return[r.sqrt(sv("x",e,t,n))];case"Square":return[r.square(sv("x",e,t,n))];case"Tanh":return[r.tanh(sv("x",e,t,n))];case"Tan":return[r.tan(sv("x",e,t,n))];case"ClipByValue":return[r.clipByValue(sv("x",e,t,n),sv("clipValueMin",e,t,n),sv("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(sv("x",e,t,n))];case"Rsqrt":return[r.rsqrt(sw(e.inputNames[0],t,n))];case"Prod":return[r.prod(sv("x",e,t,n),sv("axes",e,t,n))];case"LeakyRelu":return[r.leakyRelu(sv("x",e,t,n),sv("alpha",e,t,n))];case"Prelu":return[r.prelu(sv("x",e,t,n),sv("alpha",e,t,n))];case"IsNan":return[r.isNaN(sw(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ut(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){K.D5U.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let a=e[r],i=t[r];K.D5U.assert(a<0||i<0||a===i,()=>n+` Shapes ${e} and ${t} must match`)}}}function un(e){return!("number"==typeof e||e.some(e=>e<0))}function ur(e,t,n){let r=ua(e,n),a=!un(r);if(a&&0===t.length)throw Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(a&&t.forEach(e=>{r=ua(e.shape,r)}),!un(r))throw Error(`Non-fully-defined elementShape: ${r}`);return r}function ua(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=a>=0?a:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ui{constructor(e,t,n,r,a,i,o){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=(0,K.iD$)(0),(0,K.CnY)(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.tensor.id)||t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),ut(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,(0,K.CnY)(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return(0,K.XeE)([],[0].concat(this.elementShape));let n=this.readMany(e);return ut(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),(0,K.knu)(n,0)}concat(e){if(e&&e!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return(0,K.XeE)([],[0].concat(this.elementShape));let t=[];for(let e=0;e<this.size();e++)t.push(e);let n=this.readMany(t);return ut(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),(0,K.zoF)(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,(0,K.HHK)(t,0))}split(e,t){if(t.dtype!==this.dtype)throw Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0,r=e.map(e=>n+=e);if(n!==t.shape[0])throw Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let a=0===n?0:t.size/n,i=[];(0,K.lub)(()=>{t=(0,K.XLQ)(t,[1,n,a]);for(let n=0;n<e.length;++n){let o=0===n?0:r[n-1],s=[0,o,0],u=[1,e[n],a];i[n]=(0,K.XLQ)((0,K.tPi)(t,s,u),this.elementShape)}return i});let o=[];for(let t=0;t<e.length;t++)o[t]=t;this.writeMany(o,i)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uo{constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);ut(t,e.shape,"TensorList shape mismatch: "),(0,K.CnY)(e)}),this.idTensor=(0,K.iD$)(0),this.maxNumElements=r,(0,K.CnY)(this.idTensor)}get id(){return this.idTensor.id}copy(){return new uo([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{null!=e&&e.has(t.id)||t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);ut(e,this.elementShape,"TensorList shape mismatch: ");let r=ur(this.elementShape,this.tensors,e);return(0,K.lub)(()=>{let e=this.tensors.map(e=>(0,K.XLQ)(e,r));return(0,K.knu)(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw Error("Trying to pop from an empty list.");let n=ur(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,ut(r.shape,e,"TensorList shape mismatch: "),(0,K.XLQ)(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(ut(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw Error("Trying to push element into a full list.");(0,K.CnY)(e),this.tensors.push(e)}resize(e){if(e<0)throw Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let t=new uo([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw Error(`element at index ${e} is null.`);ut(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=ur(this.elementShape,this.tensors,t);return(0,K.XLQ)(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);ut(this.elementShape,t.shape,"TensorList shape mismatch: "),(0,K.CnY)(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);ut(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=ur(this.elementShape,this.tensors,n);return 0===e.length?(0,K.XeE)([],[0].concat(r)):(0,K.lub)(()=>{let t=e.map(e=>(0,K.XLQ)(this.tensors[e],r));return(0,K.knu)(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);ut(this.elementShape,t,"TensorList shape mismatch: ");let n=ur(this.elementShape,this.tensors,t);return 0===this.size()?(0,K.XeE)([],[0].concat(n)):(0,K.lub)(()=>{let e=this.tensors.map(e=>(0,K.XLQ)(e,n));return(0,K.zoF)(e,0)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let us=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=sv("thenBranch",e,t,n),a=sv("elseBranch",e,t,n),i=sv("cond",e,t,n),o=sv("args",e,t,n),s=await i.data();if(s[0])return n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap);return n.functionMap[a].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=sv("body",e,t,n),a=sv("cond",e,t,n),i=sv("args",e,t,n),o=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),s=i.map(e=>e.id),u=await o[0].data();o.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||e.dispose()});let l=i;for(;u[0];){let e=l;l=await n.functionMap[r].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);let t=l.map(e=>e.id);e.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()});let i=await n.functionMap[a].executeFunctionAsync(l,n.tensorArrayMap,n.tensorListMap);u=await i[0].data(),i.forEach(e=>{e.kept||-1!==s.indexOf(e.id)||-1!==t.indexOf(e.id)||e.dispose()})}return l}case"LoopCond":{let r=sv("pred",e,t,n);return[sI(r)]}case"Switch":{let r=sv("pred",e,t,n),a=sv("data",e,t,n);return a.kept||(a=sI(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let r=e.inputNames.find(e=>void 0!==sw(e,t,n));if(r){let e=sw(r,t,n);return[sI(e)]}return}case"Enter":{let r=sv("frameName",e,t,n),a=sv("tensor",e,t,n);return n.enterFrame(r),[sI(a)]}case"Exit":{let r=sv("tensor",e,t,n);return n.exitFrame(),[sI(r)]}case"NextIteration":{let r=sv("tensor",e,t,n);return n.nextIteration(),[sI(r)]}case"TensorArrayV3":{let r=sv("size",e,t,n),a=sv("dtype",e,t,n),i=sv("elementShape",e,t,n),o=sv("dynamicSize",e,t,n),s=sv("clearAfterRead",e,t,n),u=sv("identicalElementShapes",e,t,n),l=sv("name",e,t,n),c=new ui(l,a,r,i,u,o,s);return n.addTensorArray(c),[c.idTensor,(0,K.iD$)(1)]}case"TensorArrayWriteV3":{let r=sv("tensorArrayId",e,t,n),a=sv("index",e,t,n),i=sv("tensor",e,t,n),o=n.getTensorArray(r.id);return o.write(a,i),[o.idTensor]}case"TensorArrayReadV3":{let r=sv("tensorArrayId",e,t,n),a=sv("index",e,t,n),i=n.getTensorArray(r.id);return[i.read(a)]}case"TensorArrayGatherV3":{let r=sv("tensorArrayId",e,t,n),a=sv("indices",e,t,n),i=sv("dtype",e,t,n),o=n.getTensorArray(r.id);return[o.gather(a,i)]}case"TensorArrayScatterV3":{let r=sv("tensorArrayId",e,t,n),a=sv("indices",e,t,n),i=sv("tensor",e,t,n),o=n.getTensorArray(r.id);return o.scatter(a,i),[o.idTensor]}case"TensorArrayConcatV3":{let r=sv("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),i=sv("dtype",e,t,n);return[a.concat(i)]}case"TensorArraySplitV3":{let r=sv("tensorArrayId",e,t,n),a=sv("tensor",e,t,n),i=sv("lengths",e,t,n),o=n.getTensorArray(r.id);return o.split(i,a),[o.idTensor]}case"TensorArraySizeV3":{let r=sv("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return[(0,K.iD$)(a.size(),"int32")]}case"TensorArrayCloseV3":{let r=sv("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let r=sv("tensorListId",e,t,n),a=sv("index",e,t,n),i=sv("tensor",e,t,n),o=n.getTensorList(r.id);return o.setItem(a,i),[o.idTensor]}case"TensorListGetItem":{let r=sv("tensorListId",e,t,n),a=sv("index",e,t,n),i=sv("elementShape",e,t,n),o=sv("elementDType",e,t,n),s=n.getTensorList(r.id);return[s.getItem(a,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{let r=sv("indices",e,t,n),a=sv("tensor",e,t,n),i=sv("elementShape",e,t,n),o=sv("numElements",e,t,n),s=function(e,t,n,r){if(t.length!==e.shape[0])throw Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw Error(`Max index must be < array size (${a}  vs. ${r})`);let i=new uo([],n,e.dtype,r),o=(0,K.HHK)(e,0);return t.forEach((e,t)=>{i.setItem(e,o[t])}),i}(a,r,i,o);return n.addTensorList(s),[s.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r;let a=sv("elementShape",e,t,n),i=sv("elementDType",e,t,n);r="TensorListReserve"===e.op?"numElements":"maxNumElements";let o=sv(r,e,t,n),s="TensorListReserve"===e.op?-1:o,u=new uo([],a,i,s);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{let r=sv("tensorListId",e,t,n),a=sv("indices",e,t,n),i=sv("elementShape",e,t,n),o=sv("elementDType",e,t,n),s=n.getTensorList(r.id);return[s.gather(a,o,i)]}case"TensorListStack":{let r=sv("tensorListId",e,t,n),a=sv("elementShape",e,t,n),i=sv("elementDType",e,t,n),o=sv("numElements",e,t,n),s=n.getTensorList(r.id);return[s.stack(a,i,o)]}case"TensorListFromTensor":{let r=sv("tensor",e,t,n),a=sv("elementShape",e,t,n),i=sv("elementDType",e,t,n),o=function(e,t,n){let r=e.dtype;if(e.shape.length<1)throw Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);let a=e.shape.slice(1);ut(a,t,"TensorList shape mismatch: ");let i=(0,K.HHK)(e);return new uo(i,t,r)}(r,a,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=sv("tensorListId",e,t,n),a=n.getTensorList(r.id),i=sv("dtype",e,t,n),o=sv("elementShape",e,t,n);return[a.concat(i,o)]}case"TensorListPushBack":{let r=sv("tensorListId",e,t,n),a=sv("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{let r=sv("tensorListId",e,t,n),a=sv("elementShape",e,t,n),i=sv("elementDType",e,t,n),o=n.getTensorList(r.id);return[o.popBack(a,i)]}case"TensorListSplit":{let r=sv("tensor",e,t,n),a=sv("elementShape",e,t,n),i=sv("lengths",e,t,n),o=function(e,t,n){let r=0,a=t.map(e=>r+=e);if(r!==e.shape[0])throw Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);let i=e.shape.slice(1),o=ua(i,n),s=0===r?0:e.size/r,u=(0,K.lub)(()=>{let n=[];e=(0,K.XLQ)(e,[1,r,s]);for(let r=0;r<t.length;++r){let i=0===r?0:a[r-1],u=[0,i,0],l=[1,t[r],s];n[r]=(0,K.XLQ)((0,K.tPi)(e,u,l),o)}return e.dispose(),n}),l=new uo([],n,e.dtype,t.length);for(let e=0;e<u.length;e++)l.setItem(e,u[e]);return l}(r,i,a);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{let r=sv("tensorListId",e,t,n),a=n.getTensorList(r.id);return[(0,K.iD$)(a.size(),"int32")]}case"TensorListResize":{let r=sv("tensorListId",e,t,n),a=sv("size",e,t,n),i=n.getTensorList(r.id),o=i.resize(a);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uu(e,t,n){let[r,a]=sv("fusedOps",e,t,n),i="biasadd"===r,o="prelu"===a,s=sv("numArgs",e,t,n);if(i){if(o&&2!==s)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&1!==s)throw Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if("fusedbatchnorm"===r)throw Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=sv("strides",e,t,n),l=sS(e,t,n),c=sv("dataFormat",e,t,n).toUpperCase(),h=sv("dilations",e,t,n),[f,p]=sv("args",e,t,n);i||(p=f,f=void 0);let d=sv("leakyreluAlpha",e,t,n);return{stride:u,pad:l,dataFormat:c,dilations:h,biasArg:f,preluArg:p,activationFunc:a,leakyreluAlpha:d}}let ul=(e,t,n,r=H)=>{switch(e.op){case"Conv1D":{let a=sv("stride",e,t,n),i=sv("pad",e,t,n),o=sv("dataFormat",e,t,n).toUpperCase(),s=sv("dilation",e,t,n);return[r.conv1d(sv("x",e,t,n),sv("filter",e,t,n),a,i,o,s)]}case"Conv2D":{let a=sv("strides",e,t,n),i=sS(e,t,n),o=sv("dataFormat",e,t,n).toUpperCase(),s=sv("dilations",e,t,n);return[r.conv2d(sv("x",e,t,n),sv("filter",e,t,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"_FusedConv2D":{let{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:h}=uu(e,t,n);return[r.fused.conv2d({x:sv("x",e,t,n),filter:sv("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:i,dataFormat:o,dilations:s,biasArg:u,preluArg:l,activationFunc:c,leakyreluAlpha:h}=uu(e,t,n);return[r.fused.depthwiseConv2d({x:sv("x",e,t,n),filter:sv("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:o,dilations:[s[1],s[2]],bias:u,activation:c,preluActivationWeights:l,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=sv("outputShape",e,t,n),i=sv("strides",e,t,n),o=sS(e,t,n);return[r.conv2dTranspose(sv("x",e,t,n),sv("filter",e,t,n),a,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=sv("strides",e,t,n),i=sS(e,t,n),o=sv("dilations",e,t,n),s=sv("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(sv("input",e,t,n),sv("filter",e,t,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"Conv3D":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("dataFormat",e,t,n).toUpperCase(),s=sv("dilations",e,t,n);return[r.conv3d(sv("x",e,t,n),sv("filter",e,t,n),[a[1],a[2],a[3]],i,o,[s[1],s[2],s[3]])]}case"AvgPool":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("kernelSize",e,t,n);return[r.avgPool(sv("x",e,t,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPool":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("kernelSize",e,t,n);return[r.maxPool(sv("x",e,t,n),[o[1],o[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("kernelSize",e,t,n),s=sv("includeBatchInIndex",e,t,n),{result:u,indexes:l}=r.maxPoolWithArgmax(sv("x",e,t,n),[o[1],o[2]],[a[1],a[2]],i,s);return[u,l]}case"AvgPool3D":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("kernelSize",e,t,n);return[r.avgPool3d(sv("x",e,t,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("kernelSize",e,t,n);return[r.maxPool3d(sv("x",e,t,n),[o[1],o[2],o[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{let a=sv("strides",e,t,n),i=sv("pad",e,t,n),o=sv("dilations",e,t,n),s=a[1],u=a[2],l=o[1],c=o[2];return[r.dilation2d(sv("x",e,t,n),sv("filter",e,t,n),[s,u],i,[l,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},uc=(e,t,n,r=H)=>{switch(e.op){case"Fill":{let a=sv("shape",e,t,n),i=sv("dtype",e,t,n),o=sv("value",e,t,n);return[r.fill(a,o,i)]}case"LinSpace":{let a=sv("start",e,t,n),i=sv("stop",e,t,n),o=sv("num",e,t,n);return[r.linspace(a,i,o)]}case"Multinomial":{let a=sv("logits",e,t,n),i=sv("numSamples",e,t,n),o=sv("seed",e,t,n);return[r.multinomial(a,i,o)]}case"OneHot":{let a=sv("indices",e,t,n),i=sv("depth",e,t,n),o=sv("onValue",e,t,n),s=sv("offValue",e,t,n),u=sv("dtype",e,t,n);return[r.oneHot(a,i,o,s,u)]}case"Ones":return[r.ones(sv("shape",e,t,n),sv("dtype",e,t,n))];case"OnesLike":return[r.onesLike(sv("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(sv("shape",e,t,n),sv("dtype",e,t,n),sv("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(sv("shape",e,t,n),sv("minval",e,t,n),sv("maxval",e,t,n),sv("dtype",e,t,n))];case"Range":{let a=sv("start",e,t,n),i=sv("stop",e,t,n),o=sv("step",e,t,n);return[r.range(a,i,o,sv("dtype",e,t,n))]}case"TruncatedNormal":{let a=sv("shape",e,t,n),i=sv("mean",e,t,n),o=sv("stdDev",e,t,n),s=sv("seed",e,t,n);return[r.truncatedNormal(a,i,o,sv("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(sv("shape",e,t,n),sv("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(sv("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uh(e,t,n){let r=sv("boxes",e,t,n),a=sv("scores",e,t,n),i=sv("maxOutputSize",e,t,n),o=sv("iouThreshold",e,t,n),s=sv("scoreThreshold",e,t,n),u=sv("softNmsSigma",e,t,n);return{boxes:r,scores:a,maxOutputSize:i,iouThreshold:o,scoreThreshold:s,softNmsSigma:u}}let uf=async(e,t,n,r,a=H)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:r,scores:i,maxOutputSize:o,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=uh(e,t,n),c=await a.image.nonMaxSuppressionWithScoreAsync(r,i,o,s,u,l);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:r,scores:i,maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=uh(e,t,n),l=sv("padToMaxOutputSize",e,t,n),c=await a.image.nonMaxSuppressionPaddedAsync(r,i,o,s,u,l);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:r,scores:i,maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=uh(e,t,n);return[await a.image.nonMaxSuppressionAsync(r,i,o,s,u)]}case"Where":{let r=a.cast(sv("condition",e,t,n),"bool"),i=[await a.whereAsync(r)];return r.dispose(),i}case"ListDiff":return a.setdiff1dAsync(sv("x",e,t,n),sv("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}},up=(e,t,n,r=H)=>{switch(e.op){case"LowerBound":{let a=sv("sortedSequence",e,t,n),i=sv("values",e,t,n);return[r.lowerBound(a,i)]}case"TopKV2":{let a=sv("x",e,t,n),i=sv("k",e,t,n),o=sv("sorted",e,t,n),s=r.topk(a,i,o);return[s.values,s.indices]}case"UpperBound":{let a=sv("sortedSequence",e,t,n),i=sv("values",e,t,n);return[r.upperBound(a,i)]}case"Unique":{let a=sv("x",e,t,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{let a=sv("x",e,t,n),i=sv("axis",e,t,n),o=r.unique(a,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},ud=(e,t,n,r=H)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=sv("default",e,t,n);return[sw(e.name,t,n)||a];case"Placeholder":return[sw(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let r=sv("x",e,t,n);return[sI(r)]}case"IdentityN":return sv("x",e,t,n).map(e=>sI(e));case"Snapshot":let i=sv("x",e,t,n);return[sI(i)];case"Shape":return[r.tensor1d(sv("x",e,t,n).shape,"int32")];case"ShapeN":return sv("x",e,t,n).map(e=>r.tensor1d(e.shape));case"Size":return[r.scalar(sv("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(sv("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let o=sv("x",e,t,n),s=sv("data",e,t,n),u=sv("message",e,t,n),l=sv("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class um{constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=(0,K.iD$)(0),this.tensorMap=new Map,(0,K.CnY)(this.handle)}get id(){return this.handle.id}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return er.i(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),(0,K.lub)(()=>{let e=(0,K.HHK)(t),r=n.length,a=e.length;K.D5U.assert(r===a,()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${a} elements.`);for(let t=0;t<r;t++){let r=n[t],a=e[t];(0,K.CnY)(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return(0,K.lub)(()=>{let e=[];for(let r=0;r<n.length;r++){let a=n[r],i=this.findWithDefault(a,t);e.push(i)}return(0,K.knu)(e)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ug=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=sv("keyDType",e,t,n),i=sv("valueDType",e,t,n),o=new um(a,i);return r.addHashTable(e.name,o),[o.handle]}case"LookupTableImport":case"LookupTableImportV2":{let a=sv("tableHandle",e,t,n,r),i=sv("keys",e,t,n),o=sv("values",e,t,n),s=r.getHashTableById(a.id);return[await s.import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{let a=sv("tableHandle",e,t,n,r),i=sv("keys",e,t,n),o=sv("defaultValue",e,t,n),s=r.getHashTableById(a.id);return[await s.find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=sv("tableHandle",e,t,n,r),i=r.getHashTableById(a.id);return[i.tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},uy=(e,t,n,r=H)=>{switch(e.op){case"ResizeBilinear":{let a=sv("images",e,t,n),i=sv("size",e,t,n),o=sv("alignCorners",e,t,n),s=sv("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],o,s)]}case"ResizeNearestNeighbor":{let a=sv("images",e,t,n),i=sv("size",e,t,n),o=sv("alignCorners",e,t,n),s=sv("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],o,s)]}case"CropAndResize":{let a=sv("image",e,t,n),i=sv("boxes",e,t,n),o=sv("boxInd",e,t,n),s=sv("cropSize",e,t,n),u=sv("method",e,t,n),l=sv("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,i,o,s,u,l)]}case"ImageProjectiveTransformV3":{let a=sv("images",e,t,n),i=sv("transforms",e,t,n),o=sv("outputShape",e,t,n),s=sv("fillValue",e,t,n),u=sv("interpolation",e,t,n),l=sv("fillMode",e,t,n);return[r.image.transform(a,i,u.toLowerCase(),l.toLowerCase(),s,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},ub=(e,t,n,r=H)=>{switch(e.op){case"Equal":return[r.equal(sv("a",e,t,n),sv("b",e,t,n))];case"NotEqual":return[r.notEqual(sv("a",e,t,n),sv("b",e,t,n))];case"Greater":return[r.greater(sv("a",e,t,n),sv("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(sv("a",e,t,n),sv("b",e,t,n))];case"Less":return[r.less(sv("a",e,t,n),sv("b",e,t,n))];case"LessEqual":return[r.lessEqual(sv("a",e,t,n),sv("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(sv("a",e,t,n),sv("b",e,t,n))];case"LogicalNot":return[r.logicalNot(sv("a",e,t,n))];case"LogicalOr":return[r.logicalOr(sv("a",e,t,n),sv("b",e,t,n))];case"Select":case"SelectV2":return[r.where(sv("condition",e,t,n),sv("a",e,t,n),sv("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},uv=(e,t,n,r=H)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(sv("a",e,t,n),sv("b",e,t,n),sv("transposeA",e,t,n),sv("transposeB",e,t,n))];case"Einsum":return[r.einsum(sv("equation",e,t,n),...sv("tensors",e,t,n))];case"Transpose":return[r.transpose(sv("x",e,t,n),sv("perm",e,t,n))];case"_FusedMatMul":let[a,i]=sv("fusedOps",e,t,n),o="prelu"===i,s=sv("numArgs",e,t,n),u=sv("leakyreluAlpha",e,t,n);if("biasadd"===a){if(o&&2!==s)throw Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==s)throw Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[l,c]=sv("args",e,t,n);return[r.fused.matMul({a:sv("a",e,t,n),b:sv("b",e,t,n),transposeA:sv("transposeA",e,t,n),transposeB:sv("transposeB",e,t,n),bias:l,activation:i,preluActivationWeights:c,leakyreluAlpha:u})];default:throw TypeError(`Node type ${e.op} is not implemented`)}},uw=(e,t,n,r=H)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(sv("x",e,t,n),sv("axis",e,t,n),sv("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(sv("x",e,t,n),sv("mean",e,t,n),sv("variance",e,t,n),sv("offset",e,t,n),sv("scale",e,t,n),sv("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(sv("x",e,t,n),sv("radius",e,t,n),sv("bias",e,t,n),sv("alpha",e,t,n),sv("beta",e,t,n))];case"Softmax":return[r.softmax(sv("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(sv("x",e,t,n))];case"SparseToDense":return[r.sparseToDense(sv("sparseIndices",e,t,n),sv("outputShape",e,t,n),sv("sparseValues",e,t,n),sv("defaultValue",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},ux=(e,t,n,r=H)=>{switch(e.op){case"Max":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.max(sv("x",e,t,n),a,i)]}case"Mean":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.mean(sv("x",e,t,n),a,i)]}case"Min":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.min(sv("x",e,t,n),a,i)]}case"Sum":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.sum(sv("x",e,t,n),a,i)]}case"All":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.all(sv("x",e,t,n),a,i)]}case"Any":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.any(sv("x",e,t,n),a,i)]}case"ArgMax":{let a=sv("axis",e,t,n);return[r.argMax(sv("x",e,t,n),a)]}case"ArgMin":{let a=sv("axis",e,t,n);return[r.argMin(sv("x",e,t,n),a)]}case"Prod":{let a=sv("axis",e,t,n),i=sv("keepDims",e,t,n);return[r.prod(sv("x",e,t,n),a,i)]}case"Cumprod":{let a=sv("axis",e,t,n),i=sv("exclusive",e,t,n),o=sv("reverse",e,t,n);return[r.cumprod(sv("x",e,t,n),a,i,o)]}case"Cumsum":{let a=sv("axis",e,t,n),i=sv("exclusive",e,t,n),o=sv("reverse",e,t,n);return[r.cumsum(sv("x",e,t,n),a,i,o)]}case"Bincount":let a=sv("x",e,t,n),i=sv("weights",e,t,n),o=sv("size",e,t,n);return[r.bincount(a,i,o)];case"DenseBincount":{let a=sv("x",e,t,n),i=sv("weights",e,t,n),o=sv("size",e,t,n),s=sv("binaryOutput",e,t,n);return[r.denseBincount(a,i,o,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},u_=(e,t,n,r=H)=>{switch(e.op){case"ConcatV2":case"Concat":{let a=sv("n",e,t,n),i=sv("axis",e,t,n),o=sv("tensors",e,t,n);return o=o.slice(0,a),[r.concat(o,i)]}case"Gather":{let a=sv("x",e,t,n),i=sv("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{let a=sv("axis",e,t,n),i=sv("batchDims",e,t,n),o=sv("x",e,t,n),s=sv("indices",e,t,n);return[r.gather(o,r.cast(s,"int32"),a,i)]}case"Reverse":{let a=sv("dims",e,t,n),i=[];for(let e=0;e<a.length;e++)a[e]&&i.push(e);let o=sv("x",e,t,n);return[r.reverse(o,i)]}case"ReverseV2":{let a=sv("axis",e,t,n),i=sv("x",e,t,n);return[r.reverse(i,a)]}case"Slice":{let a=sv("begin",e,t,n),i=sv("size",e,t,n);return[r.slice(sv("x",e,t,n),a,i)]}case"StridedSlice":{let a=sv("begin",e,t,n),i=sv("end",e,t,n),o=sv("strides",e,t,n),s=sv("beginMask",e,t,n),u=sv("endMask",e,t,n),l=sv("ellipsisMask",e,t,n),c=sv("newAxisMask",e,t,n),h=sv("shrinkAxisMask",e,t,n),f=sv("x",e,t,n);return[r.stridedSlice(f,a,i,o,s,u,l,c,h)]}case"Pack":return(0,K.lub)(()=>{let a=sv("axis",e,t,n),i=sv("tensors",e,t,n),o=i[0].shape,s=r.squeeze(i[0]).shape,u=i.map(e=>{let t=K.D5U.arraysEqual(e.shape,o);if(!t&&!K.D5U.arraysEqual(r.squeeze(e).shape,s))throw Error("the input tensors shape does not match");return t?e:r.reshape(e,o)});return[r.stack(u,a)]});case"Unpack":{let a=sv("axis",e,t,n),i=sv("tensor",e,t,n);return r.unstack(i,a)}case"Tile":{let a=sv("reps",e,t,n);return[r.tile(sv("x",e,t,n),a)]}case"Split":case"SplitV":{let a=sv("axis",e,t,n),i=sv("numOrSizeSplits",e,t,n),o=sv("x",e,t,n);return r.split(o,i,a)}case"ScatterNd":{let a=sv("indices",e,t,n),i=sv("values",e,t,n),o=sv("shape",e,t,n);return[r.scatterND(a,i,o)]}case"GatherNd":{let a=sv("x",e,t,n),i=sv("indices",e,t,n);return[r.gatherND(a,i)]}case"SparseToDense":{let a=sv("sparseIndices",e,t,n),i=sv("outputShape",e,t,n),o=sv("sparseValues",e,t,n),s=sv("defaultValue",e,t,n);return[r.sparseToDense(a,o,i,o.dtype===s.dtype?s:r.cast(s,o.dtype))]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},uk=(e,t,n,r=H)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:i,emptyRowIndicator:o,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(sv("indices",e,t,n),sv("values",e,t,n),sv("denseShape",e,t,n),sv("defaultValue",e,t,n));return[a,i,o,s]}case"SparseReshape":{let{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(sv("inputIndices",e,t,n),sv("inputShape",e,t,n),sv("newShape",e,t,n));return[a,i]}case"SparseSegmentMean":{let a=r.sparse.sparseSegmentMean(sv("data",e,t,n),sv("indices",e,t,n),sv("segmentIds",e,t,n));return[a]}case"SparseSegmentSum":{let a=r.sparse.sparseSegmentSum(sv("data",e,t,n),sv("indices",e,t,n),sv("segmentIds",e,t,n));return[a]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},uS=(e,t,n,r=H)=>{switch(e.op){case"FFT":return[r.fft(sv("x",e,t,n))];case"IFFT":return[r.ifft(sv("x",e,t,n))];case"RFFT":return[r.rfft(sv("x",e,t,n))];case"IRFFT":return[r.irfft(sv("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}},uI=(e,t,n,r=H)=>{switch(e.op){case"StringNGrams":{let{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(sv("data",e,t,n),sv("dataSplits",e,t,n),sv("separator",e,t,n),sv("nGramWidths",e,t,n),sv("leftPad",e,t,n),sv("rightPad",e,t,n),sv("padWidth",e,t,n),sv("preserveShortSequences",e,t,n));return[a,i]}case"StringSplit":{let{indices:a,values:i,shape:o}=r.string.stringSplit(sv("input",e,t,n),sv("delimiter",e,t,n),sv("skipEmpty",e,t,n));return[a,i,o]}case"StringToHashBucketFast":{let a=r.string.stringToHashBucketFast(sv("input",e,t,n),sv("numBuckets",e,t,n));return[a]}default:throw TypeError(`Node type ${e.op} is not implemented`)}},uE=(e,t,n,r=H)=>{switch(e.op){case"Cast":return[r.cast(sv("x",e,t,n),sv("dtype",e,t,n))];case"ExpandDims":{let a=sv("axis",e,t,n);return[r.expandDims(sv("x",e,t,n),a)]}case"Squeeze":{let a=sv("axis",e,t,n);return[r.squeeze(sv("x",e,t,n),a)]}case"Reshape":return[r.reshape(sv("x",e,t,n),sv("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(sv("x",e,t,n),sv("padding",e,t,n),sv("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(sv("x",e,t,n),sv("padding",e,t,n),sv("constantValue",e,t,n))];case"SpaceToBatchND":{let a=sv("blockShape",e,t,n),i=sv("paddings",e,t,n);return[r.spaceToBatchND(sv("x",e,t,n),a,i)]}case"BatchToSpaceND":{let a=sv("blockShape",e,t,n),i=sv("crops",e,t,n);return[r.batchToSpaceND(sv("x",e,t,n),a,i)]}case"DepthToSpace":{let a=sv("blockSize",e,t,n),i=sv("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(sv("x",e,t,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(sv("x",e,t,n),sv("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(sv("s0",e,t,n),sv("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uN(e,t,n,r,a=K.lub){let i=((e,t,n)=>{switch(e.category){case"arithmetic":return a(()=>s9(e,t,n));case"basic_math":return a(()=>ue(e,t,n));case"control":return us(e,t,n);case"convolution":return a(()=>ul(e,t,n));case"creation":return a(()=>uc(e,t,n));case"dynamic":return uf(e,t,n);case"evaluation":return a(()=>up(e,t,n));case"image":return a(()=>uy(e,t,n));case"graph":return a(()=>ud(e,t,n));case"logical":return a(()=>ub(e,t,n));case"matrices":return a(()=>uv(e,t,n));case"normalization":return a(()=>uw(e,t,n));case"reduction":return a(()=>ux(e,t,n));case"slice_join":return a(()=>u_(e,t,n));case"sparse":return a(()=>uk(e,t,n));case"spectral":return a(()=>uS(e,t,n));case"string":return a(()=>uI(e,t,n));case"transformation":return a(()=>uE(e,t,n));case"hash_table":return ug(e,t,n,r);case"custom":let i=sg[e.op];if(i&&i.customExecutor)return i.customExecutor(new s8(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return K.D5U.isPromise(i)?i.then(e=>[].concat(e)):[].concat(i)}class uT{constructor(e={},t={},n={},r={}){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uA(e,t,n,r){let a=new Set,i=[],o=null,s=null,u=new Set,l=Object.keys(e).map(e=>sk(e)[0]),c=[];null!=r&&(c=r.map(e=>sk(e.name)[0]));let h=[...t];for(;h.length>0;){let e=h.pop();if((uD(e)||uO.indexOf(e.op)>=0||uR.indexOf(e.op)>=0)&&null==o&&(s=(o=e).children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==n[e.name]&&-1===l.indexOf(e.name)&&-1===c.indexOf(e.name)){if(0===e.inputs.length){i.push(e.name);continue}e.inputs.forEach(e=>{u.has(e.name)||(u.add(e.name),h.push(e))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}let uC=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],uO=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],uR=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function uD(e){return uC.indexOf(e.op)>=0}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uP{constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new uP(e.functions[t],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}getCompilationKey(e,t){let n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(e,t){let n=uA(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:i}=n;if(null!=a)throw Error(`This execution contains the node '${a.name}', which has the dynamic op '${a.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${i}]`);if(r.length>0){let n=t.map(e=>e.name),a=Object.keys(e);throw Error(`Cannot compute the outputs [${n}] from the provided inputs [${a}]. Missing the following inputs: [${r}]`)}return function(e,t,n){let{usedNodes:r,inputs:a}=n,i=[],o=Object.keys(a).map(e=>sk(e)[0]).map(t=>e.nodes[t]),s=e.initNodes;o.forEach(e=>{r.has(e.name)&&i.push(e)}),e.weights.forEach(e=>{r.has(e.name)&&i.push(e)}),null!=s&&s.forEach(e=>{r.has(e.name)&&i.push(e)});let u=new Set,l=[];for(;i.length>0;){let e=i.pop();u.add(e.name),t[e.name]||l.push(e),e.children.forEach(e=>{!u.has(e.name)&&r.has(e.name)&&e.inputs.every(e=>u.has(e.name))&&i.push(e)})}return l}(this.graph,this.weightMap,n)}execute(e,t){e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(e=>this.graph.nodes[sk(e)[0]]),a=t.map(e=>sk(e)[0]),i=a.map(e=>this.graph.nodes[e]);this.resetIntermediateTensors(),0===i.length&&(i=this._outputs);let o=this.getCompilationKey(r,i),s=this.compiledMap.get(o);null==s&&(s=this.compile(e,i),this.compiledMap.set(o,s));let u={},l={};return(0,K.lub)(()=>{let n=new uT(this.weightMap,u,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{let[n,a]=sk(t),i=[];i[a]=e[t],r[n]=i});let i=this.getFrozenTensorIds(r),o={};for(let e=0;e<s.length;e++){let t=s[e];if(!r[t.name]){let e=uN(t,r,n,this._resourceManager);if(K.D5U.isPromise(e))throw Error(`The execution of the op '${t.op}' returned a promise. Please use model.executeAsync() instead.`);r[t.name]=e,this.checkTensorForDisposal(t.name,t,r,n,i,a,o)}}return null==this.parent&&n.dispose(i),t.map(e=>sw(e,r,n))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,i,o){"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach(e=>{null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)}),t.inputs.forEach(e=>{if("control"!==e.category){let i=n[s_(e.name,r.currentContextId)];null!=i&&i.forEach(e=>{if(e&&!e.kept&&!a.has(e.id)){let n=o[e.id];if(1===n){if(this.keepTensorForDebug){let[n,a]=sx(t.name,r);this.intermediateTensors[n]||(this.intermediateTensors[n]=[]),this.intermediateTensors[n][a]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}})}}))}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach(e=>this.intermediateTensors[e].forEach(e=>e.dispose())),this.disposeTensorsMap())}disposeTensorsMap(){this.tensorsMap&&Object.keys(this.tensorsMap).forEach(e=>{let t=this.tensorsMap[e];t.forEach(e=>{!e||e.kept||e.isDisposed||this.keepIds.has(e.id)||e.dispose()})})}getIntermediateTensors(){return this.tensorsMap}resetIntermediateTensors(){for(let e in this.intermediateTensors)this.intermediateTensors[e].forEach(e=>e.dispose()),delete this.intermediateTensors[e]}async _executeAsync(e,t,n=!1,r={},a={}){n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepTensorForDebug=(0,K.OBj)().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){console.warn(e.message)}this.resetIntermediateTensors();let i=new uT(this.weightMap,r,a,this.functionExecutorMap);this.tensorsMap=await this.executeWithControlFlow(e,i,t,n);let o=t.map(e=>sw(e,this.tensorsMap,i)),s=o.map(e=>e.id),u=Object.keys(e).map(t=>e[t].id);return this.keepIds=new Set([...s,...u,...this.weightIds]),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&i.dispose(this.keepIds),o}async executeFunctionAsync(e,t,n){let r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let a=Object.keys(e),i=a.map(e=>this.graph.nodes[sk(e)[0]]),o=n.map(e=>sk(e)[0]),s=o.map(e=>this.graph.nodes[e]);0===s.length&&(s=this._outputs);let{usedNodes:u,missingInputs:l,dynamicNode:c,syncInputs:h}=uA(e,s,this.weightMap,this._initNodes),f=[...i,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{let[n,r]=sk(t),a=[];a[r]=e[t],p[n]=a});let d={},m=this.getFrozenTensorIds(p),g={};for(;f.length>0;){let e=this.processStack(i,f,t,p,g,m,o,d,u);await Promise.all(e)}null!=c||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=s.filter(e=>!uD(e)&&!sw(e.name,p,t)).map(e=>e.name);if(y.length>0){let e="";throw null!=c&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${h}]`),Error(`Cannot compute the outputs [${y}] from the provided inputs [${a}]. Consider providing the following inputs: [${l}]. ${e}`)}return p}processStack(e,t,n,r,a,i,o,s,u){let l=[];for(;t.length>0;){let e=t.pop();n.currentContext=e.contexts;let c="";if("Enter"===e.node.op&&sv("isConstant",e.node,r,n)&&([c]=sx(e.node.name,n)),null==r[e.node.name]){let h=uN(e.node,r,n,this._resourceManager);c||([c]=sx(e.node.name,n));let f=n.currentContext;K.D5U.isPromise(h)?l.push(h.then(l=>(r[c]=l,n.currentContext=f,this.checkTensorForDisposal(c,e.node,r,n,i,o,s),this.processChildNodes(e.node,t,n,r,a,u),l))):(r[c]=h,this.checkTensorForDisposal(c,e.node,r,n,i,o,s),this.processChildNodes(e.node,t,n,r,a,u))}else this.processChildNodes(e.node,t,n,r,a,u)}return l}processChildNodes(e,t,n,r,a,i){e.children.forEach(e=>{let[o]=sx(e.name,n);!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some(e=>!!sw(e,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!sw(e,r,n))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=sk(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){let e=a.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);K.D5U.assert(t,()=>`The shape of dict['${a.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`)}a.attrParams.dtype&&a.attrParams.dtype.value&&K.D5U.assert(n.dtype===a.attrParams.dtype.value,()=>`The dtype of dict['${a.name}'] provided in model.execute(dict) must be ${a.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){let t={};for(let n in e)if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]){let r=this._signature.inputs[n];t[r.name]=e[n]}else t[n]=e[n];return t}checkInputs(e){let t=Object.keys(e).filter(e=>{let[t]=sk(e);return null==this.graph.nodes[t]});if(t.length>0)throw Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{if(null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[e]){let t=this._signature.outputs[e];return t.name}return e},{})}checkOutputs(e){e.forEach(e=>{let[t]=sk(e);if(!this.graph.nodes[t])throw Error(`The output '${e}' is not found in the graph`)})}}class u${constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}class uF{constructor(e,t={},n=K.io){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new u$}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return K.D5U.isPromise(e)?e.then(e=>this.loadSync(e)):this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){let e=this.artifacts.userDefinedMetadata;null!=e.signature&&(n=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;let r=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new uP(sH.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let t=sH.Instance.transformGraph(e.modelInitializer);this.initializer=new uP(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}async save(e,t){if("string"==typeof e){let t=this.io.getSaveHandlers(e);if(0===t.length)throw Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}predict(e,t){let n=this.execute(e,this.outputNodes);if(this.structuredOutputKeys){let e=n instanceof K.esB?[n]:n,t={};return e.forEach((e,n)=>t[this.structuredOutputKeys[n]]=e),t}return n}normalizeInputs(e){if(!(e instanceof K.esB)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw Error(`Input tensor count mismatch,the graph model has ${this.inputNodes.length} placeholders, while there are ${e.length} input tensors.`);return this.inputNodes.reduce((t,n,r)=>(t[n]=e[r],t),{})}normalizeOutputs(e){return Array.isArray(e=e||this.outputNodes)?e:[e]}execute(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}async function uM(e,t={},n=K.io){var r;if(null==e)throw Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&((r=e).endsWith("/")||(r+="/"),e=`${r}model.json?tfjs-format=file`);let a=new uF(e,t,n);return await a.load(),a}function uB(e){let t;if(null==e)throw Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");if(e instanceof Array){let[n,r]=e;if(!n)throw Error("modelJSON must be the first element of the array");if(!r||!(r instanceof ArrayBuffer))throw Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw Error("Model JSON is missing 'weightsManifest'");let a=K.io.getWeightSpecs(n.weightsManifest),i=K.io.getModelArtifactsForJSONSync(n,a,r);t=K.io.fromMemorySync(i)}else if("load"in e)t=e;else if("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e)t=K.io.fromMemorySync(e);else throw Error("Unknown model format");let n=new uF(t);return n.load(),n}/** @license See the LICENSE file. */let uL="3.21.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var uU=n(6377);function uj(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw Error("Circular references are not supported.");if(n.has(e))return n.get(e);let a=t(e);if(a.recurse&&null!==a.value)throw Error("A deep map function may not return both a value and recurse=true.");if(!a.recurse)return n.set(e,a.value),a.value;if(uV(e)){let a=Array.isArray(e)?[]:{};for(let i in r.add(e),e){let o=e[i],s=uj(o,t,n,r);a[i]=s}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw Error(`Can't recurse into non-iterable type: ${e}`)}function uz(e){return null===e?null:uV(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function uW(e,t){let n=new Map;for(let r of(uj(e,t,n),Array.from(n.keys()))){let e=n.get(r);if(K.D5U.isPromise(e)){let t=await e;n.set(r,t)}}let r=uj(e,t,n);return r}function uV(e){let t=!1;if(K.OBj().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:r}=n(4977);t=e instanceof r}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof K.esB)&&!(e instanceof Promise)&&!t)}function uG(e){return e instanceof K.esB?{value:e.clone(),recurse:!1}:uV(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class uH{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw RangeError("Can't create ring buffer of capacity < 1.");this.data=Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class uq extends uH{constructor(){super(uq.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=2*this.capacity,t=Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}uq.INITIAL_CAPACITY=32;class uX{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)n=e((t=await this.next()).value)}handleErrors(e){return new u3(this,e)}filter(e){return new u1(this,e)}map(e){return new u2(this,e)}mapAsync(e){return new u4(this,e)}serialMapAsync(e){return new u4(this,e).serial()}flatmap(e){return new u5(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new u0(this,e,t)}columnMajorBatch(e,t=!0,n=uz){let r=this.rowMajorBatch(e,t);return r.map(e=>(function(e,t=uz){return function e(t,n,r=new Set){let a=t[0];if(r.has(a))throw Error("Circular references are not supported.");let i=n(t);if(i.recurse&&null!==i.value)throw Error("A deep zip function may not return both a value and recurse=true.");if(!i.recurse)return i.value;if(uV(a)){let i=Array.isArray(a)?[]:{};for(let o in r.add(a),a){let a=t.map(e=>e[o]),s=e(a,n,r);i[o]=s}return r.delete(a),i}throw Error(`Can't recurse into non-iterable type: ${a}`)}(e,t)})(e,n))}concatenate(e,t){return new u8(new uK([this,e]),t)}take(e){return e<0||null==e?this:new uJ(this,e)}skip(e){return e<0||null==e?this:new uQ(this,e)}prefetch(e){return new u9(this,e)}shuffle(e,t){return new le(this,e,t)}serial(){return new uY(this)}}class uK extends uX{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:uj(e,uG),done:!1}}}class uZ extends uX{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class uY extends uX{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class uQ extends uX{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;K.B90(e.value)}return this.upstream.next()}}class uJ extends uX{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class u0 extends uX{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done){if(this.enableSmallLastBatch&&e.length>0)return{value:e,done:!1};return{value:null,done:!0}}e.push(t.value)}return{value:e,done:!1}}}class u1 extends uX{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;K.B90(e.value)}}}class u2 extends uX{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=K.piX.getTensorsInContainer(e.value),n=this.transform(e.value),r=K.piX.getTensorsInContainer(n);for(let e of t)K.piX.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class u3 extends uX{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class u4 extends uX{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=K.piX.getTensorsInContainer(e.value),n=await this.transform(e.value),r=K.piX.getTensorsInContainer(n);for(let e of t)K.piX.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}}class u6 extends uX{constructor(){super(),this.outputQueue=new uq,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class u5 extends u6{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=K.piX.getTensorsInContainer(e.value),n=this.transform(e.value),r=K.piX.getTensorsInContainer(n);for(let e of(this.outputQueue.pushAll(n),t))K.piX.isTensorInList(e,r)||e.dispose();return!0}}class u8 extends uX{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){let e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}(l=g||(g={}))[l.FAIL=0]="FAIL",l[l.SHORTEST=1]="SHORTEST",l[l.LONGEST=2]="LONGEST";class u7 extends uX{constructor(e,t=g.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0,r=await uW(this.iterators,function(e){if(!(e instanceof uX))return{value:null,recurse:!0};{let r=e.next();return{value:r.then(e=>(t++,e.done&&n++,e.value)),recurse:!1}}});if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case g.FAIL:throw Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case g.SHORTEST:return{value:null,done:!0};case g.LONGEST:}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class u9 extends uX{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new uH(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class le extends u9{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=uU.alea(n||K.D5U.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lt{constructor(){this.size=null}batch(e,t=!0){let n=this;return K.D5U.assert(e>0,()=>`batchSize needs to be positive, but it is
      ${e}`),ln(async()=>(await n.iterator()).columnMajorBatch(e,t,li),this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e))}concatenate(e){let t=this;return ln(async()=>(await t.iterator()).concatenate(await e.iterator()),this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null)}filter(e){let t=this;return ln(async()=>(await t.iterator()).filter(t=>K.lub(()=>e(t))),this.size===1/0?1/0:null)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return ln(async()=>(await t.iterator()).map(t=>K.lub(()=>e(t))),this.size)}mapAsync(e){let t=this;return ln(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return ln(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t=this;return ln(async()=>{var n,r;let a=(n=async()=>({value:await t.iterator(),done:!1}),new uZ(n));return r=a.take(e),new u8(r,void 0)},null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null)}skip(e){let t=this;return ln(async()=>(await t.iterator()).skip(e),null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null)}shuffle(e,t,n=!0){if(null==e||e<0){if(null==this.size)throw RangeError("`Dataset.shuffle()` requires bufferSize to be specified.");throw RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`)}let r=this,a=uU.alea(t||K.D5U.now().toString());return ln(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){let t=this;return ln(async()=>(await t.iterator()).take(e),null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null)}async toArray(){if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function ln(e,t=null){return new class extends lt{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function lr(e){return ln(async()=>new uK(e),e.length)}function la(e){let t;if(!uV(e))throw Error("The argument to zip() must be an object or array.");if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return ln(async()=>{let t=await uW(e,e=>{if(e instanceof lt)return{value:e.iterator(),recurse:!1};if(uV(e))return{value:null,recurse:!0};throw Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return function(e,t=g.FAIL){return new u7(e,t)}(t,g.SHORTEST)},t)}function li(e){var t;if(null===e)return null;let n=e[0];if(null==n||null===(t=n)||"object"!=typeof t&&"function"!=typeof t||Array.isArray(n)||"object"==typeof n&&n instanceof K.esB||K.D5U.isTypedArray(n)){let t=function(e){if(0===e.length)throw Error("Can't make a batch of zero elements.");return e[0]instanceof K.esB?K.knu(e):K.XeE(e)}(e);return{value:t,recurse:!1}}return{value:null,recurse:!0}}lt.MAX_BUFFER_SIZE=1e4;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lo extends lt{constructor(e){super(),this.input=e}async iterator(){let e=await this.input.iterator(),t=e.decodeUTF8(),n=t.split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e));return n}}let ls=Symbol("out"),lu=Symbol("field"),ll=Symbol("quote"),lc=Symbol("quoteafterquote"),lh=Symbol("quoteinquote");class lf extends lt{constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new lo(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(K.D5U.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(this.fullColumnNames||e)this.fullColumnNames&&e&&K.D5U.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+").");else throw Error("Column names must be provided if there is no header line.");this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(K.D5U.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(let e of Object.keys(this.columnConfigs)){let t=this.fullColumnNames.indexOf(e);if(-1===t)throw Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(!this.hasHeader)return null;{let e=await this.base.iterator(),t=await e.next();if(t.done)throw Error("No data was found for CSV parsing.");let n=t.value,r=this.parseRow(n,!1);return r}}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){let i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){let s=t[a],u=null;if(""===s){if(o&&void 0!==o.default)u=o.default;else if(o&&(o.required||o.isLabel))throw Error(`Required column ${i} is empty in this line: ${e}`);else u=void 0}else{let e=Number(s);if(isNaN(e))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=e;break;case"int32":u=Math.floor(e);break;case"bool":u=this.getBoolean(s)}else u=e}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){let n=[],r=0,a=e.length,i=ls;for(let t=0;t<a;t++)switch(i){case ls:switch(e.charAt(t)){case'"':r=t+1,i=ll;break;case this.delimiter:if(r=t+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=ls;break;default:i=lu,r=t}break;case lu:e.charAt(t)===this.delimiter&&(n.push(e.substring(r,t)),i=ls,r=t+1);break;case ll:'"'===e.charAt(t)&&(i=lc);break;case lc:switch(e.charAt(t)){case this.delimiter:n.push(e.substring(r,t-1)),i=ls,r=t+1;break;case'"':i=ll;break;default:i=lh}break;case lh:'"'===e.charAt(t)&&(i=ll)}if(i===lc?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lp extends uX{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!(0,K.OBj)().get("IS_BROWSER"))throw Error("microphone API is only supported in browser environment.");let t=new lp(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(e){throw Error(`Error thrown while initializing video stream: ${e.message}`)}if(!this.stream)throw Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){let e,t;if(this.isClosed)return{value:null,done:!0};let n=await this.getAudioData();if(this.includeSpectrogram){let t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){!this.isClosed&&(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(K.D5U.sizeFromShape(t));return n.set(e,n.length-e.length),(0,K.XeE)(n,t)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class ld extends uX{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize()){if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=(0,K.RRF)([0],"int32"),this.webcamConfig.centerCrop){let e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2;this.cropBox=(0,K.odF)([r,n,t+r,n+e],[1,4])}else this.cropBox=(0,K.odF)([0,0,1,1],[1,4])}}summary(){return"webcam"}static async create(e,t={}){if(!(0,K.OBj)().get("IS_BROWSER"))throw Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new ld(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&K.D5U.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message=`Error thrown while initializing video stream: ${e.message}`,e}if(!this.stream)throw Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){let e;if(this.isClosed)return{value:null,done:!0};try{e=K.Xhn.fromPixels(this.webcamVideoElement)}catch(e){throw Error(`Error thrown converting video to pixels: ${JSON.stringify(e)}`)}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(e){throw Error(`Error thrown cropping the video: ${e.message}`)}finally{e.dispose()}}needToResize(){return!!this.webcamConfig.resizeWidth&&!!this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return(0,K.lub)(()=>{let t;let n=(0,K.dt4)((0,K.pju)(e,"float32"),0);t=K.BHj.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let r=t.shape;return(0,K.XLQ)(t,r.slice(1))})}async capture(){return(await this.next()).value}stop(){let e=this.stream.getTracks();e.forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw Error("Can not convert infinite video stream to array.")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lm{}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lg extends uX{split(e){return new ly(this,e)}}class ly extends lg{constructor(e,t){super(),this.upstream=e,this.impl=new lb(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class lb extends u6{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);for(let e of(t[0]=this.carryover+t[0],t.slice(0,-1)))this.outputQueue.push(e);return this.carryover=t[t.length-1],!0}}var lv=n(1876).Buffer;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lw extends uX{decodeUTF8(){return new lx(this)}}class lx extends lg{constructor(e){super(),this.upstream=e,this.impl=new l_(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class l_ extends u6{constructor(e){if(super(),this.upstream=e,(0,K.OBj)().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=n(1601);this.decoder=new e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){let e,t;let n=await this.upstream.next();return!n.done&&(e=n.value,t=(0,K.OBj)().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(lv.from(e.buffer)),this.outputQueue.push(t),!0)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lk extends lw{constructor(e,t={}){super(),this.file=e,this.options=t,K.D5U.assert(e instanceof Uint8Array||!!(0,K.OBj)().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return`FileChunks ${this.file}`}async next(){if(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))return{value:null,done:!0};let e=new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=n=>{let a=r.result;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))return t(TypeError("FileReader returned unknown type."));e(a)},r.onabort=e=>t(Error("Aborted")),r.onerror=e=>t(Error(e.type));let a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n});return{value:await e,done:!1}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function lS(e,t={},n){let r,a;"string"==typeof e?r=e:(r=e.url,a=lI(e));let i=await (n||K.D5U.fetch)(r,a);if(i.ok){let e=new Uint8Array(await i.arrayBuffer());return new lk(e,t)}throw Error(i.statusText)}let lI=e=>{let t={method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity};return t};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function lE(e){return"string"==typeof e&&"file://"===e.slice(0,7)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lN extends lm{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(lE(this.input)&&(0,K.OBj)().get("IS_NODE")){let e=n(7792);this.input=e.readFileSync(this.input.slice(7))}return new lk(this.input,this.options)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class lT extends lm{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return lE(this.url)?new lN(this.url,this.fileOptions).iterator():lS(this.url,this.fileOptions)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function lA(e,t={}){return new lf(new lT(e),t)}function lC(e){let t=new uZ(e);return ln(async()=>t)}function lO(e){return ln(async()=>{var t;let n=await e();return t=()=>n.next(),new uZ(t)})}async function lR(e,t){return ld.create(e,t)}async function lD(e){return lp.create(e)}/** @license See the LICENSE file. */let lP="3.21.0";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l$(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&K.D5U.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lF=K.GDt.whereImpl;class lM extends K.Zuw{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new K.JLz(this,(0,K.SRH)())}nextDataId(){return lM.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,(0,K.OBj)().get("IS_NODE")&&K.Wap.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&K.D5U.isString(n[0])){let a=n.map(e=>K.D5U.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){let t=this.data.get(e);return t.refCount}return 0}incRef(e){let t=this.data.get(e);t.refCount++}decRef(e){if(this.data.has(e)){let t=this.data.get(e);t.refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){let e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return K.Wap.mergeRealAndImagArrays(e,t)}return this.data.get(e).values}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>K.D5U.decodeString(e));return(0,K.f3b)(e.shape,e.dtype,n)}catch(e){throw Error("Failed to decode encoded string bytes into utf-8")}return(0,K.f3b)(e.shape,e.dtype,t)}makeOutput(e,t,n){return(0,K.SRH)().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=K.D5U.now();e();let n=K.D5U.now()-t;return{kernelMs:n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){l$([e],"where");let t=this.readSync(e.dataId);return lF(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lB(e,t,n){return({inputs:r,attrs:a,backend:i})=>{let{x:o}=r;if(l$(o,e),"string"===o.dtype||"string"===n)throw Error("unaryKernelFunc does not support string input/output");let s=i.data.get(o.dataId).values,u=K.D5U.sizeFromShape(o.shape),l=n||o.dtype,c=K.D5U.getArrayFromDType(l,u);for(let e=0;e<u;++e)c[e]=t(s[e],a);return i.makeTensorInfo(o.shape,l,c)}}function lL(e,t,n){return({inputs:r,attrs:a,backend:i})=>{let{x:o}=r;if(l$(o,e),"string"===o.dtype||"string"===n)throw Error("unaryKernelFunc does not support string input/output");let s=i.data.get(o.dataId).values,u=n||o.dtype,l=t(s,u,a);return i.makeTensorInfo(o.shape,u,l)}}lM.nextDataId=0,/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(0,K.jqO)("cpu",()=>new lM,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lU=lB(K.SX0,e=>e>=0?e:Math.exp(e)-1),lj={kernelName:K.SX0,backendName:"cpu",kernelFunc:lU};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lz(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}let lW={kernelName:K.iJz,backendName:"cpu",kernelFunc:lz};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r;l$([a],"leakyRelu");let o=K.D5U.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=K.D5U.getTypedArrayFromDType("float32",o);for(let e=0;e<s.length;e++)u[e]=s[e]<0?i*s[e]:s[e];return n.makeTensorInfo(a.shape,"float32",u)}let lG={kernelName:K.J$2,backendName:"cpu",kernelFunc:lV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lH(e){return(t,n,r,a,i)=>{let o=K.Wap.assertAndGetBroadcastShape(t,n),s=o.length,u=K.D5U.computeStrides(o),l=K.D5U.sizeFromShape(o),c=K.D5U.getTypedArrayFromDType(i,l),h=t.length,f=n.length,p=K.D5U.computeStrides(t),d=K.D5U.computeStrides(n),m=K.Wap.getBroadcastDims(t,o),g=K.Wap.getBroadcastDims(n,o);if(m.length+g.length===0)for(let t=0;t<c.length;++t)c[t]=e(r[t%r.length],a[t%a.length]);else for(let t=0;t<c.length;++t){let n=K.D5U.indexToLoc(t,s,u),i=n.slice(-h);m.forEach(e=>i[e]=0);let o=K.D5U.locToIndex(i,h,p),l=n.slice(-f);g.forEach(e=>l[e]=0);let y=K.D5U.locToIndex(l,f,d);c[t]=e(r[o],a[y])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let lq=lH((e,t)=>e<0?t*e:e);function lX(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t;l$([r,a],"prelu");let i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,[s,u]=lq(r.shape,a.shape,i,o,"float32");return n.makeTensorInfo(u,"float32",s)}let lK={kernelName:K.o0g,backendName:"cpu",kernelFunc:lX},lZ=lB(K.qkr,e=>Math.max(0,e)),lY={kernelName:K.qkr,backendName:"cpu",kernelFunc:lZ},lQ=lB(K.SbG,e=>Math.min(Math.max(0,e),6)),lJ={kernelName:K.SbG,backendName:"cpu",kernelFunc:lQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0(e){return(t,n,r)=>{let a=K.D5U.getTypedArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)a[n]=e(t[n],r);return a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let l1=l0(e=>1/(1+Math.exp(-e))),l2=lB(K.a5O,e=>1/(1+Math.exp(-e))),l3={kernelName:K.a5O,backendName:"cpu",kernelFunc:l2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l4(e,t,n,r,a){if("linear"===n)return lz({inputs:{x:t},backend:e});if("relu"===n)return lZ({inputs:{x:t},backend:e});if("elu"===n)return lU({inputs:{x:t},backend:e});if("relu6"===n)return lQ({inputs:{x:t},backend:e});if("prelu"===n)return lX({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return lV({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return l2({inputs:{x:t},backend:e});throw Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(s.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}let l5={kernelName:K.Zz9,backendName:"cpu",kernelFunc:l6};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8(e,t,n="float32"){if("complex64"===n){let n=l8(e,t,"float32"),r=l8(e,t,"float32");return l6({inputs:{real:n,imag:r},backend:e})}let r=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l7(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}let l9={kernelName:K.xJR,backendName:"cpu",kernelFunc:l7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ce(e,t,n,r){if("int32"===r){let n=Int32Array.from(e);return[t,"int32",n]}if("bool"===r){let r=K.D5U.toTypedArray([0],n),[a,i]=lH((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[i,"bool",a]}throw Error(`Error in Cast: failed to cast ${n} to ${r}`)}function ct(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if("complex64"===i){if("complex64"===a.dtype)return lz({inputs:{x:a},backend:n});let e=l8(n,a.shape,a.dtype),t=ct({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=l6({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){let e=l7({inputs:{input:a},backend:n}),t=ct({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(!K.D5U.hasEncodingLoss(a.dtype,i)){let e=lz({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}let o=n.data.get(a.dataId).values,[s,u,l]=ce(o,a.shape,a.dtype,i);return n.makeTensorInfo(s,u,l)}let cn={kernelName:K.RFZ,backendName:"cpu",kernelFunc:ct};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cr(e,t,n,r){return null==n?({inputs:n,backend:a})=>{let{a:i,b:o}=n;l$([i,o],e);let s=a.data.get(i.dataId).values,u=a.data.get(o.dataId).values,l="string"===i.dtype?K.Wap.fromUint8ToStringArray(s):s,c="string"===i.dtype?K.Wap.fromUint8ToStringArray(u):u,h=r||i.dtype,[f,p]=t(i.shape,o.shape,l,c,h);return a.makeTensorInfo(p,h,f)}:({inputs:e,backend:a})=>{let{a:i,b:o}=e;if("complex64"===i.dtype||"complex64"===o.dtype){let e=ct({inputs:{x:i},backend:a,attrs:{dtype:"complex64"}}),t=a.data.get(e.dataId),r=t.complexTensorInfos.real,s=t.complexTensorInfos.imag,u=a.data.get(r.dataId).values,l=a.data.get(s.dataId).values,c=ct({inputs:{x:o},backend:a,attrs:{dtype:"complex64"}}),h=a.data.get(c.dataId),f=h.complexTensorInfos.real,p=h.complexTensorInfos.imag,d=a.data.get(f.dataId).values,m=a.data.get(p.dataId).values,[g,y,b]=n(i.shape,o.shape,u,l,d,m),v=a.makeTensorInfo(b,"float32",g),w=a.makeTensorInfo(b,"float32",y),x=l6({inputs:{real:v,imag:w},backend:a});return a.disposeIntermediateTensorInfo(e),a.disposeIntermediateTensorInfo(c),a.disposeIntermediateTensorInfo(v),a.disposeIntermediateTensorInfo(w),x}{let e=a.data.get(i.dataId).values,n=a.data.get(o.dataId).values,s=r||i.dtype,[u,l]=t(i.shape,o.shape,e,n,s);return a.makeTensorInfo(l,s,u)}}}function ca(e){return(t,n,r,a,i,o)=>{let s=K.Wap.assertAndGetBroadcastShape(t,n),u=K.D5U.sizeFromShape(s),l=s.length,c=K.D5U.computeStrides(s),h=K.D5U.getTypedArrayFromDType("float32",u),f=K.D5U.getTypedArrayFromDType("float32",u),p=K.Wap.getBroadcastDims(t,s),d=K.Wap.getBroadcastDims(n,s),m=K.Wap.mergeRealAndImagArrays(r,a),g=K.Wap.mergeRealAndImagArrays(i,o),y=t.length,b=K.D5U.computeStrides(t),v=n.length,w=K.D5U.computeStrides(n);if(p.length+d.length===0)for(let t=0;t<h.length;t++){let n=t%m.length,r=t%g.length,a=e(m[2*n],m[2*n+1],g[2*r],g[2*r+1]);h[t]=a.real,f[t]=a.imag}else for(let t=0;t<h.length;t++){let n=K.D5U.indexToLoc(t,l,c),r=n.slice(-y);p.forEach(e=>r[e]=0);let a=K.D5U.locToIndex(r,y,b),i=n.slice(-v);d.forEach(e=>i[e]=0);let o=K.D5U.locToIndex(i,v,w),s=e(m[2*a],m[2*a+1],g[2*o],g[2*o+1]);h[t]=s.real,f[t]=s.imag}return[h,f,s]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ci=lH((e,t)=>e+t),co=ca((e,t,n,r)=>({real:e+n,imag:t+r})),cs=cr(K.mm_,ci,co),cu={kernelName:K.mm_,backendName:"cpu",kernelFunc:cs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cl(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,o=K.D5U.sizeFromShape(a.shape),s=K.D5U.inferFromImplicitShape(i,o),u=K.D5U.sizeFromShape(s);K.D5U.assert(o===u,()=>`The new shape (${s}) has ${u} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(a.dataId);let l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){let e=l.complexTensorInfos.real,t=l.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}let cc={kernelName:K.HZH,backendName:"cpu",kernelFunc:cl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ch(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:o,transposeB:s}=r;l$([a,i],"matMul");let u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],h=s?i.shape[l-1]:i.shape[l-2],f=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[l-2]:i.shape[l-1],d=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=K.D5U.sizeFromShape(d),y=K.D5U.sizeFromShape(m),b=K.Jyw.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),v=b.concat([f,p]);K.D5U.assert(c===h,()=>`Error in matMul: inner shapes (${c}) and (${h}) of Tensors with shapes ${a.shape} and ${i.shape} and transposeA=${o} and transposeB=${s} must match.`);let w=cl({inputs:{x:a},backend:n,attrs:{shape:o?[g,c,f]:[g,f,c]}}),x=cl({inputs:{x:i},backend:n,attrs:{shape:s?[y,p,h]:[y,h,p]}}),_=o?w.shape[1]:w.shape[2],k=o?w.shape[2]:w.shape[1],S=s?x.shape[1]:x.shape[2],I=Math.max(g,y),E=n.data.get(w.dataId).values,N=n.data.get(x.dataId).values,T=K.D5U.computeStrides(w.shape),A=K.D5U.computeStrides(x.shape),[C,O,R]=o?[T[0],1,T[1]]:[T[0],T[1],1],[D,P,$]=s?[1,A[1],A[0]]:[A[1],1,A[0]],F=k*S,M=(0,K.f3b)([I,k,S],w.dtype),B=M.values,L=n.blockSize;for(let e=0;e<I;e++)for(let t=0;t<k;t+=L)for(let n=0;n<S;n+=L)for(let r=0;r<_;r+=L){let a=Math.min(t+L,k),i=Math.min(n+L,S),o=Math.min(r+L,_);for(let s=t;s<a;s++)for(let t=n;t<i;t++){let n=0;for(let a=r;a<o;a++){let r=Math.min(e,g-1)*C,i=Math.min(e,y-1)*$,o=E[r+s*O+a*R],u=N[a*D+t*P+i];n+=o*u}B[e*F+(s*S+t)]+=n}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(v,M.dtype,M.values)}let cf={kernelName:K.XLW,backendName:"cpu",kernelFunc:ch},cp={kernelName:K.usg,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t,n,r;let{inputs:a,backend:i,attrs:o}=e,{a:s,b:u,bias:l,preluActivationWeights:c}=a,{transposeA:h,transposeB:f,activation:p,leakyreluAlpha:d}=o,m=[],g=ch({inputs:{a:s,b:u},attrs:{transposeA:h,transposeB:f},backend:i});for(let e of(t=g,l&&(n=cs({inputs:{a:t,b:l},backend:i}),m.push(t),t=n),p&&(r=l4(i,t,p,c,d),m.push(t),t=r),m))i.disposeIntermediateTensorInfo(e);return t}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cd(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}let cm=e=>{let{x:t}=e.inputs,n=e.backend;l$(t,"abs");let r=new Float32Array(K.D5U.sizeFromShape(t.shape)),a=n.data.get(t.dataId).values;return r=cd(a),n.makeOutput(r,t.shape,t.dtype)},cg={kernelName:K.SYM,backendName:"cpu",kernelFunc:cm},cy=lB(K.VGw,e=>Math.acos(e)),cb={kernelName:K.VGw,backendName:"cpu",kernelFunc:cy},cv=lB(K.SpW,e=>Math.acosh(e)),cw={kernelName:K.SpW,backendName:"cpu",kernelFunc:cv},cx={kernelName:K.Xze,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e;l$(t,"addN");let r=t.map(e=>n.data.get(e.dataId).values),a=(0,K.f3b)(t[0].shape,t[0].dtype),i=a.values;for(let e=0;e<t.length;e++){let t=r[e];for(let e=0;e<i.length;e++)i[e]+=t[e]}return n.makeTensorInfo(a.shape,a.dtype,a.values)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c_(e,t,n,r,a){let i=t.length,o=K.D5U.sizeFromShape(t),s=K.D5U.computeStrides(t),u=K.D5U.computeStrides(a),l=K.D5U.getTypedArrayFromDType(n,K.D5U.sizeFromShape(a));for(let t=0;t<o;++t){let n=K.D5U.indexToLoc(t,i,s),a=Array(n.length);for(let e=0;e<a.length;e++)a[e]=n[r[e]];let o=K.D5U.locToIndex(a,i,u);l[o]=e[t]}return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ck(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:i}=n;l$(a,"transpose");let o=a.shape.length,s=Array(o);for(let e=0;e<s.length;e++)s[e]=a.shape[i[e]];let u=r.data.get(a.dataId).values,l=c_(u,a.shape,a.dtype,i,s),c=r.write(l,s,a.dtype);return{dataId:c,shape:s,dtype:a.dtype}}let cS={kernelName:K.G3Y,backendName:"cpu",kernelFunc:ck},cI={kernelName:K.oT6,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;l$(a,"all");let s=K.D5U.parseAxisParam(i,a.shape),u=s,l=K.Wap.getAxesPermutation(u,a.shape.length),c=a;null!=l&&(c=ck({inputs:{x:a},backend:n,attrs:{perm:l}}),u=K.Wap.getInnerMostAxes(u.length,a.shape.length)),K.Wap.assertAxesAreInnerMostDims("all",u,c.shape.length);let[h,f]=K.Wap.computeOutAndReduceShapes(c.shape,u),p=K.D5U.sizeFromShape(f),d=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(h),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<d.length;++e){let t=e*p,n=m[t];for(let e=0;e<p;++e){let r=m[t+e];n=n&&r}d[e]=n}null!=l&&n.disposeIntermediateTensorInfo(c);let g=n.makeTensorInfo(h,c.dtype,d);if(o){let e=K.Wap.expandShapeToKeepDim(h,s),t=cl({inputs:{x:g},backend:n,attrs:{shape:e}});return n.disposeIntermediateTensorInfo(g),t}return g}},cE={kernelName:K.IKK,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;l$(a,"any");let s=K.D5U.parseAxisParam(i,a.shape),u=s,l=K.Wap.getAxesPermutation(u,a.shape.length),c=a;null!=l&&(c=ck({inputs:{x:a},backend:n,attrs:{perm:l}}),u=K.Wap.getInnerMostAxes(u.length,a.shape.length)),K.Wap.assertAxesAreInnerMostDims("any",u,c.shape.length);let[h,f]=K.Wap.computeOutAndReduceShapes(c.shape,u),p=K.D5U.sizeFromShape(f),d=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(h),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<d.length;++e){let t=e*p,n=m[t];for(let e=0;e<p;++e){let r=m[t+e];n=n||r}d[e]=n}null!=l&&n.disposeIntermediateTensorInfo(c);let g=n.makeTensorInfo(h,c.dtype,d);if(o){let e=K.Wap.expandShapeToKeepDim(h,s),t=cl({inputs:{x:g},backend:n,attrs:{shape:e}});return n.disposeIntermediateTensorInfo(g),t}return g}},cN={kernelName:K.sJF,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;l$(a,"argMax");let o=K.D5U.parseAxisParam(i,a.shape),s=K.Wap.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(l.push(u=ck({inputs:{x:a},backend:n,attrs:{perm:s}})),o=K.Wap.getInnerMostAxes(o.length,u.shape.length)),o=[o[0]],K.Wap.assertAxesAreInnerMostDims("argMax",o,u.shape.length);let[c,h]=K.Wap.computeOutAndReduceShapes(u.shape,o),f=K.D5U.sizeFromShape(c),p=K.D5U.makeZerosTypedArray(f,"int32"),d=K.D5U.sizeFromShape(h),m=n.data.get(u.dataId).values;for(let e=0;e<p.length;++e){let t=e*d,n=m[t],r=0;for(let e=0;e<d;++e){let a=m[t+e];a>n&&(n=a,r=e)}p[e]=r}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",p)}},cT={kernelName:K.aJk,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;l$(a,"argMin");let o=K.D5U.parseAxisParam(i,a.shape),s=K.Wap.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(l.push(u=ck({inputs:{x:a},backend:n,attrs:{perm:s}})),o=K.Wap.getInnerMostAxes(o.length,u.shape.length)),o=[o[0]],K.Wap.assertAxesAreInnerMostDims("argMin",o,u.shape.length);let[c,h]=K.Wap.computeOutAndReduceShapes(u.shape,o),f=K.D5U.sizeFromShape(c),p=K.D5U.makeZerosTypedArray(f,"int32"),d=K.D5U.sizeFromShape(h),m=n.data.get(u.dataId).values;for(let e=0;e<p.length;++e){let t=e*d,n=m[t],r=0;for(let e=0;e<d;++e){let a=m[t+e];a<n&&(n=a,r=e)}p[e]=r}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",p)}},cA=lB(K.M2y,e=>Math.asin(e)),cC={kernelName:K.M2y,backendName:"cpu",kernelFunc:cA},cO=lB(K.qw7,e=>Math.asinh(e)),cR={kernelName:K.qw7,backendName:"cpu",kernelFunc:cO},cD=lB(K.jMg,e=>Math.atan(e)),cP={kernelName:K.jMg,backendName:"cpu",kernelFunc:cD},c$=lH((e,t)=>Math.atan2(e,t)),cF=cr(K.QCc,c$),cM={kernelName:K.QCc,backendName:"cpu",kernelFunc:cF},cB=lB(K.Oyi,e=>Math.atanh(e)),cL={kernelName:K.Oyi,backendName:"cpu",kernelFunc:cB};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cU(e,t,n,r,a,i){let o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,h=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,d="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=(0,K.f3b)(a.outShape,n),g=m.values,y=a.outShape[1]*a.outShape[2]*a.outShape[3],b=a.outShape[2]*a.outShape[3],v=a.outShape[3];for(let t=0;t<a.batchSize;++t){let n=t*y,m=t*r[0];for(let t=0;t<a.inChannels;++t)for(let y=0;y<a.outHeight;++y){let w=y*o-f,x=Math.max(0,w),_=Math.min(a.inHeight,c+w),k=n+y*b;for(let n=0;n<a.outWidth;++n){let o=n*s-p,c=Math.max(0,o),f=Math.min(a.inWidth,h+o),y=d,b=0,w=0;for(let n=x;n<_;n+=u){let a=m+n*r[1];for(let n=c;n<f;n+=l){let o=a+n*r[2],s=e[o+t];"max"===i&&s>y?y=s:"avg"===i&&(b+=s,w++)}if(isNaN(y))break}let S=k+n*v+t;g[S]="avg"===i?b/w:y}}}return m}function cj(e,t,n,r,a=!1,i=!1){let o=(0,K.f3b)(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,d=r.padInfo.left,m=(0,K.f3b)(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){let g=n*s-p,y=g;for(;y<0;)y+=l;let b=Math.min(r.inHeight,h+g);for(let s=0;s<r.outWidth;++s){let h=s*u-d,p=h;for(;p<0;)p+=c;let v=Math.min(r.inWidth,f+h),w=Number.NEGATIVE_INFINITY,x=-1;for(let n=y;n<b;n+=l){let o=n-g;for(let s=p;s<v;s+=c){let u=s-h,l=m.get(e,n,s,t);l>w&&(w=l,x=a?i?((e*r.inHeight+n)*r.inWidth+s)*r.inChannels+t:(n*r.inWidth+s)*r.inChannels+t:o*f+u)}}o.set(x,e,n,s,t)}}return o}function cz(e,t,n,r,a,i){let o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,h=a.dilationWidth,f=a.effectiveFilterDepth,p=a.effectiveFilterHeight,d=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,y=a.padInfo.left,b="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=(0,K.f3b)(a.outShape,n),w=v.values,x=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],_=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],S=a.outShape[4];for(let t=0;t<a.batchSize;++t){let n=t*x,v=t*r[0];for(let t=0;t<a.inChannels;++t)for(let x=0;x<a.outDepth;++x){let I=x*o-m,E=I;for(;E<0;)E+=l;let N=Math.min(a.inDepth,f+I),T=n+x*_;for(let n=0;n<a.outHeight;++n){let o=n*s-g,f=o;for(;f<0;)f+=c;let m=Math.min(a.inHeight,p+o),x=T+n*k;for(let n=0;n<a.outWidth;++n){let o=n*u-y,s=o;for(;s<0;)s+=h;let p=Math.min(a.inWidth,d+o),g=x+n*S,_=b,k=0,I=0;for(let n=E;n<N;n+=l){let a=v+n*r[1];for(let n=f;n<m;n+=c){let o=a+n*r[2];for(let n=s;n<p;n+=h){let a=o+n*r[3],s=e[a+t];if("max"===i&&s>_?_=s:"avg"===i&&(k+=s,I++),isNaN(_))break}if(isNaN(_))break}if(isNaN(_))break}let T=g+t;w[T]="avg"===i?k/I:_}}}}return v}let cW={kernelName:K.JhU,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n;l$(i,"avgPool");let{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=a;K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(s,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let c=K.Wap.computePool2DInfo(i.shape,o,s,1,u,l);if(1===c.filterWidth&&1===c.filterHeight&&K.D5U.arraysEqual(c.inShape,c.outShape))t=lz({inputs:{x:i},backend:r});else{let e=r.data.get(i.dataId).values,n=K.D5U.computeStrides(i.shape),a=cU(e,i.shape,i.dtype,n,c,"avg");t=r.makeTensorInfo(c.outShape,i.dtype,a.values)}return t}},cV={kernelName:K._k9,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r;l$(a,"avgPool3d");let c=K.Wap.computePool3DInfo(a.shape,i,o,1,s,u,l),h=n.data.get(a.dataId).values,f=cz(h,a.shape,a.dtype,K.D5U.computeStrides(a.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}},cG={kernelName:K.IMb,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=r;l$([a,i],"avgPool3DGrad");let c=K.Wap.computePool3DInfo(i.shape,o,s,1,u,l),h=c.strideDepth,f=c.strideHeight,p=c.strideWidth,d=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,b=c.dilationHeight,v=c.dilationWidth,w=c.effectiveFilterDepth,x=c.effectiveFilterHeight,_=c.effectiveFilterWidth,k=w-1-c.padInfo.front,S=_-1-c.padInfo.left,I=x-1-c.padInfo.top,E=(0,K.f3b)(i.shape,"float32"),N=1/(d*m*g),T=n.bufferSync(a);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let a=0;a<c.inWidth;++a){let i=n-k,o=r-I,s=a-S,u=0;for(let n=0;n<w;n+=y){let r=(i+n)/h;if(!(r<0)&&!(r>=c.outDepth)&&Math.floor(r)===r)for(let n=0;n<x;n+=b){let a=(o+n)/f;if(!(a<0)&&!(a>=c.outHeight)&&Math.floor(a)===a)for(let n=0;n<_;n+=v){let i=(s+n)/p;if(i<0||i>=c.outWidth||Math.floor(i)!==i)continue;let o=T.get(e,r,a,i,t);u+=o}}}E.set(u*N,e,n,r,a,t)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}},cH={kernelName:K.ROF,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t;l$([a,i],"avgPoolGrad");let{filterSize:o,strides:s,pad:u}=r,l=K.Wap.computePool2DInfo(i.shape,o,s,1,u),c=l.strideHeight,h=l.strideWidth,f=l.filterHeight,p=l.filterWidth,d=l.dilationHeight,m=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,v=g-1-l.padInfo.top,w=(0,K.f3b)(i.shape,"float32"),x=1/(f*p),_=n.data.get(a.dataId).values,k=(0,K.f3b)(a.shape,"float32",_);for(let e=0;e<l.batchSize;++e)for(let t=0;t<l.inChannels;++t)for(let n=0;n<l.inHeight;++n)for(let r=0;r<l.inWidth;++r){let a=n-v,i=r-b,o=0;for(let n=0;n<g;n+=d){let r=(a+n)/c;if(!(r<0)&&!(r>=l.outHeight)&&Math.floor(r)===r)for(let n=0;n<y;n+=m){let a=(i+n)/h;if(a<0||a>=l.outWidth||Math.floor(a)!==a)continue;let s=k.get(e,r,a,t);o+=s}}w.set(o*x,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},cq={kernelName:K.sHE,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,scale:i,offset:o,mean:s,variance:u}=t;K.D5U.assert(s.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K.D5U.assert(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K.D5U.assert(null==i||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),l$([a,s,u,i,o],"batchNorm");let{varianceEpsilon:l}=r;null==l&&(l=.001);let c=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),d=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=d.length,y=p.length,b=f.length,v=h.length,w=0,x=0,_=0,k=0;for(let e=0;e<c.length;++e)m[e]=d[w++]+(c[e]-h[x++])*p[_++]/Math.sqrt(f[k++]+l),w>=g&&(w=0),x>=v&&(x=0),_>=y&&(_=0),k>=b&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(e,t,n,r,a){let i=K.kuN.isSliceContinous(r,t,n),o=K.D5U.sizeFromShape(n),s=K.D5U.computeStrides(r);if(i){let n=K.kuN.computeFlatOffset(t,s);return"string"===a?e.slice(n,n+o):e.subarray(n,n+o)}let u="string"===a?K.Wap.fromUint8ToStringArray(e):e,l=(0,K.f3b)(r,a,u),c=(0,K.f3b)(n,a);for(let e=0;e<c.size;++e){let n=c.indexToLoc(e),r=n.map((e,n)=>e+t[n]);c.set(l.get(...r),...n)}return"string"===a?K.Wap.fromStringArrayToUint8(c.values):c.values}function cK(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:o}=r;l$(a,"slice");let[s,u]=K.kuN.parseSliceParams(a,i,o);K.kuN.assertParamsValid(a,s,u);let l=n.data.get(a.dataId).values,c=cX(l,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,c)}let cZ={kernelName:K.p2w,backendName:"cpu",kernelFunc:cK},cY={kernelName:K.zws,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:o}=r;l$([a],"batchToSpaceND");let s=i.reduce((e,t)=>e*t),u=K.Wap.getReshaped(a.shape,i,s),l=K.Wap.getPermuted(u.length,i.length),c=K.Wap.getReshapedPermuted(a.shape,i,s),h=K.Wap.getSliceBeginCoords(o,i.length),f=K.Wap.getSliceSize(c,o,i.length),p=cl({inputs:{x:a},backend:n,attrs:{shape:u}}),d=ck({inputs:{x:p},backend:n,attrs:{perm:l}}),m=cl({inputs:{x:d},backend:n,attrs:{shape:c}}),g=cK({inputs:{x:m},backend:n,attrs:{begin:h,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),g}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(e,t,n,r,a){let i=K.D5U.sizeFromShape(r),o=K.D5U.makeZerosTypedArray(a,n);for(let n=0;n<e.length;n++){let r=e[n];if(r<0)throw Error("Input x must be non-negative!");r>=a||(i>0?o[r]+=t[n]:o[r]+=1)}return o}function cJ(e,t,n,r=!1){let a=e.shape[0],i=e.shape[1],o=(0,K.f3b)([a,n],t.dtype);for(let s=0;s<a;s++)for(let a=0;a<i;a++){let i=e.get(s,a);if(i<0)throw Error("Input x must be non-negative!");i>=n||(r?o.set(1,s,i):t.size>0?o.set(o.get(s,i)+t.get(s,a),s,i):o.set(o.get(s,i)+1,s,i))}return o}let c0={kernelName:K.zvY,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o}=r,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=cQ(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}},c1={kernelName:K.eEB,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=K.Wap.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},c2=l0(e=>Math.ceil(e)),c3=lL(K.gJX,c2),c4={kernelName:K.gJX,backendName:"cpu",kernelFunc:c3},c6=lB(K.xnO,(e,t)=>e>t.clipValueMax?t.clipValueMax:e<t.clipValueMin?t.clipValueMin:e),c5={kernelName:K.xnO,backendName:"cpu",kernelFunc:c6},c8=e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(K.D5U.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values;for(let e=0;e<s.length;e++){let t=s[e],n=u[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")},c7={kernelName:K.yj2,backendName:"cpu",kernelFunc:c8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c9(e,t,n,r){let a=K.D5U.getArrayFromDType(n,K.D5U.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{let n=K.D5U.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{let i="string"===n?K.Wap.fromUint8ToStringArray(e.vals):e.vals,o=0;for(let n=0;n<e.shape[0];++n){let s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[s+t]=i[o++]}r+=e.shape[1]})}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function he(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}let ht={kernelName:K.J_u,backendName:"cpu",kernelFunc:he};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hn(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=K.D5U.parseAxisParam(a,t[0].shape)[0],o=t.map(e=>e.shape);K.Wap.assertParamsConsistent(o,i);let s=K.Wap.computeOutShape(t.map(e=>e.shape),i);if(0===K.D5U.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);let u=t.filter(e=>K.D5U.sizeFromShape(e.shape)>0);if(1===u.length)return lz({inputs:{x:u[0]},backend:n});if("complex64"===u[0].dtype){let e=u.map(e=>l7({inputs:{input:e},backend:n})),t=u.map(e=>he({inputs:{input:e},backend:n})),r=hn({inputs:e,backend:n,attrs:{axis:i}}),a=hn({inputs:t,backend:n,attrs:{axis:i}}),o=l6({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),o}let l=u.map(e=>{let t=K.D5U.sizeFromShape(e.shape.slice(i));return cl({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})}),c=l.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));s=K.Wap.computeOutShape(l.map(e=>e.shape),1);let h=1===l[0].shape[0],f=c9(c,s,t[0].dtype,h),p=K.Wap.computeOutShape(u.map(e=>e.shape),i),d=n.makeTensorInfo(p,t[0].dtype,f);return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),d}let hr={kernelName:K.Eh3,backendName:"cpu",kernelFunc:hn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ha(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dataFormat:u,dilations:l,dimRoundingMode:c}=r;l$([a,i],"conv2d");let h=K.Wap.convertConv2DDataFormat(u),f=K.Wap.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!1,h),p=f.filterHeight,d=f.filterWidth,m=f.dilationHeight,g=f.dilationWidth,y=f.padInfo.left,b=f.padInfo.top,v="channelsLast"===f.dataFormat,w=new K.YDk(f.outShape,a.dtype),x=K.D5U.computeStrides(a.shape),_=K.D5U.computeStrides(i.shape),k=x[0],S=v?x[1]:x[2],I=v?x[2]:1,E=v?1:x[1],N=w.strides[0],T=v?w.strides[1]:w.strides[2],A=v?w.strides[2]:1,C=v?1:w.strides[1],O=n.data.get(a.dataId).values,R=n.data.get(i.dataId).values,D=w.values;for(let e=0;e<f.batchSize;++e){let t=e*k,n=e*N;for(let e=0;e<f.outHeight;++e){let r=n+e*T,a=e*f.strideHeight-b;for(let e=0;e<p;++e){let n=a+e*m;if(n<0||n>=f.inHeight)continue;let i=e*_[0],o=t+n*S;for(let e=0;e<f.outWidth;++e){let t=r+e*A,n=e*f.strideWidth-y;for(let e=0;e<d;++e){let r=n+e*g;if(r<0||r>=f.inWidth)continue;let a=i+e*_[1],s=o+r*I,u=a;for(let e=0;e<f.inChannels;++e){let n=O[s+e*E];for(let e=0;e<f.outChannels;++e)D[t+e*C]+=n*R[u+e];u+=f.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,D)}let hi={kernelName:K.mhS,backendName:"cpu",kernelFunc:ha},ho={kernelName:K.wUP,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r;l$([a,i],"conv2dBackpropFilter");let h=K.Wap.convertConv2DDataFormat(u),f=K.Wap.computeConv2DInfo(a.shape,c,o,1,s,l,!1,h),{strideHeight:p,strideWidth:d,filterHeight:m,filterWidth:g}=f,y="channelsLast"===f.dataFormat,b=new K.YDk(f.filterShape,"float32"),v=f.padInfo.left,w=f.padInfo.top,x=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,k=new K.YDk(a.shape,a.dtype,x),S=new K.YDk(i.shape,i.dtype,_);for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((w-e)/p)),n=Math.min(f.outHeight,(f.inHeight+w-e)/p);for(let r=0;r<g;++r){let a=Math.max(0,Math.ceil((v-r)/d)),i=Math.min(f.outWidth,(f.inWidth+v-r)/d);for(let o=0;o<f.inChannels;++o)for(let s=0;s<f.outChannels;++s){let u=0;for(let l=0;l<f.batchSize;++l)for(let c=t;c<n;++c){let t=e+c*p-w;for(let e=a;e<i;++e){let n=r+e*d-v;y?u+=k.get(l,t,n,o)*S.get(l,c,e,s):u+=k.get(l,o,t,n)*S.get(l,s,c,e)}}b.set(u,e,r,o,s)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},hs={kernelName:K.wm,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:o,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r;l$([a,i],"conv2dBackpropInput");let h=K.D5U.computeStrides(i.shape),f=K.D5U.computeStrides(a.shape),p=K.Wap.convertConv2DDataFormat(l),d=K.Wap.computeConv2DInfo(o,i.shape,s,1,u,c,!1,p),m=new K.YDk(d.inShape,"float32"),g=m.values,y=n.data.get(a.dataId).values,b=n.data.get(i.dataId).values,[v,w,x]=h,{batchSize:_,filterHeight:k,filterWidth:S,inChannels:I,inHeight:E,inWidth:N,outChannels:T,outHeight:A,outWidth:C,strideHeight:O,strideWidth:R}=d;p=d.dataFormat;let D=k-1-d.padInfo.top,P=S-1-d.padInfo.left,$="channelsLast"===p,F=m.strides[0],M=$?m.strides[1]:m.strides[2],B=$?m.strides[2]:1,L=$?1:m.strides[1],U=f[0],j=$?f[1]:f[2],z=$?f[2]:1,W=$?1:f[1];for(let e=0;e<_;++e)for(let t=0;t<I;++t)for(let n=0;n<E;++n){let r=n-D,a=Math.max(0,Math.ceil(r/O)),i=Math.min(A,(k+r)/O);for(let o=0;o<N;++o){let s=o-P,u=Math.max(0,Math.ceil(s/R)),l=Math.min(C,(S+s)/R),c=0;for(let n=a;n<i;++n){let a=n*O-r;for(let r=u;r<l;++r){let i=r*R-s,o=U*e+j*n+z*r,u=v*(k-1-a)+w*(S-1-i)+x*t;for(let e=0;e<T;++e){let t=y[o+W*e],n=b[u+e];c+=t*n}}}let h=F*e+M*n+B*o+L*t;g[h]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}},hu={kernelName:K.x12,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:u}=r;l$([a,i],"conv3d");let l=K.Wap.computeConv3DInfo(a.shape,i.shape,o,u,s),{filterDepth:c,filterHeight:h,filterWidth:f,dilationDepth:p,dilationHeight:d,dilationWidth:m,padInfo:g}=l,y=g.front,b=g.left,v=g.top,w=new K.YDk(l.outShape,a.dtype),x=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,k=w.values,S=K.D5U.computeStrides(a.shape),I=K.D5U.computeStrides(i.shape);for(let e=0;e<l.batchSize;++e){let t=e*S[0],n=e*w.strides[0];for(let e=0;e<l.outDepth;++e){let r=n+e*w.strides[1],a=e*l.strideDepth-y;for(let e=0;e<c;++e){let n=a+e*p;if(n<0||n>=l.inDepth)continue;let i=e*I[0],o=t+n*S[1];for(let e=0;e<l.outHeight;++e){let t=r+e*w.strides[2],n=e*l.strideHeight-v;for(let e=0;e<h;++e){let r=n+e*d;if(r<0||r>=l.inHeight)continue;let a=i+e*I[1],s=o+r*S[2];for(let e=0;e<l.outWidth;++e){let n=t+e*l.outChannels,r=e*l.strideWidth-b;for(let e=0;e<f;++e){let t=r+e*m;if(t<0||t>=l.inWidth)continue;let i=a+e*I[2],o=s+t*l.inChannels,u=i;for(let e=0;e<l.inChannels;++e){let t=x[o+e];for(let e=0;e<l.outChannels;++e)k[n+e]+=t*_[u+e];u+=l.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}},hl={kernelName:K.o2y,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,filterShape:u}=r;l$([a,i],"conv3dBackpropFilterV2");let l=K.D5U.computeStrides(a.shape),c=K.D5U.computeStrides(i.shape),h=K.Wap.computeConv3DInfo(a.shape,u,o,1,s),f=h.strideDepth,p=h.strideHeight,d=h.strideWidth,m=h.filterDepth,g=h.filterHeight,y=h.filterWidth,b=new K.YDk(h.filterShape,"float32"),v=b.values,[w,x,_,k]=b.strides,S=n.data.get(i.dataId).values,[I,E,N,T]=c,A=n.data.get(a.dataId).values,[C,O,R,D]=l,P=h.padInfo.front,$=h.padInfo.left,F=h.padInfo.top;for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((P-e)/f)),n=Math.min(h.outDepth,(h.inDepth+P-e)/f),r=e*w;for(let a=0;a<g;++a){let i=Math.max(0,Math.ceil((F-a)/p)),o=Math.min(h.outHeight,(h.inHeight+F-a)/p),s=a*x+r;for(let r=0;r<y;++r){let u=Math.max(0,Math.ceil(($-r)/d)),l=Math.min(h.outWidth,(h.inWidth+$-r)/d),c=r*_+s;for(let s=0;s<h.inChannels;++s){let m=s*k+c;for(let c=0;c<h.outChannels;++c){let g=0;for(let m=0;m<h.batchSize;++m){let h=m*C,y=m*I;for(let m=t;m<n;++m){let t=e+m*f-P,n=t*O+h,b=m*E+y;for(let e=i;e<o;++e){let t=a+e*p-F,i=t*R+n,o=e*N+b;for(let e=u;e<l;++e){let t=r+e*d-$,n=t*D+i,a=e*T+o;g+=A[n+s]*S[a+c]}}}}v[m+c]=g}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}},hc={kernelName:K.ik2,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:o,strides:s,inputShape:u}=r;l$([a],"conv3dBackpropInputV2");let l=K.D5U.computeStrides(a.shape),c=K.D5U.computeStrides(i.shape),h=K.Wap.computeConv3DInfo(u,i.shape,s,1,o),f=new K.YDk(h.inShape,"float32"),p=f.values,[d,m,g,y]=f.strides,b=n.data.get(a.dataId).values,[v,w,x,_]=l,k=n.data.get(i.dataId).values,[S,I,E,N]=c,{batchSize:T,filterDepth:A,filterHeight:C,filterWidth:O,inChannels:R,inDepth:D,inHeight:P,inWidth:$,outChannels:F,outDepth:M,outHeight:B,outWidth:L,strideDepth:U,strideHeight:j,strideWidth:z}=h,W=A-1-h.padInfo.front,V=C-1-h.padInfo.top,G=O-1-h.padInfo.left;for(let e=0;e<T;++e)for(let t=0;t<R;++t)for(let n=0;n<D;++n){let r=n-W,a=Math.max(0,Math.ceil(r/U)),i=Math.min(M,(A+r)/U);for(let o=0;o<P;++o){let s=o-V,u=Math.max(0,Math.ceil(s/j)),l=Math.min(B,(C+s)/j);for(let c=0;c<$;++c){let h=c-G,f=Math.max(0,Math.ceil(h/z)),T=Math.min(L,(O+h)/z),R=0;for(let n=a;n<i;++n){let a=n*U-r;for(let r=u;r<l;++r){let i=r*j-s;for(let o=f;o<T;++o){let s=o*z-h,u=v*e+w*n+x*r+_*o,l=S*(A-1-a)+I*(C-1-i)+E*(O-1-s)+N*t;for(let e=0;e<F;++e){let t=b[u+e],n=k[l+e];R+=t*n}}}}p[d*e+m*n+g*o+y*c+t]=R}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},hh=lB(K.mc4,e=>Math.cos(e)),hf={kernelName:K.mc4,backendName:"cpu",kernelFunc:hh},hp=lB(K.TR1,e=>Math.cosh(e)),hd={kernelName:K.TR1,backendName:"cpu",kernelFunc:hp},hm={kernelName:K.VcC,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:o}=t,{cropSize:s,method:u,extrapolationValue:l}=r,[c,h,f,p]=a.shape,d=i.shape[0],[m,g]=s,y=(0,K.f3b)([d,m,g,p],"float32"),b=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,x=K.D5U.computeStrides(a.shape),_=K.D5U.computeStrides(y.shape);for(let e=0;e<d;e++){let t=4*e,n=b[t],r=b[t+1],a=b[t+2],i=b[t+3],o=v[e];if(o>=c)continue;let s=m>1?(a-n)*(h-1)/(m-1):0,d=g>1?(i-r)*(f-1)/(g-1):0;for(let t=0;t<m;t++){let c=m>1?n*(h-1)+t*s:.5*(n+a)*(h-1);if(c<0||c>h-1){for(let n=0;n<g;n++)for(let r=0;r<p;r++){let a=r+n*_[2]+t*_[1]+e*_[0];y.values[a]=l}continue}if("bilinear"===u){let n=Math.floor(c),a=Math.ceil(c),s=c-n;for(let u=0;u<g;u++){let c=g>1?r*(f-1)+u*d:.5*(r+i)*(f-1);if(c<0||c>f-1){for(let n=0;n<p;n++){let r=n+u*_[2]+t*_[1]+e*_[0];y.values[r]=l}continue}let h=Math.floor(c),m=Math.ceil(c),b=c-h;for(let r=0;r<p;r++){let i=r+h*x[2]+n*x[1]+o*x[0],l=w[i];i=r+m*x[2]+n*x[1]+o*x[0];let c=w[i];i=r+h*x[2]+a*x[1]+o*x[0];let f=w[i];i=r+m*x[2]+a*x[1]+o*x[0];let p=w[i],d=l+(c-l)*b,g=f+(p-f)*b;i=r+u*_[2]+t*_[1]+e*_[0],y.values[i]=d+(g-d)*s}}}else for(let n=0;n<g;++n){let a=g>1?r*(f-1)+n*d:.5*(r+i)*(f-1);if(a<0||a>f-1){for(let r=0;r<p;r++){let a=r+n*_[2]+t*_[1]+e*_[0];y.values[a]=l}continue}let s=Math.round(a),u=Math.round(c);for(let r=0;r<p;r++){let a=r+s*x[2]+u*x[1]+o*x[0],i=r+n*_[2]+t*_[1]+e*_[0];y.values[i]=w[a]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}},hg={kernelName:K.Byc,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;l$(a,"cumprod");let u=K.Wap.getAxesPermutation([i],a.shape.length),l=a;null!=u&&(l=ck({inputs:{x:a},backend:n,attrs:{perm:u}}));let c=K.Wap.getInnerMostAxes(1,a.shape.length)[0];if(c!==l.shape.length-1)throw Error(`backend.cumprod in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);let h=(0,K.x8V)(l.dtype,"int32"),f=K.D5U.makeOnesTypedArray(K.D5U.sizeFromShape(l.shape),h),p=n.data.get(l.dataId).values,d=l.shape[l.shape.length-1],m=s?(e,t)=>e+d-t-1:(e,t)=>e+t;for(let e=0;e<p.length;e+=d)for(let t=0;t<d;t++){let n=m(e,t);if(0===t)f[n]=o?1:p[n];else{let r=m(e,t-1);f[n]=o?p[r]*f[r]:p[n]*f[r]}}let g=n.makeTensorInfo(l.shape,h,f);if(null!=u){let e=K.Wap.getUndoAxesPermutation(u),t=ck({inputs:{x:g},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),t}return g}},hy={kernelName:K.iHb,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;l$(a,"cumsum");let u=K.Wap.getAxesPermutation([i],a.shape.length),l=a;null!=u&&(l=ck({inputs:{x:a},backend:n,attrs:{perm:u}}));let c=K.Wap.getInnerMostAxes(1,a.shape.length)[0];if(c!==l.shape.length-1)throw Error(`backend.cumsum in CPU expects an inner-most axis=${l.shape.length-1} but got axis=${c}`);let h=(0,K.x8V)(l.dtype,"int32"),f=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(l.shape),h),p=n.data.get(l.dataId).values,d=l.shape[l.shape.length-1],m=s?(e,t)=>e+d-t-1:(e,t)=>e+t;for(let e=0;e<p.length;e+=d)for(let t=0;t<d;t++){let n=m(e,t);if(0===t)f[n]=o?0:p[n];else{let r=m(e,t-1);f[n]=o?p[r]+f[r]:p[n]+f[r]}}let g=n.makeTensorInfo(l.shape,h,f);if(null!=u){let e=K.Wap.getUndoAxesPermutation(u),t=ck({inputs:{x:g},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(l),t}return g}},hb={kernelName:K.QRR,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o,binaryOutput:s}=r;if(1===a.shape.length){let e=n.data.get(a.dataId).values,t=n.data.get(i.dataId).values,r=cQ(e,t,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,r)}if(2===a.shape.length){let e=n.bufferSync(a),t=n.bufferSync(i),r=cJ(e,t,o,s);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}},hv={kernelName:K.T0n,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:o}=r;K.D5U.assert("NHWC"===o,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);let s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],h=u*i,f=l*i,p=c/(i*i),d=n.data.get(a.dataId).values,m=new Float32Array(s*h*f*p),g=0;for(let e=0;e<s;++e)for(let t=0;t<h;++t){let n=Math.floor(t/i),r=t%i;for(let t=0;t<f;++t){let a=Math.floor(t/i),o=t%i,s=(r*i+o)*p;for(let t=0;t<p;++t){let r=t+s,i=r+c*(a+l*(n+u*e));m[g++]=d[i]}}}return n.makeTensorInfo([s,h,f,p],a.dtype,m)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hw(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:u,dimRoundingMode:l}=r;l$([a,i],"depthwiseConv2DNative");let c=K.D5U.computeStrides(a.shape),h=K.D5U.computeStrides(i.shape),f=u;null==f&&(f=[1,1]),K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(o,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${f}'`);let p=K.Wap.computeConv2DInfo(a.shape,i.shape,o,f,s,l,!0),{filterHeight:d,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=p,v=b.left,w=b.top,x=p.outChannels/p.inChannels,_=new K.YDk(p.outShape,a.dtype),k=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,I=_.values;for(let e=0;e<p.batchSize;++e){let t=e*c[0],n=e*_.strides[0];for(let e=0;e<p.outHeight;++e){let r=n+e*_.strides[1],a=e*p.strideHeight-w;for(let e=0;e<d;++e){let n=a+e*g;if(n<0||n>=p.inHeight)continue;let i=e*h[0],o=t+n*c[1];for(let e=0;e<p.outWidth;++e){let t=r+e*_.strides[2],n=e*p.strideWidth-v;for(let e=0;e<m;++e){let r=n+e*y;if(r<0||r>=p.inWidth)continue;let a=i+e*h[1],s=o+r*p.inChannels,u=t,l=a;for(let e=0;e<p.inChannels;++e){let t=k[s+e];for(let e=0;e<x;++e)I[u+e]+=t*S[l+e];u+=x,l+=x}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}let hx={kernelName:K.cie,backendName:"cpu",kernelFunc:hw},h_={kernelName:K.sL$,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r;l$([a,i],"depthwiseConv2dNativeBackpropFilter");let h=K.Wap.computeConv2DInfo(a.shape,c,o,s,u,l,!0),{strideHeight:f,strideWidth:p,filterHeight:d,filterWidth:m}=h,g=new K.YDk(h.filterShape,"float32"),y=h.padInfo.left,b=h.padInfo.top,v=h.outChannels/h.inChannels,w=n.data.get(a.dataId).values,x=new K.YDk(a.shape,a.dtype,w),_=n.data.get(i.dataId).values,k=new K.YDk(i.shape,i.dtype,_);for(let e=0;e<d;++e){let t=Math.max(0,Math.ceil((b-e)/f)),n=Math.min(h.outHeight,(h.inHeight+b-e)/f);for(let r=0;r<m;++r){let a=Math.max(0,Math.ceil((y-r)/p)),i=Math.min(h.outWidth,(h.inWidth+y-r)/p);for(let o=0;o<h.outChannels;++o){let s=Math.trunc(o/v),u=o%v,l=0;for(let u=0;u<h.batchSize;++u)for(let c=t;c<n;++c){let t=e+c*f-b;for(let e=a;e<i;++e){let n=r+e*p-y;l+=x.get(u,t,n,s)*k.get(u,c,e,o)}}g.set(l,e,r,s,u)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}},hk={kernelName:K.y7R,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:o,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r;l$([a,i],"depthwiseConv2DNativeBackpropInput");let h=K.D5U.computeStrides(a.shape),f=K.D5U.computeStrides(i.shape),p=K.Wap.computeConv2DInfo(c,i.shape,o,s,u,l,!0),d=new K.YDk(p.inShape,"float32"),m=d.values,[g,y,b]=d.strides,v=n.data.get(a.dataId).values,[w,x,_]=h,k=n.data.get(i.dataId).values,[S,I,E]=f,{batchSize:N,filterHeight:T,filterWidth:A,inChannels:C,inHeight:O,inWidth:R,outChannels:D,outHeight:P,outWidth:$,strideHeight:F,strideWidth:M}=p,B=T-1-p.padInfo.top,L=A-1-p.padInfo.left,U=D/C;for(let e=0;e<N;++e)for(let t=0;t<C;++t)for(let n=0;n<O;++n){let r=n-B,a=Math.max(0,Math.ceil(r/F)),i=Math.min(P,(T+r)/F);for(let o=0;o<R;++o){let s=o-L,u=Math.max(0,Math.ceil(s/M)),l=Math.min($,(A+s)/M),c=0;for(let n=a;n<i;++n){let a=n*F-r;for(let r=u;r<l;++r){let i=r*M-s,o=w*e+x*n+_*r,u=S*(T-1-a)+I*(A-1-i)+E*t;for(let e=0;e<U;++e){let n=t*U+e,r=v[o+n],a=k[u+e];c+=r*a}}}m[g*e+y*n+b*o+t]=c}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},hS={kernelName:K.$w,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=K.D5U.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=(0,K.f3b)([a,a],r.dtype),s=o.values;for(let e=0;e<i.length;e++)s[e*a+e]=i[e];let u=[...r.shape,...r.shape];return n.makeTensorInfo(u,o.dtype,o.values)}},hI={kernelName:K.p4S,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a}=e,{strides:i,pad:o,dilations:s}=n,u=t.data.get(r.dataId).values,l=r.shape.length,c=t.data.get(a.dataId).values,h=a.shape.length,{batchSize:f,inHeight:p,inWidth:d,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:w,filterHeight:x,filterWidth:_,dilationHeight:k,dilationWidth:S,outShape:I}=K.Wap.computeDilation2DInfo(r.shape,a.shape,i,o,"NHWC",s),E=K.D5U.sizeFromShape(I),N=I.length,T=K.D5U.getArrayFromDType(r.dtype,E);for(let e=0;e<f;++e)for(let t=0;t<g;++t){let n=t*v-b.top;for(let i=0;i<y;++i){let o=i*w-b.left;for(let s=0;s<m;++s){let f=Number.MIN_SAFE_INTEGER;for(let t=0;t<x;++t){let i=n+t*k;if(i>=0&&i<p)for(let n=0;n<_;++n){let p=o+n*S;if(p>=0&&p<d){let o=K.D5U.locToIndex([e,i,p,s],l,K.D5U.computeStrides(r.shape)),d=K.D5U.locToIndex([t,n,s],h,K.D5U.computeStrides(a.shape)),m=u[o]+c[d];m>f&&(f=m)}}}let m=K.D5U.locToIndex([e,t,i,s],N,K.D5U.computeStrides(I));T[m]=f}}}let A=t.write(K.D5U.toTypedArray(T,r.dtype),I,r.dtype);return{dataId:A,shape:I,dtype:r.dtype}}},hE={kernelName:K.Vn9,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:i}=e,{strides:o,pad:s,dilations:u}=n,l=K.D5U.toNestedArray(r.shape,t.data.get(r.dataId).values),c=K.D5U.toNestedArray(a.shape,t.data.get(a.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:d,outHeight:m,outWidth:g,padInfo:y,strideHeight:b,strideWidth:v,filterHeight:w,filterWidth:x,dilationHeight:_,dilationWidth:k,outShape:S}=K.Wap.computeDilation2DInfo(r.shape,a.shape,o,s,"NHWC",u);K.D5U.assert(i.rank===S.length,()=>`Error in ${K.Vn9}, dy must have the same rank as output ${S.length}, but got ${i.rank}`);let I=K.D5U.toNestedArray(S,t.data.get(i.dataId).values),E=K.D5U.makeZerosNestedTypedArray(a.shape,a.dtype);for(let e=0;e<h;++e)for(let t=0;t<m;++t){let n=t*b-y.top;for(let r=0;r<g;++r){let a=r*v-y.left;for(let i=0;i<d;++i){let o=Number.MIN_SAFE_INTEGER,s=0,u=0;for(let t=0;t<w;++t){let r=n+t*_;if(r>=0&&r<f)for(let n=0;n<x;++n){let h=a+n*k;if(h>=0&&h<p){let a=l[e][r][h][i]+c[t][n][i];a>o&&(o=a,s=t,u=n)}}}E[s][u][i]+=I[e][t][r][i]}}}let N=t.write(K.D5U.toTypedArray(E,r.dtype),a.shape,a.dtype);return{dataId:N,shape:a.shape,dtype:a.dtype}}},hN={kernelName:K.ekb,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:a,dy:i}=e,{strides:o,pad:s,dilations:u}=n,l=K.D5U.toNestedArray(r.shape,t.data.get(r.dataId).values),c=K.D5U.toNestedArray(a.shape,t.data.get(a.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:d,outHeight:m,outWidth:g,padInfo:y,strideHeight:b,strideWidth:v,filterHeight:w,filterWidth:x,dilationHeight:_,dilationWidth:k,outShape:S}=K.Wap.computeDilation2DInfo(r.shape,a.shape,o,s,"NHWC",u);K.D5U.assert(i.rank===S.length,()=>`Error in ${K.ekb}, dy must have the same rank as output ${S.length}, but got ${i.rank}`);let I=K.D5U.toNestedArray(S,t.data.get(i.dataId).values),E=K.D5U.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<h;++e)for(let t=0;t<m;++t){let n=t*b-y.top;for(let r=0;r<g;++r){let a=r*v-y.left;for(let i=0;i<d;++i){let o=Number.MIN_SAFE_INTEGER,s=n<0?0:n,u=a<0?0:a;for(let t=0;t<w;++t){let r=n+t*_;if(r>=0&&r<f)for(let n=0;n<x;++n){let h=a+n*k;if(h>=0&&h<p){let a=l[e][r][h][i]+c[t][n][i];a>o&&(o=a,s=r,u=h)}}}E[e][s][u][i]+=I[e][t][r][i]}}}let N=t.write(K.D5U.toTypedArray(E,r.dtype),r.shape,r.dtype);return{dataId:N,shape:r.shape,dtype:r.dtype}}},hT=lH((e,t)=>e*t),hA=ca((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),hC=cr(K.wYn,hT,hA),hO={kernelName:K.wYn,backendName:"cpu",kernelFunc:hC};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hR(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:o,keepDims:s}=a;l$(i,"sum"),t="bool"===i.dtype?ct({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):lz({inputs:{x:i},backend:r});let u=t.shape.length,l=K.D5U.parseAxisParam(o,t.shape),c=K.Wap.getAxesPermutation(l,u),h=l,f=t;null!=c&&(f=ck({inputs:{x:t},backend:r,attrs:{perm:c}}),h=K.Wap.getInnerMostAxes(h.length,u)),K.Wap.assertAxesAreInnerMostDims("sum",h,f.shape.length);let[p,d]=K.Wap.computeOutAndReduceShapes(f.shape,h),m=K.Wap.upcastType(f.dtype,"int32"),g=l8(r,p,m),y=K.D5U.sizeFromShape(d),b=r.data.get(g.dataId).values,v=r.data.get(f.dataId).values;for(let e=0;e<b.length;++e){let t=e*y,n=0;for(let e=0;e<y;++e)n+=v[t+e];b[e]=n}if(s){let e=K.Wap.expandShapeToKeepDim(g.shape,l),t=g;g=cl({inputs:{x:g},backend:r,attrs:{shape:e}}),r.disposeIntermediateTensorInfo(t)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(f),g}let hD={kernelName:K.GBy,backendName:"cpu",kernelFunc:hR},hP={kernelName:K.$g6,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,{allDims:i,summedDims:o,idDims:s}=K.Wap.decodeEinsumEquation(a,t.length);K.Wap.checkEinsumDimSizes(i.length,s,t);let{path:u,steps:l}=K.Wap.getEinsumComputePath(o,s),c=l.length,h=null,f=i.length,p=[];for(let e=0;e<c;++e){for(let r of l[e]){let e;let{permutationIndices:a,expandDims:i}=K.Wap.getEinsumPermutation(f,s[r]);K.Wap.isIdentityPermutation(a)?e=t[r]:(e=ck({inputs:{x:t[r]},backend:n,attrs:{perm:a}}),p.push(e));let o=e.shape.slice();for(let e=0;e<i.length;++e)o.splice(i[e],0,1);K.D5U.arraysEqual(e.shape,o)||(e=cl({inputs:{x:e},backend:n,attrs:{shape:o}}),p.push(e)),null===h?h=e:(h=hC({inputs:{a:e,b:h},backend:n}),p.push(h))}e<c-1&&(u[e]>=0&&(h=hR({inputs:{x:h},backend:n,attrs:{axis:u[e]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(let e of p)e!==h&&n.disposeIntermediateTensorInfo(e);return h}},h$={kernelName:K.HEU,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t;l$([r,a],"eluGrad");let i=new Float32Array(K.D5U.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values;for(let e=0;e<o.length;++e){let t=o[e];t>=1?i[e]=s[e]:i[e]=s[e]*(t+1)}return n.makeTensorInfo(a.shape,"float32",i)}},hF=lH((e,t)=>e===t?1:0),hM=cr(K.hdR,hF,null,"bool"),hB={kernelName:K.hdR,backendName:"cpu",kernelFunc:hM},hL=K.Wap.ERF_P,hU=K.Wap.ERF_A1,hj=K.Wap.ERF_A2,hz=K.Wap.ERF_A3,hW=K.Wap.ERF_A4,hV=K.Wap.ERF_A5,hG=lB(K.Omj,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+hL*n);return t*(1-((((hV*r+hW)*r+hz)*r+hj)*r+hU)*r*Math.exp(-n*n))}),hH={kernelName:K.Omj,backendName:"cpu",kernelFunc:hG},hq=l0(e=>Math.exp(e)),hX=lL(K.NEP,hq,"float32"),hK={kernelName:K.NEP,backendName:"cpu",kernelFunc:hX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZ(e){let{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:i}=r,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(K.D5U.assert(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+i+1),s.splice(u,0,1),cl({inputs:{x:a},backend:n,attrs:{shape:s}})}let hY={kernelName:K.YFo,backendName:"cpu",kernelFunc:hZ},hQ=l0(e=>Math.expm1(e)),hJ=lL(K.Y0y,hQ),h0={kernelName:K.Y0y,backendName:"cpu",kernelFunc:hJ},h1=lH((e,t)=>e/t),h2=cr(K.oHH,h1),h3={kernelName:K.oHH,backendName:"cpu",kernelFunc:h2},h4=lH((e,t)=>e-t),h6=ca((e,t,n,r)=>({real:e-n,imag:t-r})),h5=cr(K.Tr8,h4,h6),h8={kernelName:K.Tr8,backendName:"cpu",kernelFunc:h5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h7(e,t,n){let r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=K.D5U.sizeFromShape(l),h=K.D5U.getTypedArrayFromDType("float32",c),f=K.D5U.getTypedArrayFromDType("float32",c);for(let e=0;e<a;e++){let r=cK({inputs:{x:s},backend:n,attrs:{begin:[e,0],size:[1,i]}}),a=cK({inputs:{x:u},backend:n,attrs:{begin:[e,0],size:[1,i]}}),o=l6({inputs:{real:r,imag:a},backend:n}),{real:l,imag:c}=function(e,t,n){let r=K.D5U.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if((r&r-1)==0){let a=function e(t,n,r,a,i){if(1===r)return{real:t,imag:n};let o=K.Wap.mergeRealAndImagArrays(t,n),s=r/2,u=K.Wap.complexWithEvenIndex(o),l=u.real,c=u.imag,h=[l.length],f=i.makeTensorInfo(h,"float32",l),p=i.makeTensorInfo(h,"float32",c),d=l6({inputs:{real:f,imag:p},backend:i}),m=K.Wap.complexWithOddIndex(o),g=m.real,y=m.imag,b=[g.length],v=i.makeTensorInfo(b,"float32",g),w=i.makeTensorInfo(b,"float32",y),x=l6({inputs:{real:v,imag:w},backend:i}),_=e(l,c,s,a,i),k=_.real,S=_.imag,I=[k.length],E=i.makeTensorInfo(I,"float32",k),N=i.makeTensorInfo(I,"float32",S),T=l6({inputs:{real:E,imag:N},backend:i}),A=e(g,y,s,a,i),C=A.real,O=A.imag,R=[C.length],D=i.makeTensorInfo(R,"float32",C),P=i.makeTensorInfo(R,"float32",O),$=l6({inputs:{real:D,imag:P},backend:i}),F=K.Wap.exponents(r,a),M=[F.real.length],B=i.makeTensorInfo(M,"float32",F.real),L=i.makeTensorInfo(M,"float32",F.imag),U=l6({inputs:{real:B,imag:L},backend:i}),j=hC({inputs:{a:U,b:$},backend:i}),z=cs({inputs:{a:T,b:j},backend:i}),W=h5({inputs:{a:T,b:j},backend:i}),V=l7({inputs:{input:z},backend:i}),G=l7({inputs:{input:W},backend:i}),H=he({inputs:{input:z},backend:i}),q=he({inputs:{input:W},backend:i}),X=hn({inputs:[V,G],backend:i,attrs:{axis:0}}),Z=hn({inputs:[H,q],backend:i,attrs:{axis:0}}),Y=i.data.get(X.dataId).values,Q=i.data.get(Z.dataId).values;return i.disposeIntermediateTensorInfo(f),i.disposeIntermediateTensorInfo(p),i.disposeIntermediateTensorInfo(d),i.disposeIntermediateTensorInfo(v),i.disposeIntermediateTensorInfo(w),i.disposeIntermediateTensorInfo(x),i.disposeIntermediateTensorInfo(E),i.disposeIntermediateTensorInfo(N),i.disposeIntermediateTensorInfo(T),i.disposeIntermediateTensorInfo(D),i.disposeIntermediateTensorInfo(P),i.disposeIntermediateTensorInfo($),i.disposeIntermediateTensorInfo(B),i.disposeIntermediateTensorInfo(L),i.disposeIntermediateTensorInfo(U),i.disposeIntermediateTensorInfo(j),i.disposeIntermediateTensorInfo(z),i.disposeIntermediateTensorInfo(W),i.disposeIntermediateTensorInfo(V),i.disposeIntermediateTensorInfo(H),i.disposeIntermediateTensorInfo(G),i.disposeIntermediateTensorInfo(q),i.disposeIntermediateTensorInfo(X),i.disposeIntermediateTensorInfo(Z),{real:Y,imag:Q}}(i,o,r,t,n),s=[e.shape[0],e.shape[1]];if(t){let e=n.makeTensorInfo(s,"float32",a.real),t=n.makeTensorInfo(s,"float32",a.imag),i=n.makeTensorInfo([],"float32",K.D5U.createScalarValue(r,"float32")),o=lz({inputs:{x:i},backend:n}),u=h3.kernelFunc({inputs:{a:e,b:i},backend:n}),l=h3.kernelFunc({inputs:{a:t,b:o},backend:n}),c=n.data.get(u.dataId).values,h=n.data.get(l.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),{real:c,imag:h}}return a}{let e=K.Wap.mergeRealAndImagArrays(i,o),n=function(e,t,n){let r=new Float32Array(2*t);for(let a=0;a<t;a++){let i=0,o=0;for(let r=0;r<t;r++){let s=K.Wap.exponent(a*r,t,n),u=K.Wap.getComplexWithIndex(e,r);i+=u.real*s.real-u.imag*s.imag,o+=u.real*s.imag+u.imag*s.real}n&&(i/=t,o/=t),K.Wap.assignToTypedArray(r,i,o,a)}return r}(e,r,t);return K.Wap.splitRealAndImagArrays(n)}}(o,t,n),p=K.Wap.mergeRealAndImagArrays(l,c);for(let t=0;t<i;t++){let n=K.Wap.getComplexWithIndex(p,t);h[e*i+t]=n.real,f[e*i+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(o)}let p=n.makeTensorInfo(l,"float32",h),d=n.makeTensorInfo(l,"float32",f),m=l6({inputs:{real:p,imag:d},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),m}let h9={kernelName:K.vwp,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=K.D5U.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=cl({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=h7(o,!1,n),u=cl({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fe(e){let{backend:t,attrs:n}=e,{shape:r,value:a,dtype:i}=n,o=i||K.D5U.inferDtype(a),s=K.D5U.getArrayFromDType(o,K.D5U.sizeFromShape(r));return function(e,t,n){e.fill(t)}(s,a,0),t.makeTensorInfo(r,o,s)}let ft={kernelName:K.deh,backendName:"cpu",kernelFunc:fe},fn={kernelName:K.Uyb,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,a=K.D5U.getTypedArrayFromDType(r.dtype,K.D5U.sizeFromShape(r.shape)),[i,o,s,u]=r.shape,l=n.data.get(r.dataId).values;for(let e=0;e<i;e++){let t=e*s*o*u;for(let e=0;e<o;e++){let n=e*(s*u);for(let e=0;e<s;e++){let r=e*u;for(let i=0;i<u;i++){let o=Math.round(s-e-1),c=t+n+r+i,h=l[c];if(o>=0&&o<s){let e=o*u,r=t+n+e+i;h=l[r]}a[c]=h}}}}let c=n.write(a,r.shape,r.dtype);return{dataId:c,shape:r.shape,dtype:r.dtype}}},fr=l0(e=>Math.floor(e)),fa=lL(K.OR,fr),fi={kernelName:K.OR,backendName:"cpu",kernelFunc:fa},fo=lH((e,t)=>Math.floor(e/t)),fs=cr(K.jeX,fo,null,"int32"),fu={kernelName:K.jeX,backendName:"cpu",kernelFunc:fs},fl={kernelName:K._V0,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:o,preluActivationWeights:s}=t,{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:f,activation:p,leakyreluAlpha:d}=r,m=ha({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:f}});if(o){let e=m;if("NCHW"===c&&1===o.shape.length&&1!==o.shape[0]){let e=cl({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=cs({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=cs({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(e)}if(p){let e=m;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){let e=cl({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=l4(n,m,p,e,d),n.disposeIntermediateTensorInfo(e)}else m=l4(n,m,p,s,d);n.disposeIntermediateTensorInfo(e)}return m}},fc={kernelName:K.luS,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:o,preluActivationWeights:s}=t,{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:f,activation:p,leakyreluAlpha:d}=r,m=hw({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:h,dimRoundingMode:f}});if(o){let e=m;m=cs({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(e)}if(p){let e=m;m=l4(n,m,p,s,d),n.disposeIntermediateTensorInfo(e)}return m}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(e,t,n,r,a,i,o,s,u){let l=(0,K.f3b)([r,i],n);for(let n=0;n<r;n++){let r=[],c=0;for(let t=0;t<a;t++){let i=e[n*a+t];c+=i*o[t],r.push(i)}if(c<0||c>=u/i)throw Error(`Invalid indices: ${r} does not index into ${s}`);for(let e=0;e<i;e++)l.values[n*i+e]=t.get(...t.indexToLoc(c*i+e))}return l}let ff={kernelName:K.q1x,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=K.D5U.sizeFromShape(r.shape),o=a.shape,s=o[o.length-1],[u,l,c,h]=K.Wap.prepareAndValidate(r,a);if(0===l)return n.makeTensorInfo(u,r.dtype,[]);let f=n.data.get(a.dataId).values,p=n.bufferSync(r),d=fh(f,p,r.dtype,l,s,c,h,r.shape,i);return n.makeTensorInfo(u,r.dtype,d.values)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fp(e,t,n){let r=(0,K.f3b)(n,e.dtype);for(let n=0;n<r.size;++n){let a=r.indexToLoc(n),i=a.slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];let l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[n]=e.values[l])}return r}let fd={kernelName:K.qi_,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:o,batchDims:s}=r;l$([a,i],"gatherV2");let u=K.D5U.parseAxisParam(o,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u];for(let e=0;e<l.length;++e){let t=l[e];K.D5U.assert(t<=c-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`)}let h=s;null==s&&(h=0);let f=K.D5U.sizeFromShape(i.shape),p=K.Wap.segment_util.collectGatherOpShapeInfo(a,i,u,h),d=cl({inputs:{x:a},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=cl({inputs:{x:i},backend:n,attrs:{shape:[p.batchSize,f/p.batchSize]}}),g=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize],y=n.bufferSync(m),b=n.bufferSync(d),v=fp(b,y,g);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,v.dtype,v.values)}},fm=lH((e,t)=>e>t?1:0),fg=cr(K.iZT,fm,null,"bool"),fy={kernelName:K.iZT,backendName:"cpu",kernelFunc:fg},fb=lH((e,t)=>e>=t?1:0),fv=cr(K.Acj,fb,null,"bool"),fw={kernelName:K.Acj,backendName:"cpu",kernelFunc:fv},fx={kernelName:K.Qg5,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=K.D5U.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=cl({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=h7(o,!0,n),u=cl({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},f_=lB(K.avt,e=>Number.isFinite(e)?1:0,"bool"),fk={kernelName:K.avt,backendName:"cpu",kernelFunc:f_},fS=lB(K.iWB,e=>Math.abs(e)===1/0?1:0,"bool"),fI={kernelName:K.iWB,backendName:"cpu",kernelFunc:fS},fE=lB(K.r7n,e=>Number.isNaN(e)?1:0,"bool"),fN={kernelName:K.r7n,backendName:"cpu",kernelFunc:fE},fT=lH((e,t)=>e<t?1:0),fA=cr(K.vtC,fT,null,"bool"),fC={kernelName:K.vtC,backendName:"cpu",kernelFunc:fA},fO=lH((e,t)=>e<=t?1:0),fR=cr(K.CAk,fO,null,"bool"),fD={kernelName:K.CAk,backendName:"cpu",kernelFunc:fR};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fP(e,t,n){let r=(t-e)/(n-1),a=K.D5U.makeZerosTypedArray(n,"float32");a[0]=e;for(let e=1;e<a.length;e++)a[e]=a[e-1]+r;return a}let f$={kernelName:K.e7N,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,o=fP(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},fF=l0(e=>Math.log(e)),fM=lL(K.ZbH,fF),fB={kernelName:K.ZbH,backendName:"cpu",kernelFunc:fM},fL=lB(K.kU,e=>Math.log1p(e)),fU={kernelName:K.kU,backendName:"cpu",kernelFunc:fL},fj=lH((e,t)=>e&&t),fz=cr(K.PYm,fj,null,"bool"),fW={kernelName:K.PYm,backendName:"cpu",kernelFunc:fz},fV=lB(K.VfG,e=>e?0:1,"bool"),fG={kernelName:K.VfG,backendName:"cpu",kernelFunc:fV},fH=lH((e,t)=>e||t),fq=cr(K.MZg,fH,null,"bool"),fX={kernelName:K.MZg,backendName:"cpu",kernelFunc:fq},fK={kernelName:K.eZ0,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:o,alpha:s,beta:u}=r;l$(a,"LRN");let l=a.shape[3],c=l-1,h=n.data.get(a.dataId).values,f=K.D5U.sizeFromShape(a.shape),p=new Float32Array(f);for(let e=0;e<f;e++){let t=function(e){let t=e%l,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;for(;n<=r;n++){let e=h[n];a+=e*e}return a}(e),n=h[e]*Math.pow(o+s*t,-u);p[e]=n}return n.makeTensorInfo(a.shape,a.dtype,p)}},fZ={kernelName:K.Hhh,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:o}=t,{depthRadius:s,bias:u,alpha:l,beta:c}=r;l$(o,"LRNGrad");let h=K.D5U.sizeFromShape(o.shape),f=o.shape[3],p=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(h);for(let e=0;e<h;e++){let t=e%f,n=e-t+Math.max(0,t-s),r=e-t+Math.min(f,t+s+1),a=0;for(let e=n;e<r;e++)a+=Math.pow(d[e],2);a=l*a+u;for(let t=n;t<r;t++){let n=-2*l*c*d[t]*m[e]/a;e===t&&(n+=Math.pow(a,-c)),n*=p[e],g[t]+=n}}return n.makeTensorInfo(o.shape,a.dtype,g)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(e,t,n,r){let a=K.D5U.getTypedArrayFromDType(r,K.D5U.sizeFromShape(n));for(let n=0;n<a.length;++n){let r=n*t,i=e[r];for(let n=0;n<t;++n){let t=e[r+n];(Number.isNaN(t)||t>i)&&(i=t)}a[n]=i}return a}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQ(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:o}=r,s=a.shape,u=s.length,l=K.D5U.parseAxisParam(i,s),c=l,h=K.Wap.getAxesPermutation(c,u),f=n.data.get(a.dataId).values;if(null!=h){let e=Array(u);for(let t=0;t<e.length;t++)e[t]=s[h[t]];f=c_(f,s,a.dtype,h,e),c=K.Wap.getInnerMostAxes(c.length,u),s=e}l$(a,"max"),K.Wap.assertAxesAreInnerMostDims("max",c,u);let[p,d]=K.Wap.computeOutAndReduceShapes(s,c),m=K.D5U.sizeFromShape(d),g=fY(f,m,p,a.dtype),y=n.write(g,p,a.dtype),b=p;if(o){let e=K.Wap.expandShapeToKeepDim(p,l);b=e}return{dataId:y,shape:b,dtype:a.dtype}}let fJ={kernelName:K.YoZ,backendName:"cpu",kernelFunc:fQ},f0=lH((e,t)=>Math.max(e,t)),f1=cr(K.BMI,f0),f2={kernelName:K.BMI,backendName:"cpu",kernelFunc:f1},f3={kernelName:K.mTV,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n;l$(i,"maxPool");let{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=a;K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(s,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`);let c=K.Wap.computePool2DInfo(i.shape,o,s,1,u,l);if(1===c.filterWidth&&1===c.filterHeight&&K.D5U.arraysEqual(c.inShape,c.outShape))t=lz({inputs:{x:i},backend:r});else{let e=r.data.get(i.dataId).values,n=K.D5U.computeStrides(i.shape),a=cU(e,i.shape,i.dtype,n,c,"max");t=r.makeTensorInfo(c.outShape,i.dtype,a.values)}return t}},f4={kernelName:K.OAf,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r;l$(a,"maxPool3d");let c=K.Wap.computePool3DInfo(a.shape,i,o,1,s,u,l),h=n.data.get(a.dataId).values,f=cz(h,a.shape,a.dtype,K.D5U.computeStrides(a.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}},f6={kernelName:K.OU7,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=r;l$([a,i],"maxPool3DGrad");let c=K.Wap.computePool3DInfo(i.shape,o,s,1,u,l),h=n.bufferSync(i),f=function(e,t){let n=(0,K.f3b)(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,d=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){let b=y*r-f,v=b;for(;v<0;)v+=o;let w=Math.min(t.inDepth,l+b);for(let r=0;r<t.outHeight;++r){let l=r*a-p,f=l;for(;f<0;)f+=s;let x=Math.min(t.inHeight,c+l);for(let a=0;a<t.outWidth;++a){let p=a*i-d,_=p;for(;_<0;)_+=u;let k=Math.min(t.inWidth,h+p),S=Number.NEGATIVE_INFINITY,I=-1;for(let t=v;t<w;t+=o){let n=t-b;for(let r=f;r<x;r+=s){let a=r-l;for(let i=_;i<k;i+=u){let o=i-p,s=e.get(m,t,r,i,g);s>=S&&(S=s,I=n*c*h+a*c+o)}}}n.set(I,m,y,r,a,g)}}}return n}(h,c),p=c.strideDepth,d=c.strideHeight,m=c.strideWidth,g=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,v=c.effectiveFilterDepth,w=c.effectiveFilterHeight,x=c.effectiveFilterWidth,_=v-1-c.padInfo.front,k=x-1-c.padInfo.left,S=w-1-c.padInfo.top,I=(0,K.f3b)(i.shape,"float32"),E=n.bufferSync(a);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let a=0;a<c.inWidth;++a){let i=n-_,o=r-S,s=a-k,u=0;for(let n=0;n<v;n+=g){let r=(i+n)/p;if(!(r<0)&&!(r>=c.outDepth)&&Math.floor(r)===r)for(let a=0;a<w;a+=y){let i=(o+a)/d;if(!(i<0)&&!(i>=c.outHeight)&&Math.floor(i)===i)for(let o=0;o<x;o+=b){let l=(s+o)/m;if(l<0||l>=c.outWidth||Math.floor(l)!==l)continue;let h=v*w*x-1-f.get(e,r,i,l,t),p=n*w*x+a*x+o,d=h===p?1:0;if(0===d)continue;let g=E.get(e,r,i,l,t);u+=g*d}}}I.set(u,e,n,r,a,t)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}},f5={kernelName:K.OV7,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:o}=t;l$([i,o],"maxPoolGrad");let{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,h=K.Wap.computePool2DInfo(i.shape,s,u,1,l,c),f=n.data.get(i.dataId).values,p=(0,K.f3b)(h.outShape,i.dtype,cj(f,i.shape,i.dtype,h).values),d=h.strideHeight,m=h.strideWidth,g=h.dilationHeight,y=h.dilationWidth,b=h.effectiveFilterHeight,v=h.effectiveFilterWidth,w=v-1-h.padInfo.left,x=b-1-h.padInfo.top,_=(0,K.f3b)(i.shape,"float32"),k=n.data.get(a.dataId).values,S=(0,K.f3b)(a.shape,"float32",k);for(let e=0;e<h.batchSize;++e)for(let t=0;t<h.inChannels;++t)for(let n=0;n<h.inHeight;++n)for(let r=0;r<h.inWidth;++r){let a=n-x,i=r-w,o=0;for(let n=0;n<b;n+=g){let r=(a+n)/d;if(!(r<0)&&!(r>=h.outHeight)&&Math.floor(r)===r)for(let a=0;a<v;a+=y){let s=(i+a)/m;if(s<0||s>=h.outWidth||Math.floor(s)!==s)continue;let u=b*v-1-p.get(e,r,s,t),l=n*v+a,c=u===l?1:0;if(0===c)continue;let f=S.get(e,r,s,t);o+=f*c}}_.set(o,e,n,r,t)}return n.makeTensorInfo(_.shape,_.dtype,_.values)}},f8={kernelName:K.vFR,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=t;l$(r,"MaxPoolWithArgmax");let u=n.data.get(r.dataId).values,l=K.Wap.computePool2DInfo(r.shape,a,i,[1,1],o),[c,h]=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r,a){let i=K.D5U.computeStrides(t),o=cU(e,t,n,i,a,"max"),s=cj(e,t,n,a,!0,r);return[o.values,s.values]}(u,r.shape,r.dtype,s,l),f=n.write(c,l.outShape,r.dtype),p=n.write(h,l.outShape,r.dtype);return[{dataId:f,shape:l.outShape,dtype:r.dtype},{dataId:p,shape:l.outShape,dtype:"int32"}]}},f7={kernelName:K.q2K,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r,s=K.D5U.parseAxisParam(i,a.shape),u=K.Wap.computeOutAndReduceShapes(a.shape,s),l=u[1],c=K.D5U.sizeFromShape(l),h=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));h.push(f);let p=ct({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});h.push(p);let d=h2({inputs:{a:p,b:f},backend:n});h.push(d);let m=hR({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:o}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}},f9={kernelName:K.c17,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;l$(a,"min");let s=K.D5U.parseAxisParam(i,a.shape),u=s,l=K.Wap.getAxesPermutation(u,a.shape.length),c=a;null!=l&&(c=ck({inputs:{x:a},backend:n,attrs:{perm:l}}),u=K.Wap.getInnerMostAxes(u.length,a.shape.length)),K.Wap.assertAxesAreInnerMostDims("min",u,c.shape.length);let[h,f]=K.Wap.computeOutAndReduceShapes(c.shape,u),p=K.D5U.sizeFromShape(f),d=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(h),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<d.length;++e){let t=e*p,n=m[t];for(let e=0;e<p;++e){let r=m[t+e];(Number.isNaN(r)||r<n)&&(n=r)}d[e]=n}null!=l&&n.disposeIntermediateTensorInfo(c);let g=n.makeTensorInfo(h,c.dtype,d);if(o){let e=K.Wap.expandShapeToKeepDim(h,s),t=cl({inputs:{x:g},backend:n,attrs:{shape:e}});return n.disposeIntermediateTensorInfo(g),t}return g}},pe=lH((e,t)=>Math.min(e,t)),pt=cr(K.q8u,pe),pn={kernelName:K.q8u,backendName:"cpu",kernelFunc:pt},pr={kernelName:K.jQs,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:o}=r;l$(a,"mirrorPad");let s=i.map((e,t)=>e[0]+a.shape[t]+e[1]),u=i.map(e=>e[0]),l=i.map((e,t)=>e[0]+a.shape[t]),c="reflect"===o?0:1,h=n.data.get(a.dataId).values,f=a.shape.length,p=K.D5U.computeStrides(a.shape),d=K.D5U.sizeFromShape(s),m=s.length,g=K.D5U.computeStrides(s),y=K.D5U.getTypedArrayFromDType(a.dtype,d);for(let e=0;e<d;e++){let t=K.D5U.indexToLoc(e,m,g);for(let e=0;e<m;e++)t[e]<u[e]?t[e]=2*u[e]-t[e]-c:t[e]>=l[e]&&(t[e]=(l[e]-1)*2-t[e]+c);t=t.map((e,t)=>e-u[t]);let n=K.D5U.locToIndex(t,f,p);y[e]=h[n]}let b=n.write(y,s,a.dtype);return{dataId:b,shape:s,dtype:a.dtype}}},pa=lH((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),pi=cr(K.Vbg,pa),po={kernelName:K.Vbg,backendName:"cpu",kernelFunc:pi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ps(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${s}`);let u=K.D5U.parseAxisParam([s],a.shape),l=fQ({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=K.Wap.expandShapeToKeepDim(l.shape,u),h=cl({inputs:{x:l},backend:n,attrs:{shape:c}}),f=h5({inputs:{a:a,b:h},backend:n}),p=hX({inputs:{x:f},backend:n}),d=hR({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=cl({inputs:{x:d},backend:n,attrs:{shape:c}}),g=h2({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),g}let pu={kernelName:K.Gcp,backendName:"cpu",kernelFunc:ps},pl={kernelName:K.NZg,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:o,normalized:s}=r;l$(a,"multinomial");let u=s?a:ps({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],h=n.data.get(u.dataId).values,f=[l,i],p=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(f),"int32");for(let e=0;e<l;++e){let t=e*c,n=new Float32Array(c-1);n[0]=h[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+h[t+e];let r=uU.alea(o.toString()),a=e*i;for(let e=0;e<i;++e){let t=r();p[a+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){p[a+e]=r;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",p)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pc(e,t,n){let r=K.D5U.createScalarValue(-1,n);return hT([],t,r,e,n)}let ph={kernelName:K.kuV,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t;l$(r,"neg");let a=n.data.get(r.dataId).values,[i,o]=pc(a,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}},pf=K.GDt.nonMaxSuppressionV3Impl,pp={kernelName:K.uv1,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=r;l$(a,"NonMaxSuppression");let l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:h}=pf(l,c,o,s,u);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},pd=K.GDt.nonMaxSuppressionV4Impl,pm={kernelName:K.cye,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r;l$(a,"NonMaxSuppressionPadded");let c=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:f,validOutputs:p}=pd(c,h,o,s,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},pg=K.GDt.nonMaxSuppressionV5Impl,py={kernelName:K.W0H,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r;l$(a,"NonMaxSuppressionWithScore");let c=n.data.get(a.dataId).values,h=n.data.get(i.dataId).values,{selectedIndices:f,selectedScores:p}=pg(c,h,o,s,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}},pb=lH((e,t)=>e!==t?1:0),pv=cr(K.yQU,pb,null,"bool"),pw={kernelName:K.yQU,backendName:"cpu",kernelFunc:pv},px={kernelName:K.we_,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:o,onValue:s,offValue:u}=r;l$(a,"oneHot");let l=K.D5U.sizeFromShape(a.shape),c=new Float32Array(l*o);c.fill(u);let h=n.data.get(a.dataId).values;for(let e=0;e<l;++e)h[e]>=0&&h[e]<o&&(c[e*o+h[e]]=s);return n.makeTensorInfo([...a.shape,o],i,c)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p_(e){let{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw Error("zerosLike is not supported for string tensors");if("complex64"!==r.dtype)return fe({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}});{let e=l7({inputs:{input:r},backend:n}),t=p_({inputs:{x:e},backend:n}),a=he({inputs:{input:r},backend:n}),i=p_({inputs:{x:a},backend:n}),o=l6({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),o}}let pk={kernelName:K.RuY,backendName:"cpu",kernelFunc:p_},pS={kernelName:K.qWM,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw Error("onesLike is not supported for string tensors");if("complex64"!==a.dtype)return fe({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}});{let t=l7({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=he({inputs:{input:a},backend:r}),o=p_({inputs:{x:i},backend:r}),s=l6({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pI(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return hZ({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,o=t[0].dtype;t.forEach(e=>{K.D5U.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),K.D5U.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],u=t.map(e=>{let t=hZ({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t}),l=hn({inputs:u,backend:n,attrs:{axis:a}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}let pE={kernelName:K.QiL,backendName:"cpu",kernelFunc:pI},pN={kernelName:K.lyA,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:o}=r;l$(a,"pad");let s=i.map((e,t)=>e[0]+a.shape[t]+e[1]),u=i.map(e=>e[0]),l=n.data.get(a.dataId).values,c=K.D5U.sizeFromShape(a.shape),h=a.shape.length,f=K.D5U.computeStrides(a.shape),p=K.D5U.sizeFromShape(s),d=s.length,m=K.D5U.computeStrides(s),g=K.D5U.getTypedArrayFromDType(a.dtype,p);0!==o&&g.fill(o);for(let e=0;e<c;e++){let t=K.D5U.indexToLoc(e,h,f),n=t.map((e,t)=>e+u[t]),r=K.D5U.locToIndex(n,d,m);g[r]=l[e]}let y=n.write(g,s,a.dtype);return{dataId:y,shape:s,dtype:a.dtype}}},pT=lH((e,t)=>Math.pow(e,t)),pA=cr(K.pe_,pT),pC={kernelName:K.pe_,backendName:"cpu",kernelFunc:pA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pO(e,t,n,r){let[a,i]=K.Wap.computeOutAndReduceShapes(e,r),o=(0,K.x8V)(t,"int32"),s=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(a),o),u=K.D5U.sizeFromShape(i);for(let e=0;e<s.length;++e){let t=e*u,r=1;for(let e=0;e<u;++e)r*=n[t+e];s[e]=r}return{outVals:s,outShape:a,outDtype:o}}let pR={kernelName:K.DlI,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;l$(a,"prod");let s=a.shape.length,u=K.D5U.parseAxisParam(i,a.shape),l=K.Wap.getAxesPermutation(u,s),c=u,h=a,f=[];null!=l&&(f.push(h=ck({inputs:{x:a},backend:n,attrs:{perm:l}})),c=K.Wap.getInnerMostAxes(c.length,s));let p=n.data.get(h.dataId).values,{outVals:d,outShape:m,outDtype:g}=pO(h.shape,h.dtype,p,c),y=m;return o&&(y=K.Wap.expandShapeToKeepDim(m,u)),f.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,g,d)}};function pD(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function pP(e,t,n,r,a,i,o,s){if(0===e.length)throw Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw Error("Split tensors must not be scalars");let u=t[0][0]-1;if(!/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){let a=K.D5U.indexToLoc(r,t.length,K.D5U.computeStrides(t)).join(",");throw Error(`indices[${a}] = ${e} is not in [0, ${n})`)}})}(i,o,u),0===r.length)throw Error("params.rank must be nonzero");let l=r[0],{outSplits:c,valueSlices:h,numValues:f}=function(e,t,n,r){let a=[],i=0,o=t.length-1+n.length,s=Array(o).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){let r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw Error("Ragged splits may not be empty");if(r[0]<0)throw Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw Error("Ragged splits must be sorted in ascending order")}}(n,r);let u=1;for(let e=0;e<t.length-1;++e){u*=t[e];let n=t[e+1];for(let t=1;t<u+1;++t)s[e].push(t*n)}for(let r=0;r<e.length;++r){let o=e[r],u=e[r]+1;for(let e=0;e<n.length;++e){let r=n[e],a=e+t.length-1;if(a>=0){let e=s[a],t=e[e.length-1]-r[o];for(let e=o;e<u;++e)s[a].push(r[e+1]+t)}o=r[o],u=r[u]}u!==o&&(a.push([o,u]),i+=u-o)}return{outSplits:s,valueSlices:a,numValues:i}}(i,o,e,l),p=function(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,a=K.D5U.getArrayFromDType("int32",r);t.push(a),e[n].forEach((e,t)=>a[t]=e)}return t}(c),d=function(e,t,n,r,a){let i=t.slice();i[0]=a;let o=K.D5U.getArrayFromDType(n,K.D5U.sizeFromShape(i)),s=e.length,u=0===s?0:s/t[0];return!function(e,t,n,r,a,i){let o=pD(t,2)[1],s=pD(i,2)[1],u=0;for(let t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)a[u*s+t]=e[n*o+t];++u}}(e,t,r,u,o,i),[o,i]}(n,r,a,h,f);return[p,d[0],d[1]]}let p$={kernelName:K.dDz,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=t,{outputRaggedRank:s}=r,u=a.map(e=>n.data.get(e.dataId).values),l=a.map(e=>e.shape),c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,[f,p,d]=pP(u,l,c,i.shape,i.dtype,h,o.shape,s),m=f.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(d,i.dtype,p);return m.concat([g])}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var pF=K.Wap.RowPartitionType;class pM{constructor(e,t,n,r,a,i,o,s,u,l){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=o,this.rowPartitionValues=s,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=K.Wap.getRowPartitionTypesHelper(l),this.raggedRank=K.Wap.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===pF.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===pF.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){let t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case pF.VALUE_ROWIDS:return pM.getMaxWidthValueRowID(t);case pF.ROW_SPLITS:return pM.getMaxWidthRowSplit(t);default:throw Error(`Cannot handle partition type ${pF[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){let t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){let t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){let t=e.length;if(0===t)return 0;let n=0,r=e[0],a=0;for(let i=1;i<t;++i){let t=e[i];t!==r&&(r=t,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return pL(e,n)}calculateOutputSize(e){let t=this.valuesShape,n=this.defaultValueShape;K.Wap.validateDefaultValueShape(n,t);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=K.Wap.combineRaggedTensorToTensorShapes(this.raggedRank,r,t),i=a;i[0]<0&&(i[0]=e);for(let e=1;e<=this.raggedRank;++e)i[e]<0&&(i[e]=this.getMaxWidth(e));return i}calculateFirstParentOutputIndex(e,t,n){let r=Math.min(e,n),a=[],i=0;for(let e=0;e<r;++e,i+=t)a.push(i);for(let t=r;t<e;++t)a.push(-1);return K.D5U.assert(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){let a=e.length,i=[];for(let o=0;o<a-1;++o){let a=e[o+1]-e[o],s=Math.min(r,a),u=t[o];-1===u&&(s=0);for(let e=0;e<s;++e)i.push(u),u+=n;for(let e=0;e<a-s;++e)i.push(-1)}if(a>0&&i.length!==e[a-1])throw Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){let a=e.length,i=[];if(0===a)return[];let o=0,s=e[0];if(s>=t.length)throw Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let u=t[s];i.push(u);for(let l=1;l<a;++l){let a=e[l];if(a===s)u>=0&&(++o<r?u+=n:u=-1);else{if(o=0,s=a,a>=t.length)throw Error(`Got nextValueRowId=${a} which is not less than ${t.length}`);u=t[a]}i.push(u)}if(i.length!==e.length)throw Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){let a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case pF.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case pF.ROW_SPLITS:if(a.length-1>t.length)throw Error(`Row partition size is greater than output size: ${a.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw Error(`Unsupported partition type: ${pF[i]}`)}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case pF.FIRST_DIM_SIZE:return e[0];case pF.VALUE_ROWIDS:throw Error("Cannot handle VALUE_ROWIDS in first dimension.");case pF.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw Error(`Cannot handle type ${pF[t]}`)}}compute(){let e=this.rowPartitionValues[0];if(e.length<=0)throw Error("Invalid first partition input. Tensor requires at least one element.");let t=this.getFirstDimensionSize(),n=this.calculateOutputSize(t),r=Array(this.raggedRank+1);r[r.length-1]=1;for(let e=r.length-2;e>=0;--e)r[e]=r[e+1]*n[e+1];let a=pL(n,!1),i=K.D5U.getArrayFromDType(this.valuesDType,K.D5U.sizeFromShape(a)),o=r[0]*n[0];if(o>0){let e=this.calculateFirstParentOutputIndex(t,r[0],n[0]);for(let t=1;t<=this.raggedRank;++t){let a=this.calculateOutputIndex(t-1,e,r[t],n[t]);e=a}this.setOutput(this.raggedRank,e,i,a)}return[a,i]}setOutput(e,t,n,r){if(0===n.length)return;let a=this.values,i=r.slice();i=i.slice(e+1);let o=K.D5U.sizeFromShape(i),s=t.length,u=this.defaultValue;if(u.length!==o&&1!==u.length){let e=this.defaultValueShape;(0,K.lub)(()=>{let t=(0,K.XLQ)(u,e),n=(0,K.UFq)(t,i);u=n.dataSync()})}let l=0,c=0,h=0;for(let e=0;e<=s;++e){let r=e<s?t[e]:-1;if(r===h){++h;continue}if(c<h){let e=a.subarray(l*o),t=n.subarray(c*o),r=(h-c)*o;pB(t,e,r)}if(e>=s){let e=n.length;r=Math.floor(e/o)}if(r>h){if(1===this.defaultValue.length)n.subarray(h*o,r*o).fill(this.defaultValue[0]),h=r;else for(;r>h;){let e=n.slice(h*o);pB(e,u,o),++h}}r<0?(l=e+1,c=h):(l=e,h=(c=h)+1)}}}function pB(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function pL(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw Error(`Dimension ${r} must be >= 0`);if(r<-1)throw Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function pU(e,t,n,r,a,i,o,s,u,l){return new pM(e,t,n,r,a,i,o,s,u,l).compute()}let pj={kernelName:K.BiW,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:u}=r,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,h=n.data.get(o.dataId).values,f=s.map(e=>n.data.get(e.dataId).values),p=s.map(e=>e.shape),[d,m]=pU(l,a.shape,c,i.shape,i.dtype,h,o.shape,f,p,u);return n.makeTensorInfo(d,i.dtype,m)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pz(e,t,n,r){let a=e<t&&n<0,i=t<e&&n>1;if(e===t||a||i)return K.D5U.makeZerosTypedArray(0,r);let o=Math.abs(Math.ceil((t-e)/n)),s=K.D5U.makeZerosTypedArray(o,r);t<e&&1===n&&(n=-1),s[0]=e;for(let e=1;e<s.length;e++)s[e]=s[e-1]+n;return s}let pW={kernelName:K.e6w,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,dtype:i,step:o}=n,s=pz(r,a,o,i);return t.makeTensorInfo([s.length],i,s)}},pV=lB(K.$HU,e=>1/e),pG={kernelName:K.$HU,backendName:"cpu",kernelFunc:pV},pH={kernelName:K._Yw,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r;l$(a,"resizeBilinear");let u=K.D5U.computeStrides(a.shape),[l,c]=s,[h,f,p,d]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(K.D5U.sizeFromShape([h,l,c,d])),y=[i&&l>1?f-1:f,i&&c>1?p-1:p],b=[i&&l>1?l-1:l,i&&c>1?c-1:c],v=0,w=y[0]/b[0],x=y[1]/b[1];for(let e=0;e<h;e++)for(let t=0;t<l;t++){let n;n=o?w*(t+.5)-.5:w*t;let r=Math.max(0,Math.floor(n)),a=n-r,i=Math.min(f-1,Math.ceil(n)),s=e*u[0]+r*u[1],l=e*u[0]+i*u[1];for(let e=0;e<c;e++){let t;t=o?x*(e+.5)-.5:x*e;let n=Math.max(0,Math.floor(t)),r=t-n,i=Math.min(p-1,Math.ceil(t)),c=s+n*u[2],h=l+n*u[2],f=s+i*u[2],y=l+i*u[2];for(let e=0;e<d;e++){let t=m[c+e],n=m[h+e],i=m[f+e],o=m[y+e],s=t+(i-t)*r,u=n+(o-n)*r,l=s+(u-s)*a;g[v++]=l}}}return n.makeTensorInfo([h,l,c,d],"float32",g)}},pq={kernelName:K.zbQ,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r;l$([i,a],"resizeBilinearGrad");let s=K.D5U.computeStrides(a.shape),[u,l,c,h]=a.shape,[,f,p]=i.shape,d=new Float32Array(u*l*c*h),m=[o&&f>1?l-1:l,o&&p>1?c-1:c],g=[o&&f>1?f-1:f,o&&p>1?p-1:p],y=m[0]/g[0],b=m[1]/g[1],v=n.data.get(i.dataId).values,w=0;for(let e=0;e<u;e++){let t=e*s[0];for(let e=0;e<f;e++){let n=e*y,r=Math.floor(n),a=Math.min(Math.ceil(n),l-1),i=t+r*s[1],o=t+a*s[1],u=n-r,f=1-u;for(let e=0;e<p;e++){let t=e*b,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),a=t-n,l=1-a,p=i+n*s[2],m=i+r*s[2],g=o+n*s[2],y=o+r*s[2],x=f*l,_=f*a,k=u*l,S=u*a;for(let e=0;e<h;e++){let t=v[w++];d[p+e]+=t*x,d[m+e]+=t*_,d[g+e]+=t*k,d[y+e]+=t*S}}}}return n.makeTensorInfo([u,c,l,h],"float32",d)}},pX={kernelName:K.dpD,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r;l$(a,"resizeNearestNeighbor");let u=K.D5U.computeStrides(a.shape),[l,c]=s,[h,f,p,d]=a.shape,m=n.data.get(a.dataId).values,g=new Float32Array(h*l*c*d),y=[i&&l>1?f-1:f,i&&c>1?p-1:p],b=[i&&l>1?l-1:l,i&&c>1?c-1:c],v=y[0]/b[0],w=y[1]/b[1],x=0;for(let e=0;e<h;e++){let t=e*u[0];for(let e=0;e<l;e++){let n=o?v*(e+.5):v*e,r=Math.min(f-1,i?Math.round(n):Math.floor(n));o&&(r=Math.max(0,r));let a=t+r*u[1];for(let e=0;e<c;e++){let t=o?w*(e+.5):w*e,n=Math.min(p-1,i?Math.round(t):Math.floor(t));o&&(n=Math.max(0,n));let r=a+n*u[2];for(let e=0;e<d;e++){let t=m[r+e];g[x++]=t}}}}return n.makeTensorInfo([h,l,c,d],a.dtype,g)}},pK={kernelName:K.Hmb,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r;l$([i,a],"resizeNearestNeighborGrad");let s=K.D5U.computeStrides(a.shape),u=K.D5U.computeStrides(i.shape),[l,c,h,f]=a.shape,[,p,d]=i.shape,m=new Float32Array(l*c*h*f),g=n.data.get(i.dataId).values,y=[o&&p>1?c-1:c,o&&d>1?h-1:h],b=[o&&p>1?p-1:p,o&&d>1?d-1:d],v=y[0]/b[0],w=y[1]/b[1],x=1/v,_=1/w,k=2*Math.ceil(x)+2,S=2*Math.ceil(_)+2;for(let e=0;e<l;e++){let t=e*s[0];for(let e=0;e<c;e++){let n=t+e*s[1],r=Math.floor(e*x),a=Math.floor(r-k/2);for(let r=0;r<h;r++){let i=n+r*s[2],l=Math.floor(r*_),y=Math.floor(l-S/2);for(let n=0;n<f;n++){let s=0;for(let i=0;i<k;i++){let l=i+a;if(l<0||l>=p)continue;let f=t+l*u[1],m=l*v,b=Math.min(c-1,o?Math.round(m):Math.floor(m));if(e===b)for(let e=0;e<S;e++){let t=e+y;if(t<0||t>=d)continue;let a=f+t*u[2],i=t*w,l=Math.min(h-1,o?Math.round(i):Math.floor(i));r===l&&(s+=g[a+n])}}m[i+n]=s}}}}return n.makeTensorInfo(a.shape,a.dtype,m)}},pZ={kernelName:K.mKl,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r;l$(a,"reverse");let o=a.shape.length,s=K.D5U.parseAxisParam(i,a.shape);if(0===o)return lz({inputs:{x:a},backend:n});let u=new K.YDk(a.shape,a.dtype),l=n.bufferSync(a);for(let e=0;e<u.size;e++){let t=u.indexToLoc(e),n=t.slice();s.forEach(e=>n[e]=a.shape[e]-1-n[e]),u.set(l.get(...n),...t)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}},pY={kernelName:K.b9H,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:i,center:o}=t,s=K.D5U.getTypedArrayFromDType(r.dtype,K.D5U.sizeFromShape(r.shape)),[u,l,c,h]=r.shape,[f,p]=K.Wap.getImageCenter(o,l,c),d=Math.sin(a),m=Math.cos(a),g=n.data.get(r.dataId).values;for(let e=0;e<u;e++){let t=e*c*l*h;for(let e=0;e<l;e++){let n=e*(c*h);for(let r=0;r<c;r++){let a=r*h;for(let o=0;o<h;o++){let y=[u,e,r,o],b=y[2],v=y[1],w=(b-f)*m-(v-p)*d,x=(b-f)*d+(v-p)*m;w=Math.round(w+f),x=Math.round(x+p);let _=i;if("number"!=typeof i&&(_=3===o?255:i[o]),w>=0&&w<c&&x>=0&&x<l){let e=x*(c*h),n=w*h,r=t+e+n+o;_=g[r]}let k=t+n+a+o;s[k]=_}}}}let y=n.write(s,r.shape,r.dtype);return{dataId:y,shape:r.shape,dtype:r.dtype}}},pQ=lB(K.e07,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),pJ={kernelName:K.e07,backendName:"cpu",kernelFunc:pQ},p0=l0(e=>1/Math.sqrt(e)),p1=lL(K.bV0,p0),p2={kernelName:K.bV0,backendName:"cpu",kernelFunc:p1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3(e,t,n,r,a,i,o,s,u,l){let c=e.values,h=t.values;if(0===r)return(0,K.f3b)(n,t.dtype);let f=(0,K.f3b)([r/a,a],t.dtype);"string"==typeof u?f.values.fill(u):"number"==typeof u?f.values.fill(u):"boolean"==typeof u&&f.values.fill(+u);for(let e=0;e<i;e++){let i=[],u=0;for(let t=0;t<o;t++){let n=c[e*o+t];i.push(n),u+=n*s[t]}if(u<0||u>=r/a)throw Error(`Invalid indices: ${i} does not index into ${n}`);for(let n=0;n<a;n++)l?f.values[u*a+n]+=h[e*a+n]:f.values[u*a+n]=0===t.rank?h[0]:h[e*a+n]}return f}let p4={kernelName:K.xQA,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:o}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:h}=K.Wap.calculateShapes(i,a,o),f=n.bufferSync(a),p=n.bufferSync(i),d=p3(f,p,o,h,l,u,s,c,0,!0);return n.makeTensorInfo(o,d.dtype,d.values)}},p6={kernelName:K.nr8,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:o}=r,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,l=function(e,t,n,r,a,i){let o=K.D5U.getArrayFromDType("int32",n*a);for(let s=0;s<n;++s){let n=e.slice(s*r,(s+1)*r),u=s*a;for(let e=0;e<a;++e)o[u+e]="left"===i?/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t){let n=0,r=e.length,a=0;for(;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}(n,t[e+u]):function(e,t){let n=0,r=e.length,a=0;for(;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}(n,t[e+u])}return o}(s,u,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",l)}},p5={kernelName:K.PhF,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t;l$([r,a,i],"select");let o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=(0,K.x8V)(a.dtype,i.dtype),h=K.D5U.makeZerosTypedArray(K.D5U.sizeFromShape(a.shape),c),f=0,p=0===o||o>1||1===a.shape.length?1:K.D5U.sizeFromShape(a.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<p;t++)1===s[e]?h[f++]=u[e]:h[f++]=l[e];return n.makeTensorInfo(a.shape,c,h)}},p8=K.Wap.SELU_SCALEALPHA,p7=K.Wap.SELU_SCALE,p9=lB(K.oFR,e=>e>=0?p7*e:p8*(Math.exp(e)-1)),de={kernelName:K.oFR,backendName:"cpu",kernelFunc:p9},dt=lB(K.i5y,e=>e<0?-1:e>0?1:0),dn={kernelName:K.i5y,backendName:"cpu",kernelFunc:dt},dr=lB(K.RQH,e=>Math.sin(e)),da={kernelName:K.RQH,backendName:"cpu",kernelFunc:dr},di=lB(K.wYB,e=>Math.sinh(e)),ds={kernelName:K.wYB,backendName:"cpu",kernelFunc:di},du=Math.log(11920928955078125e-23)+2,dl=lB(K.MRv,e=>{let t=Math.exp(e);return e<du?t:e>-du?e:Math.log(1+t)}),dc={kernelName:K.MRv,backendName:"cpu",kernelFunc:dl},dh={kernelName:K.TQc,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:o}=r;l$([a],"spaceToBatchND");let s=K.D5U.sizeFromShape(i),u=[[0,0]];u.push(...o);for(let e=1+i.length;e<a.shape.length;++e)u.push([0,0]);let l=pN.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),c=K.Wap.getReshaped(l.shape,i,s,!1),h=K.Wap.getPermuted(c.length,i.length,!1),f=K.Wap.getReshapedPermuted(l.shape,i,s,!1),p=cl({inputs:{x:l},backend:n,attrs:{shape:c}}),d=ck({inputs:{x:p},backend:n,attrs:{perm:h}}),m=cl({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),m}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function df(e,t,n,r,a,i,o){let s=t[0],u=i[0],l=Array(u),c=Array(s),h=t[1];if(0===u){if(0!==s)throw Error(K.Wap.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));let e=K.D5U.getArrayFromDType(n,0),t=K.D5U.getArrayFromDType(a,0);return[e,[0,h],t,l,c]}let f=!0,p=0,d=Array(u).fill(0);for(let t=0;t<s;++t){let n=e[t*h];if(n<0)throw Error(K.Wap.getSparseFillEmptyRowsNegativeIndexErrorMessage(t,n));if(n>=u)throw Error(K.Wap.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(t,n,u));++d[n],f=f&&n>=p,p=n}let m=!0;for(let e=0;e<u;++e){let t=0===d[e];l[e]=t,m=m&&!t,d[e]=Math.max(d[e],1),e>0&&(d[e]+=d[e-1])}if(m&&f){for(let e=0;e<s;++e)c[e]=e;return[e,[s,h],r,l,c]}{let t=d[u-1],i=K.D5U.getArrayFromDType(n,t*h),f=K.D5U.getArrayFromDType(a,t),p=Array(u).fill(0);for(let t=0;t<s;++t){let n=e[t*h],a=p[n],o=(0===n?0:d[n-1])+a;p[n]++;for(let n=0;n<h;++n)i[o*h+n]=e[t*h+n];f[o]=r[t],c[t]=o}for(let e=0;e<u;++e){let t=p[e];if(0===t){let t=0===e?0:d[e-1];i[t*h+0]=e;for(let e=1;e<h;++e)i[t*h+e]=0;f[t]=o}}return[i,[t,h],f,l,c]}}let dp={kernelName:K.O3z,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:o}=t;if(1!==i.shape.length)throw Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(2!==r.shape.length)throw Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(1!==a.shape.length)throw Error(`Values must be a vector, saw:
        ${a.shape}`);if(0!==o.shape.length)throw Error(`Default value must be a scalar, saw:
        ${o.shape}`);let s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[h,f,p,d,m]=df(s,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],a.dtype,p),n.makeTensorInfo([d.length],"bool",new Uint8Array(d.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dd(e,t,n,r,a){let i=K.D5U.sizeFromShape(r),o=t[0],s=a.length,u=[],l=1,c=-1;for(let e=0;e<s;++e){let t=a[e];if(-1===t){if(-1!==c)throw Error(K.Wap.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,e));c=e,u.push(1)}else{if(t<0)throw Error(K.Wap.getSparseReshapeNegativeOutputDimErrorMessage(e,t));l*=t,u.push(t)}}if(-1!==c){if(l<=0)throw Error(K.Wap.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let e=Math.trunc(i/l);if(l*e!==i)throw Error(K.Wap.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[c]=e}let h=K.D5U.sizeFromShape(u);if(h!==i)throw Error(K.Wap.getSparseReshapeInputOutputMismatchErrorMessage(r,u));let f=r.length,p=[];if(f>0){p[f-1]=1;for(let e=f-2;e>=0;--e)p[e]=p[e+1]*r[e+1]}let d=[];if(s>0){d[s-1]=1;for(let e=s-2;e>=0;--e)d[e]=d[e+1]*u[e+1]}let m=K.D5U.getArrayFromDType(n,o*s);for(let t=0;t<o;++t){let n=0;for(let r=0;r<f;++r)n+=e[t*f+r]*p[r];for(let e=0;e<s;++e)m[t*s+e]=Math.trunc(n/d[e]),n%=d[e]}return[m,[o,s],u]}let dm={kernelName:K.nhH,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(1!==a.shape.length)throw Error(`Input shape should be a vector but received shape
        ${a.shape}`);if(1!==i.shape.length)throw Error(`Target shape should be a vector but received shape ${i.shape}`);let o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,u=Array.from(n.data.get(i.dataId).values),[l,c,h]=dd(s,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dg(e,t,n,r,a,i=!1,o=0){let s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0;if(c<0)throw Error(K.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let h=t.slice();h[0]=c;let f=h.reduce((e,t)=>e*t,1),p=K.D5U.getArrayFromDType(n,f);if(0===s)return c>0&&p.fill(o),[p,h];if(c<=0)throw Error(K.Wap.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let d=0,m=1,g=0,y=a[0];for(;;){let t=0;if(m<s){if(y===(t=a[m])){++m;continue}if(y>=t)throw Error(K.Wap.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=c)throw Error(K.Wap.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,c));y>g&&p.fill(o,g*l,y*l);for(let t=d;t<m;++t){let n=r[t];if(n<0||n>=u[0])throw Error(K.Wap.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(t,r[t],u[0]));for(let t=0;t<l;t++)p[y*l+t]+=e[n*l+t]}if(i)for(let e=0;e<l;e++)p[y*l+e]/=m-d;if(d=m,++m,g=y+1,y=t,m>s)break}return g<c&&p.fill(o,g*l,c*l),[p,h]}let dy={kernelName:K.w3H,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
          ${a.shape}`);if(1!==i.shape.length)throw Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(a.shape[0]!==i.shape[0])throw Error("segmentIds and indices should have same size.");let o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=dg(o,r.shape,r.dtype,s,u,!0);return n.makeTensorInfo(c,r.dtype,l)}},db={kernelName:K.ZjV,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
         ${a.shape}`);if(1!==i.shape.length)throw Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(a.shape[0]!==i.shape[0])throw Error("segmentIds and indices should have same size.");let o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,[l,c]=dg(o,r.shape,r.dtype,s,u);return n.makeTensorInfo(c,r.dtype,l)}},dv={kernelName:K.D2d,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{sparseIndices:i,sparseValues:o,defaultValue:s}=n,{outputShape:u}=a,{sliceRank:l,numUpdates:c,sliceSize:h,strides:f,outputSize:p}=K.Wap.calculateShapes(o,i,u),d=r.bufferSync(i);switch(o.dtype){case"bool":{let e=r.bufferSync(o),n=Boolean(r.data.get(s.dataId).values[0]);t=p3(d,e,u,p,h,c,l,f,n,!1);break}case"float32":{let e=r.bufferSync(o),n=r.data.get(s.dataId).values[0];t=p3(d,e,u,p,h,c,l,f,n,!1);break}case"int32":{let e=r.bufferSync(o),n=r.data.get(s.dataId).values[0];t=p3(d,e,u,p,h,c,l,f,n,!1);break}case"string":{let e=r.bufferSync(o),n=K.D5U.decodeString(r.data.get(s.dataId).values[0]);t=p3(d,e,u,p,h,c,l,f,n,!1);break}default:throw Error(`Unsupported type ${o.dtype}`)}return r.makeTensorInfo(u,t.dtype,t.values)}},dw={kernelName:K.L8s,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:o}=r,s=K.D5U.parseAxisParam(o,a.shape)[0],u=K.Wap.prepareSplitSize(a,i,s),l=Array(a.shape.length).fill(0),c=a.shape.slice();return u.map(e=>{let t=[...c];t[s]=e;let r=cK({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r})}},dx=l0(e=>Math.sqrt(e)),d_=lB(K.FKq,e=>Math.sqrt(e)),dk={kernelName:K.FKq,backendName:"cpu",kernelFunc:d_},dS={kernelName:K.bK0,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e;l$(n,"square");let r=t.data.get(n.dataId).values,a=new Float32Array(r.length);for(let e=0;e<r.length;++e){let t=r[e];a[e]=t*t}let i=t.write(a,n.shape,n.dtype);return{dataId:i,shape:n.shape,dtype:n.dtype}}},dI=lH((e,t)=>{let n=e-t;return n*n}),dE=cr(K._tC,dI),dN={kernelName:K._tC,backendName:"cpu",kernelFunc:dE},dT=lB(K.h8e,(e,t)=>isNaN(e)?NaN:e>0?1:t.alpha),dA={kernelName:K.h8e,backendName:"cpu",kernelFunc:dT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dC(e,t,n,r){let a=(0,K.f3b)(e,t.dtype);for(let e=0;e<a.size;e++){let i=a.indexToLoc(e),o=Array(i.length);for(let e=0;e<o.length;e++)o[e]=i[e]*n[e]+r[e];a.set(t.get(...o),...i)}return a}let dO={kernelName:K.jQk,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{begin:o,end:s,strides:u,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:f,shrinkAxisMask:p}=a;l$(i,"stridedSlice");let{finalShapeSparse:d,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:v,end:w,strides:x}=K.kuN.sliceInfo(i.shape,o,s,u,l,c,h,f,p);if(g)t=cl({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){K.D5U.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let e=K.kuN.computeOutShape(v,w,x),n=cK({inputs:{x:i},backend:r,attrs:{begin:v,size:e}});t=cl({inputs:{x:n},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(n)}else{let e=r.bufferSync(i),n=dC(d,e,x,v);t=r.makeTensorInfo(m,n.dtype,n.values)}return t}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dR{constructor(e,t,n,r,a,i){this.separator=K.D5U.encodeString(e),this.nGramWidths=t,this.leftPad=K.D5U.encodeString(n),this.rightPad=K.D5U.encodeString(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,i){for(let o=0;o<a;++o){let s;let u=this.getPadWidth(i),l=Math.max(0,u-o),c=Math.max(0,u-(a-(o+1))),h=i-(l+c),f=t+(l>0?0:o-u);s=0+l*this.leftPad.length;for(let t=0;t<h;++t)s+=e[f+t].length;s+=c*this.rightPad.length;let p=l+c+h-1;s+=p*this.separator.length,n[r+o]=new Uint8Array(s);let d=n[r+o],m=0,g=e=>e.forEach(e=>d[m++]=e);for(let e=0;e<l;++e)g(this.leftPad),g(this.separator);for(let t=0;t<h-1;++t)g(e[f+t]),g(this.separator);if(h>0){g(e[f+h-1]);for(let e=0;e<c;++e)g(this.separator),g(this.rightPad)}else{for(let e=0;e<c-1;++e)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw Error(`First split value must be 0, got ${e}`);for(let a=1;a<r;++a){let r=t[a]>=e;if(!(r=r&&t[a]<=n))throw Error(`Invalid split value ${t[a]}, must be in [${e}, ${n}]`);e=t[a]}if(e!==n)throw Error(`Last split value must be data size. Expected ${n}, got ${e}`)}let a=r-1,i=K.D5U.getArrayFromDType("int32",r);if(0===n||0===r){let e=Array(n);for(let e=0;e<=a;++e)i[e]=0;return[e,i]}i[0]=0;for(let e=1;e<=a;++e){let n=t[e]-t[e-1],r=0;this.nGramWidths.forEach(e=>{r+=this.getNumNGrams(n,e)}),this.preserveShort&&n>0&&0===r&&(r=1),i[e]=i[e-1]+r}let o=Array(i[a]);for(let n=0;n<a;++n){let r=t[n],a=i[n];if(this.nGramWidths.forEach(i=>{let s=t[n+1]-t[n],u=this.getNumNGrams(s,i);this.createNGrams(e,r,o,a,u,i),a+=u}),this.preserveShort&&a===i[n]){let i=t[n+1]-t[n];if(0===i)continue;let s=i+2*this.padWidth;this.createNGrams(e,r,o,a,1,s)}}return[o,i]}}function dD(e,t,n,r,a,i,o,s){return new dR(n,r,a,i,o,s).compute(e,t)}let dP={kernelName:K._JP,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:h}=t,f=n.data.get(c.dataId).values,p=n.data.get(h.dataId).values,[d,m]=dD(f,p,a,i,o,s,u,l);return[n.makeTensorInfo([d.length],"string",d),n.makeTensorInfo(h.shape,"int32",m)]}};function d$(e,t,n){let r=e.length,a=[],i=0,o=0,s=Array(r);for(let u=0;u<r;++u){let r=a.length;!/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){let a=t[0],i=e.indexOf(a);for(;-1!==i;){let t=e.subarray(0,i);n&&0===t.length||r.push(t),i=(e=e.subarray(i+1)).indexOf(a)}n&&0===e.length||r.push(e);return}let a=0;for(let i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){let t=e.subarray(a,i);n&&0===t.length||r.push(t),a=i+1}}(e[u],t,n,a);let l=a.length-r;s[u]=l,i+=l,o=Math.max(o,l)}let u=K.D5U.getArrayFromDType("int32",2*i),l=Array(i),c=[r,o],h=0;for(let e=0;e<r;++e)for(let t=0;t<s[e];++t)u[2*h]=e,u[2*h+1]=t,l[h]=a[h],++h;return[u,l,c]}let dF={kernelName:K.s1s,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:o}=t;if("string"!==i.dtype)throw Error("Input must be of datatype string");if(1!==i.shape.length)throw Error(`Input must be a vector, got shape: ${i.shape}`);if(0!==o.shape.length)throw Error(`Delimiter must be a scalar, got shape: ${o.shape}`);let s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[l,c,h]=d$(s,u,a),f=c.length;return[n.makeTensorInfo([f,2],"int32",l),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dM(e,t){let n=K.D5U.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=K.D5U.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}let dB={kernelName:K.XkS,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw Error("Input must be of datatype string");if(a<=0)throw Error("Number of buckets must be at least 1");let o=n.data.get(i.dataId).values,s=dM(o,a);return n.makeTensorInfo(i.shape,"int32",s)}},dL=lB(K.sEM,e=>Math.tan(e)),dU={kernelName:K.sEM,backendName:"cpu",kernelFunc:dL},dj=lB(K.MIZ,e=>Math.tanh(e)),dz={kernelName:K.MIZ,backendName:"cpu",kernelFunc:dj};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(e,t){let n=Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];let r=(0,K.f3b)(n,e.dtype);for(let t=0;t<r.values.length;++t){let n=r.indexToLoc(t),a=Array(e.rank);for(let t=0;t<a.length;t++)a[t]=n[t]%e.shape[t];let i=e.locToIndex(a);r.values[t]=e.values[i]}return r}let dV={kernelName:K.n9L,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;l$(a,"tile");let o=dW(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}},dG=(e,t)=>{let n=t.value-e.value;return 0===n?e.index-t.index:n};function dH(e,t,n,r,a){let i=t[t.length-1],[o,s]=[e.length/i,i],u=K.D5U.getTypedArrayFromDType(n,o*r),l=K.D5U.getTypedArrayFromDType("int32",o*r);for(let t=0;t<o;t++){let n=t*s,i=e.subarray(n,n+s),o=Array(i.length);i.forEach((e,t)=>o[t]={value:e,index:t}),r<o.length&&(function e(t,n,r=0,a=t.length-1){for(;a>r;){if(a-r>600){let i=a-r+1,o=n-r+1,s=Math.log(i),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(i-u)/i)*Math.sign(o-i/2),c=Math.max(r,Math.floor(n-o*u/i+l)),h=Math.min(a,Math.floor(n+(i-o)*u/i+l));e(t,n,c,h)}let i=t[n],o=r,s=a;for(K.D5U.swap(t,r,n),dG(t[a],i)>0&&K.D5U.swap(t,r,a);o<s;){for(K.D5U.swap(t,o,s),o++,s--;0>dG(t[o],i);)o+=1;for(;dG(t[s],i)>0;)s-=1}0===dG(t[r],i)?K.D5U.swap(t,r,s):(s+=1,K.D5U.swap(t,s,a)),s<=n&&(r=s+1),n<=s&&(a=s-1)}}(o,r),o=o.slice(0,r)),a&&o.sort(dG);let c=t*r,h=u.subarray(c,c+r),f=l.subarray(c,c+r);for(let e=0;e<r;e++)h[e]=o[e].value,f[e]=o[e].index}let c=t.slice();return c[c.length-1]=r,[(0,K.f3b)(c,n,u),(0,K.f3b)(c,"int32",l)]}let dq={kernelName:K.cWu,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:o}=r;l$(a,"topk");let s=n.data.get(a.dataId).values,[u,l]=dH(s,a.shape,a.dtype,i,o);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}},dX={kernelName:K.wx7,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:i}=t,{interpolation:o,fillMode:s,fillValue:u,outputShape:l}=n,[c,h,f,p]=a.shape,[d,m]=null!=l?l:[h,f],g=[c,d,m,p],y=K.D5U.computeStrides(a.shape),b=y[0],v=y[1],w=y[2],x=K.D5U.computeStrides(g),_=x[0],k=x[1],S=x[2],I=K.D5U.getTypedArrayFromDType(a.dtype,K.D5U.sizeFromShape(g));I.fill(u);let E=r.data.get(a.dataId).values,N=r.data.get(i.dataId).values;for(let e=0;e<c;++e){let t=1===i.shape[0]?N:N.subarray(8*e,8*e+8);for(let n=0;n<d;++n)for(let r=0;r<m;++r)for(let a=0;a<p;++a){let i;let l=t[6]*r+t[7]*n+1;if(0===l)continue;let c=(t[0]*r+t[1]*n+t[2])/l,p=(t[3]*r+t[4]*n+t[5])/l,d=dK(c,f,s),m=dK(p,h,s);switch(o){case"nearest":i=function(e,t,n,r,a,i,o,s,u,l,c){let h=Math.round(s),f=Math.round(u);return dZ(e,t,n,r,a,i,o,h,f,l,c)}(E,h,f,b,v,w,e,m,d,a,u);break;case"bilinear":i=function(e,t,n,r,a,i,o,s,u,l,c){let h=Math.floor(s),f=Math.floor(u),p=h+1,d=f+1,m=(d-u)*dZ(e,t,n,r,a,i,o,h,f,l,c)+(u-f)*dZ(e,t,n,r,a,i,o,h,d,l,c),g=(d-u)*dZ(e,t,n,r,a,i,o,p,f,l,c)+(u-f)*dZ(e,t,n,r,a,i,o,p,d,l,c);return(p-s)*m+(s-h)*g}(E,h,f,b,v,w,e,m,d,a,u);break;default:throw Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}let g=e*_+n*k+r*S+a;I[g]=i}return r.makeTensorInfo(g,a.dtype,I)}let T=r.write(I,g,a.dtype);return{dataId:T,shape:a.shape,dtype:a.dtype}}};function dK(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0){if(t<=1)n=0;else{let e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}}else if(n>t-1){if(t<=1)n=0;else{let e=2*t;(n-=e*Math.trunc(n/e))>=t&&(n=e-n-1)}}return K.D5U.clamp(0,n,t-1)}(e,t);case"wrap":let r;return(r=e)<0?t<=1?r=0:r+=t*(Math.trunc(-r/(t-1))+1):r>t-1&&(t<=1?r=0:r-=t*Math.trunc(r/(t-1))),K.D5U.clamp(0,r,t-1);case"nearest":return K.D5U.clamp(0,e,t-1);default:return e}}function dZ(e,t,n,r,a,i,o,s,u,l,c){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+l]:c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dY(e,t,n,r){let a=K.D5U.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let e=0;e<a;e++)i[0]*=n[e];i[1]=n[a];for(let e=a+1;e<n.length;e++)i[2]*=n[e];let o={},s=new Int32Array(n[a]),u=new K.YDk(i,r,e),l=[],c=1===i[0]&&1===i[2];for(let t=0;t<n[a];t++){let n;if(c)n=e[t].toString();else{let e=[];for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)e.push(u.get(n,t,r));n=e.join(",")}if(void 0!==o[n])s[t]=o[n];else{let e=Object.keys(o).length;o[n]=e,s[t]=e,l.push(t)}}let h=i.slice();h[1]=Object.keys(o).length;let f=new K.YDk(h,r);l.forEach((e,t)=>{for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)f.set(u.get(n,e,r),n,t,r)});let p=n.slice();return p[a]=h[1],{outputValues:f.values,outputShape:p,indices:s}}let dQ={kernelName:K.kpP,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;l$(i,"unique");let o=r.data.get(i.dataId).values,{outputValues:s,outputShape:u,indices:l}=dY(o,a,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}},dJ={kernelName:K.ToN,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let o=a.shape.length,s=a.shape[i],u=Array(o-1),l=0;for(let e=0;e<o;e++)e!==i&&(u[l++]=a.shape[e]);let c=Array(o).fill(0),h=a.shape.slice();h[i]=1;let f=Array(s);for(let e=0;e<f.length;e++){c[i]=e;let t=cK({inputs:{x:a},backend:n,attrs:{begin:c,size:h}});f[e]=cl({inputs:{x:t},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(t)}return f}},d0={kernelName:K.Qvg,backendName:"cpu",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:o}=r;l$(a,"unsortedSegmentSum");let s=a.shape.length,u=i.shape.length,l=[],c=[],h=s-u,f=i;for(let e=0;e<h;++e){let t=hZ({inputs:{input:f},backend:n,attrs:{dim:e+1}});f=t,c.push(t)}for(let e=0;e<o;++e){let t=K.D5U.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),i=hM({inputs:{a:r,b:f},backend:n}),o=ct({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),s=hC({inputs:{a:o,b:a},backend:n}),u=hR({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});l.push(u),c.push(r),c.push(i),c.push(o),c.push(s),c.push(u)}let p=pI({inputs:l,backend:n,attrs:{axis:0}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};for(let e of[cp,cg,cb,cw,cu,cx,cI,cE,cN,cT,cC,cR,cP,cM,cL,cW,cV,cG,cH,cf,cq,cY,c0,c1,cn,c4,c5,l5,c7,hr,hi,ho,hs,hu,hl,hc,hf,hd,hm,hg,hy,hb,hv,hx,h_,hk,hS,hI,hE,hN,hP,lj,h$,hB,hH,hK,hY,h0,h9,ft,fn,fi,fu,fl,fc,ff,fd,fy,fw,lW,fx,ht,fk,fI,fN,lG,fC,fD,f$,fB,fU,fW,fG,fX,fK,fZ,fJ,f2,f3,f4,f6,f5,f8,f7,f9,pn,pr,po,pl,hO,ph,pp,pm,py,pw,px,pS,pE,pN,pC,lK,pR,p$,pj,pW,l9,h3,pG,lY,lJ,cc,pH,pq,pX,pK,pZ,pY,pJ,p2,p4,p6,p5,de,l3,dn,da,ds,cZ,pu,dc,dh,dp,dm,dy,db,dv,dw,dk,dS,dN,dA,dO,dP,dF,dB,h8,hD,dU,dz,dV,dq,dX,cS,dQ,dJ,d0,pk])(0,K.wCN)(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let d1={},d2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function d3(e,t){if(!(e in d1)||null!=t){let n=function(e,t){if(1!==e&&2!==e)throw Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw Error("Cannot create a canvas in this context")}(e):t;return(n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete d1[e]},!1),(0,K.OBj)().getBool("SOFTWARE_WEBGL_ENABLED")&&(d2.failIfMajorPerformanceCaveat=!1),1===e)?n.getContext("webgl",d2)||n.getContext("experimental-webgl",d2):n.getContext("webgl2",d2)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;d1[e]=n}let n=d1[e];return null==n||n.isContextLost()?(delete d1[e],d3(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),d1[e])}function d4(e){let t=K.D5U.sizeFromShape(e),n=Math.ceil(t/4);return K.D5U.sizeToSquarishShape(n)}function d6(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function d5(e,t){let n,r,a,i,o,s,u,l,c,h;return 2===(0,K.OBj)().getNumber("WEBGL_VERSION")?(n=e.R32F,r=e.R16F,a=e.RGBA16F,i=e.RGBA32F,o=e.RED,u=4,l=1,c=e.HALF_FLOAT,h=e.FLOAT,s=e.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=e.RGBA,o=e.RGBA,u=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,h=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d8(e,t){let n=t();return(0,K.OBj)().getBool("DEBUG")&&function(e){let t=e.getError();if(t!==e.NO_ERROR)throw Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}function d7(e,t){return mo(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}(c=y||(y={}))[c.DENSE=0]="DENSE",c[c.SHARED_BATCH=1]="SHARED_BATCH",(h=b||(b={}))[h.RENDER=0]="RENDER",h[h.UPLOAD=1]="UPLOAD",h[h.PIXELS=2]="PIXELS",h[h.DOWNLOAD=3]="DOWNLOAD",(f=v||(v={}))[f.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",f[f.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",f[f.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",f[f.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",f[f.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16";let d9=/ERROR: [0-9]+:([0-9]+):/g;function me(e,t){let n=d9.exec(t);if(null==n){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}let r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((e,t)=>K.D5U.rightPad((t+1).toString(),i)+e),s=0;for(let e=0;e<o.length;e++)s=Math.max(o[e].length,s);let u=o.slice(0,r-1),l=o.slice(r-1,r),c=o.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${K.D5U.rightPad(l[0],s)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function mt(e,t){if(d8(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),Error("Shader program validation failed.")}function mn(e,t,n,r,a,i,o){let s=e.getAttribLocation(t,n);return -1!==s&&(d8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),d8(e,()=>e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)),d8(e,()=>e.enableVertexAttribArray(s)),!0)}function mr(e,t,n){d8(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),d8(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function ma(e,t){d8(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),d8(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function mi(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function mo(e,t,n){let r=d8(e,()=>t());if(null==r)throw Error(n);return r}function ms(e,t=2){return K.D5U.sizeFromShape(e.slice(0,e.length-t))}function mu(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function ml(e){let t=[1,1,1],n=0===e.length||1===e.length&&1===e[0];return n||(t=[ms(e),...mu(e)]),t}function mc(e,t){if(e=e.slice(-2),t=t.slice(-2),K.D5U.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){let n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||n%2==0&&r%2==0&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&e[0]%2==0&&t[0]%2==0}function mh(e,t){let n=e.getExtension(t);return null!=n}function mf(e){try{let t=d3(e);if(null!=t)return!0}catch(e){console.log("Error when getting WebGL context: ",e)}return!1}function mp(e){let t=d5(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function md(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&K.D5U.assert("complex64"!==e.dtype,()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let mm=(0,K.OBj)();mm.registerFlag("HAS_WEBGL",()=>mm.getNumber("WEBGL_VERSION")>0),mm.registerFlag("WEBGL_VERSION",()=>mf(2)?2:mf(1)?1:0),mm.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),mm.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===mm.get("WEBGL_VERSION")),mm.registerFlag("WEBGL_CPU_FORWARD",()=>!0),mm.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),mm.registerFlag("WEBGL_PACK",()=>mm.getBool("HAS_WEBGL")),mm.registerFlag("WEBGL_PACK_NORMALIZATION",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_CLIP",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_PACK_REDUCE",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_LAZILY_UNPACK",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_CONV_IM2COL",()=>mm.getBool("WEBGL_PACK")),mm.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(function(e){if(null==r){let t=d3(e);r=t.getParameter(t.MAX_TEXTURE_SIZE)}return r})(mm.getNumber("WEBGL_VERSION"))),mm.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(function(e){if(null==a){let t=d3(e);a=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,a)})(mm.getNumber("WEBGL_VERSION"))),mm.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=mm.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t=d3(e);return mh(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:mh(t,"EXT_disjoint_timer_query")?1:0}(e)}),mm.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>mm.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!K.C2$.isMobile()),mm.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(function(e){if(0===e)return!1;let t=d3(e);if(1===e){if(!mh(t,"OES_texture_float"))return!1}else if(!mh(t,"EXT_color_buffer_float"))return!1;let n=mp(t);return n})(mm.getNumber("WEBGL_VERSION"))),mm.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!mm.getBool("WEBGL_FORCE_F16_TEXTURES")&&mm.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),mm.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(function(e){if(0===e)return!1;let t=d3(e);if(1===e){if(!mh(t,"OES_texture_float")||!mh(t,"WEBGL_color_buffer_float"))return!1}else{if(mh(t,"EXT_color_buffer_float"))return mp(t);let e="EXT_color_buffer_half_float";if(mh(t,e)){let n=t.getExtension(e);return function(e,t){let n=d5(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}let n=mp(t);return n})(mm.getNumber("WEBGL_VERSION"))),mm.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(function(e){if(2!==e)return!1;let t=d3(e),n=null!=t.fenceSync;return n})(mm.getNumber("WEBGL_VERSION"))),mm.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>{let e=mm.getBool("WEBGL_RENDER_FLOAT32_ENABLED");return e?4:0}),mm.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),mm.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>K.C2$.isMobile()?1:-1,e=>{if(e<0&&-1!==e)throw Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)}),mm.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),mm.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),mm.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),mm.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),mm.registerFlag("WEBGL_EXP_CONV",()=>!1),mm.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>mm.getBool("IS_TEST")),mm.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),mm.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),mm.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);var mg=n(9610),my=n(5156);function mb(e,t,n){let r,a,i;let o={},s={},u={},l=[],c=null,h=null;h=e.getUniformLocation(n,"NAN",!1),1===(0,K.OBj)().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(n,"INFINITY",!1));for(let r=0;r<t.variableNames.length;r++){let a=t.variableNames[r];o[a]=e.getUniformLocation(n,a,!1),o[`offset${a}`]=e.getUniformLocation(n,`offset${a}`,!1),t.enableShapeUniforms&&(s[`${a}Shape`]=e.getUniformLocation(n,`${a}Shape`,!1),u[`${a}TexShape`]=e.getUniformLocation(n,`${a}TexShape`,!1))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",!1),i=e.getUniformLocation(n,"outShapeStrides",!1),a=e.getUniformLocation(n,"outTexShape",!1)),t.customUniforms&&t.customUniforms.forEach((t,r)=>{l[r]=e.getUniformLocation(n,t.name,!1)}),{uniformLocations:o,customUniformLocations:l,infLoc:c,nanLoc:h,inShapesLocations:s,inTexShapesLocations:u,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function mv(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((e,n)=>{let r=e.logicalShape,a=t[n],i=a.shape;if(!K.D5U.arraysEqual(r,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${i} must match`);if(e.isUniform&&a.isUniform)return;let o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!K.D5U.arraysEqual(o,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${o} and ${s} must match`)})}function mw(e){return(0,K.OBj)().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var mx=n(8110);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m_{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=y.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=(0,mg.A)();this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?mx.Kn(["r","c","d"],e):mx.RW(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mk{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=y.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=(0,mg.A)();this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?mx.Kn(["r","c","d"],e):mx.RW(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mS{constructor(e){this.variableNames=["A"],this.outTexUsage=b.DOWNLOAD;let t=(0,mg.A)();this.outputShape=e,this.userCode=`
      ${mx.ye}

      void main() {
        float x = getAAtOutCoords();
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mI{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=b.DOWNLOAD;let t=(0,mg.A)();this.outputShape=e,this.userCode=`
      ${mx.ye}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${t.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mE{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=(0,mg.A)();this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length);let r="result";t&&(r="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?mx.nc():mx.ku(e)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${n.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${n.output} = vec4(${r}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mN{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=(0,mg.A)();this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let a=0;a<=1;a++){let i=2*t+a;r+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${t};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${n.texture2D}(A, uv);

            if (offset == 0) {
              result[${i}] = values[0];
            } else if (offset == 1) {
              result[${i}] = values[1];
            } else if (offset == 2) {
              result[${i}] = values[2];
            } else {
              result[${i}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?mx.nc():mx.ku(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${n.output} = ${a};
        }
    `}}function mT(e,t,n,r,a,i){!function(e,t){let n=(0,K.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let n=`[${e}x${t}]`;throw Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){let r=`[${e}x${t}]`,a=`[${n}x${n}]`;throw Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}(t,n);let o=mo(e,()=>e.createTexture(),"Unable to create WebGLTexture."),s=e.TEXTURE_2D;return d8(e,()=>e.bindTexture(s,o)),d8(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),d8(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),d8(e,()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)),d8(e,()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===(0,K.OBj)().getNumber("WEBGL_VERSION")?d8(e,()=>e.texImage2D(s,0,r,t,n,0,a,i,null)):d8(e,()=>e.texStorage2D(s,1,r,t,n)),d8(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:o,texShape:[n,t]}}function mA(e){return e.internalFormatFloat}function mC(e){return e.internalFormatHalfFloat}function mO(e){return e.downloadTextureFormat}function mR(e){return e.internalFormatPackedFloat}function mD(e){return e.internalFormatPackedHalfFloat}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mP{constructor(e){var t;this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];let n=(0,K.OBj)().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,d1[n]=e):this.gl=d3(n);let r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===(0,K.OBj)().getNumber("WEBGL_VERSION")){let e="OES_texture_half_float";if(this.textureFloatExtension=d7(this.gl,"OES_texture_float"),mh(this.gl,e))this.textureHalfFloatExtension=d7(this.gl,e);else if((0,K.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),mh(this.gl,a))this.colorBufferHalfFloatExtension=d7(this.gl,a);else if((0,K.OBj)().get("WEBGL_FORCE_F16_TEXTURES"))throw Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",mh(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(mh(this.gl,a))this.colorBufferHalfFloatExtension=this.gl.getExtension(a);else throw Error("GL context does not support color renderable floats");this.vertexBuffer=function(e){let t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return function(e,t){let n=mo(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return d8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),d8(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,t)}(this.gl),this.indexBuffer=function(e){let t=new Uint16Array([0,1,2,2,1,3]);return function(e,t){let n=mo(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return d8(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),d8(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}(e,t)}(this.gl),this.framebuffer=mo(t=this.gl,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer."),this.textureConfig=d5(this.gl,this.textureHalfFloatExtension)}get debug(){return(0,K.OBj)().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;d8(e,()=>e.finish()),d8(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),d8(e,()=>e.deleteFramebuffer(this.framebuffer)),d8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),d8(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),d8(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){let[a,i]=[n,t];return mT(e,a,i,mA(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){let[a,i]=[n,t];return mT(e,a,i,mC(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){let[a,i]=[n,t];return mT(e,a,i,mO(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){var n;this.throwIfDisposed(),d8(n=this.gl,()=>n.bindTexture(n.TEXTURE_2D,e)),t.data instanceof Uint8Array?2===(0,K.OBj)().getNumber("WEBGL_VERSION")?d8(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.width,t.height,n.RGBA,n.UNSIGNED_BYTE,t.data)):d8(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width,t.height,0,n.RGBA,n.UNSIGNED_BYTE,t.data)):2===(0,K.OBj)().getNumber("WEBGL_VERSION")?d8(n,()=>n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,t)):d8(n,()=>n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),d8(n,()=>n.bindTexture(n.TEXTURE_2D,null))}uploadDenseMatrixToTexture(e,t,n,r){var a,i;let o,s,u;this.throwIfDisposed(),a=this.gl,i=this.textureConfig,d8(a,()=>a.bindTexture(a.TEXTURE_2D,e)),r instanceof Uint8Array?(o=new Uint8Array(t*n*4),s=a.UNSIGNED_BYTE,u=a.RGBA):(o=new Float32Array(t*n*4),s=a.FLOAT,u=i.internalFormatPackedFloat),o.set(r),2===(0,K.OBj)().getNumber("WEBGL_VERSION")?d8(a,()=>a.texSubImage2D(a.TEXTURE_2D,0,0,0,t,n,a.RGBA,s,o)):d8(a,()=>a.texImage2D(a.TEXTURE_2D,0,u,t,n,0,a.RGBA,s,o)),d8(a,()=>a.bindTexture(a.TEXTURE_2D,null))}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){let[a,i]=d6(t,n);return mT(e,a,i,mD(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,r){let[a,i]=d6(t,n);return mT(e,a,i,mR(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(ma(this.gl,this.framebuffer),this.outputTexture=null),d8(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>(function(e,t,n,r){let[a,i]=[n,t],o=new Uint8Array(t*n*4);return d8(e,()=>e.readPixels(0,0,a,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,o)),new Float32Array(o.buffer)})(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,i){return function(e,t,n,r,a,i,o,s){let u=new Float32Array(function(e,t){let[n,r]=d6(e,t);return n*r*4}(i,o));return e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,u),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),u}(this.gl,e,0,0,0,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){let r=new Float32Array(n);return e.bindBuffer(e.PIXEL_PACK_BUFFER,t),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,r),e.bindBuffer(e.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=function(e,t,n,r){let a=e.createBuffer();d8(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));let i=16*t*n;return d8(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),d8(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),d8(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if((0,K.OBj)().getBool("WEBGL_FENCE_API_ENABLED")){let r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let t=e.clientWaitSync(r,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED},t=r}else(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>(function(e,t,n){let r=new Float32Array(t*n*4);return d8(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r})(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;null==this.vertexShader&&(this.vertexShader=/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=(0,mg.A)(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return function(e,t){let n=mo(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(d8(e,()=>e.shaderSource(n,t)),d8(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),Error("Failed to compile vertex shader.");return n}(e,n)}(t));let n=mo(t,()=>t.createProgram(),"Unable to create WebGLProgram.");return d8(t,()=>t.attachShader(n,this.vertexShader)),d8(t,()=>t.attachShader(n,e)),!function(e,t){if(d8(e,()=>e.linkProgram(t)),!(0,K.OBj)().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),Error("Failed to link vertex and fragment shaders.")}(t,n),this.debug&&mt(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=function(e,t,n){d8(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n));let r=mn(e,t,"clipSpacePos",n,3,20,0);return r&&mn(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&d8(this.gl,()=>this.gl.deleteProgram(e))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&mt(this.gl,this.program),d8(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){var r,a;return(this.throwIfDisposed(),n)?mo(r=this.gl,()=>r.getUniformLocation(e,a),'uniform "'+(a=t)+'" not present in program.'):this.gl.getUniformLocation(e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),d8(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){var r;this.throwIfDisposed(),this.throwIfNoProgram(),d8(r=this.gl,()=>{(function(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let e=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw Error(`textureUnit must be in ${e}.`)}})(r,n),d8(r,()=>r.activeTexture(r.TEXTURE0+n)),d8(r,()=>r.bindTexture(r.TEXTURE_2D,e))}),d8(r,()=>r.uniform1i(t,n))}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,a]=d6(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&mt(this.gl,this.program),mi(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;this.debug&&this.debugValidate(),d8(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),d8(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=d7(this.gl,2===(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2();e.endQuery(t.TIME_ELAPSED_EXT);return}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await K.D5U.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){let t=this.gl,n=t.getQueryParameter(e,t.QUERY_RESULT);return n/1e6}{let t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT);return n/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){let t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{let t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=function(e){let t=0;for(;t<e.length;++t){let n=e[t]();if(!n)break}return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){let n;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||("setTimeoutCustom"in(0,K.OBj)().platform&&(n=(0,K.OBj)().platform.setTimeoutCustom.bind((0,K.OBj)().platform)),K.D5U.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),mr(this.gl,e,this.framebuffer),this.debug&&mi(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(mr(this.gl,this.outputTexture,this.framebuffer),this.debug&&mi(this.gl)):ma(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;mr(r,e,this.framebuffer),this.debug&&mi(r),this.outputTexture=e,d8(r,()=>r.viewport(0,0,t,n)),d8(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),d8(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw Error("No GPU program is currently set.")}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let{addImpl:m$,bincountImpl:mF,bincountReduceImpl:mM,castImpl:mB,ceilImpl:mL,concatImpl:mU,equalImpl:mj,expImpl:mz,expm1Impl:mW,floorImpl:mV,gatherNdImpl:mG,gatherV2Impl:mH,greaterImpl:mq,greaterEqualImpl:mX,lessImpl:mK,lessEqualImpl:mZ,linSpaceImpl:mY,logImpl:mQ,maxImpl:mJ,maximumImpl:m0,minimumImpl:m1,multiplyImpl:m2,negImpl:m3,notEqualImpl:m4,prodImpl:m6,raggedGatherImpl:m5,raggedTensorToTensorImpl:m8,rangeImpl:m7,rsqrtImpl:m9,scatterImpl:ge,sigmoidImpl:gt,simpleAbsImpl:gn,sliceImpl:gr,sparseFillEmptyRowsImpl:ga,sparseReshapeImpl:gi,sparseSegmentReductionImpl:go,sqrtImpl:gs,stridedSliceImpl:gu,stringNGramsImpl:gl,stringSplitImpl:gc,stringToHashBucketFastImpl:gh,subImpl:gf,tileImpl:gp,topKImpl:gd,transposeImpl:gm,uniqueImpl:gg}=X;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gy(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function gb(e,t){return 1===t?[e]:gy(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gv{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=mw(this.outputShape.length),0===this.rank)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=gb("rc",this.rank),t=(0,my.kW)(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode=`
        void main() {
          ${t} rc = getOutputCoords();

          if(${n}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)a=`${e[e.length-1-t]},`+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";let t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${t[0]};
      int c = ${t[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${n};
      bool rEdge = rp1 >= ${r};
    `}getOutput(e){let t=this.getSourceCoordsArr(e);if(1===this.rank){let e=this.enableShapeUniforms?"outShape":this.outputShape[0];return`getA(rc), (rc + 1 >= ${e} ? 0. : getA(rc + 1)), 0, 0`}return`getA(${t[0]}),
            cEdge ? 0. : getA(${t[1]}),
            rEdge ? 0. : getA(${t[2]}),
            rEdge || cEdge ? 0. : getA(${t[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gw{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`
        ${t}
        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${e}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${e>0?"}":""}
      `}this.userCode=`
      ${function(e,t){let n=t?mx.al(["r","c","d"],"inputShape"):mx.RW(["r","c","d"],e);return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n}
      return ivec3(r, c, d);
    }
  `}(t,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?mx.nc():mx.ku(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${n}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gx{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){let r;let a=gk(t,n),i=gS(e,a,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let o=g_(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();let e=this.freeTextures[i].shift();return this.usedTextures[i].push(e),e}return a===v.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===v.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===v.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===v.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===v.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),r}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;let a=gk(n,r),i=gS(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);let o=g_(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=(0,K.OBj)().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;let u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);let t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(let e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function g_(e,t,n,r,a){let i;let o=function(e,t){switch(e){case v.PACKED_2X2_FLOAT32:return mR(t);case v.PACKED_2X2_FLOAT16:return mD(t);case v.UNPACKED_FLOAT32:return mA(t);case v.UNPACKED_FLOAT16:return mC(t);case v.PACKED_4X1_UNSIGNED_BYTE:return mO(t);default:throw Error(`Unknown physical texture type ${e}`)}}(t,r);if(a){let[t,n]=d6(e[0],e[1]);i=t*n}else{var s;let[t,n]=(s=e[0],[e[1],s]);i=t*n}let u=function(e,t){if(t===e.R32F)return 4;if(t===e.R16F)return 2;if(t===e.RGBA32F||t===e.RGBA)return 16;if(t===e.RGBA16F)return 8;if(t===e.RGBA8)return 4;throw Error(`Unknown internal format ${t}`)}(n,o);return i*u}function gk(e,t){if(e===b.UPLOAD)return v.PACKED_2X2_FLOAT32;if(e===b.RENDER||null==e)return(0,K.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?v.PACKED_2X2_FLOAT32:v.UNPACKED_FLOAT32:t?v.PACKED_2X2_FLOAT16:v.UNPACKED_FLOAT16;if(e===b.DOWNLOAD||e===b.PIXELS)return v.PACKED_4X1_UNSIGNED_BYTE;throw Error(`Unknown logical texture type ${e}`)}function gS(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gI{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${t}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}let gE="if (isnan(x)) return x;",gN="return abs(x);",gT=gE+`
  return (x < 0.0) ? 0.0 : x;
`,gA=gE+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,gC="return x;",gO=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,gR=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gD=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class gP{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${t}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g${constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length);let t=e.length,n=gb("rc",t),r=(0,my.kW)(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),o=t<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${a});

        setOutput(getChannel(packedInput, ${o}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gF=K.GDt.whereImpl,gM={},gB=(0,K.OBj)().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class gL extends K.Zuw{constructor(e){let t;if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!(0,K.OBj)().getBool("HAS_WEBGL"))throw Error("WebGL is not supported on this device");if(null!=e){if(e instanceof mP)t=e;else{let n=d3((0,K.OBj)().getNumber("WEBGL_VERSION"),e);t=new mP(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{var n;let e=d3((0,K.OBj)().getNumber("WEBGL_VERSION"));t=new mP(e),this.binaryCache=((n=(0,K.OBj)().getNumber("WEBGL_VERSION"))in gM||(gM[n]={}),gM[n]),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new gx(this.gpgpu),this.numMBBeforeWarning=null==(0,K.OBj)().global.screen?1024:(0,K.OBj)().global.screen.height*(0,K.OBj)().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new K.JLz(this,(0,K.SRH)())}nextDataId(){return gL.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if(((0,K.OBj)().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||(0,K.OBj)().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:b.UPLOAD,refCount:1}),r}refCount(e){if(this.texData.has(e)){let t=this.texData.get(e);return t.refCount}return 0}incRef(e){let t=this.texData.get(e);t.refCount++}decRef(e){if(this.texData.has(e)){let t=this.texData.get(e);t.refCount--}}move(e,t,n,r,a){if((0,K.OBj)().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:b.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t,n;let r=this.texData.get(e),{values:a,dtype:i,complexTensorInfos:o,slice:s,shape:u,isPacked:l}=r;if(null!=s){let t;t=l?new gP(u,gC):new gI(u,gC);let n=this.runWebGLProgram(t,[{dataId:e,shape:u,dtype:i}],i),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=a)return this.convertAndCacheOnCPU(e);if("string"===i)return a;let c=null!=this.activeTimers;if(c&&(t=K.D5U.now()),"complex64"===i){let e=this.readSync(o.real.dataId),t=this.readSync(o.imag.dataId);n=K.Wap.mergeRealAndImagArrays(e,t)}else n=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=K.D5U.now()-t),this.convertAndCacheOnCPU(e,n)}async read(e){let t,n;if(this.pendingRead.has(e)){let t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}let r=this.texData.get(e),{values:a,shape:i,slice:o,dtype:s,complexTensorInfos:u,isPacked:l}=r;if(null!=o){let t;t=l?new gP(i,gC):new gI(i,gC);let n=this.runWebGLProgram(t,[{dataId:e,shape:i,dtype:s}],s),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=a)return this.convertAndCacheOnCPU(e);if((0,K.OBj)().getBool("DEBUG")&&!(0,K.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===(0,K.OBj)().getNumber("WEBGL_VERSION"))throw Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null;if("complex64"!==s&&(0,K.OBj)().get("WEBGL_BUFFER_SUPPORTED")){t=this.decode(e);let n=this.texData.get(t.dataId);c=this.gpgpu.createBufferFromTexture(n.texture.texture,...d4(i))}if(this.pendingRead.set(e,[]),"complex64"!==s&&await this.gpgpu.createAndWaitForFence(),"complex64"===s){let e=await Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]),t=e[0],r=e[1];n=K.Wap.mergeRealAndImagArrays(t,r)}else if(null==c)n=this.getValuesFromTexture(e);else{let e=K.D5U.sizeFromShape(i);n=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=t&&this.disposeIntermediateTensorInfo(t),null!=c){let e=this.gpgpu.gl;d8(e,()=>e.deleteBuffer(c))}let h=this.convertAndCacheOnCPU(e,n),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(e=>e(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&(0,K.SRH)().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,t={}){let n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:o,isPacked:s,texture:u}=n;if("complex64"===o)throw Error("Does not support reading texture for complex64 dtype.");if(null!=i){let n;n=s?new gP(a,gC):new gI(a,gC);let r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:o}],o),i=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),i}if(null==u){if(null!=r)throw Error("Data is not on GPU but on CPU.");throw Error("There is no data on GPU or CPU.")}let l=this.decode(e,t.customTexShape),c=(0,K.SRH)().makeTensorFromTensorInfo(l),h=this.texData.get(l.dataId);return Object.assign({tensorRef:c},h.texture)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>K.D5U.decodeString(e));return(0,K.f3b)(e.shape,e.dtype,n)}catch(e){throw Error("Failed to decode encoded string bytes into utf-8")}return(0,K.f3b)(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){let n=e[t];if(!((0,K.OBj)().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===n||596e-10<Math.abs(n)&&65504>Math.abs(n))){if((0,K.OBj)().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=K.D5U.sizeFromShape(t);if((0,K.OBj)().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...d4(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),i}let i=(0,K.OBj)().getBool("WEBGL_PACK")&&!0===r,o=i?ml(t):t,s=i?new mI(o):new mS(o),u=this.runWebGLProgram(s,[{shape:o,dtype:n,dataId:e}],"float32"),l=this.texData.get(u.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(l.texture.texture,l.texShape[0],l.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(u),c}timerAvailable(){return(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let t=this.activeTimers,n=[],r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();let a=K.D5U.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=K.D5U.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);let o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if((0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let e=await Promise.all(a);o.kernelMs=K.D5U.sum(e),o.getExtraProfileInfo=()=>e.map((e,t)=>({name:i[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else o.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,o})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:K.D5U.now(),endMs:null}}endTimer(e){return(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=K.D5U.now(),e)}async getQueryTime(e){return(0,K.OBj)().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(e):e.endMs-e.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:r,usage:a,isPacked:i,slice:o}=this.texData.get(e),s=o&&o.origDataId||e,u=this.dataRefCount.get(s);u>1?this.dataRefCount.set(s,u-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,i)));let l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=gB){return(0,K.OBj)().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&K.D5U.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){K.Wap.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return gF(e.shape,t)}packedUnaryOp(e,t,n){let r=new gP(e.shape,t),a=this.compileAndRun(r,[e],n);return(0,K.SRH)().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){let t=gn(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if((0,K.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gN,e.dtype);let t=new gI(e.shape,gN),n=this.compileAndRun(t,[e]);return(0,K.SRH)().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&K.D5U.isString(n[0])){let a=n.map(e=>K.D5U.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return(0,K.SRH)().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){let t=new g$(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new gv(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){let n=[ms(e.shape),...mu(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[ms(t),...mu(t)],i=new gw(a,n),o=this.runWebGLProgram(i,[r],e.dtype,[n],!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e,t){let n;let r=this.texData.get(e),{isPacked:a,shape:i,dtype:o}=r;if(null!=t){let e=K.D5U.sizeFromShape(i),n=t[0]*t[1]*4;K.D5U.assert(e<=n,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let s=ml(i);n=a?new mk(s):new m_(s);let u=[null!=t?t:d4(s)],l=this.runWebGLProgram(n,[{shape:s,dtype:o,dataId:e}],o,u,!0,t);return{dtype:o,shape:i,dataId:l.dataId}}runWebGLProgram(e,t,n,r,a=!1,i){let o;let s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===y.DENSE){let t=null!=i?i:d4(e.outputShape);u.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===K.D5U.sizeFromShape(s.shape))return u.values=K.D5U.getTypedArrayFromDType(s.dtype,0),s;let l=[],c=t.map(t=>{if("complex64"===t.dtype)throw Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&K.D5U.sizeFromShape(t.shape)<=(0,K.OBj)().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!mc(n.shape,t.shape)){let e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);let h={shape:s.shape,texData:u,isUniform:!1},f=function(e,t,n){let r="";t.concat(n).forEach(t=>{let a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){let i=t.texData.texShape,{useSqueezeShape:o,uniformShape:s,keptDims:u}=my.Tt(e.packedInputs,t.shape,i),l="",c="",h="";if(1===s.length&&e.packedInputs){let e=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){let e=K.D5U.computeStrides(s);h=`${e[0]===i[1]}_${e[e.length-1]===i[1]}`}}else c=`${s[0]>1}_${s[1]>1}`;let f=t.shape.length,p=2===s.length&&K.D5U.arraysEqual(t.shape,i),d=1===K.D5U.sizeFromShape(t.shape),m=K.Wap.getBroadcastDims(t.shape,n.shape),g=!e.packedInputs&&f===n.shape.length&&K.D5U.arraysEqual(i,n.texData.texShape),y=e.packedInputs||s.length>2?"":`${i[0]>1}_${i[1]>1}`;r+=`${f}_${g}_${o?u:""}_${s.length}_${d}_${m}_${p}_${l}_${c}_${h}_${y}_${a}`}else{let e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${a}`}});let a=e.userCode;return e.constructor.name+("_"+r+"_"+a)+`${(0,K.OBj)().getNumber("WEBGL_VERSION")}`}(e,c,h),p=this.getAndSaveBinary(f,()=>/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(function(e,t,n,r){let a=n.map((e,n)=>{let r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=a.map(e=>e.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=my.Vm(a,o,t),u=function(e,t){let n=mo(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(d8(e,()=>e.shaderSource(n,t)),d8(e,()=>e.compileShader(n)),(0,K.OBj)().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw me(t,e.getShaderInfoLog(n)),Error("Failed to compile fragment shader.");return n}(e.gl,s),l=e.createProgram(u);return(0,K.OBj)().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Object.assign({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},mb(e,t,l))})(this.gpgpu,e,c,h)),d=null!=this.activeTimers;d&&(o=this.startTimer()),(0,K.OBj)().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(mv(t.inShapeInfos,n),mv([t.outShapeInfo],[r]));let i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===(0,K.OBj)().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((n,r)=>{let a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations[`offset${a}`],s=t.inShapesLocations[`${a}Shape`],u=t.inTexShapesLocations[`${a}TexShape`];if(s){let{uniformShape:r}=my.Tt(t.program.packedInputs,n.shape,n.texData.texShape);switch(r.length){case 1:e.gl.uniform1iv(s,new Int32Array(r));break;case 2:e.gl.uniform2iv(s,new Int32Array(r));break;case 3:e.gl.uniform3iv(s,new Int32Array(r));break;case 4:e.gl.uniform4iv(s,new Int32Array(r))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i){if(n.isUniform){if(2>K.D5U.sizeFromShape(n.shape))e.gl.uniform1f(i,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(i,t)}return}null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}});let s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){let n=K.D5U.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((n,r)=>{let i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else if("ivec4"===n.type)e.gl.uniform4iv(i,o);else throw Error(`uniform type ${n.type} is not supported yet.`)}),e.executeProgram()}(this.gpgpu,p,c,h,r),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),d&&(o=this.endTimer(o),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(o)}));let m=(0,K.OBj)().get("WEBGL_FLUSH_THRESHOLD");if(m>0){let e=K.D5U.now();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!(0,K.OBj)().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===a){let e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r,a=!1){n=n||t[0].dtype;let i=this.runWebGLProgram(e,t,n,r,a);return i}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!(0,K.OBj)().getBool("IS_TEST")){let e=Object.keys(this.binaryCache);e.forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]})}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=(0,K.lub)(()=>{if(!(0,K.OBj)().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=(0,K.OBj)().getBool("DEBUG");(0,K.OBj)().set("DEBUG",!1);let t=this.abs((0,K.iD$)(1e-8)).dataSync()[0];if((0,K.OBj)().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){let t;let n=this.texData.get(e),{shape:r,dtype:a,values:i,texture:o,usage:s,isPacked:u}=n;if(null!=o)return;let l=null!=this.activeTimers;l&&(t=K.D5U.now());let c=n.texShape;if(null==c&&(c=function(e,t=!1){let n=(0,K.OBj)().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=(0,K.OBj)().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");if(r===1/0&&(0,K.OBj)().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((t,n)=>n>=e.length-2?K.D5U.nearestLargerEven(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length){let t=K.D5U.squeezeShape(e);e=t.newShape}let a=K.D5U.sizeFromShape(e),i=null;e.length<=1&&a<=n?i=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);let o=null!=i&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(null==i||o){if(t){let t=ms(e),n=2,r=2;e.length&&([n,r]=mu(e)),a=t*(n/2)*(r/2),i=K.D5U.sizeToSquarishShape(a).map(e=>2*e)}else i=K.D5U.sizeToSquarishShape(a)}return i}(r,u),n.texShape=c),null!=i){let e;let o=ml(r),s=c[1],h=c[0],f=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(u||!f)&&([s,h]=d6(c[0],c[1])),e=u?new mN(o,f):new mE(o,f);let p=f?[h,s]:c,d=this.makeTensorInfo(p,a),m=this.texData.get(d.dataId);f?m.usage=b.PIXELS:m.usage=b.UPLOAD,m.texShape=p,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(d.dataId),s,h,i);let g=[[h,s]],y=this.runWebGLProgram(e,[d],a,g,!0),v=this.texData.get(y.dataId);n.texShape=v.texShape,n.isPacked=v.isPacked,n.usage=v.usage,(0,K.OBj)().get("ENGINE_COMPILE_ONLY")?this.disposeData(y.dataId):(n.texture=v.texture,n.values=null,this.texData.delete(y.dataId)),this.disposeIntermediateTensorInfo(d),l&&(this.uploadWaitMs+=K.D5U.now()-t)}else{let e=this.acquireTexture(c,s,a,u);n.texture=e}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:r}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){let n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw Error(`Unknown dtype ${t}`)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1048576*this.numMBBeforeWarning){let e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*K.D5U.bytesPerElement(t)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(let[,t]of Object.entries(this.binaryCache)){let n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await (0,K.glt)(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)){if(console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS))throw me(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),Error("Failed to compile fragment shader.");throw Error("Failed to link vertex and fragment shaders.")}return!0}getUniformLocations(){for(let[,e]of Object.entries(this.binaryCache)){let{uniformLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,inShapesLocations:i,inTexShapesLocations:o,outShapeLocation:s,outShapeStridesLocation:u,outTexShapeLocation:l}=mb(this.gpgpu,e.program,e.webGLProgram);e.uniformLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.inShapesLocations=i,e.inTexShapesLocations=o,e.outShapeLocation=s,e.outShapeStridesLocation=u,e.outTexShapeLocation=l}}}gL.nextDataId=0,K.C2$.isBrowser()&&(0,K.jqO)("webgl",()=>new gL,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gU=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class gj{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=K.Wap.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=mw(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let gz=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class gW{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=K.Wap.assertAndGetBroadcastShape(t,n);let a=this.outputShape.length;this.enableShapeUniforms=mw(a);let i="";if(r){if(0===a||1===K.D5U.sizeFromShape(this.outputShape))i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else{let e=(0,my.kW)(a);if(i=`
          ${e} coords = getOutputCoords();
        `,1===a)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let e=gb("coords",a);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${e[a-2]} + 1) >= outShape[${a} - 2];
            bool nextColOutOfBounds =
              (${e[a-1]} + 1) >= outShape[${a} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${e[a-2]} + 1) >= ${this.outputShape[a-2]};
            bool nextColOutOfBounds =
              (${e[a-1]} + 1) >= ${this.outputShape[a-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}}}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gV(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}let gG={kernelName:K.iJz,backendName:"webgl",kernelFunc:gV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gH(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=gV({inputs:{x:r},backend:n}),u=gV({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}let gq={kernelName:K.Zz9,backendName:"webgl",kernelFunc:gH},gX="return (a < 0.) ? b * a : a;",gK=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,gZ={kernelName:K.J$2,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r,o=n.makeTensorInfo([],"float32",K.D5U.createScalarValue(i,"float32")),s=(0,K.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gW(gK,a.shape,o.shape):new gj(gX,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},gY="return (a < 0.) ? b * a : a;",gQ=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,gJ={kernelName:K.o0g,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=(0,K.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gW(gQ,r.shape,a.shape):new gj(gY,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},g0="if (isnan(x)) return x;";function g1({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:a,backend:i})=>{let o;let{x:s}=a,u=r||s.dtype;if(i.shouldExecuteOnCPU([s])&&null!=n){let e=i.texData.get(s.dataId),t=n(e.values,u);return i.makeTensorInfo(s.shape,u,t)}let l=(0,K.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t;return o=l?new gP(s.shape,t):new gI(s.shape,e),i.runWebGLProgram(o,[s],u)}}function g2({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:a,dtype:i}){return({inputs:o,backend:s})=>{let u;let{a:l,b:c}=o;if(r&&"complex64"===l.dtype){let t=s.texData.get(l.dataId),n=s.texData.get(c.dataId),[r,a]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{let[n,r]=t,a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o=new gj(e,l.shape,c.shape);return s.runWebGLProgram(o,[a,i],(0,K.x8V)(n.dtype,r.dtype))}),i=gH({inputs:{real:r,imag:a},backend:s});return s.disposeIntermediateTensorInfo(r),s.disposeIntermediateTensorInfo(a),i}let h=i||(0,K.x8V)(l.dtype,c.dtype);if(("string"===l.dtype||"string"===c.dtype||s.shouldExecuteOnCPU([l,c]))&&null!=a){let e=s.texData.get(l.dataId).values,t=s.texData.get(c.dataId).values,n="string"===l.dtype?K.Wap.fromUint8ToStringArray(e):e,r="string"===l.dtype?K.Wap.fromUint8ToStringArray(t):t,[i,o]=a(l.shape,c.shape,n,r,h),u=s.makeTensorInfo(o,h),f=s.texData.get(u.dataId);return f.values=i,u}let f=(0,K.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t;return u=f?new gW(t,l.shape,c.shape,n):new gj(e,l.shape,c.shape),s.runWebGLProgram(u,[l,c],h)}}function g3(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?gR:gT;if("elu"===e)return t?gO:"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?gD:gA;if("prelu"===e)return t?gQ:gY;if("leakyrelu"===e)return t?gK:gX;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g4{constructor(e,t,n,r=!1,a=!1,i=!1,o=null,s=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=mw(this.outputShape.length);let l=r?e[1]:e[2],c=Math.ceil(l/2),h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",d="";o&&(p=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${o}
        }`:u?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${o}
        }`:`vec4 activation(vec4 x) {
          ${o}
        }`,d="result = activation(result);"),i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let m="rc.x",g="rc.x";e[0]<t[0]?m=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(g=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`
      ${p}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${c}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${c}; i++) {
          int batchA = ${m};
          int batchB = ${g};
          vec4 a = getMatrixA(batchA, ${r?"i * 2, rc.y":"rc.y, i * 2"});
          vec4 b = getMatrixB(batchB, ${a?"rc.z, i * 2":"i * 2, rc.z"});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${h[0]} * ${f[0]});
          result += (${h[1]} * ${f[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${i?"result += getBiasAtOutCoords();":""}

        ${d}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g6={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class g5{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=K.Wap.assertAndGetBroadcastShape(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g8="return a * b;";function g7(e){let t;let{inputs:n,backend:r}=e,{a,b:i}=n,o=K.Wap.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){let e=r.texData.get(a.dataId),t=r.texData.get(i.dataId),n=new g5(g6.REAL,a.shape,i.shape),o=new g5(g6.IMAG,a.shape,i.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],u=r.runWebGLProgram(n,s,"float32"),l=r.runWebGLProgram(o,s,"float32"),c=gH({inputs:{real:u,imag:l},backend:r});return r.disposeIntermediateTensorInfo(u),r.disposeIntermediateTensorInfo(l),c}if(r.shouldExecuteOnCPU([a,i])){let e=r.texData.get(a.dataId),t=r.texData.get(i.dataId),[n,s]=m2(a.shape,i.shape,e.values,t.values,o),u=r.makeTensorInfo(s,o),l=r.texData.get(u.dataId);return l.values=n,u}return t=(0,K.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gW(g8,a.shape,i.shape):new gj(g8,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}let g9={kernelName:K.wYn,backendName:"webgl",kernelFunc:g7};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ye(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,o=K.D5U.sizeFromShape(a.shape),s=K.D5U.inferFromImplicitShape(i,o),u=K.D5U.sizeFromShape(s);K.D5U.assert(o===u,()=>`The new shape (${s}) has ${u} elements and the old shape (${a.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`);let l=n.texData.get(a.dataId);return!l.isPacked||mc(a.shape,s)||null!==l.texture&&mc(l.shape,s)?(n.incRef(a.dataId),{dataId:a.dataId,shape:s,dtype:a.dtype}):/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n){let r=[ms(e.shape),...mu(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[ms(t),...mu(t)],o=new gw(i,r),s=n.runWebGLProgram(o,[a],e.dtype,[r],!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,s,n)}let yt={kernelName:K.HZH,backendName:"webgl",kernelFunc:ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yn{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let o=4*Math.floor(n/4),s=n%4,u="sumValue += dot(values, ones);";if(null!=t){let e=1/t;u=`sumValue += dot(values * ${K.D5U.isInt(e)?e.toPrecision(2):e}, ones);`}let l="";a%n>0&&(l=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${l}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        float sumValue = 0.0;

        for (int i = 0; i < ${o}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${o};
        if (${1===s}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${2===s}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${3===s}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yr{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");let u=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");let l=4*Math.floor(n/4),c=n%4,h=`
      if (${"sum"===t}) {
        sumValue += dot(values, ones);
      } else if (${"prod"===t}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${s}(values, minMaxValue);
        if (${"min"===t} || ${"max"===t}) {
          minMaxValue = ${s}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";"all"===t?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):"any"===t&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";a%n>0&&(p=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${o};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${n};

        vec4 minMaxValue = vec4(${o});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${l}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${l};
        if (${1===c}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${2===c}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${3===c}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}function ya(e,t,n,r){let a=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t=[];for(;0===t.length||1!==t[t.length-1].outSize;){let n=t.length?t[t.length-1].outSize:e[1],r=K.Wap.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e;for(let o=0;o<a.length;o++){let s,u;let{inSize:l,windowSize:c,outSize:h}=a[o];s="mean"===n?0===o?new yn({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:h},l):new yn({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:h}):new yr({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:h},n),u=i,i=r.runWebGLProgram(s,[i],t),u.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(u)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yi{constructor(e,t){this.variableNames=["A"];let n=Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;let r=(0,my.kW)(this.rank),a=function(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${a}));
    }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yo{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=(0,my.kW)(this.rank),a=gy("rc",this.rank),i=Array(this.rank);for(let e=0;e<t.length;e++)i[t[e]]=a[e];let o=`vec2(${i.slice(-2).join()})`,s=`++${a[this.rank-1]} < ${n[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${o})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${s}) {
        result[1] = ${u};
      }
      --${a[this.rank-1]};
      if(++${a[this.rank-2]} < ${n[this.rank-2]}) {
        result[2] = ${u};
        if(${s}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ys(e,t,n){let r=(0,K.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yo(e.shape,t):new yi(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yu(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:o}=r;return(/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=e.shape.length,i=K.D5U.parseAxisParam(t,e.shape),o=i,s=K.Wap.getAxesPermutation(o,a),u=null!=s,l=e;u&&(l=ys(e,s,r),o=K.Wap.getInnerMostAxes(o.length,a)),K.Wap.assertAxesAreInnerMostDims("sum",o,a);let[c,h]=K.Wap.computeOutAndReduceShapes(l.shape,o),f=c;n&&(f=K.Wap.expandShapeToKeepDim(c,i));let p=K.D5U.sizeFromShape(h),d=K.D5U.sizeFromShape(e.shape),m=ye({inputs:{x:l},attrs:{shape:[d/p,p]},backend:r}),g=(0,K.z4k)(e.dtype),y=ya(m,g,"sum",r),b=ye({inputs:{x:y},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(y),u&&r.disposeIntermediateTensorInfo(l),b}(a,i,o,n))}let yl={kernelName:K.GBy,backendName:"webgl",kernelFunc:yu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yc(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{perm:o}=a,s=i.shape.length,u=Array(s);for(let e=0;e<u.length;e++)u[e]=i.shape[o[e]];if(r.shouldExecuteOnCPU([i])){let e=r.texData.get(i.dataId),n=e.values,a=gm(n,i.shape,i.dtype,o,u);t=r.makeTensorInfo(u,i.dtype);let s=r.texData.get(t.dataId);s.values=a}else t=ys(i,o,r);return t}let yh={kernelName:K.G3Y,backendName:"webgl",kernelFunc:yc};function yf({a:e,b:t,transposeA:n,transposeB:r,backend:a,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:u=null}){let l;let c=e.shape.length,h=t.shape.length,f=n?e.shape[c-2]:e.shape[c-1],p=r?t.shape[h-1]:t.shape[h-2],d=n?e.shape[c-1]:e.shape[c-2],m=r?t.shape[h-2]:t.shape[h-1],g=e.shape.slice(0,-2),y=t.shape.slice(0,-2),b=K.D5U.sizeFromShape(g),v=K.D5U.sizeFromShape(y),w=K.Jyw.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)),x=w.concat([d,m]);K.D5U.assert(f===p,()=>`Error in matMul: inner shapes (${f}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let _=n?[b,f,d]:[b,d,f],k=r?[v,m,p]:[v,p,m],S=ye({inputs:{x:e},backend:a,attrs:{shape:_}}),I=ye({inputs:{x:t},backend:a,attrs:{shape:k}}),E=[S,I],N=Math.max(b,v),T=n?S.shape[1]:S.shape[2],A=null!=i,C=null!=o,O="leakyrelu"===u,R=null!=u?g3(u,!0):null;if((1===d||1===m)&&T>1e3&&!1===(A||C||O||null!=R)){let e=S,t=I;n&&(e=yc({inputs:{x:S},backend:a,attrs:{perm:[0,2,1]}}),E.push(e)),r&&(t=yc({inputs:{x:I},backend:a,attrs:{perm:[0,2,1]}}),E.push(t));let i=e;1!==m&&(i=ye({inputs:{x:e},backend:a,attrs:{shape:[N,T,1]}}),E.push(i));let o=t;1===m&&(o=ye({inputs:{x:t},backend:a,attrs:{shape:[N,1,T]}}),E.push(o));let s=g7({inputs:{a:i,b:o},backend:a});l=yu({inputs:{x:s},backend:a,attrs:{axis:1===m?2:1,keepDims:!0}}),E.push(s)}else{let u=(0,K.x8V)(e.dtype,t.dtype),c=new g4(_,k,[N,d,m],n,r,A,R,C,O),h=[S,I];if(null!=i&&h.push(i),C&&h.push(o),O){let e=a.makeTensorInfo([],"float32",K.D5U.createScalarValue(s,"float32"));h.push(e),E.push(e)}l=a.runWebGLProgram(c,h,u)}let D=ye({inputs:{x:l},backend:a,attrs:{shape:x}});for(let e of(E.push(l),E))a.disposeIntermediateTensorInfo(e);return D}let yp={kernelName:K.usg,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i,bias:o,preluActivationWeights:s}=t,{transposeA:u,transposeB:l,activation:c,leakyreluAlpha:h}=r;return yf({a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:h,activation:c})}},yd="return abs(x);",ym={kernelName:K.SYM,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r}=e,{x:a}=n;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){let e=r.texData.get(a.dataId),t=gn(e.values);return r.makeTensorInfo(a.shape,a.dtype,t)}return t=(0,K.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new gP(a.shape,yd):new gI(a.shape,yd),r.runWebGLProgram(t,[a],a.dtype)}},yg=gE+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,yy=g1({opSnippet:yg}),yb={kernelName:K.VGw,backendName:"webgl",kernelFunc:yy},yv=gE+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,yw=g1({opSnippet:yv}),yx={kernelName:K.SpW,backendName:"webgl",kernelFunc:yw},y_="return a + b;",yk=g2({opSnippet:y_,packedOpSnippet:y_,supportsComplex:!0,cpuKernelImpl:m$}),yS={kernelName:K.mm_,backendName:"webgl",kernelFunc:yk};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yI{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);let n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`
      void main() {
        ${n.join("\n        ")}

        float result = ${r};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yE{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>`T${t}`);let n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>`v${e}`).join(" + ");this.userCode=`
      void main() {
        ${n.join("\n        ")}

        vec4 result = ${r};
        setOutput(result);
      }
    `}}let yN={kernelName:K.Xze,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t){let{inputs:n,backend:r}=t;if(1===n.length)return gV({inputs:{x:n[0]},backend:r});if(n.length>(0,K.OBj)().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let t=Math.floor(n.length/2),a=e({inputs:n.slice(0,t),backend:r}),i=e({inputs:n.slice(t),backend:r});return e({inputs:[a,i],backend:r})}let a=n.map(e=>e.dtype).reduce((e,t)=>(0,K.x8V)(e,t)),i=n.map(e=>e.shape),o=(0,K.OBj)().getBool("WEBGL_PACK"),s=o?new yE(n[0].shape,i):new yI(n[0].shape,i);return r.runWebGLProgram(s,n,a)}},yT={kernelName:K.oT6,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:o,keepDims:s}=a,u=i.shape.length,l=K.D5U.parseAxisParam(o,i.shape),c=l,h=K.Wap.getAxesPermutation(c,u),f=i;null!=h&&(f=yc({inputs:{x:i},backend:r,attrs:{perm:h}}),c=K.Wap.getInnerMostAxes(c.length,u)),K.Wap.assertAxesAreInnerMostDims("all",c,u);let[p,d]=K.Wap.computeOutAndReduceShapes(f.shape,c),m=K.D5U.sizeFromShape(d),g=ye({inputs:{x:f},backend:r,attrs:{shape:[-1,m]}}),y=ya(g,g.dtype,"all",r);if(s){let e=K.Wap.expandShapeToKeepDim(p,l);t=ye({inputs:{x:y},backend:r,attrs:{shape:e}})}else t=ye({inputs:{x:y},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),null!=h&&r.disposeIntermediateTensorInfo(f),t}},yA={kernelName:K.IKK,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:o,keepDims:s}=a,u=i.shape.length,l=K.D5U.parseAxisParam(o,i.shape),c=l,h=K.Wap.getAxesPermutation(c,u),f=i;null!=h&&(f=yc({inputs:{x:i},backend:r,attrs:{perm:h}}),c=K.Wap.getInnerMostAxes(c.length,u)),K.Wap.assertAxesAreInnerMostDims("any",c,u);let[p,d]=K.Wap.computeOutAndReduceShapes(f.shape,c),m=K.D5U.sizeFromShape(d),g=ye({inputs:{x:f},backend:r,attrs:{shape:[-1,m]}}),y=ya(g,g.dtype,"any",r);if(s){let e=K.Wap.expandShapeToKeepDim(p,l);t=ye({inputs:{x:y},backend:r,attrs:{shape:e}})}else t=ye({inputs:{x:y},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),null!=h&&r.disposeIntermediateTensorInfo(f),t}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yC{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:a,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};
          float candidate = getA(batch, inIdx);
          if (candidate ${"max"===t?">":"<"} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yO{constructor(e,t,n,r){let a,i;this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,K.D5U.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);let o=e[e.length-1],s=Math.ceil(o/t);this.outputShape=e.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");let u=this.outputShape,l=u.length,c=(0,my.kW)(l),h=gb("coords",l);if(1===s){i=l+1;let e=(0,my.kW)(i);a=`
        ${e} sourceLocR = ${e}(${h.join()}, 0);
        ++${h[l-1]};
        ${e} sourceLocG = ${e}(${h.join()}, 0);
        ++${h[l-2]};
        ${e} sourceLocA = ${e}(${h.join()}, 0);
        --${h[l-1]};
        ${e} sourceLocB = ${e}(${h.join()}, 0);
        --${h[l-2]};`}else i=l,a=`
        ${c} sourceLocR = coords;
        ++${h[l-1]};
        ${c} sourceLocG = coords;
        ++${h[l-2]};
        ${c} sourceLocA = coords;
        --${h[l-1]};
        ${c} sourceLocB = coords;
        --${h[l-2]};`;let f=["x","y","z","w","u","v"].slice(0,i),p="."+f[i-1],d=f.map(e=>"int "+e),m=gb("sourceLocR",i-1).concat("inIdx.r"),g=gb("sourceLocG",i-1).concat("inIdx.g"),y=gb("sourceLocB",i-1).concat("inIdx.b"),b=gb("sourceLocA",i-1).concat("inIdx.a"),v=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()})));`,w=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${y.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,x=r?"":`
      float getBestIndicesAChannel(${d.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${d.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${x}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${h[l-1]} < ${u[l-1]-1};
        bool hasNextRow = ${h[l-2]} < ${u[l-2]-1};
        ${a}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${t};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${w};

        for (int i = 0; i < ${t}; i++) {
          inIdx = srcIdx;
          ${v}
          vec4 candidate = ${w};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${"max"===n?"greaterThan":"lessThan"}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}function yR(e,t,n,r){let a=[n];if(K.Wap.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!(0,K.OBj)().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let n=[],i=e.texData.get(t.dataId),o=null!==i&&i.isPacked,s=t;o&&n.push(s=e.unpackTensor(t));let[u,l]=K.Wap.computeOutAndReduceShapes(s.shape,a),c=K.D5U.sizeFromShape(l),h=ye({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});n.push(h);let f=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t,n,r,a=null){let i=n.shape[0],o=n.shape[1];null!=a&&(i=a.shape[0],o=a.shape[1]);let s=K.Wap.computeOptimalWindowSize(o),u={windowSize:s,inSize:o,batchSize:i,outSize:Math.ceil(o/s)},l=new yC(u,r,null==a),c=[n];null!=a&&c.push(a);let h=t.runWebGLProgram(l,c,"int32");if(1===h.shape[1])return h;let f=e(t,n,r,h);return t.disposeIntermediateTensorInfo(h),f}(e,h,r);n.push(f);let p=ye({inputs:{x:f},backend:e,attrs:{shape:u}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),p}return function e(t,n,r,a=null){let i=null!=a?a.shape:n.shape,o=i[i.length-1],s=K.Wap.computeOptimalWindowSize(o),u=new yO(i,s,r,null==a),l=t.runWebGLProgram(u,null==a?[n]:[n,a],"int32");if(l.shape.length===n.shape.length){let a=e(t,n,r,l);return t.disposeIntermediateTensorInfo(l),a}return l}(e,t,r)}let yD={kernelName:K.sJF,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,o=K.D5U.parseAxisParam(i,a.shape),s=K.Wap.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(l.push(u=yc({inputs:{x:a},backend:n,attrs:{perm:s}})),o=K.Wap.getInnerMostAxes(o.length,u.shape.length)),K.Wap.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);let c=yR(n,u,o[0],"max");return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},yP={kernelName:K.aJk,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,o=K.D5U.parseAxisParam(i,a.shape),s=K.Wap.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(l.push(u=yc({inputs:{x:a},backend:n,attrs:{perm:s}})),o=K.Wap.getInnerMostAxes(o.length,u.shape.length)),K.Wap.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);let c=yR(n,u,o[0],"min");return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},y$=gE+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,yF=g1({opSnippet:y$}),yM={kernelName:K.M2y,backendName:"webgl",kernelFunc:yF},yB=g1({opSnippet:gE+"return log(x + sqrt(x * x + 1.0));"}),yL={kernelName:K.qw7,backendName:"webgl",kernelFunc:yB},yU=gE+`
  return atan(x);
`,yj=g1({opSnippet:yU}),yz={kernelName:K.jMg,backendName:"webgl",kernelFunc:yj},yW=gU+`
  return atan(a, b);
`,yV=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+gz+`
  return result;
`,yG=g2({opSnippet:yW,packedOpSnippet:yV}),yH={kernelName:K.QCc,backendName:"webgl",kernelFunc:yG},yq=gE+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,yX=g1({opSnippet:yq}),yK={kernelName:K.Oyi,backendName:"webgl",kernelFunc:yX};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yZ{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw Error("Cannot compute positions for average pool.");let i=e.filterWidth,o=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;let d="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`,y="0.0";if(d||(y="-1.0 / 1e-20"),n){this.userCode=`
        const ivec2 strides = ivec2(${o}, ${s});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${c};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${l}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?a?m:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let b=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(b="avgValue / count");let v=4*Math.floor(i/4),w=i%4,x=`
      if (${d}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${s});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${c};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${v}; wC += 4) {
            int xC = xCCorner + wC * ${l};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              getValue(batch, xR, xC + 3 * ${l}, d)
            );

            ${x}
          }

          int xC = xCCorner + ${v};
          if (${1===w}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${x}
          } else if (${2===w}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              initializationValue,
              initializationValue
            );

            ${x}
          } else if (${3===w}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${l}, d),
              getValue(batch, xR, xC + 2 * ${l}, d),
              initializationValue
            );

            ${x}
          }
        }
        setOutput(${b});
      }
    `}}class yY{constructor(e,t,n,r=!1,a=!1){if(this.variableNames=["x"],"avg"===t&&n)throw Error("Cannot compute positions for average pool.");let i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,u=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,d=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;let b="avg"===t,v="0.0";if(b||(v="-1.0 / 1e-20"),n){this.userCode=`
        const ivec3 strides =
            ivec3(${o}, ${s}, ${u});
        const ivec3 pads = ivec3(${m}, ${g}, ${y});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${l}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${c}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${d};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?a?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${d} +
                      wR * ${d} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / count");let x=4*Math.floor(i/4),_=i%4,k=`
      if (${b}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${o}, ${s}, ${u});
      const ivec3 pads = ivec3(${m}, ${g}, ${y});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${l}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${x}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${k}
            }

            int xC = xCCorner + ${x};
            if (${1===_}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${2===_}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${k}
            } else if (${3===_}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${k}
            }
          }
          setOutput(${w});
        }
      }
    `}}let yQ={kernelName:K.JhU,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;md(a,"avgPool");let{filterSize:i,strides:o,pad:s,dimRoundingMode:u}=r;K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(o,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);let l=K.Wap.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&K.D5U.arraysEqual(l.inShape,l.outShape))return gV({inputs:{x:a},backend:n});let c=new yZ(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}},yJ={kernelName:K._k9,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dimRoundingMode:u,dataFormat:l}=r,c=K.Wap.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,l),h=new yY(c,"avg",!1);return n.runWebGLProgram(h,[a],"float32")}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y0{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${l}, ${c});
      const float avgMultiplier = float(${1/(t*n)});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${s};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${o}) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class y1{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=c-1-e.padInfo.front,d=h-1-e.padInfo.top,m=f-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${p}, ${d}, ${m});
      const float avgMultiplier = float(${1/(t*n*r)});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${c};
            wD += ${s}) {
          float dyD = float(dyDCorner + wD) / ${a}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${l}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let y2={kernelName:K.IMb,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=r,c=K.Wap.computePool3DInfo(i.shape,o,s,[1,1,1],u,l),h=new y1(c);return n.runWebGLProgram(h,[a],i.dtype)}},y3={kernelName:K.ROF,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t;md([a,i],"avgPoolGrad");let{filterSize:o,strides:s,pad:u}=r,l=K.Wap.computePool2DInfo(i.shape,o,s,1,u),c=new y0(l);return n.runWebGLProgram(c,[a],i.dtype)}},y4={kernelName:K.XLW,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{a,b:i}=t,{transposeA:o,transposeB:s}=r;return yf({a,b:i,transposeA:o,transposeB:s,backend:n})}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y6{constructor(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],K.Wap.assertAndGetBroadcastShape(e,t),K.Wap.assertAndGetBroadcastShape(e,n);let o="0.0";null!=r&&(K.Wap.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="1.0";null!=a&&(K.Wap.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${o};
        float scale = ${s};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y5{constructor(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],K.Wap.assertAndGetBroadcastShape(e,t),K.Wap.assertAndGetBroadcastShape(e,n);let o="vec4(0.0)";null!=r&&(K.Wap.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=a&&(K.Wap.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${o};
        vec4 scale = ${s};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let y8=({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:a,variance:i,offset:o,scale:s}=e;K.D5U.assert(a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),K.D5U.assert(null==o||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),K.D5U.assert(null==s||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:u}=n;null==u&&(u=.001);let l=[r,a,i],c=null;null!=o&&(c=o.shape,l.push(o));let h=null;null!=s&&(h=s.shape,l.push(s));let f=(0,K.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new y5(r.shape,a.shape,i.shape,c,h,u):new y6(r.shape,a.shape,i.shape,c,h,u),p=t.runWebGLProgram(f,l,l[0].dtype);return p},y7={kernelName:K.sHE,backendName:"webgl",kernelFunc:y8};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y9{constructor(e){let t;this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let n=(0,my.kW)(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let r=function(e){if(1===e)return"sourceLoc";if(e<=6)return be.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank),a=e.map((e,t)=>`sourceLoc.${be[t]} = start[${t}] + coords.${be[t]};`);t=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${a.join("\n")}
      `,this.userCode=`
      void main() {
        ${t}
        setOutput(getSource(${r}));
      }
    `}}let be=["x","y","z","w","u","v"];/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bt{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=(0,my.kW)(this.rank),n=gb("coords",this.rank),r=gb("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,i=`getChannel(getSource(${r.join()}), ${a})`,o=`
      result.x = ${i};
      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${i};
        --${r[this.rank-1]};
      }
    `,s=1===this.rank?"":`
      --${n[this.rank-1]};
      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${i};
        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`
      void main() {
        ${t} coords = getOutputCoords();
        ${t} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${o}
        ${s}
        setOutput(result);
      }
    `}}function bn(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:o}=r,[s,u]=K.kuN.parseSliceParams(a,i,o);if(K.kuN.assertParamsValid(a,s,u),0===K.D5U.sizeFromShape(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){let e=n.texData.get(a.dataId),t=gr(e.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,t)}let{isPacked:l}=n.texData.get(a.dataId),c=K.kuN.isSliceContinous(a.shape,s,u);if(l||!c){let e=(0,K.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bt(u):new y9(u);return n.runWebGLProgram(e,[a],a.dtype,[s])}return n.uploadToGPU(a.dataId),/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;let s=K.kuN.computeFlatOffset(t,K.D5U.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};let u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,s,u,n)}let br={kernelName:K.p2w,backendName:"webgl",kernelFunc:bn},ba=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:o}=r;K.D5U.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let s=i.reduce((e,t)=>e*t),u=K.Wap.getReshaped(a.shape,i,s),l=K.Wap.getPermuted(u.length,i.length),c=K.Wap.getReshapedPermuted(a.shape,i,s),h=K.Wap.getSliceBeginCoords(o,i.length),f=K.Wap.getSliceSize(c,o,i.length),p=[],d=ye({inputs:{x:a},backend:n,attrs:{shape:u}}),m=yc({inputs:{x:d},backend:n,attrs:{perm:l}}),g=ye({inputs:{x:m},backend:n,attrs:{shape:c}}),y=bn({inputs:{x:g},backend:n,attrs:{begin:h,size:f}});return p.push(d),p.push(m),p.push(g),p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y},bi={kernelName:K.zws,backendName:"webgl",kernelFunc:ba},bo={kernelName:K.zvY,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o}=r,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=mF(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}},bs={kernelName:K.eEB,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=K.Wap.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},bu=g2({opSnippet:"return float(a != b);",cpuKernelImpl:m4,dtype:"bool"}),bl={kernelName:K.yQU,backendName:"webgl",kernelFunc:bu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bc(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return gV({inputs:{x:a.complexTensorInfos.real},backend:n})}let bh={kernelName:K.xJR,backendName:"webgl",kernelFunc:bc},bf={kernelName:K.RFZ,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t){let{inputs:n,backend:r,attrs:a}=t,{x:i}=n,{dtype:o}=a;if("complex64"===o){if("complex64"===i.dtype)return gV({inputs:{x:i},backend:r});let t=K.lls(i.shape),n=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),a=gH({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===i.dtype){let t=bc({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(t),n}if(!K.D5U.hasEncodingLoss(i.dtype,o)){let e=gV({inputs:{x:i},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:o}}if(r.shouldExecuteOnCPU([i])){let e=r.texData.get(i.dataId).values,[t,n,a]=mB(e,i.shape,i.dtype,o);return r.makeTensorInfo(t,n,a)}if("int32"===o)return function(e,t){let n=new gI(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){let e=r.makeTensorInfo([],"bool",K.D5U.getTypedArrayFromDType("bool",1)),t=bu({inputs:{a:i,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw Error(`Error in Cast: failed to cast ${i.dtype} to ${o}`)}},bp="return ceil(x);",bd=g1({opSnippet:bp,packedOpSnippet:bp,cpuKernelImpl:mL}),bm={kernelName:K.gJX,backendName:"webgl",kernelFunc:bd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bg{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class by{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}let bb={kernelName:K.xnO,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{clipValueMin:o,clipValueMax:s}=a;return t=(0,K.OBj)().getBool("WEBGL_PACK_CLIP")?new by(i.shape):new bg(i.shape),r.runWebGLProgram(t,[i],i.dtype,[[o],[s]])}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bv{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bw(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}let bx={kernelName:K.yj2,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),i=new bv(r.shape),o=[bw(r,a.complexTensorInfos.real),bw(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b_{constructor(e){this.outputShape=[],this.outputShape=K.Wap.computeOutShape(e,1),this.variableNames=e.map((e,t)=>`T${t}`);let t=Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];let n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){let r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}let r=t.length,a=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${a}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${n.join("\n        ")}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bk{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=K.Wap.computeOutShape(e,t);let n=this.outputShape,r=n.length,a=(0,my.kW)(r),i=gb("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>`T${t}`);let s=Array(e.length-1);s[0]=e[0][t];for(let n=1;n<s.length;n++)s[n]=s[n-1]+e[n][t];let u=o[t],l=o.slice(-2),c=o.join(),h=`if (${u} < ${s[0]}) {
        return getChannel(
            getT0(${c}), vec2(${l.join()}));
        }`;for(let e=1;e<s.length;e++){let t=s[e-1];h+=`
        if (${u} < ${s[e]}  && ${u} >= ${s[e-1]}) {
          return getChannel(
            getT${e}(${bS(o,u,t)}),
            vec2(${bS(l,u,t)}));
        }`}let f=s.length,p=s[s.length-1];h+=`
        return getChannel(
          getT${f}(${bS(o,u,p)}),
          vec2(${bS(l,u,p)}));`,this.userCode=`
      float getValue(${o.map(e=>"int "+e)}) {
        ${h}
      }

      void main() {
        ${a} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[r-1]} = ${i[r-1]} + 1;
        if (${i[r-1]} < ${n[r-1]}) {
          result.g = getValue(${i});
        }

        ${i[r-2]} = ${i[r-2]} + 1;
        if (${i[r-2]} < ${n[r-2]}) {
          result.a = getValue(${i});
        }

        ${i[r-1]} = ${i[r-1]} - 1;
        if (${i[r-2]} < ${n[r-2]} &&
            ${i[r-1]} < ${n[r-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function bS(e,t,n){let r=e.indexOf(t),a=e.map((e,t)=>t===r?`${e} - ${n}`:e);return a.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bI(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.texData.get(r.dataId);return gV({inputs:{x:a.complexTensorInfos.imag},backend:n})}let bE={kernelName:K.J_u,backendName:"webgl",kernelFunc:bI};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bN(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=K.D5U.parseAxisParam(a,t[0].shape)[0],o=t.map(e=>e.shape);K.Wap.assertParamsConsistent(o,i);let s=K.Wap.computeOutShape(t.map(e=>e.shape),i);if(0===K.D5U.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);let u=t.filter(e=>K.D5U.sizeFromShape(e.shape)>0);return 1===u.length?gV({inputs:{x:u[0]},backend:n}):/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t,n,r){let a=t[0].dtype;if("complex64"===a){let a=t.map(e=>bc({inputs:{input:e},backend:r})),i=t.map(e=>bI({inputs:{input:e},backend:r})),o=e(a,n,r),s=e(i,n,r),u=gH({inputs:{real:o,imag:s},backend:r});return a.forEach(e=>r.disposeIntermediateTensorInfo(e)),i.forEach(e=>r.disposeIntermediateTensorInfo(e)),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),u}let i=r.shouldExecuteOnCPU(t);if("string"===a&&(i=!0),i){let e=t.map(e=>{let t=K.D5U.sizeFromShape(e.shape.slice(n));return ye({inputs:{x:e},backend:r,attrs:{shape:[-1,t]}})}),i=e.map(e=>({vals:r.readSync(e.dataId),shape:e.shape})),o=K.Wap.computeOutShape(e.map(e=>e.shape),1),s=1===e[0].shape[0],u=mU(i,o,a,s),l=K.Wap.computeOutShape(t.map(e=>e.shape),n),c=r.makeTensorInfo(l,a,u);return e.forEach(e=>r.disposeIntermediateTensorInfo(e)),c}let o=(0,K.OBj)().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(t.length>o){let a=[];for(let i=0;i<t.length;i+=o){let s=t.slice(i,i+o);a.push(e(s,n,r))}let i=e(a,n,r);for(let e of a)r.disposeIntermediateTensorInfo(e);return i}if((0,K.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].shape.length>1){let e=new bk(t.map(e=>e.shape),n);return r.runWebGLProgram(e,t,a)}let{tensors2D:s,outShape:u}=function(e,t,n){let r=K.Wap.computeOutShape(e.map(e=>e.shape),t),a=e.map(e=>ye({inputs:{x:e},attrs:{shape:[-1,K.D5U.sizeFromShape(e.shape.slice(t))]},backend:n}));return{tensors2D:a,outShape:r}}(t,n,r),l=new b_(s.map(e=>e.shape)),c=r.runWebGLProgram(l,s,a);s.forEach(e=>r.disposeIntermediateTensorInfo(e));let h=ye({inputs:{x:c},attrs:{shape:u},backend:r});return r.disposeIntermediateTensorInfo(c),h}(u,i,n)}let bT={kernelName:K.Eh3,backendName:"webgl",kernelFunc:bN};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bA{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let i=e.padInfo.top,o=e.padInfo.left,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=4*Math.floor(e.inChannels/4),d=e.inChannels%4,m="channelsLast"===e.dataFormat,g="",y="";n&&(g=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:a?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`
          float activation(float x) {
            ${n}
          }
        `,y="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${g}

      const ivec2 strides = ivec2(${s}, ${u});
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${m?3:1}];

        ivec2 xRCCorner =
            ivec2(coords[${m?1:2}], coords[${m?2:3}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${l};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${c};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${1===d}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${2===d}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${3===d}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${t?"result += getBiasAtOutCoords();":""}
        ${y}
        setOutput(result);
      }
    `}}class bC{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=4*Math.floor(e.inChannels/4),d=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${a}, ${i}, ${o});
      const ivec3 pads = ivec3(${t}, ${n}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${c}; wF++) {
          int xF = xFCorner + wF * ${s};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${l};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${1===d}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${2===d}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${3===d}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bO{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=mw(this.outputShape.length);let i=e.padInfo.left,o=e.strideWidth,s=e.dilationWidth,u=e.filterHeight,l=e.filterWidth,c=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let e=0;e<l;e++)c+=`
           vec4 xTexelC${2*e};
           int xTexelC${2*e}Ready;
           vec4 xTexelC${2*e+1};
           int xTexelC${2*e+1}Ready;
           vec4 xC${e};`;c+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let e=0;e<l;e++)c+=`
           xTexelC${2*e} = vec4(0.0);
           xTexelC${2*e}Ready = 0;
           xTexelC${2*e+1} = vec4(0.0);
           xTexelC${2*e+1}Ready = 0;
           xC${e} = vec4(0.0);`;c+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let t=0;t<(l+1)/2;t++){let n=2*t;if(c+=`
           xC = xCCorner + ${n*s};
           `,1===o){if(n<l&&(i%2==1?(c+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }
               `,1===s&&n>0?c+=`
                 xC${n} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);
                 `:c+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${n} = vec4(previous.zw, xTexelC${n}.xy);
                   } else {
                     xC${n} = vec4(0.0, 0.0, xTexelC${n}.xy);
                   }
                   `):c+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }

                 xC${n} = xTexelC${n};
                 `,n+1<l)){let e=i%2==0?K.D5U.nearestLargerEven(s):s;s%2==0&&i%2==1||s%2!=0&&i%2!=1?(c+=`
                   xCOffset = xC + imod(pads[1], 2) + ${e};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {
                     xTexelC${n+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${n+1}.zw = vec2(0.0);
                     }
                     xTexelC${n+1}Ready = 1;
                   }
                   `,s>1?c+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${n+1} = vec4(previous.zw, xTexelC${n+1}.xy);
                     } else {
                      xC${n+1} = vec4(0.0, 0.0, xTexelC${n+1}.xy);
                     }
                     `:c+=`
                     xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.xy);
                     `):1===e?c+=`
                     xC${n+1} = xTexelC${n};
                     `:c+=`
                     xCOffset = xC + ${e};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {
                       xTexelC${n+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${n+1}.zw = vec2(0.0);
                       }
                       xTexelC${n+1}Ready = 1;
                     }

                     xC${n+1} = xTexelC${n+1};
                     `}}else n<l&&(i%2==1?(c+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${n+1}Ready == 0) {
                   xTexelC${n+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${n+1}.zw = vec2(0.0);
                   }
                   xTexelC${n+1}Ready = 1;
                 }

                 xC${n} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);
               `,n+1<l&&(c+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${n+1} = vec4(xTexelC${n+1}.xy, final.xy);
                 `)):(c+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {
                   xTexelC${n} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${n}.zw = vec2(0.0);
                   }
                   xTexelC${n}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {
                   xTexelC${n+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${n+1}.zw = vec2(0.);
                   }
                   xTexelC${n+1}Ready = 1;
                 }

                 xC${n} = vec4(
                   xTexelC${n}.xy, xTexelC${n+1}.xy);
               `,n+1<l&&(c+=`
                   xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);
                 `)));n<l&&(c+=`
             wTexel = getW(r, ${n}, d1, d2);
             dotProd += xC${n}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${n}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,n+1<l&&(c+=`
               wTexel = getW(r, ${n+1}, d1, d2);
               dotProd += xC${n+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${n+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}c+=`
     }
   
     }
   
     }
   `;let h="",f="";n&&(h=r?`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${n}
         }`:a?`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${n}
         }`:`vec4 activation(vec4 x) {
           ${n}
         }`,f="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${c}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${t?"result += getBiasAtOutCoords();":""}
         ${f}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bR{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=mw(this.outputShape.length);let{dataFormat:n}=t,r=(0,mg.A)(),a="channelsLast"===n,i=a?1:2,o=a?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`,u="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)u+=`
          blockIndex = rc.z + ${t};
          pos = rc.y + ${e};

          ${s}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${o}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${a}) {
                  innerDims = vec2(d1, ch);
                  result[${2*e+t}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${2*e+t}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${r.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bD(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function bP({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){let u;let l=e.shape,c=r.texData.get(e.dataId),h=n.inChannels,f=l[0]*l[1]*l[2],p=n.outChannels,d="channelsLast"===n.dataFormat,m=[];if(null!=i){let e=bD(i.shape,d);null!=e&&(i=ye({inputs:{x:i},backend:r,attrs:{shape:e}}),m.push(i))}if(null!=a){let e=bD(a.shape,d);null!=e&&(a=ye({inputs:{x:a},backend:r,attrs:{shape:e}}),m.push(a))}let g=!((1===f||1===p)&&h>1e3)&&c.isPacked&&d&&null!=c.texture&&l[2]%2!=0&&K.D5U.arraysEqual(c.shape.slice(-3),l.slice(-3));if(g){let h=l[0]*l[1]*(l[2]+1),f={dataId:e.dataId,shape:[1,h,n.inChannels],dtype:e.dtype},p=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,K.D5U.assert(mc(c.shape,f.shape),()=>`packed reshape ${c.shape} to ${f.shape} isn't free`);let d=ye({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(d);let g=yf({a:f,b:d,backend:r,transposeA:!1,transposeB:!1,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o}),y=r.texData.get(g.dataId);K.D5U.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=p,y.shape=n.outShape,(u=gV({inputs:{x:g},backend:r})).shape=n.outShape,m.push(g)}else{let l=n.outHeight*n.outWidth,c=ye({inputs:{x:e},backend:r,attrs:{shape:d?[n.batchSize,l,n.inChannels]:[n.batchSize,n.inChannels,l]}}),h=ye({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),f=yf({a:d?c:h,b:d?h:c,transposeA:!d,transposeB:!1,backend:r,bias:a,activation:s,preluActivationWeights:i,leakyreluAlpha:o});u=ye({inputs:{x:f},backend:r,attrs:{shape:n.outShape}}),m.push(c),m.push(h),m.push(f)}for(let e of m)r.disposeIntermediateTensorInfo(e);return u}function b$({x:e,filter:t,convInfo:n,backend:r,bias:a=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:s=null}){let{filterWidth:u,filterHeight:l,inChannels:c,outWidth:h,outHeight:f,dataFormat:p}=n,d="channelsLast"===p,m=u*l*c,g=f*h,y=[n.batchSize,m,g],b=[];if(null!=i){let e=bD(i.shape,d);null!=e&&(i=ye({inputs:{x:i},backend:r,attrs:{shape:e}}),b.push(i))}if(null!=a){let e=bD(a.shape,d);null!=e&&(a=ye({inputs:{x:a},backend:r,attrs:{shape:e}}),b.push(a))}let v=ye({inputs:{x:t},backend:r,attrs:{shape:[1,m,K.D5U.sizeFromShape(t.shape)/m]}});b.push(v);let w=new bR(y,n),x=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],_=r.runWebGLProgram(w,[e],"float32",x),k=ye({inputs:{x:_},backend:r,attrs:{shape:y}});b.push(_),b.push(k);let S=null!=a,I=null!=i,E="leakyrelu"===s,N=s?g3(s,!0):null,T=new g4(d?k.shape:v.shape,d?v.shape:k.shape,d?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],!0,!1,S,N,I,E),A=d?[k,v]:[v,k];if(a&&A.push(a),I&&A.push(i),E){let e=r.makeTensorInfo([],"float32",K.D5U.createScalarValue(o,"float32"));A.push(e),b.push(e)}let C=r.runWebGLProgram(T,A,"float32"),O=ye({inputs:{x:C},backend:r,attrs:{shape:n.outShape}});for(let e of(b.push(C),b))r.disposeIntermediateTensorInfo(e);return O}let bF={kernelName:K.mhS,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i,filter:o}=n,{strides:s,pad:u,dataFormat:l,dilations:c,dimRoundingMode:h}=a,f=K.Wap.convertConv2DDataFormat(l),p=K.Wap.computeConv2DInfo(i.shape,o.shape,s,c,u,h,!1,f);if(1===p.filterHeight&&1===p.filterWidth&&1===p.dilationHeight&&1===p.dilationWidth&&1===p.strideHeight&&1===p.strideWidth&&("SAME"===p.padInfo.type||"VALID"===p.padInfo.type))t=bP({x:i,filter:o,convInfo:p,backend:r});else if(p.strideWidth<=2&&"channelsLast"===f&&(0,K.OBj)().getBool("WEBGL_EXP_CONV")){let e=new bO(p),n=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];t=r.runWebGLProgram(e,[i,o],"float32",n)}else if((0,K.OBj)().getBool("WEBGL_CONV_IM2COL"))t=b$({x:i,filter:o,convInfo:p,backend:r});else{let e=new bA(p);t=r.runWebGLProgram(e,[i,o],"float32")}let d=ye({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),d}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bM{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              if (${i}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class bB{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${i?3:1}];

        ivec2 dyCorner = ivec2(coords[${i?1:2}], coords[${i?2:3}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class bL{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${t} - ${a};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${n} - ${i};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${o};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class bU{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${s}, ${u}, ${l});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${t}; wF++) {
          float dyF = float(dyFCorner + wF) / ${a}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${t} - 1 - wF;

          for (int wR = 0; wR < ${n}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${n} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let bj={kernelName:K.wUP,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,dataFormat:u,dimRoundingMode:l,filterShape:c}=r,h=K.Wap.convertConv2DDataFormat(u),f=K.Wap.computeConv2DInfo(a.shape,c,o,1,s,l,!1,h),p=new bM(f);return n.runWebGLProgram(p,[a,i],"float32")}},bz={kernelName:K.wm,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:o,strides:s,pad:u,dataFormat:l,dimRoundingMode:c}=r,h=K.Wap.convertConv2DDataFormat(l),f=K.Wap.computeConv2DInfo(o,i.shape,s,1,u,c,!1,h),p=new bB(f);return n.runWebGLProgram(p,[a,i],"float32")}},bW={kernelName:K.x12,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:o,pad:s,dilations:u}=r,l=K.Wap.computeConv3DInfo(a.shape,i.shape,o,u,s),c=new bC(l);return n.runWebGLProgram(c,[a,i],"float32")}},bV={kernelName:K.o2y,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,pad:s,filterShape:u}=r,l=K.Wap.computeConv3DInfo(a.shape,u,o,1,s),c=new bL(l);return n.runWebGLProgram(c,[a,i],"float32")}},bG={kernelName:K.ik2,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:o,strides:s,inputShape:u}=r,l=K.Wap.computeConv3DInfo(u,i.shape,s,1,o),c=new bU(l);return n.runWebGLProgram(c,[a,i],"float32")}},bH=g0+`
  return cos(x);
`,bq=g1({opSnippet:bH}),bX={kernelName:K.mc4,backendName:"webgl",kernelFunc:bq},bK=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,bZ=g1({opSnippet:bK}),bY={kernelName:K.TR1,backendName:"webgl",kernelFunc:bZ};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bQ{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[i,o,s,u]=e,[l]=t,[c,h]=n;this.outputShape=[l,c,h,u];let[f,p]=[`${o-1}.0`,`${s-1}.0`],[d,m,g]=c>1?[`${(o-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${f} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${f}`],[y,b,v]=h>1?[`${(s-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${p} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${p}`];this.userCode=`
      const float height_ratio = float(${d});
      const float width_ratio = float(${y});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${m};
        float width_scale = ${b};

        float in_y = ${g};
        if( in_y < 0.0 || in_y > ${f} ) {
          setOutput(float(${a}));
          return;
        }
        float in_x = ${v};
        if( in_x < 0.0 || in_x > ${p} ) {
          setOutput(float(${a}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${"bilinear"===r?1:0} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let bJ=e=>{let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:o}=t,{cropSize:s,method:u,extrapolationValue:l}=r,c=new bQ(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")},b0={kernelName:K.VcC,backendName:"webgl",kernelFunc:bJ};(p=w||(w={})).Prod="*",p.Sum="+";class b1{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let a=this.outputShape.length,i=this.op===w.Prod?"1.0":"0.0",o=n?i:`getX(${b2(a,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1],u="",l="";n?(u=r?`end != ${s-1}`:"end != 0",l=r?"end + 1":"end - 1"):(u=r?`end + pow2 < ${s}`:"end >= pow2",l=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${(0,my.kW)(a)} coords = getOutputCoords();
        int end = ${b3(a,"coords",this.op)};
        float val = ${o};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${l};
          ${b3(a,"coords",this.op)} = idx;
          val ${this.op}= getX(${b2(a,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function b2(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function b3(e,t,n){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative ${n} for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b4(e,t,n,r,a,i){let o=t.shape.length,s=K.Wap.getAxesPermutation([r],o),u=t;null!=s&&(u=yc({inputs:{x:t},backend:n,attrs:{perm:s}}));let l=K.Wap.getInnerMostAxes(1,o)[0];if(l!==o-1)throw Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let c=u.shape[l],h=gV({inputs:{x:u},backend:n});for(let t=0;t<=Math.ceil(Math.log2(c))-1;t++){let r=new b1(e,u.shape,!1,i),a=[[t]],o=h;h=n.runWebGLProgram(r,[h],h.dtype,a),n.disposeIntermediateTensorInfo(o)}if(a){let t=new b1(e,u.shape,a,i),r=h;h=n.runWebGLProgram(t,[h],h.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){let e=K.Wap.getUndoAxesPermutation(s),t=yc({inputs:{x:h},backend:n,attrs:{perm:e}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(u),t}return h}let b6={kernelName:K.Byc,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;return b4(w.Prod,a,n,i,o,s)}},b5={kernelName:K.iHb,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:o,reverse:s}=r;return b4(w.Sum,a,n,i,o,s)}},b8={kernelName:K.QRR,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:o,binaryOutput:s}=r;if(1===a.shape.length){let e=n.readSync(a.dataId),t=n.readSync(i.dataId),r=mF(e,t,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,r)}if(2===a.shape.length){let e=n.bufferSync(a),t=n.bufferSync(i),r=mM(e,t,o,s);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw Error(`Error in denseBincount: input must be at most rank 2, but got rank${a.shape.length}.`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class b7{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${t};
      int offset_h = imod(h, ${t});
      int in_w = w / ${t};
      int offset_w = imod(w, ${t});
      int offset_d = (offset_h * ${t} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}let b9={kernelName:K.T0n,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:o}=r,s=a.shape[0],u="NHWC"===o?a.shape[1]:a.shape[2],l="NHWC"===o?a.shape[2]:a.shape[3],c="NHWC"===o?a.shape[3]:a.shape[1],h=u*i,f=l*i,p=c/(i*i),d=new b7("NHWC"===o?[s,h,f,p]:[s,p,h,f],i,o);return n.runWebGLProgram(d,[a],a.dtype)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ve{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=mw(this.outputShape.length);let i=e.filterHeight,o=e.filterWidth,s=e.outChannels/e.inChannels,u="",l="";n&&(u=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:a?`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`
          float activation(float x) {
            ${n}
          }
        `,l="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${o}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${t?"result += getBiasAtOutCoords();":""}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vt{constructor(e,t=!1,n=null,r=!1,a=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=mw(this.outputShape.length);let i=e.outChannels/e.inChannels,o=e.padInfo.left,s=e.strideWidth,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let e=0;e<c;e++)h+=`
          vec4 xTexelC${2*e};
          int xTexelC${2*e}Ready;
          vec4 xTexelC${2*e+1};
          int xTexelC${2*e+1}Ready;
          vec4 xC${e};`;h+=`
    for (int r = 0; r < ${l}; r++) {
      `;for(let e=0;e<c;e++)h+=`
          xTexelC${2*e} = vec4(0.0);
          xTexelC${2*e}Ready = 0;
          xTexelC${2*e+1} = vec4(0.0);
          xTexelC${2*e+1}Ready = 0;
          xC${e} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let e=0;e<(c+1)/2;e++){let t=2*e;if(h+=`
          xC = xCCorner + ${t*u};
          `,1===s){if(t<c&&(o%2==1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }
              `,1===u&&t>0?h+=`
                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);
                  } else {
                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }

                xC${t} = xTexelC${t};
                `,t+1<c)){let e=o%2==0?K.D5U.nearestLargerEven(u):u;u%2==0&&o%2==1||u%2!=0&&o%2!=1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${e};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {
                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${t+1}.zw = vec2(0.0);
                    }
                    xTexelC${t+1}Ready = 1;
                  }
                  `,u>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);
                    } else {
                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);
                    }
                    `:h+=`
                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);
                    `):1===e?h+=`
                    xC${t+1} = xTexelC${t};
                    `:h+=`
                    xCOffset = xC + ${e};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {
                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${t+1}.zw = vec2(0.0);
                      }
                      xTexelC${t+1}Ready = 1;
                    }

                    xC${t+1} = xTexelC${t+1};
                    `}}else t<c&&(o%2==1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {
                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${t+1}.zw = vec2(0.0);
                  }
                  xTexelC${t+1}Ready = 1;
                }

                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);
              `,t+1<c&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {
                  xTexelC${t} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${t}.zw = vec2(0.0);
                  }
                  xTexelC${t}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {
                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${t+1}.zw = vec2(0.);
                  }
                  xTexelC${t+1}Ready = 1;
                }

                xC${t} = vec4(
                  xTexelC${t}.xy, xTexelC${t+1}.xy);
              `,t+1<c&&(h+=`
                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);
                `)));t<c&&(h+=`
            wTexel = getW(r, ${t}, d1, q);
            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);
          `,t+1<c&&(h+=`
              wTexel = getW(r, ${t+1}, d1, q);
              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  
      }
    `;let f="",p="";n&&(f=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${n}
        }`:a?`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${n}
        }`:`vec4 activation(vec4 x) {
          ${n}
        }`,p="result = activation(result);"),t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${f}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${t?"result += getBiasAtOutCoords();":""}
        ${p}
        setOutput(result);
      }
    `}}let vn={kernelName:K.cie,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i,filter:o}=n,{strides:s,pad:u,dilations:l,dimRoundingMode:c}=a,h=l;null==h&&(h=[1,1]),K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(s,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${h}'`);let f=K.Wap.computeConv2DInfo(i.shape,o.shape,s,h,u,c,!0);t=(0,K.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels==1?new vt(f):new ve(f);let p=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return r.runWebGLProgram(t,[i,o],"float32",p)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vr{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${t} - ${r};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${n} - ${a};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class va{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${t}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${t} - 1 - wR;

          for (int wC = 0; wC < ${n}; wC++) {
            float dyC = float(dyCCorner + wC) / ${a}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${n} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${s}; dm++) {
              int d2 = d1 * ${s} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let vi={kernelName:K.sL$,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:o,dilations:s,pad:u,dimRoundingMode:l,filterShape:c}=r,h=K.Wap.computeConv2DInfo(a.shape,c,o,s,u,l,!0),f=new vr(h);return n.runWebGLProgram(f,[a,i],"float32")}},vo={kernelName:K.y7R,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:o,dilations:s,pad:u,dimRoundingMode:l,inputShape:c}=r,h=K.Wap.computeConv2DInfo(c,i.shape,o,s,u,l,!0),f=new va(h);return n.runWebGLProgram(f,[a,i],"float32")}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vs{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}let vu={kernelName:K.$w,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],i=K.D5U.sizeFromShape(r.shape),o=ye({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new vs(i),u=n.runWebGLProgram(s,[o],o.dtype),l=ye({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vl{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:o,filterWidth:s,dilationHeight:u,dilationWidth:l}=e,{top:c,left:h}=r;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${i});
      const ivec2 pads = ivec2(${c}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${o}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${t}) {
            for (int w = 0; w < ${s}; w++) {
              int wIn = wBeg + w * ${l};

              if (wIn >= 0 && wIn < ${n}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}let vc={kernelName:K.p4S,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i,filter:o}=n,{strides:s,pad:u,dilations:l}=a,c=K.Wap.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",l),h=new vl(c);t=r.runWebGLProgram(h,[i,o],"float32");let f=ye({inputs:{x:t},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),f}},vh={kernelName:K.$g6,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,{allDims:i,summedDims:o,idDims:s}=K.Wap.decodeEinsumEquation(a,t.length);K.Wap.checkEinsumDimSizes(i.length,s,t);let{path:u,steps:l}=K.Wap.getEinsumComputePath(o,s),c=l.length,h=null,f=i.length,p=[];for(let e=0;e<c;++e){for(let r of l[e]){let e;let{permutationIndices:a,expandDims:i}=K.Wap.getEinsumPermutation(f,s[r]);K.Wap.isIdentityPermutation(a)?e=t[r]:(e=yc({inputs:{x:t[r]},backend:n,attrs:{perm:a}}),p.push(e));let o=e.shape.slice();for(let e=0;e<i.length;++e)o.splice(i[e],0,1);K.D5U.arraysEqual(e.shape,o)||(e=ye({inputs:{x:e},backend:n,attrs:{shape:o}}),p.push(e)),null===h?h=e:(h=g7({inputs:{a:e,b:h},backend:n}),p.push(h))}e<c-1&&(u[e]>=0&&(h=yu({inputs:{x:h},backend:n,attrs:{axis:u[e]-(i.length-f),keepDims:!1}}),p.push(h)),f--)}for(let e of p)e!==h&&n.disposeIntermediateTensorInfo(e);return h}},vf=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,vp=g1({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:vf}),vd={kernelName:K.SX0,backendName:"webgl",kernelFunc:vp},vm=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,vg=e=>{let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=(0,K.OBj)().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gW(vm,r.shape,a.shape):new gj("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)},vy={kernelName:K.HEU,backendName:"webgl",kernelFunc:vg},vb=`
  return vec4(equal(a, b));
`,vv=g2({opSnippet:"return float(a == b);",packedOpSnippet:vb,dtype:"bool",cpuKernelImpl:mj}),vw={kernelName:K.hdR,backendName:"webgl",kernelFunc:vv},vx=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${K.Wap.ERF_P};
  float a1 = ${K.Wap.ERF_A1};
  float a2 = ${K.Wap.ERF_A2};
  float a3 = ${K.Wap.ERF_A3};
  float a4 = ${K.Wap.ERF_A4};
  float a5 = ${K.Wap.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,v_=g1({opSnippet:vx}),vk={kernelName:K.Omj,backendName:"webgl",kernelFunc:v_},vS=g0+`
  return exp(x);
`,vI=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vE=g1({opSnippet:vS,packedOpSnippet:vI,cpuKernelImpl:mz,dtype:"float32"}),vN={kernelName:K.NEP,backendName:"webgl",kernelFunc:vE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vT(e){let{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:i}=t,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(K.D5U.assert(-(o+1)<=a,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),u=o+a+1),s.splice(u,0,1),ye({inputs:{x:i},backend:r,attrs:{shape:s}})}let vA={kernelName:K.YFo,backendName:"webgl",kernelFunc:vT},vC="return exp(x) - 1.0;",vO=g1({opSnippet:vC,packedOpSnippet:vC,cpuKernelImpl:mW}),vR={kernelName:K.Y0y,backendName:"webgl",kernelFunc:vO};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vD{constructor(e,t,n){let r;this.variableNames=["real","imag"];let a=t[1];this.outputShape=t;let i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=n?`${a}.0`:"1.0";if("real"===e)r="return real * expR - imag * expI;";else if("imag"===e)r="return real * expI + imag * expR;";else throw Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${r}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${a});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${a}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vP(e,t,n){let r=n.texData.get(e.dataId),a=K.D5U.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=ye({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new vD("real",s,t),l=new vD("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],h=n.runWebGLProgram(u,c,"float32"),f=n.runWebGLProgram(l,c,"float32"),p=gH({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);let d=ye({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),d}let v$={kernelName:K.vwp,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{input:r}=t;return vP(r,!1,n)}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vF{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vM(e){let{backend:t,attrs:n}=e,{shape:r,value:a}=n,{dtype:i}=n;if("string"===(i=i||K.D5U.inferDtype(a))){let e=K.D5U.getArrayFromDType(i,K.D5U.sizeFromShape(r));return e.fill(a),t.makeTensorInfo(r,i,e)}{let e=new vF(r,a);return t.runWebGLProgram(e,[],i,[[a]])}}let vB={kernelName:K.deh,backendName:"webgl",kernelFunc:vM};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vL{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${t} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${t}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let vU={kernelName:K.Uyb,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=new vL(n.shape),a=t.runWebGLProgram(r,[n],n.dtype);return a}},vj="return floor(x);",vz=g1({opSnippet:vj,packedOpSnippet:vj,cpuKernelImpl:mV}),vW={kernelName:K.OR,backendName:"webgl",kernelFunc:vz},vV=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,vG=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,vH=g2({opSnippet:vV,packedOpSnippet:vG,dtype:"int32"}),vq={kernelName:K.jeX,backendName:"webgl",kernelFunc:vH};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vX{constructor(e){this.variableNames=["A"];let t=(0,mg.A)(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);

        vec4 values = ${t.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vK{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=(0,mg.A)(),[n,r]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${n}.0);
            vec4 values = ${t.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${t.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let vZ={kernelName:K.eBW,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:a}=t,{numChannels:o}=r,s="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],h=[c,l,o];if(u||s){let e=(0,K.OBj)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==i||e!==vY)&&(vY=e,i=document.createElement("canvas").getContext("2d",{willReadFrequently:vY})),i.canvas.width=l,i.canvas.height=c,i.drawImage(a,0,0,l,c),a=i.canvas}let f=n.makeTensorInfo([c,l],"int32");n.texData.get(f.dataId).usage=b.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);let p=(0,K.OBj)().getBool("WEBGL_PACK")?new vK(h):new vX(h),d=n.runWebGLProgram(p,[f],"int32");return n.disposeData(f.dataId),d}},vY=(0,K.OBj)().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU"),vQ={kernelName:K._V0,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i,filter:o,bias:s,preluActivationWeights:u}=n,{strides:l,pad:c,dataFormat:h,dilations:f,dimRoundingMode:p,activation:d,leakyreluAlpha:m}=a,g=K.Wap.convertConv2DDataFormat(h),y=K.Wap.computeConv2DInfo(i.shape,o.shape,l,f,c,p,!1,g),b=[],v=null!=s,w=null!=u,x="leakyrelu"===d,_=()=>{let e=[i,o],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){let t=ye({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return b.push(t),t}return e};if(v&&e.push(t(s,h)),w&&e.push(t(u,h)),x){let t=r.makeTensorInfo([],"float32",K.D5U.createScalarValue(m,"float32"));e.push(t),b.push(t)}return e};if(1===y.filterHeight&&1===y.filterWidth&&1===y.dilationHeight&&1===y.dilationWidth&&1===y.strideHeight&&1===y.strideWidth&&("SAME"===y.padInfo.type||"VALID"===y.padInfo.type))t=bP({x:i,filter:o,convInfo:y,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});else if(y.strideWidth<=2&&"channelsLast"===g&&(0,K.OBj)().getBool("WEBGL_EXP_CONV")){let e=d?g3(d,!0):null,n=new bO(y,v,e,w,x),a=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],i=_();t=r.runWebGLProgram(n,i,"float32",a)}else if((0,K.OBj)().getBool("WEBGL_CONV_IM2COL"))t=b$({x:i,filter:o,convInfo:y,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});else{let e=d?g3(d,!1):null,n=new bA(y,v,e,w,x),a=_();t=r.runWebGLProgram(n,a,"float32")}let k=ye({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return b.push(t),b.forEach(e=>r.disposeIntermediateTensorInfo(e)),k}},vJ={kernelName:K.luS,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i,filter:o,bias:s,preluActivationWeights:u}=n,{strides:l,pad:c,dilations:h,dimRoundingMode:f,activation:p,leakyreluAlpha:d}=a,m=[],g=h;null==g&&(g=[1,1]),K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);let y=K.Wap.computeConv2DInfo(i.shape,o.shape,l,g,c,f,!0),b=(0,K.OBj)().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels==1,v=p?g3(p,b):null,w=[i,o],x=null!=s,_=null!=u,k="leakyrelu"===p;if(x&&w.push(s),_&&w.push(u),k){let e=r.makeTensorInfo([],"float32",K.D5U.createScalarValue(d,"float32"));w.push(e),m.push(e)}t=b?new vt(y,x,v,_,k):new ve(y,x,v,_,k);let S=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],I=r.runWebGLProgram(t,w,"float32",S);return m.forEach(e=>r.disposeIntermediateTensorInfo(e)),I}};class v0{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let a=(0,my.kW)(n.length),i=`
    int index;`;for(let e=0;e<this.sliceDim;e++)i+=`
          index = round(getIndices(coords[0], ${e}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[e]};
          flattenIndex += index * ${this.strides[e]};`;this.userCode=`
         void main() {
          ${a} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${i}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}let v1={kernelName:K.q1x,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=a.shape,o=i[i.length-1],s=K.D5U.sizeFromShape(r.shape),[u,l,c,h]=K.Wap.prepareAndValidate(r,a),f=ye({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),p=ye({inputs:{x:r},backend:n,attrs:{shape:[K.D5U.sizeFromShape(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){let e=n.readSync(a.dataId),t=n.bufferSync(r),i=mG(e,t,r.dtype,l,o,c,h,r.shape,s);return n.makeTensorInfo(u,r.dtype,i.values)}let d=new v0(o,h,[l,c],r.shape),m=n.runWebGLProgram(d,[p,f],p.dtype),g=ye({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v2{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=(0,my.kW)(this.rank),r=function(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("index"):r.push(`${n[t]}`);return r.join()}(e,0);this.userCode=`
      void main() {
        ${n} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:o,batchDims:s}=r,u=K.D5U.parseAxisParam(o,a.shape)[0];if((0,K.OBj)().get("DEBUG")){let e=n.readSync(i.dataId),t=a.shape[u];for(let n=0;n<e.length;++n){let r=e[n];K.D5U.assert(r<=t-1&&r>=0,()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`)}}let l=K.Wap.segment_util.collectGatherOpShapeInfo(a,i,u,s),c=K.D5U.sizeFromShape(i.shape),h=[],f=ye({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=ye({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});h.push(f),h.push(p);let d=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){let e=n.bufferSync(p),t=n.bufferSync(f),r=mH(t,e,d);return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(l.outputShape,r.dtype,r.values)}let m=new v2(f.shape,d),g=n.runWebGLProgram(m,[f,p],f.dtype);h.push(g);let y=ye({inputs:{x:g},backend:n,attrs:{shape:l.outputShape}});return h.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}let v4={kernelName:K.qi_,backendName:"webgl",kernelFunc:v3},v6=`
  return vec4(greaterThan(a, b));
`,v5=g2({opSnippet:"return float(a > b);",packedOpSnippet:v6,cpuKernelImpl:mq,dtype:"bool"}),v8={kernelName:K.iZT,backendName:"webgl",kernelFunc:v5},v7=`
  return vec4(greaterThanEqual(a, b));
`,v9=g2({opSnippet:"return float(a >= b);",packedOpSnippet:v7,dtype:"bool",cpuKernelImpl:mX}),we={kernelName:K.Acj,backendName:"webgl",kernelFunc:v9},wt={kernelName:K.Qg5,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{input:r}=t;return vP(r,!0,n)}},wn=g1({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),wr={kernelName:K.avt,backendName:"webgl",kernelFunc:wn},wa=g1({opSnippet:"return float(isinf(x));",dtype:"bool"}),wi={kernelName:K.iWB,backendName:"webgl",kernelFunc:wa},wo=g1({opSnippet:"return float(isnan(x));",dtype:"bool"}),ws={kernelName:K.r7n,backendName:"webgl",kernelFunc:wo},wu=`
  return vec4(lessThan(a, b));
`,wl=g2({opSnippet:"return float(a < b);",packedOpSnippet:wu,cpuKernelImpl:mK,dtype:"bool"}),wc={kernelName:K.vtC,backendName:"webgl",kernelFunc:wl},wh=`
  return vec4(lessThanEqual(a, b));
`,wf=g2({opSnippet:"return float(a <= b);",packedOpSnippet:wh,cpuKernelImpl:mZ,dtype:"bool"}),wp={kernelName:K.CAk,backendName:"webgl",kernelFunc:wf},wd={kernelName:K.e7N,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,o=mY(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},wm=g0+`
  return x < 0.0 ? 0./0. : log(x);
`,wg=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,wy=g1({opSnippet:wm,packedOpSnippet:wg,cpuKernelImpl:mQ}),wb={kernelName:K.ZbH,backendName:"webgl",kernelFunc:wy},wv=g0+`
  return log(1.0 + x);
`,ww=g1({opSnippet:wv}),wx={kernelName:K.kU,backendName:"webgl",kernelFunc:ww},w_=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,wk=g2({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:w_,dtype:"bool"}),wS={kernelName:K.PYm,backendName:"webgl",kernelFunc:wk},wI=g1({opSnippet:"return float(!(x >= 1.0));"}),wE={kernelName:K.VfG,backendName:"webgl",kernelFunc:wI},wN=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,wT=g2({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:wN,dtype:"bool"}),wA={kernelName:K.MZg,backendName:"webgl",kernelFunc:wT};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wC{constructor(e,t,n,r,a){let i;this.variableNames=["x"],this.outputShape=[];let o=e[3]-1;this.outputShape=e;let s=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${s})`:1===a?`1.0/(${s})`:`exp(log(${s}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${t}; j <= ${t}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${o}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${i};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wO{constructor(e,t,n,r,a){let i;this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let o=e[3]-1;this.outputShape=e;let s=`float(${n}) + float(${r}) * sum`;i=.5===a?`inversesqrt(${s})`:1===a?`1.0/(${s})`:`exp(log(${s}) * float(-${a}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${t};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${t}; j <= ${t}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${i};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let wR=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:o,alpha:s,beta:u}=r,l=(0,K.OBj)().getBool("WEBGL_PACK_NORMALIZATION")?new wO(a.shape,i,o,s,u):new wC(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)},wD={kernelName:K.eZ0,backendName:"webgl",kernelFunc:wR};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wP{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${t})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${t} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${n});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${a})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${a});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let w$=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:o}=t,{depthRadius:s,bias:u,alpha:l,beta:c}=r,h=new wP(a.shape,s,u,l,c);return n.runWebGLProgram(h,[a,i,o],a.dtype)},wF={kernelName:K.Hhh,backendName:"webgl",kernelFunc:w$};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wM(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{reductionIndices:o,keepDims:s}=a,u=i.shape.length,l=K.D5U.parseAxisParam(o,i.shape),c=l,h=K.Wap.getAxesPermutation(c,u),f=null!=h,p=r.shouldExecuteOnCPU([i]),d=i;if(f){if(p){let e=r.texData.get(d.dataId),t=e.values,n=Array(u);for(let e=0;e<n.length;e++)n[e]=i.shape[h[e]];let a=gm(t,i.shape,i.dtype,h,n);d=r.makeTensorInfo(n,i.dtype);let o=r.texData.get(d.dataId);o.values=a}else d=ys(i,h,r);c=K.Wap.getInnerMostAxes(c.length,u)}K.Wap.assertAxesAreInnerMostDims("max",c,u);let[m,g]=K.Wap.computeOutAndReduceShapes(d.shape,c),y=m;if(s&&(y=K.Wap.expandShapeToKeepDim(m,l)),p){let e=r.texData.get(d.dataId),n=e.values,a=mJ(n,K.D5U.sizeFromShape(g),y,i.dtype);t=r.makeTensorInfo(y,i.dtype);let o=r.texData.get(t.dataId);o.values=a}else t=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=K.D5U.sizeFromShape(t),i=K.D5U.sizeFromShape(e.shape),o=ye({inputs:{x:e},attrs:{shape:[i/a,a]},backend:r}),s=ya(o,e.dtype,"max",r),u=ye({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),u}(d,g,y,r);return f&&r.disposeIntermediateTensorInfo(d),t}let wB={kernelName:K.YoZ,backendName:"webgl",kernelFunc:wM},wL=gU+`
  return max(a, b);
`,wU=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+gz+`
  return result;
`,wj=g2({opSnippet:wL,packedOpSnippet:wU,cpuKernelImpl:m0}),wz={kernelName:K.BMI,backendName:"webgl",kernelFunc:wj},wW={kernelName:K.mTV,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;md(a,"maxPool");let{filterSize:i,strides:o,pad:s,dimRoundingMode:u}=r;K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(o,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '1'`);let l=K.Wap.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&K.D5U.arraysEqual(l.inShape,l.outShape))return gV({inputs:{x:a},backend:n});let c=new yZ(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}},wV={kernelName:K.OAf,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:o,pad:s,dataFormat:u,dimRoundingMode:l}=r,c=K.Wap.computePool3DInfo(a.shape,i,o,[1,1,1],s,l,u),h=new yY(c,"max",!1);return n.runWebGLProgram(h,[a],a.dtype)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wG{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${s});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${a};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${t}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${n}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${a*i-1} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class wH{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,h=u-1-e.padInfo.top,f=l-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${c}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${s};
           wD += ${a}) {
          float dyD = float(dyDCorner + wD) / ${t}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${n}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${l};
                wC += ${o}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${s*u*l-1} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${l} +
                  wR * ${l} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}let wq={kernelName:K.OU7,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:o,strides:s,pad:u,dimRoundingMode:l}=r,c=K.Wap.computePool3DInfo(i.shape,o,s,[1,1,1],u,l),h=new yY(c,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),p=new wH(c),d=n.runWebGLProgram(p,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),d}},wX={kernelName:K.OV7,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:o}=t;md([i,o],"maxPoolGrad");let{filterSize:s,strides:u,pad:l,dimRoundingMode:c}=r,h=K.Wap.computePool2DInfo(i.shape,s,u,1,l,c),f=new yZ(h,"max",!0),p=n.runWebGLProgram(f,[i],i.dtype),d=new wG(h),m=n.runWebGLProgram(d,[a,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}},wK={kernelName:K.vFR,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:a,strides:i,pad:o,includeBatchInIndex:s}=t;K.D5U.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let u=[1,1];K.D5U.assert(K.Wap.eitherStridesOrDilationsAreOne(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);let l=K.Wap.computePool2DInfo(r.shape,a,i,u,o),[c,h]=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=new yZ(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");a=new yZ(n,"max",!0,!0,t);let o=r.runWebGLProgram(a,[e],"float32");return[i,o]}(r,s,l,n);return[c,h]}},wZ={kernelName:K.q2K,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:a,axis:i}=t,o=r.shape.length,s=K.D5U.parseAxisParam(i,r.shape),u=s,l=K.Wap.getAxesPermutation(u,o),c=n.shouldExecuteOnCPU([r]),h=[],f=r;if(null!=l){if(c){let e=n.texData.get(f.dataId),t=e.values,a=Array(o);for(let e=0;e<a.length;e++)a[e]=r.shape[l[e]];let i=gm(t,r.shape,r.dtype,l,a);f=n.makeTensorInfo(a,r.dtype);let s=n.texData.get(f.dataId);s.values=i}else f=ys(r,l,n);h.push(f),u=K.Wap.getInnerMostAxes(u.length,o)}K.Wap.assertAxesAreInnerMostDims("sum",u,o);let[p,d]=K.Wap.computeOutAndReduceShapes(f.shape,u),m=p;a&&(m=K.Wap.expandShapeToKeepDim(p,s));let g=/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e,t,n,r){let a=K.D5U.sizeFromShape(t),i=K.D5U.sizeFromShape(e.shape),o=ye({inputs:{x:e},attrs:{shape:[i/a,a]},backend:r}),s=ya(o,"float32","mean",r),u=ye({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),u}(f,d,m,n);for(let e of h)n.disposeIntermediateTensorInfo(e);return g}},wY={kernelName:K.c17,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:o,keepDims:s}=a,u=i.shape.length,l=K.D5U.parseAxisParam(o,i.shape),c=l,h=K.Wap.getAxesPermutation(c,u),f=i;null!=h&&(f=yc({inputs:{x:i},backend:r,attrs:{perm:h}}),c=K.Wap.getInnerMostAxes(c.length,i.shape.length)),K.Wap.assertAxesAreInnerMostDims("min",c,u);let[p,d]=K.Wap.computeOutAndReduceShapes(f.shape,c),m=K.D5U.sizeFromShape(d),g=ye({inputs:{x:f},backend:r,attrs:{shape:[-1,m]}}),y=ya(g,g.dtype,"min",r);if(s){let e=K.Wap.expandShapeToKeepDim(p,l);t=ye({inputs:{x:y},backend:r,attrs:{shape:e}})}else t=ye({inputs:{x:y},backend:r,attrs:{shape:p}});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),null!=h&&r.disposeIntermediateTensorInfo(f),t}},wQ=gU+`
  return min(a, b);
`,wJ=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+gz+`
  return result;
`,w0=g2({opSnippet:wQ,packedOpSnippet:wJ,cpuKernelImpl:m1}),w1={kernelName:K.q8u,backendName:"webgl",kernelFunc:w0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w2{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=(0,my.kW)(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u="reflect"===n?0:1;if(1===r){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${a} coords = outC - start;
        setOutput(getX(${s}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w3{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=(0,my.kW)(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=gb("rc",r),u=gb("source",r),l=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${u.slice(-2).join()})`,h="reflect"===n?0:1,f="";if(1===r){let e=`
        ${a} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${a} rc = outputLoc;
        ${e}
        result[0] = getChannel(getX(${u.join()}), ${c});
        ${s[r-1]} += 1;
        if(${l}) {
          ${e}
          result[1] = getChannel(getX(${u.join()}), ${c});
        }
      `}else{let e=`
        ${a} source = rc;
        ${a} lt = ${a}(lessThan(source, start));
        ${a} gte = ${a}(greaterThanEqual(source, end));
        ${a} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${a} rc = outputLoc;
        ${e}
        result[0] = getChannel(getX(${u.join()}), ${c});
        ${s[r-1]} += 1;
        if(${l}) {
          ${e}
          result[1] = getChannel(getX(${u.join()}), ${c});
        }
        rc = outputLoc;
        ${s[r-2]} += 1;
        if(${s[r-2]} < ${this.outputShape[r-2]}) {
          ${e}
          result[2] = getChannel(getX(${u.join()}), ${c});
          ${s[r-1]} += 1;
          if(${l}) {
            ${e}
            result[3] = getChannel(getX(${u.join()}), ${c});
          }
        }
      `}this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let w4=({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:a,mode:i}=n,o=(0,K.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new w3(r.shape,a,i):new w2(r.shape,a,i),s=t.runWebGLProgram(o,[r],r.dtype);return s},w6={kernelName:K.jQs,backendName:"webgl",kernelFunc:w4},w5=`if (b == 0.0) return NAN;
  return mod(a, b);`,w8=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+gz+`
  return result;
`,w7=g2({opSnippet:w5,packedOpSnippet:w8}),w9={kernelName:K.Vbg,backendName:"webgl",kernelFunc:w7};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xe{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${t-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${t-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xt=`
if (a == b) {
  return 1.0;
};
return a / b;`,xn=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,xr=g2({opSnippet:xt,packedOpSnippet:xn,checkOutOfBounds:!0}),xa={kernelName:K.oHH,backendName:"webgl",kernelFunc:xr},xi="return a - b;",xo=g2({opSnippet:xi,packedOpSnippet:xi,supportsComplex:!0,cpuKernelImpl:gf}),xs={kernelName:K.Tr8,backendName:"webgl",kernelFunc:xo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xu(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,o=K.D5U.parseAxisParam([i],a.shape),s=wM({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=K.Wap.expandShapeToKeepDim(s.shape,o),l=ye({inputs:{x:s},backend:n,attrs:{shape:u}}),c=xo({inputs:{a:a,b:l},backend:n}),h=vE({inputs:{x:c},backend:n}),f=yu({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:!1}}),p=ye({inputs:{x:f},backend:n,attrs:{shape:u}}),d=xr({inputs:{a:h,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),d}let xl={kernelName:K.Gcp,backendName:"webgl",kernelFunc:xu},xc={kernelName:K.NZg,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:o,normalized:s}=r,u=s?a:xu({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],h=new xe(l,c,i),f=n.runWebGLProgram(h,[u],"int32",[[o]]);return s||n.disposeIntermediateTensorInfo(u),f}},xh=gE+`
  return -x;
`,xf=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xp={kernelName:K.kuV,backendName:"webgl",kernelFunc:function(e){let t;let{inputs:n,backend:r}=e,{x:a}=n;if(r.shouldExecuteOnCPU([a])){let e=r.texData.get(a.dataId),[t,n]=m3(e.values,a.shape,a.dtype);return r.makeTensorInfo(n,a.dtype,t)}return t=(0,K.OBj)().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new gP(a.shape,xf):new gI(a.shape,xh),r.runWebGLProgram(t,[a],a.dtype)}},xd=K.GDt.nonMaxSuppressionV3Impl,xm={kernelName:K.uv1,backendName:"webgl",kernelFunc:function(e){K.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u}=r,l=n.readSync(a.dataId),c=n.readSync(i.dataId),{selectedIndices:h}=xd(l,c,o,s,u);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}},xg=K.GDt.nonMaxSuppressionV4Impl,xy={kernelName:K.cye,backendName:"webgl",kernelFunc:function(e){K.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,padToMaxOutputSize:l}=r,c=n.readSync(a.dataId),h=n.readSync(i.dataId),{selectedIndices:f,validOutputs:p}=xg(c,h,o,s,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}},xb=K.GDt.nonMaxSuppressionV5Impl,xv={kernelName:K.W0H,backendName:"webgl",kernelFunc:function(e){K.Wap.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:o,iouThreshold:s,scoreThreshold:u,softNmsSigma:l}=r,c=n.readSync(a.dataId),h=n.readSync(i.dataId),{selectedIndices:f,selectedScores:p}=xb(c,h,o,s,u,l);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([p.length],"float32",new Float32Array(p))]}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xw{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${n}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xx=e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:o,onValue:s,offValue:u}=r,l=K.D5U.sizeFromShape(a.shape),c=new xw(l,o,s,u),h=ye({inputs:{x:a},backend:n,attrs:{shape:[l]}}),f=n.runWebGLProgram(c,[h],i);n.disposeIntermediateTensorInfo(h);let p=[...a.shape,o],d=ye({inputs:{x:f},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(f),d},x_={kernelName:K.we_,backendName:"webgl",kernelFunc:xx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xk(e){let{inputs:t,backend:n}=e,{x:r}=t;if("complex64"!==r.dtype)return vM({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n});{let e=bc({inputs:{input:r},backend:n}),t=xk({inputs:{x:e},backend:n}),a=bI({inputs:{input:r},backend:n}),i=xk({inputs:{x:a},backend:n}),o=gH({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),o}}let xS={kernelName:K.RuY,backendName:"webgl",kernelFunc:xk},xI={kernelName:K.qWM,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw Error("onesLike is not supported under string dtype");if("complex64"!==a.dtype)return vM({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r});{let t=bc({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=bI({inputs:{input:a},backend:r}),o=xk({inputs:{x:i},backend:r}),s=gH({inputs:{real:n,imag:o},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}}},xE={kernelName:K.QiL,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return vT({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,o=t[0].dtype;t.forEach(e=>{K.D5U.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),K.D5U.assert(o===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],u=t.map(e=>{let t=vT({inputs:{input:e},backend:n,attrs:{dim:a}});return s.push(t),t}),l=bN({inputs:u,backend:n,attrs:{axis:a}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xN{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=(0,my.kW)(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(1===r){this.userCode=`
        int start = ${i};
        int end = ${o};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${a} start = ${a}(${i});
      ${a} end = ${a}(${o});

      void main() {
        ${a} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${a} coords = outC - start;
          setOutput(getX(${s}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xT{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=(0,my.kW)(r),i=t.map(e=>e[0]).join(","),o=t.map((t,n)=>t[0]+e[n]).join(","),s=gb("rc",r),u=gb("source",r),l=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${u.slice(-2).join()})`,h=[`${a} rc = outputLoc;`,`${s[r-1]} += 1;
       if(${l}) {
      `,1===r?"":`}
       rc = outputLoc;
       ${s[r-2]} += 1;
       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;
         if(${l}) {`],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="";for(let e=0,t=1===r?2:4;e<t;e++)p+=`
        ${h[e]}
        if (${f}) {
          result[${e}] = float(value);
        } else {
          ${a} source = rc - start;
          result[${e}] = getChannel(getX(${u.join()}), ${c});
        }
      `;p+=1===r?"} ":"}}",this.userCode=`
      const ${a} start = ${a}(${i});
      const ${a} end = ${a}(${o});

      void main() {
        ${a} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xA=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:o}=r;if(0===K.D5U.sizeFromShape(a.shape)){let e=i.map((e,t)=>e[0]+a.shape[t]+e[1]);return vM({backend:n,attrs:{shape:e,value:o,dtype:a.dtype}})}let s=(0,K.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xT(a.shape,i,o):new xN(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype,[[o]])},xC={kernelName:K.lyA,backendName:"webgl",kernelFunc:xA},xO=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,xR=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+gz+`
  return result;
`,xD=g2({opSnippet:xO,packedOpSnippet:xR}),xP={kernelName:K.pe_,backendName:"webgl",kernelFunc:xD},x$={kernelName:K.DlI,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:o,keepDims:s}=a,u=i.shape.length,l=[],c=K.D5U.parseAxisParam(o,i.shape),h=c,f=K.Wap.getAxesPermutation(h,u),p=i;if(null!=f&&(p=yc({inputs:{x:i},backend:r,attrs:{perm:f}}),h=K.Wap.getInnerMostAxes(h.length,u),l.push(p)),K.Wap.assertAxesAreInnerMostDims("prod",h,u),r.shouldExecuteOnCPU([p])){let e=r.texData.get(p.dataId).values,{outVals:n,outShape:a,outDtype:i}=m6(p.shape,p.dtype,e,h);t=r.makeTensorInfo(a,i,n)}else{let[e,n]=K.Wap.computeOutAndReduceShapes(p.shape,h),a=K.D5U.sizeFromShape(n),o=ye({inputs:{x:p},backend:r,attrs:{shape:[-1,a]}}),s=(0,K.z4k)(i.dtype),u=ya(o,s,"prod",r);t=ye({inputs:{x:u},backend:r,attrs:{shape:e}}),l.push(o),l.push(u)}if(s){l.push(t);let e=K.Wap.expandShapeToKeepDim(t.shape,c);t=ye({inputs:{x:t},backend:r,attrs:{shape:e}})}return l.forEach(e=>r.disposeIntermediateTensorInfo(e)),t}},xF={kernelName:K.dDz,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:o}=t,{outputRaggedRank:s}=r,u=a.map(e=>n.readSync(e.dataId)),l=a.map(e=>e.shape),c=n.readSync(i.dataId),h=n.readSync(o.dataId),[f,p,d]=m5(u,l,c,i.shape,i.dtype,h,o.shape,s),m=f.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(d,i.dtype,p);return m.concat([g])}},xM={kernelName:K.BiW,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:o,rowPartitionTensors:s}=t,{rowPartitionTypes:u}=r,l=n.readSync(a.dataId),c=n.readSync(i.dataId),h=n.readSync(o.dataId),f=s.map(e=>n.readSync(e.dataId)),p=s.map(e=>e.shape),[d,m]=m8(l,a.shape,c,i.shape,i.dtype,h,o.shape,f,p,u);return n.makeTensorInfo(d,i.dtype,m)}},xB=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:o}=n,s=m7(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},xL={kernelName:K.e6w,backendName:"webgl",kernelFunc:xB},xU=g1({opSnippet:"return 1.0 / x;"}),xj={kernelName:K.$HU,backendName:"webgl",kernelFunc:xU},xz=gE+`
  return (x < 0.0) ? 0.0 : x;
`,xW=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xV=g1({opSnippet:xz,packedOpSnippet:xW}),xG={kernelName:K.qkr,backendName:"webgl",kernelFunc:xV},xH=gE+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,xq=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xX=g1({opSnippet:xH,packedOpSnippet:xq}),xK={kernelName:K.SbG,backendName:"webgl",kernelFunc:xX};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xZ{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,o,s,u]=e;this.outputShape=[i,t,n,u];let l=[r&&t>1?o-1:o,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${l[0]/c[0]},
          ${l[1]/c[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${s}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC"};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xY{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,o,s,u]=e;this.outputShape=[i,t,n,u];let l=[r&&t>1?o-1:o,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${l[0]/c[0]},
          ${l[1]/c[1]},
          ${l[1]/c[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${s}.0,
                                     ${s}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC"};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${n-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}let xQ={kernelName:K._Yw,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r,[u,l]=s,c=(0,K.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xY(a.shape,u,l,i,o):new xZ(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],"float32")}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xJ{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,o]=e,s=[n&&i>1?r-1:r,n&&o>1?a-1:a],u=[n&&i>1?i-1:i,n&&o>1?o-1:o],l=s[0]/u[0],c=s[1]/u[1],h=1/l,f=1/c,p=2*Math.ceil(h)+2,d=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${c});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${d});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${a-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}let x0={kernelName:K.zbQ,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r,s=new xJ(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x1{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,o,s,u]=e;this.outputShape=[i,t,n,u];let l=[r&&t>1?o-1:o,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${l[0]/c[0]},
          ${l[1]/c[1]});
      const vec2 inputShapeRC = vec2(${o}.0, ${s}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC"};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x2{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,o,s,u]=e;this.outputShape=[i,t,n,u];let l=[r&&t>1?o-1:o,r&&n>1?s-1:s],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${l[0]/c[0]},
          ${l[1]/c[1]},
          ${l[1]/c[1]});
      const vec3 inputShapeRC = vec3(${o}.0, ${s}.0,
                                     ${s}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC"};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${n-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}let x3={kernelName:K.dpD,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:o,size:s}=r,[u,l]=s,c=(0,K.OBj)().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new x2(a.shape,u,l,i,o):new x1(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],a.dtype)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x4{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,o]=e,s=[n&&i>1?r-1:r,n&&o>1?a-1:a],u=[n&&i>1?i-1:i,n&&o>1?o-1:o],l=s[0]/u[0],c=s[1]/u[1],h=1/l,f=1/c,p=2*Math.ceil(h)+2,d=2*Math.ceil(f)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${l});
        const float widthScale = float(${c});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${d});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${o}) {
              continue;
            }

            float sourceFracRow =
              float(${s[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${s[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${n} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${a}) - 1),
                ${n} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}let x6={kernelName:K.Hmb,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:o}=r,s=new x4(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x5{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}let r=n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`,a=e.map((e,t)=>r(t)).join(","),i=(0,my.kW)(n);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x8{constructor(e,t){var n,r,a;this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let i=e.length;if(i>4)throw Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=e;let o=gb("rc",i),s=`${o[i-1]} + 1 < ${this.outputShape[i-1]}`,u=`${o[i-2]} + 1 < ${this.outputShape[i-2]}`,l=(0,my.kW)(i);function c(n){let r=e.map((r,a)=>-1!==t.indexOf(a)&&1!==e[a]?`${e[a]} - ${n[a]} - 1`:`${n[a]}`),a=r.join(","),i=r.slice(-2).join(",");return`getChannel(getX(${a}), vec2(${i}))`}1===i?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${s}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${l} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${c(o.slice())};
          if(${s}){
            result.g = ${(n=o.slice())[i-1]="("+n[i-1]+" + 1)",c(n)};
          }
          if(${u}) {
            result.b = ${(r=o.slice())[i-2]="("+r[i-2]+" + 1)",c(r)};
            if(${s}) {
              result.a = ${(a=o.slice())[i-1]="("+a[i-1]+" + 1)",a[i-2]="("+a[i-2]+" + 1)",c(a)};
            }
          }
          setOutput(result);
        }
    `}}let x7={kernelName:K.mKl,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,o=a.shape.length,s=K.D5U.parseAxisParam(i,a.shape);if(0===o)return gV({inputs:{x:a},backend:n});let u=(0,K.OBj)().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new x8(a.shape,s):new x5(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x9{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`
        vec3 fill = vec3(${t.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${a}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _e={kernelName:K.b9H,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:a,fillValue:i,center:o}=t,s=new x9(r.shape,i),[u,l]=K.Wap.getImageCenter(o,r.shape[1],r.shape[2]),c=[[u,l,Math.sin(a),Math.cos(a)]],h=n.runWebGLProgram(s,[r],r.dtype,c);return h}},_t=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,_n=g1({opSnippet:_t}),_r={kernelName:K.e07,backendName:"webgl",kernelFunc:_n},_a=g1({opSnippet:"return inversesqrt(x);",cpuKernelImpl:m9}),_i={kernelName:K.bV0,backendName:"webgl",kernelFunc:_a};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _o{constructor(e,t,n,r,a,i,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;let s=(0,my.kW)(a.length),u=(0,my.kW)(i.length),l="";1===n?l="i":2===n&&(l="i, j");let c=`getIndices(${l})`,h="";1===r?h="i":2===r&&(h="i, coords[1]");let f=`getUpdates(${h})`;this.userCode=`
        ${s} strides = ${s}(${a});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${t}; j++) {
              int index = round(${c});
              flattenedIndex += index * ${t>1?"strides[j]":"strides"};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${f};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}let _s={kernelName:K.xQA,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:o}=r,{sliceRank:s,numUpdates:u,sliceSize:l,strides:c,outputSize:h}=K.Wap.calculateShapes(i,a,o);if(0===h)return n.makeTensorInfo(o,a.dtype);let f=ye({inputs:{x:a},backend:n,attrs:{shape:[u,s]}}),p=ye({inputs:{x:i},backend:n,attrs:{shape:[u,l]}}),d=n.makeTensorInfo([],"float32",new Float32Array([0])),m=new _o(u,s,f.shape.length,p.shape.length,c,[h/l,l]),g=n.runWebGLProgram(m,[p,f,d],p.dtype),y=ye({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(d),y}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _u{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let a=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,i=2===(0,K.OBj)().getNumber("WEBGL_VERSION")?"while (left < right) {":a;this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${i}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${"left"===r?"<":"<="} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}let _l={kernelName:K.nr8,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:o}=r,s=new _u(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _c{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)a="resRC",r="resRC";else{let n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=[];for(let r=0;r<t.length;r++)o.push(`${n[r]}`),r<e&&i.push(`${n[r]}`);r=i.join(),a=o.join()}let i=(0,my.kW)(n);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${a}));
        } else {
          setOutput(getB(${a}));
        }
      }
    `}}let _h={kernelName:K.PhF,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,o=new _c(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],(0,K.x8V)(a.dtype,i.dtype))}},_f=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${K.Wap.SELU_SCALEALPHA};
  float scale = ${K.Wap.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,_p=g1({opSnippet:_f}),_d={kernelName:K.oFR,backendName:"webgl",kernelFunc:_p},_m=g0+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,_g=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,_y=g1({opSnippet:_m,packedOpSnippet:_g,cpuKernelImpl:gt}),_b={kernelName:K.a5O,backendName:"webgl",kernelFunc:_y},_v=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,_w=g1({opSnippet:_v}),_x={kernelName:K.i5y,backendName:"webgl",kernelFunc:_w},__=g0+`
  return sin(x);
`,_k=g1({opSnippet:__}),_S={kernelName:K.RQH,backendName:"webgl",kernelFunc:_k},_I=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,_E=g1({opSnippet:_I}),_N={kernelName:K.wYB,backendName:"webgl",kernelFunc:_E},_T=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,_A=g1({opSnippet:_T}),_C={kernelName:K.MRv,backendName:"webgl",kernelFunc:_A},_O=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:o}=r;K.D5U.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let s=i.reduce((e,t)=>e*t),u=[[0,0]];u.push(...o);for(let e=1+i.length;e<a.shape.length;++e)u.push([0,0]);let l=[],c=xA({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=K.Wap.getReshaped(c.shape,i,s,!1),f=K.Wap.getPermuted(h.length,i.length,!1),p=K.Wap.getReshapedPermuted(c.shape,i,s,!1),d=ye({inputs:{x:c},backend:n,attrs:{shape:h}}),m=yc({inputs:{x:d},backend:n,attrs:{perm:f}}),g=ye({inputs:{x:m},backend:n,attrs:{shape:p}});return l.push(c),l.push(d),l.push(m),l.forEach(e=>n.disposeIntermediateTensorInfo(e)),g},_R={kernelName:K.TQc,backendName:"webgl",kernelFunc:_O},_D={kernelName:K.O3z,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:o}=t;if(1!==i.shape.length)throw Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(2!==r.shape.length)throw Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(1!==a.shape.length)throw Error(`Values must be a vector, saw:
         ${a.shape}`);if(0!==o.shape.length)throw Error(`Default value must be a scalar, saw:
        ${o.shape}`);let s=n.readSync(r.dataId),u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[h,f,p,d,m]=ga(s,r.shape,r.dtype,u,a.dtype,l,c);return[n.makeTensorInfo(f,r.dtype,h),n.makeTensorInfo([f[0]],a.dtype,p),n.makeTensorInfo([d.length],"bool",new Uint8Array(d.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}},_P={kernelName:K.nhH,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw Error(`Input indices should be a matrix but received shape ${r.shape}`);if(1!==a.shape.length)throw Error(`Input shape should be a vector but received shape ${a.shape}`);if(1!==i.shape.length)throw Error(`Target shape should be a vector but received shape ${i.shape}`);let o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),[l,c,h]=gi(s,r.shape,r.dtype,o,u);return[n.makeTensorInfo(c,r.dtype,l),n.makeTensorInfo([h.length],i.dtype,new Int32Array(h))]}},_$={kernelName:K.w3H,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
              ${a.shape}`);if(1!==i.shape.length)throw Error(`Segment ids should be a vector but received shape
              ${i.shape}`);let o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=go(o,r.shape,r.dtype,s,u,!0);return n.makeTensorInfo(c,r.dtype,l)}},_F={kernelName:K.ZjV,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw Error(`Indices should be a vector but received shape
             ${a.shape}`);if(1!==i.shape.length)throw Error(`Segment ids should be a vector but received shape
             ${i.shape}`);let o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),[l,c]=go(o,r.shape,r.dtype,s,u);return n.makeTensorInfo(c,r.dtype,l)}},_M={kernelName:K.D2d,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:o}=t,{outputShape:s}=r,{sliceRank:u,numUpdates:l,sliceSize:c,strides:h,outputSize:f}=K.Wap.calculateShapes(i,a,s);if("string"===i.dtype){let e=n.bufferSync(a),t=n.bufferSync(i),r=K.D5U.decodeString(n.readSync(o.dataId)[0]),p=ge(e,t,s,f,c,l,u,h,r,!1);return n.makeTensorInfo(s,p.dtype,p.values)}let p=new _o(l,u,a.shape.length,i.shape.length,h,[f,1],!1),d=n.runWebGLProgram(p,[i,a,o],i.dtype),m=ye({inputs:{x:d},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(d),m}},_B={kernelName:K.L8s,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:o}=r,s=K.D5U.parseAxisParam(o,a.shape)[0],u=K.Wap.prepareSplitSize(a,i,s),l=a.shape.length,c=Array(l).fill(0),h=a.shape.slice();return u.map(e=>{let t=[...h];t[s]=e;let r=bn({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r})}},_L="return sqrt(x);",_U=g1({opSnippet:_L,packedOpSnippet:_L,cpuKernelImpl:gs}),_j={kernelName:K.FKq,backendName:"webgl",kernelFunc:_U},_z=g1({opSnippet:"return x * x;"}),_W={kernelName:K.bK0,backendName:"webgl",kernelFunc:_z},_V="return (a - b) * (a - b);",_G=g2({opSnippet:_V,packedOpSnippet:_V}),_H={kernelName:K._tC,backendName:"webgl",kernelFunc:_G},_q={kernelName:K.h8e,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function({inputs:e,attrs:t,backend:n}){let{x:r}=e,a=gE+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,i=new gI(r.shape,a);return n.runWebGLProgram(i,[r],r.dtype)}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _X{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,a=(0,my.kW)(n.length),i=(0,my.kW)(n.length),o="";if(1===r)o="coords * strides + begin";else{let e=0;o=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`
      ${a} begin = ${a}(${e});
      ${a} strides = ${a}(${t});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}let _K={kernelName:K.jQk,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let t;let{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{begin:o,end:s,strides:u,beginMask:l,endMask:c,ellipsisMask:h,newAxisMask:f,shrinkAxisMask:p}=a,{finalShapeSparse:d,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:b,begin:v,end:w,strides:x}=K.kuN.sliceInfo(i.shape,o,s,u,l,c,h,f,p);if(g)t=ye({inputs:{x:i},backend:r,attrs:{shape:m}});else if(y||b){K.D5U.assert(i.shape.length>=1,()=>`Input must have rank at least 1, got: ${i.shape.length}`);let e=K.kuN.computeOutShape(v,w,x),n=bn({inputs:{x:i},backend:r,attrs:{begin:v,size:e}});t=ye({inputs:{x:n},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(n)}else{let e=r.shouldExecuteOnCPU([i]);if(e){let e=r.readSync(i.dataId),n=(0,K.f3b)(i.shape,i.dtype,e),a=gu(d,n,x,v);t=r.makeTensorInfo(m,i.dtype,a.values)}else{let e=new _X(v,x,d);t=r.runWebGLProgram(e,[i],i.dtype)}}let _=ye({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),_}},_Z={kernelName:K._JP,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:o,rightPad:s,padWidth:u,preserveShortSequences:l}=r,{data:c,dataSplits:h}=t,f=n.readSync(c.dataId),p=n.readSync(h.dataId),[d,m]=gl(f,p,a,i,o,s,u,l);return[n.makeTensorInfo([d.length],"string",d),n.makeTensorInfo(h.shape,"int32",m)]}},_Y={kernelName:K.s1s,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:o}=t;if("string"!==i.dtype)throw Error("Input must be of datatype string");if(1!==i.shape.length)throw Error(`Input must be a vector, got shape: ${i.shape}`);if(0!==o.shape.length)throw Error(`Delimiter must be a scalar, got shape: ${o.shape}`);let s=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[l,c,h]=gc(s,u,a),f=c.length;return[n.makeTensorInfo([f,2],"int32",l),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(h))]}},_Q={kernelName:K.XkS,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw Error("Input must be of datatype string");if(a<=0)throw Error("Number of buckets must be at least 1");let o=n.readSync(i.dataId),s=gh(o,a);return n.makeTensorInfo(i.shape,"int32",s)}},_J=g1({opSnippet:"return tan(x);"}),_0={kernelName:K.sEM,backendName:"webgl",kernelFunc:_J},_1=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,_2=g1({opSnippet:_1}),_3={kernelName:K.MIZ,backendName:"webgl",kernelFunc:_2};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _4{constructor(e,t){this.variableNames=["A"];let n=Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;let r=(0,my.kW)(this.rank),a=function(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;if("string"===a.dtype||a.shape.length>5){let e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>K.D5U.decodeString(e)):e,r=(0,K.f3b)(a.shape,a.dtype,t),o=gp(r,i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}let o=new _4(a.shape,i),s=n.runWebGLProgram(o,[a],a.dtype);return s}let _5={kernelName:K.n9L,backendName:"webgl",kernelFunc:_6};class _8{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class _7{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _9(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function ke(e){let t=1;for(;t<e;)t*=2;return t}let kt={kernelName:K.cWu,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:o}=r,s=(0,K.OBj)().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=(0,K.OBj)().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,c=l[l.length-1];if(n.shouldExecuteOnCPU([a])||c<s||i>u){let e=n.readSync(a.dataId),[t,r]=gd(e,l,a.dtype,i,o);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===c)return[a,vM({attrs:{shape:l,dtype:"int32",value:0},backend:n})];let h=n.texData.get(a.dataId),f=null!==h&&h.isPacked,p=f?n.unpackTensor(a):a,d=K.D5U.sizeFromShape(l),m=d/c,g=ye({inputs:{x:p},attrs:{shape:[m,c]},backend:n});f&&_9(n,p);let y=ke(i),b=ke(c),v=null,w=()=>null===v?[g,g]:[g,v],x=(e,t,r)=>{let a=w(),i=new _8(r),o=null===v?1:0,s=[[c],[o],[Number.NEGATIVE_INFINITY],[e],[t]],u=v;v=n.runWebGLProgram(i,a,"int32",s),_9(n,u)};for(let e=1;e<y;e*=2){let t=2*e;for(let n=e;n>=1;n/=2)x(t,n,[m,b])}for(let e=b;e>y;e/=2){let t=w(),r=new _7([m,e/2]),a=null===v?1:0,i=[[c],[a],[y]],o=v;v=n.runWebGLProgram(r,t,"int32",i),_9(n,o);let s=y/2,u=2*s;for(let e=s;e>=1;e/=2)x(u,e,v.shape)}let _=v;v=bn({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,i]}}),_9(n,_);let k=v3({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});_9(n,g);let S=l.slice(0,-1);S.push(i),_=v,v=ye({inputs:{x:v},attrs:{shape:S},backend:n}),_9(n,_);let I=k;return k=ye({inputs:{x:k},attrs:{shape:S},backend:n}),_9(n,I),[k,v]}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kn{constructor(e,t,n,r,a,i){let o;switch(this.variableNames=["Image","Transforms"],this.outputShape=i,r){case"constant":default:o=1;break;case"reflect":o=2;break;case"wrap":o=3;break;case"nearest":o=4}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${o} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${o} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${a});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${a});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${t}));
                float mapY = mapCoord(inY, float(${e}));

                if (${"nearest"===n?1:2} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}let kr={kernelName:K.wx7,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:i}=t,{interpolation:o,fillMode:s,fillValue:u,outputShape:l}=r,[c,h,f,p]=a.shape,[d,m]=null!=l?l:[h,f],g=new kn(h,f,o,s,u,[c,d,m,p]);return n.runWebGLProgram(g,[a,i],"float32")}},ka={kernelName:K.kpP,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;md(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let o=r.readSync(i.dataId),{outputValues:s,outputShape:u,indices:l}=gg(o,a,i.shape,i.dtype);return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}},ki={kernelName:K.ToN,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let o=a.shape.length,s=a.shape[i],u=Array(o-1),l=0;for(let e=0;e<o;e++)e!==i&&(u[l++]=a.shape[e]);let c=[],h=Array(o).fill(0),f=a.shape.slice();f[i]=1;let p=Array(s);for(let e=0;e<p.length;e++){h[i]=e;let t=bn({inputs:{x:a},backend:n,attrs:{begin:h,size:f}}),r=ye({inputs:{x:t},backend:n,attrs:{shape:u}});p[e]=r,c.push(t)}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ko{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];let s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";a%n>0&&(c=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return initializationValue;
        }
      `);let h="";a%n>0&&(h=`
        if (inIdx < 0 || inIdx >= ${a}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${h}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${n}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${s}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${l}
        }

        int inIdx = inOffset + ${s};
        if (${1===u}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${l}
        } else if (${2===u}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${l}
        } else if (${3===u}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${l}
        }
        setOutput(sumValue);
      }
    `}}let ks={kernelName:K.Qvg,backendName:"webgl",kernelFunc:/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:o}=r,s=a.shape.length,u=[],l=0,c=K.Wap.getAxesPermutation([l],s),h=a;null!=c&&(h=yc({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(h),l=K.Wap.getInnerMostAxes(1,s)[0]);let f=K.Wap.segment_util.computeOutShape(h.shape,l,o),p=K.D5U.sizeFromShape([h.shape[l]]),d=ye({inputs:{x:h},backend:n,attrs:{shape:[-1,p]}});u.push(d);let m=(0,K.z4k)(a.dtype),g=(e,t,r,a,i)=>{let o=e.shape[0],s=e.shape[1],l=K.Wap.segment_util.segOpComputeOptimalWindowSize(s,i),c=new ko({windowSize:l,inSize:s,batchSize:o,numSegments:i},t),h=n.compileAndRun(c,[e,r],a);if(u.push(h),h.shape[1]===i)return h;let f=xB({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),p=_6({inputs:{x:f},backend:n,attrs:{reps:[s/l]}});u.push(f),u.push(p);let d=g(h,t,p,a,i);return d},y=g(d,"unsortedSegmentSum",i,m,o),b=ye({inputs:{x:y},backend:n,attrs:{shape:f}}),v=b;if(null!=c){u.push(b);let e=K.Wap.getUndoAxesPermutation(c);v=yc({inputs:{x:v},backend:n,attrs:{perm:e}})}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}};for(let e of[yp,ym,yb,yx,yS,yN,yT,yA,yD,yP,yM,yL,yz,yH,yK,yQ,yJ,y2,y3,y4,y7,bi,bo,bs,bf,bm,bb,gq,bx,bT,bF,bj,bz,bW,bV,bG,bX,bY,b0,b6,b5,b8,b9,vn,vi,vo,vu,vc,vh,vd,vy,vw,vk,vN,vA,vR,v$,vB,vU,vW,vq,vZ,vQ,vJ,v1,v4,v8,we,gG,wt,bE,wr,wi,ws,gZ,wc,wp,wd,wb,wx,wS,wE,wA,wD,wF,wB,wz,wW,wV,wq,wX,wK,wZ,wY,w1,w6,w9,xc,g9,xp,xm,xy,xv,bl,x_,xI,xE,xC,xP,gJ,x$,xF,xM,xL,bh,xa,xj,xG,xK,yt,xQ,x0,x3,x6,x7,_e,_r,_i,_s,_l,_h,_d,_b,_x,_S,_N,br,xl,_C,_R,_D,_P,_$,_F,_M,_B,_j,_W,_H,_q,_K,_Z,_Y,_Q,xs,yl,_0,_3,_5,kt,kr,yh,ka,ki,ks,xS])(0,K.wCN)(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ku={"tfjs-core":K.jTM,"tfjs-backend-cpu":"3.21.0","tfjs-backend-webgl":"3.21.0","tfjs-data":lP,"tfjs-layers":sd.i,"tfjs-converter":uL,tfjs:"3.21.0"}},4184:function(e,t){var n;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0!==(n=(function(){return a}).apply(t,[]))&&(e.exports=n)}()},6497:function(e,t,n){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(1876).Buffer.isBuffer},6239:function(e,t,n){"use strict";var r=n(5081);function a(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new a;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var i=0;i<n.length;++i){var o=n[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===o){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw Error("cwise: post() block may not write to array shape")}else if("object"==typeof o&&o.offset)t.argTypes[i]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(i);else throw Error("cwise: Unknown argument type "+n[i])}if(t.arrayArgs.length<=0)throw Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},1984:function(e,t,n){"use strict";var r=n(8706);function a(e,t,n){var r,a,i=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],l=[],c=0,h=0;for(r=0;r<i;++r)l.push(["i",r,"=0"].join(""));for(a=0;a<o;++a)for(r=0;r<i;++r)h=c,c=e[r],0===r?l.push(["d",a,"s",r,"=t",a,"p",c].join("")):l.push(["d",a,"s",r,"=(t",a,"p",c,"-s",h,"*t",a,"p",h,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),r=i-1;r>=0;--r)c=e[r],u.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(u.push(n),r=0;r<i;++r){for(a=0,h=c,c=e[r];a<o;++a)u.push(["p",a,"+=d",a,"s",r].join(""));s&&(r>0&&u.push(["index[",h,"]-=s",h].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function i(e,t,n){for(var r=e.body,a=[],i=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var u=RegExp(s.name,"g"),l="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var h=t.offsetArgIndex.indexOf(o);c=t.offsetArgs[h].array,l="+q"+h;case"array":l="p"+c+l;var f="l"+o,p="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(a.push(["var ",f,"=",p,".get(",l,")"].join("")),r=r.replace(u,f),i.push([p,".set(",l,",",f,")"].join(""))):r=r.replace(u,[p,".get(",l,")"].join("")):r=r.replace(u,[p,"[",l,"]"].join("")):"generic"===n[c]?(a.push(["var ",f,"=",p,".get(",l,")"].join("")),r=r.replace(u,f),s.lvalue&&i.push([p,".set(",l,",",f,")"].join(""))):(a.push(["var ",f,"=",p,"[",l,"]"].join("")),r=r.replace(u,f),s.lvalue&&i.push([p,"[",l,"]=",f].join("")));else{for(var d=[s.name],m=[l],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)d.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+c+"b"+g);if(u=RegExp(d.join(""),"g"),l=m.join("+"),"generic"===n[c])throw Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(u,[p,"[",l,"]"].join(""))}break;case"scalar":r=r.replace(u,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(u,"index");break;case"shape":r=r.replace(u,"shape")}}}return[a.join("\n"),r,i.join("\n")].join("\n").trim()}e.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,o=Array(e.arrayArgs.length),s=Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)s[u]=t[2*u],o[u]=t[2*u+1];for(var l=[],c=[],h=[],f=[],p=[],u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(h.push(0),f.push(n),l.push(n),c.push(n+e.arrayBlockIndices[u])):(h.push(e.arrayBlockIndices[u]),f.push(e.arrayBlockIndices[u]+n),l.push(0),c.push(e.arrayBlockIndices[u]));for(var d=[],m=0;m<o[u].length;m++)h[u]<=o[u][m]&&o[u][m]<f[u]&&d.push(o[u][m]-h[u]);p.push(d)}for(var g=["SS"],y=["'use strict'"],b=[],m=0;m<n;++m)b.push(["s",m,"=SS[",m,"]"].join(""));for(var u=0;u<e.arrayArgs.length;++u){g.push("a"+u),g.push("t"+u),g.push("p"+u);for(var m=0;m<n;++m)b.push(["t",u,"p",m,"=t",u,"[",h[u]+m,"]"].join(""));for(var m=0;m<Math.abs(e.arrayBlockIndices[u]);++m)b.push(["t",u,"b",m,"=t",u,"[",l[u]+m,"]"].join(""))}for(var u=0;u<e.scalarArgs.length;++u)g.push("Y"+u);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var v=Array(n),u=0;u<n;++u)v[u]="0";b.push(["index=[",v.join(","),"]"].join(""))}for(var u=0;u<e.offsetArgs.length;++u){for(var w=e.offsetArgs[u],x=[],m=0;m<w.offset.length;++m)0!==w.offset[m]&&(1===w.offset[m]?x.push(["t",w.array,"p",m].join("")):x.push([w.offset[m],"*t",w.array,"p",m].join("")));0===x.length?b.push("q"+u+"=0"):b.push(["q",u,"=",x.join("+")].join(""))}var _=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));(b=b.concat(_)).length>0&&y.push("var "+b.join(","));for(var u=0;u<e.arrayArgs.length;++u)y.push("p"+u+"|=0");e.pre.body.length>3&&y.push(i(e.pre,e,s));var k=i(e.body,e,s),S=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(p);S<n?y.push(function(e,t,n,r){for(var i=t.length,o=n.arrayArgs.length,s=n.blockSize,u=n.indexArgs.length>0,l=[],c=0;c<o;++c)l.push(["var offset",c,"=p",c].join(""));for(var c=e;c<i;++c)l.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",t[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",t[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",t[c],"]=j",c].join(""));for(var c=0;c<o;++c){for(var h=["offset"+c],f=e;f<i;++f)h.push(["j",f,"*t",c,"p",t[f]].join(""));l.push(["p",c,"=(",h.join("+"),")"].join(""))}l.push(a(t,n,r));for(var c=e;c<i;++c)l.push("}");return l.join("\n")}(S,p[0],e,k)):y.push(a(p[0],e,k)),e.post.body.length>3&&y.push(i(e.post,e,s)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var I=[e.funcName||"unnamed","_cwise_loop_",o[0].join("s"),"m",S,function(e){for(var t=Array(e.length),n=!0,r=0;r<e.length;++r){var a=e[r],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?t[r]="u"+a.charAt(1)+i:t[r]=a.charAt(0)+i,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}(s)].join("");return Function(["function ",I,"(",g.join(","),"){",y.join("\n"),"} return ",I].join(""))()}},5081:function(e,t,n){"use strict";var r=n(1984);e.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[];t.push(["return function ",e.funcName+"_cwise_thunk","(",e.shimArgs.join(","),"){"].join(""));for(var a=[],i=[],o=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],s=[],u=[],l=0;l<e.arrayArgs.length;++l){var c=e.arrayArgs[l];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),a.push("t"+c),a.push("r"+c),i.push("t"+c),i.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),l>0&&(s.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var l=0;l<e.scalarArgs.length;++l)o.push("scalar"+e.scalarArgs[l]);return n.push(["type=[",i.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),Function("compile",t.join("\n"))(r.bind(void 0,e))}},858:function(e,t,n){var r=n(1876).Buffer;e.exports=function(e){if(!/^data\:/i.test(e))throw TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');var t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw TypeError("malformed data: URI");for(var n=e.substring(5,t).split(";"),a=!1,i="US-ASCII",o=0;o<n.length;o++)"base64"==n[o]?a=!0:0==n[o].indexOf("charset=")&&(i=n[o].substring(8));var s=unescape(e.substring(t+1)),u=a?"base64":"ascii",l=new r(s,u);return l.type=n[0]||"text/plain",l.charset=i,l}},1071:function(e,t,n){"use strict";var r=n(3454),a=n(1876).Buffer,i=n(1864),o=n(2861),s=n(1494).N;n(1943),n(6547);var u=n(858);function l(e,t){var n;try{n=new s(e)}catch(e){t(e);return}if(n.numFrames()>0){var r=[],a=[n.numFrames(),n.height,n.width,4],i=new Uint8Array(a[0]*a[1]*a[2]*a[3]),u=o(i,a);try{for(var l=0;l<n.numFrames();++l)n.decodeAndBlitFrameRGBA(l,i.subarray(u.index(l,0,0,0),u.index(l+1,0,0,0))),r.push(n.frameInfo(l))}catch(e){t(e);return}t(null,u.transpose(0,2,1),r)}else{var a=[n.height,n.width,4],i=new Uint8Array(a[0]*a[1]*a[2]),u=o(i,a);try{n.decodeAndBlitFrameRGBA(0,i)}catch(e){t(e);return}t(null,u.transpose(1,0))}}e.exports=function(e,t,n){n||(n=t,t="");var s,c,h,f,p,d,m,g,y=i.extname(e);".GIF"===(t||y.toUpperCase())?(s=e,c=n,(h=new XMLHttpRequest).open("GET",s,!0),h.responseType="arraybuffer",h.overrideMimeType&&h.overrideMimeType("application/binary"),h.onerror=function(e){c(e)},h.onload=function(){4===h.readyState&&l(new Uint8Array(h.response),c)},h.send()):(a.isBuffer(e)&&(e="data:"+t+";base64,"+e.toString("base64")),0===e.indexOf("data:image/gif;"))?(f=e,p=n,r.nextTick(function(){try{var e=u(f);e?l(function(e){if(void 0!==e[0])return new Uint8Array(e);for(var t=e.length,n=new Uint8Array(t),r=0;r<t;++r)n[r]=e.get(r);return n}(e),p):p(Error("Error parsing data URI"))}catch(e){p(e)}})):(d=e,m=n,(g=new Image).crossOrigin="Anonymous",g.onload=function(){var e=document.createElement("canvas");e.width=g.width,e.height=g.height;var t=e.getContext("2d");t.drawImage(g,0,0);var n=t.getImageData(0,0,g.width,g.height);m(null,o(new Uint8Array(n.data),[g.width,g.height,4],[4,4*g.width,1],0))},g.onerror=function(e){m(e)},g.src=d)}},7041:function(e,t,n){var r=n(1876).Buffer;n(7596),n(5293).EventEmitter;var a=n(1451),i=n(9720),o=n(5295),s=n(6914);function u(e){a.call(this,e),this.okayToPush=!0,this.resetData()}function l(e,t,n){var r=(n=n||{}).highWaterMark;u.call(this,{highWaterMark:r||0===r?r:65536}),this.width=~~e,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=[],this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10;var a=this;function i(){a.flushData()}this.on("writeHeader#stop",i),this.on("frame#stop",i),this.on("finish#stop",function(){i(),a.push(null)})}i.inherits(u,a),u.prototype._read=function(){this.okayToPush=!0},u.prototype.resetData=function(){this.data=[]},u.prototype.flushData=function(){if(!this.okayToPush){var e=Error("GIF memory limit exceeded. Please `read` from GIF before writing additional frames/information.");return this.emit("error",e)}var t=new r(this.data);this.resetData(),this.okayToPush=this.push(t)},u.prototype.writeByte=function(e){this.data.push(e)},u.prototype.writeUTFBytes=function(e){for(var t=e.length,n=0;n<t;n++)this.writeByte(e.charCodeAt(n))},u.prototype.writeBytes=function(e,t,n){for(var r=n||e.length,a=t||0;a<r;a++)this.writeByte(e[a])},i.inherits(l,u),l.prototype.setDelay=function(e){this.delay=Math.round(e/10)},l.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)},l.prototype.setDispose=function(e){e>=0&&(this.dispose=e)},l.prototype.setRepeat=function(e){this.repeat=e},l.prototype.setTransparent=function(e){this.transparent=e},l.prototype.analyzeImage=function(e){this.setImagePixels(this.removeAlphaChannel(e)),this.analyzePixels()},l.prototype.writeImageInfo=function(){this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.firstFrame=!1},l.prototype.outputImage=function(){this.writePixels()},l.prototype.addFrame=function(e){this.emit("frame#start"),this.analyzeImage(e),this.writeImageInfo(),this.outputImage(),this.emit("frame#stop")},l.prototype.finish=function(){this.emit("finish#start"),this.writeByte(59),this.emit("finish#stop")},l.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e},l.prototype.writeHeader=function(){this.emit("writeHeader#start"),this.writeUTFBytes("GIF89a"),this.emit("writeHeader#stop")},l.prototype.analyzePixels=function(){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);var t=new o(this.pixels,this.sample);t.buildColormap(),this.colorTab=t.getColormap();for(var n=0,r=0;r<e;r++){var a=t.lookupRGB(255&this.pixels[n++],255&this.pixels[n++],255&this.pixels[n++]);this.usedEntry[a]=!0,this.indexedPixels[r]=a}this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent))},l.prototype.findClosest=function(e){if(null===this.colorTab)return -1;for(var t=(16711680&e)>>16,n=(65280&e)>>8,r=255&e,a=0,i=16777216,o=this.colorTab.length,s=0;s<o;){var u=t-(255&this.colorTab[s++]),l=n-(255&this.colorTab[s++]),c=r-(255&this.colorTab[s]),h=u*u+l*l+c*c,f=s/3;this.usedEntry[f]&&h<i&&(i=h,a=f),s++}return a},l.prototype.removeAlphaChannel=function(e){for(var t=this.width,n=this.height,r=new Uint8Array(t*n*3),a=0,i=0;i<n;i++)for(var o=0;o<t;o++){var s=i*t*4+4*o;r[a++]=e[s],r[a++]=e[s+1],r[a++]=e[s+2]}return r},l.prototype.setImagePixels=function(e){this.pixels=e},l.prototype.writeGraphicCtrlExt=function(){var e,t;this.writeByte(33),this.writeByte(249),this.writeByte(4),null===this.transparent?(e=0,t=0):(e=1,t=2),this.dispose>=0&&(t=7&dispose),t<<=2,this.writeByte(0|t|0|e),this.writeShort(this.delay),this.writeByte(this.transIndex),this.writeByte(0)},l.prototype.writeImageDesc=function(){this.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.writeByte(0):this.writeByte(128|this.palSize)},l.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.writeByte(240|this.palSize),this.writeByte(0),this.writeByte(0)},l.prototype.writeNetscapeExt=function(){this.writeByte(33),this.writeByte(255),this.writeByte(11),this.writeUTFBytes("NETSCAPE2.0"),this.writeByte(3),this.writeByte(1),this.writeShort(this.repeat),this.writeByte(0)},l.prototype.writePalette=function(){this.writeBytes(this.colorTab);for(var e=768-this.colorTab.length,t=0;t<e;t++)this.writeByte(0)},l.prototype.writeShort=function(e){this.writeByte(255&e),this.writeByte(e>>8&255)},l.prototype.writePixels=function(){new s(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this)},l.prototype.stream=function(){return this},l.ByteCapacitor=u,e.exports=l},6914:function(e){var t=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=function(e,n,r,a){var i,o,s,u,l,c,h=Math.max(2,a),f=new Uint8Array(256),p=new Int32Array(5003),d=new Int32Array(5003),m=0,g=0,y=!1;function b(e,t){f[i++]=e,i>=254&&w(t)}function v(e){for(var t=0;t<e;++t)p[t]=-1}function w(e){i>0&&(e.writeByte(i),e.writeBytes(f,0,i),i=0)}function x(){return 0===remaining?-1:(--remaining,255&r[curPixel++])}function _(e,n){for(c&=t[m],m>0?c|=e<<m:c=e,m+=n_bits;m>=8;)b(255&c,n),c>>=8,m-=8;if((g>o||y)&&(y?(o=(1<<(n_bits=s))-1,y=!1):o=12==++n_bits?4096:(1<<n_bits)-1),e==l){for(;m>0;)b(255&c,n),c>>=8,m-=8;w(n)}}this.encode=function(t){t.writeByte(h),remaining=e*n,curPixel=0,function(e,t){var n,r,a,c,h,f,m;for(n=5003,y=!1,o=(1<<(n_bits=s=e))-1,l=(u=1<<e-1)+1,g=u+2,i=0,c=x(),f=0;n<65536;n*=2)++f;f=8-f,v(5003),_(u,t);e:for(;-1!=(r=x());){if(n=(r<<12)+c,p[a=r<<f^c]===n){c=d[a];continue}if(p[a]>=0){h=5003-a,0===a&&(h=1);do if((a-=h)<0&&(a+=5003),p[a]===n){c=d[a];continue e}while(p[a]>=0)}(_(c,t),c=r,g<4096)?(d[a]=g++,p[a]=n):(v(5003),g=u+2,y=!0,_(u,t))}_(c,t),_(l,t)}(h+1,t),t.writeByte(0)}}},5295:function(e){e.exports=function(e,t){var n,r,a,i,o;this.buildColormap=function(){(function(){var e,t;for(e=0,n=[],r=new Int32Array(256),a=new Int32Array(256),i=new Int32Array(256),o=new Int32Array(32);e<256;e++)t=(e<<12)/256,n[e]=new Float64Array([t,t,t,0]),i[e]=256,a[e]=0})(),function(){var r,s,u,l,c,h,f,p,d=e.length,m=30+(t-1)/3,g=d/(3*t),y=~~(g/100),b=1024,v=2048,w=32;for(u=0;u<w;u++)o[u]=b*((w*w-u*u)*256/(w*w));d<1509?(t=1,l=3):l=d%499!=0?1497:d%491!=0?1473:d%487!=0?1461:1509;var x=0;for(u=0;u<g;)if(p=function(e,t,r){var o,s,u,l,c,h=2147483647,f=2147483647,p=-1,d=-1;for(o=0;o<256;o++)(u=Math.abs((s=n[o])[0]-e)+Math.abs(s[1]-t)+Math.abs(s[2]-r))<h&&(h=u,p=o),(l=u-(a[o]>>12))<f&&(f=l,d=o),c=i[o]>>10,i[o]-=c,a[o]+=c<<10;return i[p]+=64,a[p]-=65536,d}(c=(255&e[x])<<4,h=(255&e[x+1])<<4,f=(255&e[x+2])<<4),r=b,s=p,n[s][0]-=r*(n[s][0]-c)/1024,n[s][1]-=r*(n[s][1]-h)/1024,n[s][2]-=r*(n[s][2]-f)/1024,0!==w&&function(e,t,r,a,i){for(var s,u,l=Math.abs(t-e),c=Math.min(t+e,256),h=t+1,f=t-1,p=1;h<c||f>l;)u=o[p++],h<c&&(s=n[h++],s[0]-=u*(s[0]-r)/262144,s[1]-=u*(s[1]-a)/262144,s[2]-=u*(s[2]-i)/262144),f>l&&(s=n[f--],s[0]-=u*(s[0]-r)/262144,s[1]-=u*(s[1]-a)/262144,s[2]-=u*(s[2]-i)/262144)}(w,p,c,h,f),(x+=l)>=d&&(x-=d),0===y&&(y=1),++u%y==0)for(b-=b/m,v-=v/30,w=v>>6,w<=1&&(w=0),p=0;p<w;p++)o[p]=b*((w*w-p*p)*256/(w*w))}(),function(){for(var e=0;e<256;e++)n[e][0]>>=4,n[e][1]>>=4,n[e][2]>>=4,n[e][3]=e}(),function(){var e,t,a,i,o,s,u=0,l=0;for(e=0;e<256;e++){for(a=n[e],o=e,s=a[1],t=e+1;t<256;t++)(i=n[t])[1]<s&&(o=t,s=i[1]);if(i=n[o],e!=o&&(t=i[0],i[0]=a[0],a[0]=t,t=i[1],i[1]=a[1],a[1]=t,t=i[2],i[2]=a[2],a[2]=t,t=i[3],i[3]=a[3],a[3]=t),s!=u){for(r[u]=l+e>>1,t=u+1;t<s;t++)r[t]=e;u=s,l=e}}for(r[u]=l+255>>1,t=u+1;t<256;t++)r[t]=255}()},this.getColormap=function(){for(var e=[],t=[],r=0;r<256;r++)t[n[r][3]]=r;for(var a=0,i=0;i<256;i++){var o=t[i];e[a++]=n[o][0],e[a++]=n[o][1],e[a++]=n[o][2]}return e},this.lookupRGB=function(e,t,a){for(var i,o,s,u=1e3,l=-1,c=r[t],h=c-1;c<256||h>=0;)c<256&&((s=(o=n[c])[1]-t)>=u?c=256:(c++,s<0&&(s=-s),(i=o[0]-e)<0&&(i=-i),(s+=i)<u&&((i=o[2]-a)<0&&(i=-i),(s+=i)<u&&(u=s,l=o[3])))),h>=0&&((s=t-(o=n[h])[1])>=u?h=-1:(h--,s<0&&(s=-s),(i=o[0]-e)<0&&(i=-i),(s+=i)<u&&((i=o[2]-a)<0&&(i=-i),(s+=i)<u&&(u=s,l=o[3]))));return l}}},8679:function(e,t,n){"use strict";var r=n(1296),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(d){var a=p(n);a&&a!==d&&e(t,a,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=u(t),m=u(n),g=0;g<o.length;++g){var y=o[g];if(!i[y]&&!(r&&r[y])&&!(m&&m[y])&&!(s&&s[y])){var b=f(n,y);try{l(t,y,b)}catch(e){}}}}return t}},6103:function(e,t){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case i:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case l:case f:case g:case m:case u:return e;default:return t}}case a:return t}}}function _(e){return x(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||x(e)===c},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===l},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===f},t.isFragment=function(e){return x(e)===i},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===a},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===h||e===s||e===o||e===p||e===d||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===f||e.$$typeof===b||e.$$typeof===v||e.$$typeof===w||e.$$typeof===y)},t.typeOf=x},1296:function(e,t,n){"use strict";e.exports=n(6103)},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},6907:function(e){"use strict";e.exports=function(e){for(var t=Array(e),n=0;n<e;++n)t[n]=n;return t}},8738:function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */e.exports=function(e){return null!=e&&(t(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))||!!e._isBuffer)}},5826:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},2307:function(e,t,n){e=n.nmd(e);var r,a,i,o="__lodash_hash_undefined__",s="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object Map]",d="[object Number]",m="[object Object]",g="[object Promise]",y="[object RegExp]",b="[object Set]",v="[object String]",w="[object WeakMap]",x="[object ArrayBuffer]",_="[object DataView]",k=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[s]=I[u]=I[x]=I[l]=I[_]=I[c]=I[h]=I[f]=I[p]=I[d]=I[m]=I[y]=I[b]=I[v]=I[w]=!1;var E="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,N="object"==typeof self&&self&&self.Object===Object&&self,T=E||N||Function("return this")(),A=t&&!t.nodeType&&t,C=A&&e&&!e.nodeType&&e,O=C&&C.exports===A,R=O&&E.process,D=function(){try{return R&&R.binding&&R.binding("util")}catch(e){}}(),P=D&&D.isTypedArray;function $(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function F(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var M=Array.prototype,B=Function.prototype,L=Object.prototype,U=T["__core-js_shared__"],j=B.toString,z=L.hasOwnProperty,W=(r=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",V=L.toString,G=RegExp("^"+j.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=O?T.Buffer:void 0,q=T.Symbol,X=T.Uint8Array,K=L.propertyIsEnumerable,Z=M.splice,Y=q?q.toStringTag:void 0,Q=Object.getOwnPropertySymbols,J=H?H.isBuffer:void 0,ee=(a=Object.keys,i=Object,function(e){return a(i(e))}),et=eI(T,"DataView"),en=eI(T,"Map"),er=eI(T,"Promise"),ea=eI(T,"Set"),ei=eI(T,"WeakMap"),eo=eI(Object,"create"),es=eT(et),eu=eT(en),el=eT(er),ec=eT(ea),eh=eT(ei),ef=q?q.prototype:void 0,ep=ef?ef.valueOf:void 0;function ed(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function em(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function eg(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ey(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new eg;++t<n;)this.add(e[t])}function eb(e){var t=this.__data__=new em(e);this.size=t.size}function ev(e,t){for(var n=e.length;n--;)if(eA(e[n][0],t))return n;return -1}function ew(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Y&&Y in Object(e)?function(e){var t=z.call(e,Y),n=e[Y];try{e[Y]=void 0;var r=!0}catch(e){}var a=V.call(e);return r&&(t?e[Y]=n:delete e[Y]),a}(e):V.call(e)}function ex(e){return eF(e)&&ew(e)==s}function e_(e,t,n,r,a,i){var o=1&n,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var c=-1,h=!0,f=2&n?new ey:void 0;for(i.set(e,t),i.set(t,e);++c<s;){var p=e[c],d=t[c];if(r)var m=o?r(d,p,c,t,e,i):r(p,d,c,e,t,i);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}(t,function(e,t){if(!f.has(t)&&(p===e||a(p,e,n,r,i)))return f.push(t)})){h=!1;break}}else if(!(p===d||a(p,d,n,r,i))){h=!1;break}}return i.delete(e),i.delete(t),h}function ek(e){var t;return t=function(e){return null!=e&&eP(e.length)&&!eD(e)?function(e,t){var n,r,a=eO(e),i=!a&&eC(e),o=!a&&!i&&eR(e),s=!a&&!i&&!o&&eM(e),u=a||i||o||s,l=u?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=l.length;for(var h in e)z.call(e,h)&&!(u&&("length"==h||o&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||(n=h,(r=null==(r=c)?9007199254740991:r)&&("number"==typeof n||S.test(n))&&n>-1&&n%1==0&&n<r)))&&l.push(h);return l}(e):function(e){if(n="function"==typeof(t=e&&e.constructor)&&t.prototype||L,e!==n)return ee(e);var t,n,r=[];for(var a in Object(e))z.call(e,a)&&"constructor"!=a&&r.push(a);return r}(e)}(e),eO(e)?t:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(t,eE(e))}function eS(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function eI(e,t){var n=null==e?void 0:e[t];return!(!e$(n)||W&&W in n)&&(eD(n)?G:k).test(eT(n))?n:void 0}ed.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ed.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ed.prototype.get=function(e){var t=this.__data__;if(eo){var n=t[e];return n===o?void 0:n}return z.call(t,e)?t[e]:void 0},ed.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:z.call(t,e)},ed.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=eo&&void 0===t?o:t,this},em.prototype.clear=function(){this.__data__=[],this.size=0},em.prototype.delete=function(e){var t=this.__data__,n=ev(t,e);return!(n<0)&&(n==t.length-1?t.pop():Z.call(t,n,1),--this.size,!0)},em.prototype.get=function(e){var t=this.__data__,n=ev(t,e);return n<0?void 0:t[n][1]},em.prototype.has=function(e){return ev(this.__data__,e)>-1},em.prototype.set=function(e,t){var n=this.__data__,r=ev(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},eg.prototype.clear=function(){this.size=0,this.__data__={hash:new ed,map:new(en||em),string:new ed}},eg.prototype.delete=function(e){var t=eS(this,e).delete(e);return this.size-=t?1:0,t},eg.prototype.get=function(e){return eS(this,e).get(e)},eg.prototype.has=function(e){return eS(this,e).has(e)},eg.prototype.set=function(e,t){var n=eS(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ey.prototype.add=ey.prototype.push=function(e){return this.__data__.set(e,o),this},ey.prototype.has=function(e){return this.__data__.has(e)},eb.prototype.clear=function(){this.__data__=new em,this.size=0},eb.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},eb.prototype.get=function(e){return this.__data__.get(e)},eb.prototype.has=function(e){return this.__data__.has(e)},eb.prototype.set=function(e,t){var n=this.__data__;if(n instanceof em){var r=n.__data__;if(!en||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new eg(r)}return n.set(e,t),this.size=n.size,this};var eE=Q?function(e){return null==e?[]:function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}(Q(e=Object(e)),function(t){return K.call(e,t)})}:function(){return[]},eN=ew;function eT(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function eA(e,t){return e===t||e!=e&&t!=t}(et&&eN(new et(new ArrayBuffer(1)))!=_||en&&eN(new en)!=p||er&&eN(er.resolve())!=g||ea&&eN(new ea)!=b||ei&&eN(new ei)!=w)&&(eN=function(e){var t=ew(e),n=t==m?e.constructor:void 0,r=n?eT(n):"";if(r)switch(r){case es:return _;case eu:return p;case el:return g;case ec:return b;case eh:return w}return t});var eC=ex(function(){return arguments}())?ex:function(e){return eF(e)&&z.call(e,"callee")&&!K.call(e,"callee")},eO=Array.isArray,eR=J||function(){return!1};function eD(e){if(!e$(e))return!1;var t=ew(e);return t==f||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eP(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function e$(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eF(e){return null!=e&&"object"==typeof e}var eM=P?function(e){return P(e)}:function(e){return eF(e)&&eP(e.length)&&!!I[ew(e)]};e.exports=function(e,t){return function e(t,n,r,a,i){return t===n||(null!=t&&null!=n&&(eF(t)||eF(n))?function(e,t,n,r,a,i){var o=eO(e),f=eO(t),g=o?u:eN(e),w=f?u:eN(t);g=g==s?m:g,w=w==s?m:w;var k=g==m,S=w==m,I=g==w;if(I&&eR(e)){if(!eR(t))return!1;o=!0,k=!1}if(I&&!k)return i||(i=new eb),o||eM(e)?e_(e,t,n,r,a,i):function(e,t,n,r,a,i,o){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case x:if(e.byteLength!=t.byteLength||!i(new X(e),new X(t)))break;return!0;case l:case c:case d:return eA(+e,+t);case h:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case p:var s=$;case b:var u=1&r;if(s||(s=F),e.size!=t.size&&!u)break;var f=o.get(e);if(f)return f==t;r|=2,o.set(e,t);var m=e_(s(e),s(t),r,a,i,o);return o.delete(e),m;case"[object Symbol]":if(ep)return ep.call(e)==ep.call(t)}return!1}(e,t,g,n,r,a,i);if(!(1&n)){var E=k&&z.call(e,"__wrapped__"),N=S&&z.call(t,"__wrapped__");if(E||N){var T=E?e.value():e,A=N?t.value():t;return i||(i=new eb),a(T,A,n,r,i)}}return!!I&&(i||(i=new eb),function(e,t,n,r,a,i){var o=1&n,s=ek(e),u=s.length;if(u!=ek(t).length&&!o)return!1;for(var l=u;l--;){var c=s[l];if(!(o?c in t:z.call(t,c)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var f=!0;i.set(e,t),i.set(t,e);for(var p=o;++l<u;){var d=e[c=s[l]],m=t[c];if(r)var g=o?r(m,d,c,t,e,i):r(d,m,c,e,t,i);if(!(void 0===g?d===m||a(d,m,n,r,i):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return i.delete(e),i.delete(t),f}(e,t,n,r,a,i))}(t,n,r,a,e,i):t!=t&&n!=n)}(e,t)}},3720:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(r=i[e]))?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(e|=0,(o=-128<=e&&e<128)&&(r=a[e]))?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return _}else{if(e<=-d)return k;if(e+1>=d)return x}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var r,a=s(l(n,8)),i=g,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),h=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(l(n,u));i=i.mul(f).add(s(h))}else i=(i=i.mul(a)).add(s(h))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?s(e,t):"string"==typeof e?c(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=h;var f=4294967296,p=18446744073709552e3,d=0x7fffffffffffffff,m=o(16777216),g=o(0);n.ZERO=g;var y=o(0,!0);n.UZERO=y;var b=o(1);n.ONE=b;var v=o(1,!0);n.UONE=v;var w=o(-1);n.NEG_ONE=w;var x=u(-1,2147483647,!1);n.MAX_VALUE=x;var _=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=_;var k=u(0,-2147483648,!1);n.MIN_VALUE=k;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(k))return"-"+this.neg().toString(e);var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}for(var a=s(l(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),c=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return(1&this.low)==1},S.isEven=function(){return(1&this.low)==0},S.equals=function(e){return r(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return 0>this.comp(e)},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return 0>=this.comp(e)},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(b)},S.neg=S.negate,S.add=function(e){r(e)||(e=h(e));var t,n,a=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,l=e.high>>>16,c=65535&e.high,f=e.low>>>16,p=65535&e.low,d=0,m=0;return t=0+((n=0+(s+p))>>>16),n&=65535,t+=o+f,m+=t>>>16,t&=65535,m+=i+c,d+=m>>>16,m&=65535,d+=a+l,u(t<<16|n,(d&=65535)<<16|m,this.unsigned)},S.subtract=function(e){return r(e)||(e=h(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(k))return e.isOdd()?k:g;if(e.eq(k))return this.isOdd()?k:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n,a,i=this.high>>>16,o=65535&this.high,l=this.low>>>16,c=65535&this.low,f=e.high>>>16,p=65535&e.high,d=e.low>>>16,y=65535&e.low,b=0,v=0;return n=0+((a=0+c*y)>>>16),a&=65535,n+=l*y,v+=n>>>16,n&=65535,n+=c*d,v+=n>>>16,n&=65535,v+=o*y,b+=v>>>16,v&=65535,v+=l*d,b+=v>>>16,v&=65535,v+=c*p,b+=v>>>16,v&=65535,b+=i*y+o*d+l*p+c*f,u(n<<16|a,(b&=65535)<<16|v,this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=h(e)),e.isZero())throw Error("division by zero");if(t){var n,a,i;return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;i=y}else{if(this.eq(k))return e.eq(b)||e.eq(w)?k:e.eq(k)?b:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:w:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(k))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){for(var o=Math.ceil(Math.log(n=Math.max(1,Math.floor(a.toNumber()/e.toNumber())))/Math.LN2),c=o<=48?1:l(2,o-48),f=s(n),p=f.mul(e);p.isNegative()||p.gt(a);)n-=c,p=(f=s(n,this.unsigned)).mul(e);f.isZero()&&(f=b),i=i.add(f),a=a.sub(p)}return i},S.div=S.divide,S.modulo=function(e){return(r(e)||(e=h(e)),t)?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return(r(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return(r(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):32===e?u(t,0,this.unsigned):u(t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},4139:function(e,t){"use strict";/*! multi-integer-range (c) 2015 Soichiro Miki */var n=function(){function e(t){function n(e){return"[object Array]"===Object.prototype.toString.call(e)}if(this.ranges=[],"string"==typeof t)this.parseString(t);else if("number"==typeof t)this.appendRange(t,t);else if(t instanceof e)this.ranges=t.getRanges();else if(n(t))for(var r=0;r<t.length;r++){var a=t[r];if(n(a)){if(2===a.length)this.appendRange(a[0],a[1]);else throw TypeError("Invalid array initializer")}else if("number"==typeof a)this.append(a);else throw TypeError("Invalid array initialzer")}else if(void 0!==t)throw TypeError("Invalid input")}return e.prototype.parseString=function(e){function t(e){return parseInt(e.match(/^\(?(\-?\d+)/)[1],10)}var n,r=e.replace(/\s/g,"");if(r.length)for(var a=0,i=r.split(",");a<i.length;a++){var o=i[a];if(n=o.match(/^(\d+|\(\-?\d+\))$/)){var s=t(n[1]);this.appendRange(s,s)}else if(n=o.match(/^(\d+|\(\-?\d+\))?\-(\d+|\(\-?\d+\))?$/)){var u=void 0===n[1]?-1/0:t(n[1]),l=void 0===n[2]?Infinity:t(n[2]);this.appendRange(u,l)}else throw SyntaxError("Invalid input")}},e.prototype.clone=function(){return new e(this)},e.prototype.append=function(t){if(void 0===t)throw TypeError("Invalid input");if(!(t instanceof e))return this.append(new e(t));for(var n=0,r=t.ranges;n<r.length;n++){var a=r[n];this.appendRange(a[0],a[1])}return this},e.prototype.appendRange=function(e,t){var n=[e,t];if(n[0]>n[1]&&(n=[n[1],n[0]]),n[0]===1/0&&n[1]===1/0||n[0]===-1/0&&n[1]===-1/0)throw RangeError("Infinity can be used only within an unbounded range segment");var r=this.findOverlap(n);return this.ranges.splice(r.lo,r.count,r.union),this},e.prototype.subtract=function(t){if(void 0===t)throw TypeError("Invalid input");if(!(t instanceof e))return this.subtract(new e(t));for(var n=0,r=t.ranges;n<r.length;n++){var a=r[n];this.subtractRange(a[0],a[1])}return this},e.prototype.subtractRange=function(e,t){var n=[e,t];n[0]>n[1]&&(n=[n[1],n[0]]);var r=this.findOverlap(n);if(r.count>0){var a=[];this.ranges[r.lo][0]<n[0]&&a.push([this.ranges[r.lo][0],n[0]-1]),n[1]<this.ranges[r.lo+r.count-1][1]&&a.push([n[1]+1,this.ranges[r.lo+r.count-1][1]]),this.ranges.splice.apply(this.ranges,[r.lo,r.count].concat(a))}return this},e.prototype.intersect=function(t){if(void 0===t)throw TypeError("Invalid input");if(!(t instanceof e))return this.intersect(new e(t));for(var n=[],r=0,a=0;a<this.ranges.length;a++)for(var i=this.ranges[a],o=r;o<t.ranges.length;o++){var s=t.ranges[o];if(i[0]<=s[1]&&i[1]>=s[0]){r=o;var u=Math.max(i[0],s[0]),l=Math.min(i[1],s[1]);n.push([u,l])}else if(i[1]<s[0])break}return this.ranges=n,this},e.prototype.findOverlap=function(e){for(var t=this.ranges.length-1;t>=0;t--){var n=this.ranges[t],r=void 0;if(r=this.calcUnion(n,e)){for(var a=1,i=void 0;t-a>=0&&(i=this.calcUnion(r,this.ranges[t-a]));)r=i,a++;return{lo:t+1-a,count:a,union:r}}if(n[1]<e[0])return{lo:t+1,count:0,union:e}}return{lo:0,count:0,union:e}},e.prototype.calcUnion=function(e,t){return e[1]+1<t[0]||e[0]-1>t[1]?null:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},e.prototype.getRanges=function(){for(var e=[],t=0,n=this.ranges;t<n.length;t++){var r=n[t];e.push([r[0],r[1]])}return e},e.prototype.has=function(t){if(void 0===t)throw TypeError("Invalid input");if(!(t instanceof e))return this.has(new e(t));for(var n=this.ranges.length,r=0,a=t.ranges;r<a.length;r++){var i=a[r],o=void 0;for(o=0;o<n;o++){var s=this.ranges[o];if(i[0]>=s[0]&&i[1]<=s[1]&&i[1]>=s[0]&&i[1]<=s[1])break}if(o===n)return!1}return!0},e.prototype.hasRange=function(t,n){return this.has(new e([[t,n]]))},e.prototype.segmentLength=function(){return this.ranges.length},e.prototype.length=function(){if(this.isUnbounded())return 1/0;for(var e=0,t=0,n=this.ranges;t<n.length;t++){var r=n[t];e+=r[1]-r[0]+1}return e},e.prototype.equals=function(t){if(void 0===t)throw TypeError("Invalid input");if(!(t instanceof e))return this.equals(new e(t));if(t===this)return!0;if(this.ranges.length!==t.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++)if(this.ranges[n][0]!==t.ranges[n][0]||this.ranges[n][1]!==t.ranges[n][1])return!1;return!0},e.prototype.isUnbounded=function(){return this.ranges.length>0&&(this.ranges[0][0]===-1/0||this.ranges[this.ranges.length-1][1]===1/0)},e.prototype.min=function(){if(0!==this.ranges.length)return this.ranges[0][0]},e.prototype.max=function(){if(0!==this.ranges.length)return this.ranges[this.ranges.length-1][1]},e.prototype.shift=function(){var e=this.min();if(e===-1/0)throw RangeError("shift() was invoked on an unbounded MultiRange which contains -Infinity");return void 0!==e&&this.subtract(e),e},e.prototype.pop=function(){var e=this.max();if(e===1/0)throw RangeError("pop() was invoked on an unbounded MultiRange which contains +Infinity");return void 0!==e&&this.subtract(e),e},e.prototype.toString=function(){function e(e){return e>=0?String(e):"("+e+")"}for(var t=[],n=0,r=this.ranges;n<r.length;n++){var a=r[n];a[0]===-1/0?a[1]===1/0?t.push("-"):t.push("-"+e(a[1])):a[1]===1/0?t.push(e(a[0])+"-"):a[0]==a[1]?t.push(e(a[0])):t.push(e(a[0])+"-"+e(a[1]))}return t.join(",")},e.prototype.toArray=function(){if(this.isUnbounded())throw RangeError("You cannot build an array from an unbounded range");for(var e=Array(this.length()),t=0,n=0,r=this.ranges;n<r.length;n++)for(var a=r[n],i=a[0];i<=a[1];i++)e[t++]=i;return e},e.prototype.getIterator=function(){var e=this;if(this.isUnbounded())throw RangeError("Unbounded ranges cannot be iterated over");var t=0,n=this.ranges[t],r=n?n[0]:void 0;return{next:function(){if(!n)return{done:!0};var a=r;return++r>n[1]&&(r=(n=e.ranges[++t])?n[0]:void 0),{value:a}}}},e}();t.w=n,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(n.prototype[Symbol.iterator]=n.prototype.getIterator)},8897:function(e,t,n){"use strict";var r=n(6239),a={body:"",args:[],thisVars:[],localVars:[]};function i(e){if(!e)return a;for(var t=0;t<e.args.length;++t){var n=e.args[t];0===t?e.args[t]={name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(r({args:e.args,pre:i(e.pre),body:i(e.body),post:i(e.proc),funcName:e.funcName}))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var n=s[e];t[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var n=u[e];t[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:e}),t[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var n=l[e];t[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var n=c[e];t[n]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var n=h[e];t[n]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var f=["atan2","pow"];!function(){for(var e=0;e<f.length;++e){var n=f[e];t[n+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=r({args:["array"],pre:a,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=r({args:["array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=r({args:["array","array"],pre:a,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},1943:function(e,t,n){"use strict";var r=n(2861),a=n(1895);e.exports=function(e,t){for(var n=[],i=e,o=1;Array.isArray(i);)n.push(i.length),o*=i.length,i=i[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),a(t,e),t)}},1895:function(e,t,n){e.exports=n(6239)({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},2861:function(e,t,n){var r=n(6907),a=n(8738),i="undefined"!=typeof Float64Array;function o(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(o);var r=Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=function(e,t,n,o){if(void 0===e){var l=u.array[0];return l([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var c=t.length;if(void 0===n){n=Array(c);for(var h=c-1,f=1;h>=0;--h)n[h]=f,f*=t[h]}if(void 0===o){o=0;for(var h=0;h<c;++h)n[h]<0&&(o-=(t[h]-1)*n[h])}for(var p=function(e){if(a(e))return"buffer";if(i)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),d=u[p];d.length<=c+1;)d.push(function(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var a="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",o=Function(i);return o()}if(0===t){var i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(a?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(a?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",o=Function("TrivialArray",i);return o(u[e][0])}var i=["'use strict'"],l=r(t),c=l.map(function(e){return"i"+e}),h="this.offset+"+l.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),f=l.map(function(e){return"b"+e}).join(","),p=l.map(function(e){return"c"+e}).join(",");i.push("function "+n+"(a,"+f+","+p+",d){this.data=a","this.shape=["+f+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+l.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),a?i.push("return this.data.set("+h+",v)}"):i.push("return this.data["+h+"]=v}"),i.push("proto.get=function "+n+"_get("+c.join(",")+"){"),a?i.push("return this.data.get("+h+")}"):i.push("return this.data["+h+"]}"),i.push("proto.index=function "+n+"_index(",c.join(),"){return "+h+"}"),i.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+l.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+l.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=l.map(function(e){return"a"+e+"=this.shape["+e+"]"}),m=l.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+m.join(","));for(var g=0;g<t;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");i.push("return new "+n+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+l.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+l.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var g=0;g<t;++g)i.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");i.push("return new "+n+"(this.data,"+l.map(function(e){return"a"+e}).join(",")+","+l.map(function(e){return"b"+e}).join(",")+",c)}");for(var y=Array(t),b=Array(t),g=0;g<t;++g)y[g]="a[i"+g+"]",b[g]="b[i"+g+"]";i.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var g=0;g<t;++g)i.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+l.map(function(e){return"shape["+e+"]"}).join(",")+","+l.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var o=Function("CTOR_LIST","ORDER",i.join("\n"));return o(u[e],s)}(p,d.length-1));var l=d[c+1];return l(e,t,n,o)}},7596:function(e,t,n){var r=n(3454),a=n(1876).Buffer;!function(){var t={992:function(e){e.exports=function(e,n,r){if(e.filter)return e.filter(n,r);if(null==e||"function"!=typeof n)throw TypeError();for(var a=[],i=0;i<e.length;i++)if(t.call(e,i)){var o=e[i];n.call(r,o,i,e)&&a.push(o)}return a};var t=Object.prototype.hasOwnProperty},167:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o,s=n(23).codes,u=s.ERR_AMBIGUOUS_ARGUMENT,l=s.ERR_INVALID_ARG_TYPE,c=s.ERR_INVALID_ARG_VALUE,h=s.ERR_INVALID_RETURN_VALUE,f=s.ERR_MISSING_ARGS,p=n(545),d=n(177).inspect,m=n(177).types,g=m.isPromise,y=m.isRegExp,b=Object.assign?Object.assign:n(604).assign,v=Object.is?Object.is:n(208);function w(){var e=n(176);i=e.isDeepEqual,o=e.isDeepStrictEqual}var x=!1,_=e.exports=E,k={};function S(e){if(e.message instanceof Error)throw e.message;throw new p(e)}function I(e,t,n,r){if(!n){var a=!1;if(0===t)a=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var i=new p({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw i.generatedMessage=a,i}}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];I.apply(void 0,[E,t.length].concat(t))}_.fail=function e(t,n,a,i,o){var s,u=arguments.length;if(0===u?s="Failed":1===u?(a=t,t=void 0):(!1===x&&(x=!0,(r.emitWarning?r.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===u&&(i="!=")),a instanceof Error)throw a;var l={actual:t,expected:n,operator:void 0===i?"fail":i,stackStartFn:o||e};void 0!==a&&(l.message=a);var c=new p(l);throw s&&(c.message=s,c.generatedMessage=!0),c},_.AssertionError=p,_.ok=E,_.equal=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t!=n&&S({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},_.notEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t==n&&S({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},_.deepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&w(),i(t,n)||S({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},_.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&w(),i(t,n)&&S({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},_.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&w(),o(t,n)||S({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},_.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===i&&w(),o(t,n)&&S({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},_.strictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");v(t,n)||S({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},_.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");v(t,n)&&S({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var N=function e(t,n,r){var a=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),n.forEach(function(e){e in t&&(void 0!==r&&"string"==typeof r[e]&&y(t[e])&&t[e].test(r[e])?a[e]=r[e]:a[e]=t[e])})};function T(e,t,n,r){if("function"!=typeof t){if(y(t))return t.test(e);if(2==arguments.length)throw new l("expected",["Function","RegExp"],t);if("object"!==a(e)||null===e){var s=new p({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:r});throw s.operator=r.name,s}var u=Object.keys(t);if(t instanceof Error)u.push("name","message");else if(0===u.length)throw new c("error",t,"may not be an empty object");return void 0===i&&w(),u.forEach(function(a){"string"==typeof e[a]&&y(t[a])&&t[a].test(e[a])||function(e,t,n,r,a,i){if(!(n in e)||!o(e[n],t[n])){if(!r){var s=new N(e,a),u=new N(t,a,e),l=new p({actual:s,expected:u,operator:"deepStrictEqual",stackStartFn:i});throw l.actual=e,l.expected=t,l.operator=i.name,l}S({actual:e,expected:t,message:r,operator:i.name,stackStartFn:i})}}(e,t,a,n,u,r)}),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function A(e){if("function"!=typeof e)throw new l("fn","Function",e);try{e()}catch(e){return e}return k}function C(e){return g(e)||null!==e&&"object"===a(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function O(e){return Promise.resolve().then(function(){var t;if("function"==typeof e){if(!C(t=e()))throw new h("instance of Promise","promiseFn",t)}else if(C(e))t=e;else throw new l("promiseFn",["Function","Promise"],e);return Promise.resolve().then(function(){return t}).then(function(){return k}).catch(function(e){return e})})}function R(e,t,n,r){if("string"==typeof n){if(4==arguments.length)throw new l("error",["Object","Error","Function","RegExp"],n);if("object"===a(t)&&null!==t){if(t.message===n)throw new u("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new u("error/message",'The error "'.concat(t,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==a(n)&&"function"!=typeof n)throw new l("error",["Object","Error","Function","RegExp"],n);if(t===k){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var o="rejects"===e.name?"rejection":"exception";S({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(o).concat(i),stackStartFn:e})}if(n&&!T(t,n,r,e))throw t}function D(e,t,n,r){if(t!==k){if("string"==typeof n&&(r=n,n=void 0),!n||T(t,n)){var a=r?": ".concat(r):".",i="doesNotReject"===e.name?"rejection":"exception";S({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(i).concat(a,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}_.throws=function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];R.apply(void 0,[e,A(t)].concat(r))},_.rejects=function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return O(t).then(function(t){return R.apply(void 0,[e,t].concat(r))})},_.doesNotThrow=function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];D.apply(void 0,[e,A(t)].concat(r))},_.doesNotReject=function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return O(t).then(function(t){return D.apply(void 0,[e,t].concat(r))})},_.ifError=function e(t){if(null!=t){var n="ifError got unwanted exception: ";"object"===a(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=d(t);var r=new p({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),i=t.stack;if("string"==typeof i){var o=i.split("\n");o.shift();for(var s=r.stack.split("\n"),u=0;u<o.length;u++){var l=s.indexOf(o[u]);if(-1!==l){s=s.slice(0,l);break}}r.stack="".concat(s.join("\n"),"\n").concat(o.join("\n"))}throw r}},_.strict=b(function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];I.apply(void 0,[e,n.length].concat(n))},_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},545:function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return t&&("object"===h(t)||"function"==typeof t)?t:o(e)}function o(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function u(e,t,n){return(u=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&l(a,n.prototype),a}:Reflect.construct).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=n(177).inspect,p=n(23).codes.ERR_INVALID_ARG_TYPE;function d(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var m="",g="",y="",b="",v={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function w(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach(function(t){n[t]=e[t]}),Object.defineProperty(n,"message",{value:e.message}),n}function x(e){return f(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var _=function(e){var t,n;function s(e){if(!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s),"object"!==h(e)||null===e)throw new p("options","Object",e);var t,n=e.message,a=e.operator,u=e.stackStartFn,l=e.actual,f=e.expected,_=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=n)t=i(this,c(s).call(this,String(n)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(m="\x1b[34m",g="\x1b[32m",b="\x1b[39m",y="\x1b[31m"):(m="",g="",b="",y="")),"object"===h(l)&&null!==l&&"object"===h(f)&&null!==f&&"stack"in l&&l instanceof Error&&"stack"in f&&f instanceof Error&&(l=w(l),f=w(f)),"deepStrictEqual"===a||"strictEqual"===a)t=i(this,c(s).call(this,function(e,t,n){var a="",i="",o=0,s="",u=!1,l=x(e),c=l.split("\n"),f=x(t).split("\n"),p=0,w="";if("strictEqual"===n&&"object"===h(e)&&"object"===h(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===c.length&&1===f.length&&c[0]!==f[0]){var _=c[0].length+f[0].length;if(_<=10){if(("object"!==h(e)||null===e)&&("object"!==h(t)||null===t)&&(0!==e||0!==t))return"".concat(v[n],"\n\n")+"".concat(c[0]," !== ").concat(f[0],"\n")}else if("strictEqualObject"!==n&&_<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;c[0][p]===f[0][p];)p++;p>2&&(w="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",p),"^"),p=0)}}for(var k=c[c.length-1],S=f[f.length-1];k===S&&(p++<2?s="\n  ".concat(k).concat(s):a=k,c.pop(),f.pop(),0!==c.length&&0!==f.length);)k=c[c.length-1],S=f[f.length-1];var I=Math.max(c.length,f.length);if(0===I){var E=l.split("\n");if(E.length>30)for(E[26]="".concat(m,"...").concat(b);E.length>27;)E.pop();return"".concat(v.notIdentical,"\n\n").concat(E.join("\n"),"\n")}p>3&&(s="\n".concat(m,"...").concat(b).concat(s),u=!0),""!==a&&(s="\n  ".concat(a).concat(s),a="");var N=0,T=v[n]+"\n".concat(g,"+ actual").concat(b," ").concat(y,"- expected").concat(b),A=" ".concat(m,"...").concat(b," Lines skipped");for(p=0;p<I;p++){var C=p-o;if(c.length<p+1)C>1&&p>2&&(C>4?(i+="\n".concat(m,"...").concat(b),u=!0):C>3&&(i+="\n  ".concat(f[p-2]),N++),i+="\n  ".concat(f[p-1]),N++),o=p,a+="\n".concat(y,"-").concat(b," ").concat(f[p]),N++;else if(f.length<p+1)C>1&&p>2&&(C>4?(i+="\n".concat(m,"...").concat(b),u=!0):C>3&&(i+="\n  ".concat(c[p-2]),N++),i+="\n  ".concat(c[p-1]),N++),o=p,i+="\n".concat(g,"+").concat(b," ").concat(c[p]),N++;else{var O=f[p],R=c[p],D=R!==O&&(!d(R,",")||R.slice(0,-1)!==O);D&&d(O,",")&&O.slice(0,-1)===R&&(D=!1,R+=","),D?(C>1&&p>2&&(C>4?(i+="\n".concat(m,"...").concat(b),u=!0):C>3&&(i+="\n  ".concat(c[p-2]),N++),i+="\n  ".concat(c[p-1]),N++),o=p,i+="\n".concat(g,"+").concat(b," ").concat(R),a+="\n".concat(y,"-").concat(b," ").concat(O),N+=2):(i+=a,a="",(1===C||0===p)&&(i+="\n  ".concat(R),N++))}if(N>20&&p<I-2)return"".concat(T).concat(A,"\n").concat(i,"\n").concat(m,"...").concat(b).concat(a,"\n")+"".concat(m,"...").concat(b)}return"".concat(T).concat(u?A:"","\n").concat(i).concat(a).concat(s).concat(w)}(l,f,a)));else if("notDeepStrictEqual"===a||"notStrictEqual"===a){var k=v[a],S=x(l).split("\n");if("notStrictEqual"===a&&"object"===h(l)&&null!==l&&(k=v.notStrictEqualObject),S.length>30)for(S[26]="".concat(m,"...").concat(b);S.length>27;)S.pop();t=1===S.length?i(this,c(s).call(this,"".concat(k," ").concat(S[0]))):i(this,c(s).call(this,"".concat(k,"\n\n").concat(S.join("\n"),"\n")))}else{var I=x(l),E="",N=v[a];"notDeepEqual"===a||"notEqual"===a?(I="".concat(v[a],"\n\n").concat(I)).length>1024&&(I="".concat(I.slice(0,1021),"...")):(E="".concat(x(f)),I.length>512&&(I="".concat(I.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===a||"equal"===a?I="".concat(N,"\n\n").concat(I,"\n\nshould equal\n\n"):E=" ".concat(a," ").concat(E)),t=i(this,c(s).call(this,"".concat(I).concat(E)))}return Error.stackTraceLimit=_,t.generatedMessage=!n,Object.defineProperty(o(t),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),t.code="ERR_ASSERTION",t.actual=l,t.expected=f,t.operator=a,Error.captureStackTrace&&Error.captureStackTrace(o(t),u),t.stack,t.name="AssertionError",i(t)}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,e),t=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:f.custom,value:function(e,t){return f(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r,a;r=e,a=n[t],t in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a})}return e}({},t,{customInspect:!1,depth:0}))}}],a(s.prototype,t),n&&a(s,n),s}(s(Error));e.exports=_},23:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o,s,u={};function l(e,t,n){n||(n=Error);var o=function(n){function o(n,i,s){var u,l;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),(u=(l=a(o).call(this,"string"==typeof t?t:t(n,i,s)))&&("object"===r(l)||"function"==typeof l)?l:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)).code=e,u}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,n),o}(n);u[e]=o}function c(e,t){if(!Array.isArray(e))return"of ".concat(t," ").concat(String(e));var n=e.length;return(e=e.map(function(e){return String(e)}),n>2)?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",function(e,t,a){if((void 0===o&&(o=n(167)),o("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i))?(f="must not be",t=t.replace(/^not /,"")):f="must be",u=" argument",(void 0===l||l>e.length)&&(l=e.length),e.substring(l-u.length,l)===u)p="The ".concat(e," ").concat(f," ").concat(c(t,"type"));else{var i,s,u,l,h,f,p,d=("number"!=typeof h&&(h=0),h+1>e.length||-1===e.indexOf(".",h))?"argument":"property";p='The "'.concat(e,'" ').concat(d," ").concat(f," ").concat(c(t,"type"))}return p+". Received type ".concat(r(a))},TypeError),l("ERR_INVALID_ARG_VALUE",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=n(177));var a=s.inspect(t);return a.length>128&&(a="".concat(a.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(a)},TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",function(e,t,n){var a;return a=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(a,".")},TypeError),l("ERR_MISSING_ARGS",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===o&&(o=n(167)),o(t.length>0,"At least one arg needs to be specified");var a="The ",i=t.length;switch(t=t.map(function(e){return'"'.concat(e,'"')}),i){case 1:a+="".concat(t[0]," argument");break;case 2:a+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:a+=t.slice(0,i-1).join(", ")+", and ".concat(t[i-1]," arguments")}return"".concat(a," must be specified")},TypeError),e.exports.codes=u},176:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=void 0!==/a/g.flags,o=function(e){var t=[];return e.forEach(function(e){return t.push(e)}),t},s=function(e){var t=[];return e.forEach(function(e,n){return t.push([n,e])}),t},u=Object.is?Object.is:n(208),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:n(718);function h(e){return e.call.bind(e)}var f=h(Object.prototype.hasOwnProperty),p=h(Object.prototype.propertyIsEnumerable),d=h(Object.prototype.toString),m=n(177).types,g=m.isAnyArrayBuffer,y=m.isArrayBufferView,b=m.isDate,v=m.isMap,w=m.isRegExp,x=m.isSet,_=m.isNativeError,k=m.isBoxedPrimitive,S=m.isNumberObject,I=m.isStringObject,E=m.isBooleanObject,N=m.isBigIntObject,T=m.isSymbolObject,A=m.isFloat32Array,C=m.isFloat64Array;function O(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=4294967296}function R(e){return Object.keys(e).filter(O).concat(l(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function D(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}var P=void 0;function $(e,t,n,r){if(e===t)return 0!==e||!n||u(e,t);if(n){if("object"!==a(e))return"number"==typeof e&&c(e)&&c(t);if("object"!==a(t)||null===e||null===t||Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==a(e))return(null===t||"object"!==a(t))&&e==t;if(null===t||"object"!==a(t))return!1}var o=d(e);if(o!==d(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var s=R(e,P),l=R(t,P);return s.length===l.length&&M(e,t,n,r,1,s)}if("[object Object]"===o&&(!v(e)&&v(t)||!x(e)&&x(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(w(e)){if(!w(t)||(i?e.source!==t.source||e.flags!==t.flags:RegExp.prototype.toString.call(e)!==RegExp.prototype.toString.call(t)))return!1}else if(_(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else if(y(e)){if(!n&&(A(e)||C(e))){if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1}else if(e.byteLength!==t.byteLength||0!==D(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength)))return!1;var h=R(e,P),f=R(t,P);return h.length===f.length&&M(e,t,n,r,0,h)}else if(x(e))return!!x(t)&&e.size===t.size&&M(e,t,n,r,2);else if(v(e))return!!v(t)&&e.size===t.size&&M(e,t,n,r,3);else if(g(e)){if(e.byteLength!==t.byteLength||0!==D(new Uint8Array(e),new Uint8Array(t)))return!1}else if(k(e)&&(S(e)?!(S(t)&&u(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t))):I(e)?!I(t)||String.prototype.valueOf.call(e)!==String.prototype.valueOf.call(t):E(e)?!E(t)||Boolean.prototype.valueOf.call(e)!==Boolean.prototype.valueOf.call(t):N(e)?!N(t)||BigInt.prototype.valueOf.call(e)!==BigInt.prototype.valueOf.call(t):!T(t)||Symbol.prototype.valueOf.call(e)!==Symbol.prototype.valueOf.call(t)))return!1;return M(e,t,n,r,0)}function F(e,t){return t.filter(function(t){return p(e,t)})}function M(e,t,n,i,u,c){if(5==arguments.length){c=Object.keys(e);var h=Object.keys(t);if(c.length!==h.length)return!1}for(var d=0;d<c.length;d++)if(!f(t,c[d]))return!1;if(n&&5==arguments.length){var m=l(e);if(0!==m.length){var g=0;for(d=0;d<m.length;d++){var y=m[d];if(p(e,y)){if(!p(t,y))return!1;c.push(y),g++}else if(p(t,y))return!1}var b=l(t);if(m.length!==b.length&&F(t,b).length!==g)return!1}else{var v=l(t);if(0!==v.length&&0!==F(t,v).length)return!1}}if(0===c.length&&(0===u||1===u&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var w=i.val1.get(e);if(void 0!==w){var x=i.val2.get(t);if(void 0!==x)return w===x}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var _=function(e,t,n,i,u,l){var c=0;if(2===l){if(!function(e,t,n,r){for(var i=null,s=o(e),u=0;u<s.length;u++){var l=s[u];if("object"===a(l)&&null!==l)null===i&&(i=new Set),i.add(l);else if(!t.has(l)){if(n||!function(e,t,n){var r=L(n);return null!=r?r:t.has(r)&&!e.has(r)}(e,t,l))return!1;null===i&&(i=new Set),i.add(l)}}if(null!==i){for(var c=o(t),h=0;h<c.length;h++){var f=c[h];if("object"===a(f)&&null!==f){if(!B(i,f,n,r))return!1}else if(!n&&!e.has(f)&&!B(i,f,n,r))return!1}return 0===i.size}return!0}(e,t,n,u))return!1}else if(3===l){if(!function(e,t,n,i){for(var o=null,u=s(e),l=0;l<u.length;l++){var c=r(u[l],2),h=c[0],f=c[1];if("object"===a(h)&&null!==h)null===o&&(o=new Set),o.add(h);else{var p=t.get(h);if(void 0===p&&!t.has(h)||!$(f,p,n,i)){if(n||!function(e,t,n,r,a){var i=L(n);if(null!=i)return i;var o=t.get(i);return!!((void 0!==o||t.has(i))&&$(r,o,!1,a))&&!e.has(i)&&$(r,o,!1,a)}(e,t,h,f,i))return!1;null===o&&(o=new Set),o.add(h)}}}if(null!==o){for(var d=s(t),m=0;m<d.length;m++){var g=r(d[m],2),h=g[0],y=g[1];if("object"===a(h)&&null!==h){if(!U(o,e,h,y,n,i))return!1}else if(!n&&(!e.has(h)||!$(e.get(h),y,!1,i))&&!U(o,e,h,y,!1,i))return!1}return 0===o.size}return!0}(e,t,n,u))return!1}else if(1===l)for(;c<e.length;c++)if(f(e,c)){if(!f(t,c)||!$(e[c],t[c],n,u))return!1}else{if(f(t,c))return!1;for(var h=Object.keys(e);c<h.length;c++){var p=h[c];if(!f(t,p)||!$(e[p],t[p],n,u))return!1}if(h.length!==Object.keys(t).length)return!1;return!0}for(c=0;c<i.length;c++){var d=i[c];if(!$(e[d],t[d],n,u))return!1}return!0}(e,t,n,c,i,u);return i.val1.delete(e),i.val2.delete(t),_}function B(e,t,n,r){for(var a=o(e),i=0;i<a.length;i++){var s=a[i];if($(t,s,n,r))return e.delete(s),!0}return!1}function L(e){switch(a(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(c(e))return!1}return!0}function U(e,t,n,r,a,i){for(var s=o(e),u=0;u<s.length;u++){var l=s[u];if($(n,l,a,i)&&$(r,t.get(l),a,i))return e.delete(l),!0}return!1}e.exports={isDeepEqual:function(e,t){return $(e,t,!1)},isDeepStrictEqual:function(e,t){return $(e,t,!0)}}},256:function(e,t,n){"use strict";var r=n(500),a=n(139),i=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?a(n):n}},139:function(e,t,n){"use strict";var r=n(174),a=n(500),i=a("%Function.prototype.apply%"),o=a("%Function.prototype.call%"),s=a("%Reflect.apply%",!0)||r.call(o,i),u=a("%Object.getOwnPropertyDescriptor%",!0),l=a("%Object.defineProperty%",!0),c=a("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(r,o,arguments);return u&&l&&u(t,"length").configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t};var h=function(){return s(r,i,arguments)};l?l(e.exports,"apply",{value:h}):e.exports.apply=h},69:function(e,t,n){"use strict";var r=n(935),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),i=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,u=s&&function(){var e={};try{for(var t in s(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,n,r){(!(t in e)||"function"==typeof r&&"[object Function]"===i.call(r)&&r())&&(u?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},i=r(t);a&&(i=o.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)l(e,i[s],t[i[s]],n[i[s]])};c.supportsDescriptors=!!u,e.exports=c},604:function(e){"use strict";function t(e,t){if(null==e)throw TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var i=Object.keys(Object(a)),o=0,s=i.length;o<s;o++){var u=i[o],l=Object.getOwnPropertyDescriptor(a,u);void 0!==l&&l.enumerable&&(n[u]=a[u])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},144:function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(e,r,a){if("[object Function]"!==n.call(r))throw TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var o=0;o<i;o++)r.call(a,e[o],o,e);else for(var s in e)t.call(e,s)&&r.call(a,e[s],s,e)}},426:function(e){"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r,a=this;if("function"!=typeof a||"[object Function]"!==n.call(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var i=t.call(arguments,1),o=Math.max(0,a.length-i.length),s=[],u=0;u<o;u++)s.push("$"+u);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(!(this instanceof r))return a.apply(e,i.concat(t.call(arguments)));var n=a.apply(this,i.concat(t.call(arguments)));return Object(n)===n?n:this}),a.prototype){var l=function(){};l.prototype=a.prototype,r.prototype=new l,l.prototype=null}return r}},174:function(e,t,n){"use strict";var r=n(426);e.exports=Function.prototype.bind||r},500:function(e,t,n){"use strict";var r,a=SyntaxError,i=Function,o=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var l=function(){throw new o},c=u?function(){try{return arguments.callee,l}catch(e){try{return u(arguments,"callee").get}catch(e){return l}}}():l,h=n(115)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},d="undefined"==typeof Uint8Array?r:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(n=f(a.prototype))}return m[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(174),v=n(101),w=b.call(Function.call,Array.prototype.concat),x=b.call(Function.apply,Array.prototype.splice),_=b.call(Function.call,String.prototype.replace),k=b.call(Function.call,String.prototype.slice),S=b.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,N=function(e){var t=k(e,0,1),n=k(e,-1);if("%"===t&&"%"!==n)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var r=[];return _(e,I,function(e,t,n,a){r[r.length]=n?_(a,E,"$1"):t||e}),r},T=function(e,t){var n,r=e;if(v(y,r)&&(r="%"+(n=y[r])[0]+"%"),v(m,r)){var i=m[r];if(i===p&&(i=g(r)),void 0===i&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/g,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=N(e),r=n.length>0?n[0]:"",i=T("%"+r+"%",t),s=i.name,l=i.value,c=!1,h=i.alias;h&&(r=h[0],x(n,w([0,1],h)));for(var f=1,p=!0;f<n.length;f+=1){var d=n[f],g=k(d,0,1),y=k(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==d&&p||(c=!0),r+="."+d,v(m,s="%"+r+"%"))l=m[s];else if(null!=l){if(!(d in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var b=u(l,d);l=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[d]}else p=v(l,d),l=l[d];p&&!c&&(m[s]=l)}}return l}},942:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,a=n(773);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&a()}},773:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},115:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,a=n(832);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&a()}},832:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},101:function(e,t,n){"use strict";var r=n(174);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},157:function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,n=Object.prototype.toString,r=function(e){return(!t||!e||"object"!=typeof e||!(Symbol.toStringTag in e))&&"[object Arguments]"===n.call(e)},a=function(e){return!!r(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==n.call(e)&&"[object Function]"===n.call(e.callee)},i=function(){return r(arguments)}();r.isLegacyArguments=a,e.exports=i?r:a},391:function(e){"use strict";var t=Object.prototype.toString,n=Function.prototype.toString,r=/^\s*(?:function)?\*/,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=Object.getPrototypeOf,o=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}(),s=o?i(o):{};e.exports=function(e){return"function"==typeof e&&(!!r.test(n.call(e))||(a?i(e)===s:"[object GeneratorFunction]"===t.call(e)))}},460:function(e){"use strict";e.exports=function(e){return e!=e}},718:function(e,t,n){"use strict";var r=n(139),a=n(69),i=n(460),o=n(625),s=n(171),u=r(o(),Number);a(u,{getPolyfill:o,implementation:i,shim:s}),e.exports=u},625:function(e,t,n){"use strict";var r=n(460);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},171:function(e,t,n){"use strict";var r=n(69),a=n(625);e.exports=function(){var e=a();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},994:function(e,t,r){"use strict";var a=r(144),i=r(349),o=r(256),s=o("Object.prototype.toString"),u=r(942)()&&"symbol"==typeof Symbol.toStringTag,l=i(),c=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return -1},h=o("String.prototype.slice"),f={},p=r(466),d=Object.getPrototypeOf;u&&p&&d&&a(l,function(e){var t=new n.g[e];if(!(Symbol.toStringTag in t))throw EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=d(t),a=p(r,Symbol.toStringTag);a||(a=p(d(r),Symbol.toStringTag)),f[e]=a.get});var m=function(e){var t=!1;return a(f,function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}}),t};e.exports=function(e){return!!e&&"object"==typeof e&&(u?!!p&&m(e):c(l,h(s(e),8,-1))>-1)}},208:function(e){"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:!!(e===n||t(e)&&t(n))}},579:function(e,t,n){"use strict";var r;if(!Object.keys){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=n(412),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),d=function(e){if("undefined"==typeof window||!p)return h(e);try{return h(e)}catch(e){return!1}};r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),r=o(e),s=t&&"[object String]"===i.call(e),h=[];if(!t&&!n&&!r)throw TypeError("Object.keys called on a non-object");var f=l&&n;if(s&&e.length>0&&!a.call(e,0))for(var p=0;p<e.length;++p)h.push(String(p));if(r&&e.length>0)for(var m=0;m<e.length;++m)h.push(String(m));else for(var g in e)!(f&&"prototype"===g)&&a.call(e,g)&&h.push(String(g));if(u)for(var y=d(e),b=0;b<c.length;++b)!(y&&"constructor"===c[b])&&a.call(e,c[b])&&h.push(c[b]);return h}}e.exports=r},935:function(e,t,n){"use strict";var r=Array.prototype.slice,a=n(412),i=Object.keys,o=i?function(e){return i(e)}:n(579),s=Object.keys;o.shim=function(){return Object.keys?!function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)&&(Object.keys=function(e){return a(e)?s(r.call(e)):s(e)}):Object.keys=o,Object.keys||o},e.exports=o},412:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},369:function(e){e.exports=function(e){return e instanceof a}},584:function(e,t,n){"use strict";var r=n(157),a=n(391),i=n(490),o=n(994);function s(e){return e.call.bind(e)}var u="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,c=s(Object.prototype.toString),h=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(u)var d=s(BigInt.prototype.valueOf);if(l)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===c(e)}function b(e){return"[object Set]"===c(e)}function v(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function x(e){return"[object ArrayBuffer]"===c(e)}function _(e){return"undefined"!=typeof ArrayBuffer&&(x.working?x(e):e instanceof ArrayBuffer)}function k(e){return"[object DataView]"===c(e)}function S(e){return"undefined"!=typeof DataView&&(k.working?k(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=a,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||S(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(b.working?b(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),t.isArrayBuffer=_,k.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=S;var I="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function N(e){return void 0!==I&&(void 0===E.working&&(E.working=E(new I)),E.working?E(e):e instanceof I)}function T(e){return g(e,h)}function A(e){return g(e,f)}function C(e){return g(e,p)}function O(e){return u&&g(e,d)}function R(e){return l&&g(e,m)}t.isSharedArrayBuffer=N,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=T,t.isStringObject=A,t.isBooleanObject=C,t.isBigIntObject=O,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return T(e)||A(e)||C(e)||O(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(_(e)||N(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},177:function(e,t,n){var a=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])y(s)||!_(s)?o+=" "+s:o+=" "+l(s);return o},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(r.throwDeprecation)throw Error(n);r.traceDeprecation?console.trace(n):console.error(n),a=!0}return e.apply(this,arguments)}};var o={},s=/^$/;if(r.env.NODE_DEBUG){var u=r.env.NODE_DEBUG;s=RegExp("^"+(u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function l(e,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,e,r.depth)}function c(e,t){var n=l.styles[t];return n?"\x1b["+l.colors[n][0]+"m"+e+"\x1b["+l.colors[n][1]+"m":e}function h(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&I(n.inspect)&&n.inspect!==t.inspect&&!(n.constructor&&n.constructor.prototype===n)){var a,i,o,s,u,l=n.inspect(r,e);return v(l)||(l=f(e,l,r)),l}var c=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,n);if(c)return c;var h=Object.keys(n),_=(s={},h.forEach(function(e,t){s[e]=!0}),s);if(e.showHidden&&(h=Object.getOwnPropertyNames(n)),S(n)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return p(n);if(0===h.length){if(I(n)){var E=n.name?": "+n.name:"";return e.stylize("[Function"+E+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return p(n)}var N="",T=!1,C=["{","}"];return(m(n)&&(T=!0,C=["[","]"]),I(n)&&(N=" [Function"+(n.name?": "+n.name:"")+"]"),x(n)&&(N=" "+RegExp.prototype.toString.call(n)),k(n)&&(N=" "+Date.prototype.toUTCString.call(n)),S(n)&&(N=" "+p(n)),0!==h.length||T&&0!=n.length)?r<0?x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=T?function(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)A(t,String(o))?i.push(d(e,t,n,r,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(d(e,t,n,r,a,!0))}),i}(e,n,r,_,h):h.map(function(t){return d(e,n,r,_,t,T)}),e.seen.pop(),a=N,i=C,o=0,u.reduce(function(e,t){return o++,t.indexOf("\n")>=0&&o++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===a?"":a+"\n ")+" "+u.join(",\n  ")+" "+i[1]:i[0]+a+" "+u.join(", ")+" "+i[1]):C[0]+N+C[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,a,i){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),A(r,a)||(o="["+a+"]"),!s&&(0>e.seen.indexOf(u.value)?(s=y(n)?f(e,u.value,null):f(e,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),w(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function w(e){return void 0===e}function x(e){return _(e)&&"[object RegExp]"===E(e)}function _(e){return"object"==typeof e&&null!==e}function k(e){return _(e)&&"[object Date]"===E(e)}function S(e){return _(e)&&("[object Error]"===E(e)||e instanceof Error)}function I(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!o[e=e.toUpperCase()]){if(s.test(e)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){}}return o[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(584),t.isArray=m,t.isBoolean=g,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=w,t.isRegExp=x,t.types.isRegExp=x,t.isObject=_,t.isDate=k,t.types.isDate=k,t.isError=S,t.types.isNativeError=S,t.isFunction=I,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(369);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[N((e=new Date).getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":"),[e.getDate(),T[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(782),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t=e[C];if("function"!=typeof t)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push(function(e,r){e?n(e):t(r)});try{e.apply(this,a)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,a(e))},t.promisify.custom=C,t.callbackify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var a=t.pop();if("function"!=typeof a)throw TypeError("The last argument must be of type Function");var i=this,o=function(){return a.apply(i,arguments)};e.apply(this,t).then(function(e){r.nextTick(o.bind(null,null,e))},function(e){r.nextTick(O.bind(null,e,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,a(e)),t}},490:function(e,t,r){"use strict";var a=r(144),i=r(349),o=r(256),s=o("Object.prototype.toString"),u=r(942)()&&"symbol"==typeof Symbol.toStringTag,l=i(),c=o("String.prototype.slice"),h={},f=r(466),p=Object.getPrototypeOf;u&&f&&p&&a(l,function(e){if("function"==typeof n.g[e]){var t=new n.g[e];if(!(Symbol.toStringTag in t))throw EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=p(t),a=f(r,Symbol.toStringTag);a||(a=f(p(r),Symbol.toStringTag)),h[e]=a.get}});var d=function(e){var t=!1;return a(h,function(n,r){if(!t)try{var a=n.call(e);a===r&&(t=a)}catch(e){}}),t},m=r(994);e.exports=function(e){return!!m(e)&&(u?d(e):c(s(e),8,-1))}},349:function(e,t,r){"use strict";var a=r(992);e.exports=function(){return a(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(e){return"function"==typeof n.g[e]})}},466:function(e,t,n){"use strict";var r=n(500)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r}},i={};function o(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}},a=!0;try{t[e](r,r.exports,o),a=!1}finally{a&&delete i[e]}return r.exports}o.ab="//";var s=o(167);e.exports=s}()},7715:function(e,t,n){var r=n(1876).Buffer,a=n(3454);!function(){"use strict";var t={742:function(e,t,n){var i=n(491),o=n(562),s=n(450),u=n(324),l=n(320);for(var c in l)t[c]=l[c];function h(e){if("number"!=typeof e||e<t.DEFLATE||e>t.UNZIP)throw TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,h.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,i(this.init_done,"close before init"),i(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):(this.mode===t.INFLATE||this.mode===t.GUNZIP||this.mode===t.INFLATERAW||this.mode===t.UNZIP)&&u.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null},h.prototype.write=function(e,t,n,r,a,i,o){return this._write(!0,e,t,n,r,a,i,o)},h.prototype.writeSync=function(e,t,n,r,a,i,o){return this._write(!1,e,t,n,r,a,i,o)},h.prototype._write=function(e,n,o,s,u,l,c,h){if(i.equal(arguments.length,8),i(this.init_done,"write before init"),i(this.mode!==t.NONE,"already finalized"),i.equal(!1,this.write_in_progress,"write already in progress"),i.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,i.equal(!1,void 0===n,"must provide flush value"),this.write_in_progress=!0,n!==t.Z_NO_FLUSH&&n!==t.Z_PARTIAL_FLUSH&&n!==t.Z_SYNC_FLUSH&&n!==t.Z_FULL_FLUSH&&n!==t.Z_FINISH&&n!==t.Z_BLOCK)throw Error("Invalid flush value");if(null==o&&(o=r.alloc(0),u=0,s=0),this.strm.avail_in=u,this.strm.input=o,this.strm.next_in=s,this.strm.avail_out=h,this.strm.output=l,this.strm.next_out=c,this.flush=n,!e)return(this._process(),this._checkError())?this._afterSync():void 0;var f=this;return a.nextTick(function(){f._process(),f._after()}),this},h.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},h.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31===this.strm.input[e]){if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break}else{this.mode=t.INFLATE;break}case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=u.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=u.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=u.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=u.inflate(this.strm,this.flush);break;default:throw Error("Unknown mode "+this.mode)}},h.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},h.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},h.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},h.prototype.init=function(e,n,r,a,o){i(4==arguments.length||5==arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),i(e>=8&&e<=15,"invalid windowBits"),i(n>=-1&&n<=9,"invalid compression level"),i(r>=1&&r<=9,"invalid memlevel"),i(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(n,e,r,a,o),this._setDictionary()},h.prototype.params=function(){throw Error("deflateParams Not supported")},h.prototype.reset=function(){this._reset(),this._setDictionary()},h.prototype._init=function(e,n,r,a,i){switch(this.level=e,this.windowBits=n,this.memLevel=r,this.strategy=a,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,(this.mode===t.GZIP||this.mode===t.GUNZIP)&&(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),(this.mode===t.DEFLATERAW||this.mode===t.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=u.inflateInit2(this.strm,this.windowBits);break;default:throw Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=i,this.write_in_progress=!1,this.init_done=!0},h.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},h.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=u.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=h},23:function(e,t,n){var r=n(300).Buffer,i=n(781).Transform,o=n(742),s=n(837),u=n(491).ok,l=n(300).kMaxLength,c="Cannot create final Buffer. It would be larger than 0x"+l.toString(16)+" bytes";o.Z_MIN_WINDOWBITS=8,o.Z_MAX_WINDOWBITS=15,o.Z_DEFAULT_WINDOWBITS=15,o.Z_MIN_CHUNK=64,o.Z_MAX_CHUNK=1/0,o.Z_DEFAULT_CHUNK=16384,o.Z_MIN_MEMLEVEL=1,o.Z_MAX_MEMLEVEL=9,o.Z_DEFAULT_MEMLEVEL=8,o.Z_MIN_LEVEL=-1,o.Z_MAX_LEVEL=9,o.Z_DEFAULT_LEVEL=o.Z_DEFAULT_COMPRESSION;for(var h=Object.keys(o),f=0;f<h.length;f++){var p=h[f];p.match(/^Z/)&&Object.defineProperty(t,p,{enumerable:!0,value:o[p],writable:!1})}for(var d={Z_OK:o.Z_OK,Z_STREAM_END:o.Z_STREAM_END,Z_NEED_DICT:o.Z_NEED_DICT,Z_ERRNO:o.Z_ERRNO,Z_STREAM_ERROR:o.Z_STREAM_ERROR,Z_DATA_ERROR:o.Z_DATA_ERROR,Z_MEM_ERROR:o.Z_MEM_ERROR,Z_BUF_ERROR:o.Z_BUF_ERROR,Z_VERSION_ERROR:o.Z_VERSION_ERROR},m=Object.keys(d),g=0;g<m.length;g++){var y=m[g];d[d[y]]=y}function b(e,t,n){var a=[],i=0;function o(){for(var t;null!==(t=e.read());)a.push(t),i+=t.length;e.once("readable",o)}function s(){var t,o=null;i>=l?o=RangeError(c):t=r.concat(a,i),a=[],e.close(),n(o,t)}e.on("error",function(t){e.removeListener("end",s),e.removeListener("readable",o),n(t)}),e.on("end",s),e.end(t),o()}function v(e,t){if("string"==typeof t&&(t=r.from(t)),!r.isBuffer(t))throw TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function w(e){if(!(this instanceof w))return new w(e);T.call(this,e,o.DEFLATE)}function x(e){if(!(this instanceof x))return new x(e);T.call(this,e,o.INFLATE)}function _(e){if(!(this instanceof _))return new _(e);T.call(this,e,o.GZIP)}function k(e){if(!(this instanceof k))return new k(e);T.call(this,e,o.GUNZIP)}function S(e){if(!(this instanceof S))return new S(e);T.call(this,e,o.DEFLATERAW)}function I(e){if(!(this instanceof I))return new I(e);T.call(this,e,o.INFLATERAW)}function E(e){if(!(this instanceof E))return new E(e);T.call(this,e,o.UNZIP)}function N(e){return e===o.Z_NO_FLUSH||e===o.Z_PARTIAL_FLUSH||e===o.Z_SYNC_FLUSH||e===o.Z_FULL_FLUSH||e===o.Z_FINISH||e===o.Z_BLOCK}function T(e,n){var a=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,i.call(this,e),e.flush&&!N(e.flush))throw Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!N(e.finishFlush))throw Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||o.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:o.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!r.isBuffer(e.dictionary))throw Error("Invalid dictionary: it should be a Buffer instance");this._handle=new o.Zlib(n);var s=this;this._hadError=!1,this._handle.onerror=function(e,n){A(s),s._hadError=!0;var r=Error(e);r.errno=n,r.code=t.codes[n],s.emit("error",r)};var u=t.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(u=e.level);var l=t.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(l=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,u,e.memLevel||t.Z_DEFAULT_MEMLEVEL,l,e.dictionary),this._buffer=r.allocUnsafe(this._chunkSize),this._offset=0,this._level=u,this._strategy=l,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!a._handle},configurable:!0,enumerable:!0})}function A(e,t){t&&a.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function C(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(d),writable:!1}),t.Deflate=w,t.Inflate=x,t.Gzip=_,t.Gunzip=k,t.DeflateRaw=S,t.InflateRaw=I,t.Unzip=E,t.createDeflate=function(e){return new w(e)},t.createInflate=function(e){return new x(e)},t.createDeflateRaw=function(e){return new S(e)},t.createInflateRaw=function(e){return new I(e)},t.createGzip=function(e){return new _(e)},t.createGunzip=function(e){return new k(e)},t.createUnzip=function(e){return new E(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new w(t),e,n)},t.deflateSync=function(e,t){return v(new w(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new _(t),e,n)},t.gzipSync=function(e,t){return v(new _(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new S(t),e,n)},t.deflateRawSync=function(e,t){return v(new S(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new E(t),e,n)},t.unzipSync=function(e,t){return v(new E(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new x(t),e,n)},t.inflateSync=function(e,t){return v(new x(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new k(t),e,n)},t.gunzipSync=function(e,t){return v(new k(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),b(new I(t),e,n)},t.inflateRawSync=function(e,t){return v(new I(t),e)},s.inherits(T,i),T.prototype.params=function(e,n,r){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var i=this;this.flush(o.Z_SYNC_FLUSH,function(){u(i._handle,"zlib binding closed"),i._handle.params(e,n),!i._hadError&&(i._level=e,i._strategy=n,r&&r())})}else a.nextTick(r)},T.prototype.reset=function(){return u(this._handle,"zlib binding closed"),this._handle.reset()},T.prototype._flush=function(e){this._transform(r.alloc(0),"",e)},T.prototype.flush=function(e,t){var n=this,i=this._writableState;"function"!=typeof e&&(void 0!==e||t)||(t=e,e=o.Z_FULL_FLUSH),i.ended?t&&a.nextTick(t):i.ending?t&&this.once("end",t):i.needDrain?t&&this.once("drain",function(){return n.flush(e,t)}):(this._flushFlag=e,this.write(r.alloc(0),"",t))},T.prototype.close=function(e){A(this,e),a.nextTick(C,this)},T.prototype._transform=function(e,t,n){var a,i=this._writableState,s=(i.ending||i.ended)&&(!e||i.length===e.length);return null===e||r.isBuffer(e)?this._handle?void(s?a=this._finishFlushFlag:(a=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||o.Z_NO_FLUSH)),this._processChunk(e,a,n)):n(Error("zlib binding closed")):n(Error("invalid input"))},T.prototype._processChunk=function(e,t,n){var a=e&&e.length,i=this._chunkSize-this._offset,o=0,s=this,h="function"==typeof n;if(!h){var f,p=[],d=0;this.on("error",function(e){f=e}),u(this._handle,"zlib binding closed");do var m=this._handle.writeSync(t,e,o,a,this._buffer,this._offset,i);while(!this._hadError&&b(m[0],m[1]));if(this._hadError)throw f;if(d>=l)throw A(this),RangeError(c);var g=r.concat(p,d);return A(this),g}u(this._handle,"zlib binding closed");var y=this._handle.write(t,e,o,a,this._buffer,this._offset,i);function b(l,c){if(this&&(this.buffer=null,this.callback=null),!s._hadError){var f=i-c;if(u(f>=0,"have should not go down"),f>0){var m=s._buffer.slice(s._offset,s._offset+f);s._offset+=f,h?s.push(m):(p.push(m),d+=m.length)}if((0===c||s._offset>=s._chunkSize)&&(i=s._chunkSize,s._offset=0,s._buffer=r.allocUnsafe(s._chunkSize)),0===c){if(o+=a-l,a=l,!h)return!0;var g=s._handle.write(t,e,o,a,s._buffer,s._offset,s._chunkSize);return g.callback=b,void(g.buffer=e)}if(!h)return!1;n()}}y.buffer=e,y.callback=b},s.inherits(w,T),s.inherits(x,T),s.inherits(_,T),s.inherits(k,T),s.inherits(S,T),s.inherits(I,T),s.inherits(E,T)},380:function(e,t){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n,r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(var a in r)n=a,Object.prototype.hasOwnProperty.call(r,n)&&(e[a]=r[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+r),a);return}for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,o;for(t=0,r=0,n=e.length;t<n;t++)r+=e[t].length;for(t=0,o=new Uint8Array(r),a=0,n=e.length;t<n;t++)i=e[t],o.set(i,a),a+=i.length;return o}},a={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)},496:function(e){e.exports=function(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do i=i+(a=a+t[r++]|0)|0;while(--o);a%=65521,i%=65521}return a|i<<16|0}},320:function(e){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},307:function(e){var t=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=function(e,n,r,a){var i=a+r;e^=-1;for(var o=a;o<i;o++)e=e>>>8^t[(e^n[o])&255];return -1^e}},450:function(e,t,n){var r,a=n(380),i=n(842),o=n(496),s=n(307),u=n(31);function l(e,t){return e.msg=u[t],t}function c(e){return(e<<1)-(e>4?9:0)}function h(e){for(var t=e.length;--t>=0;)e[t]=0}function f(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(a.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function p(e,t){i._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,f(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function m(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function g(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,c=e.w_mask,h=e.prev,f=e.strstart+258,p=l[i+o-1],d=l[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(n=t)+o]!==d||l[n+o-1]!==p||l[n]!==l[i]||l[++n]!==l[i+1])continue;i+=2,n++;do;while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<f);if(r=258-(f-i),i=f-258,r>o){if(e.match_start=t,o=r,r>=s)break;p=l[i+o-1],d=l[i+o]}}while((t=h[t&c])>u&&0!=--a);return o<=e.lookahead?o:e.lookahead}function y(e){var t,n,r,i,u,l=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-262)){a.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=n=e.hash_size;do r=e.head[--t],e.head[t]=r>=l?r-l:0;while(--n);t=n=l;do r=e.prev[--t],e.prev[t]=r>=l?r-l:0;while(--n);i+=l}if(0===e.strm.avail_in)break;if(n=function(e,t,n,r){var i=e.avail_in;return(i>r&&(i=r),0===i)?0:(e.avail_in-=i,a.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=o(e.adler,t,i,n):2===e.state.wrap&&(e.adler=s(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=3)for(u=e.strstart-e.insert,e.ins_h=e.window[u],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+3-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function b(e,t){for(var n,r;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=g(e,n)),e.match_length>=3){if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(p(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,4===t)?(p(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}function v(e,t){for(var n,r,a;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=g(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(p(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&p(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t)?(p(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}function w(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(1146),this.dyn_dtree=new a.Buf16(122),this.bl_tree=new a.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(16),this.heap=new a.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,i._tr_init(t),0):l(e,-2)}function k(e){var t,n=_(e);return 0===n&&((t=e.state).window_size=2*t.w_size,h(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function S(e,t,n,r,i,o){if(!e)return -2;var s=1;if(-1===t&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return l(e,-2);8===r&&(r=9);var u=new x;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new a.Buf8(2*u.w_size),u.head=new a.Buf16(u.hash_size),u.prev=new a.Buf16(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new a.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=o,u.method=n,k(e)}r=[new w(0,0,0,0,function(e,t){var n=65535;for(65535>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(y(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,p(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-262&&(p(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,4===t)?(p(e,!0),0===e.strm.avail_out)?3:4:(e.strstart>e.block_start&&(p(e,!1),e.strm.avail_out),1)}),new w(4,4,8,4,b),new w(4,5,16,8,b),new w(4,6,32,32,b),new w(4,4,16,16,v),new w(8,16,32,32,v),new w(8,16,128,128,v),new w(8,32,128,256,v),new w(32,128,258,1024,v),new w(32,258,258,4096,v)],t.deflateInit=function(e,t){return S(e,t,8,15,8,0)},t.deflateInit2=S,t.deflateReset=k,t.deflateResetKeep=_,t.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,0):-2},t.deflate=function(e,t){if(!e||!e.state||t>5||t<0)return e?l(e,-2):-2;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&4!==t)return l(e,0===e.avail_out?-5:-2);if(a.strm=e,n=a.last_flush,a.last_flush=t,42===a.status){if(2===a.wrap)e.adler=0,d(a,31),d(a,139),d(a,8),a.gzhead?(d(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),d(a,255&a.gzhead.time),d(a,a.gzhead.time>>8&255),d(a,a.gzhead.time>>16&255),d(a,a.gzhead.time>>24&255),d(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),d(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(d(a,255&a.gzhead.extra.length),d(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=s(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(d(a,0),d(a,0),d(a,0),d(a,0),d(a,0),d(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),d(a,3),a.status=113);else{var n,a,o,u,g=8+(a.w_bits-8<<4)<<8;g|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(g|=32),g+=31-g%31,a.status=113,m(a,g),0!==a.strstart&&(m(a,e.adler>>>16),m(a,65535&e.adler)),e.adler=1}}if(69===a.status){if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),f(e),o=a.pending,a.pending!==a.pending_buf_size));)d(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73}if(73===a.status){if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),f(e),o=a.pending,a.pending===a.pending_buf_size)){u=1;break}u=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,d(a,u)}while(0!==u);a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),0===u&&(a.gzindex=0,a.status=91)}else a.status=91}if(91===a.status){if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),f(e),o=a.pending,a.pending===a.pending_buf_size)){u=1;break}u=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,d(a,u)}while(0!==u);a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),0===u&&(a.status=103)}else a.status=103}if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&f(e),a.pending+2<=a.pending_buf_size&&(d(a,255&e.adler),d(a,e.adler>>8&255),e.adler=0,a.status=113)):a.status=113),0!==a.pending){if(f(e),0===e.avail_out)return a.last_flush=-1,0}else if(0===e.avail_in&&c(t)<=c(n)&&4!==t)return l(e,-5);if(666===a.status&&0!==e.avail_in)return l(e,-5);if(0!==e.avail_in||0!==a.lookahead||0!==t&&666!==a.status){var b=2===a.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(y(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(p(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,4===t)?(p(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}(a,t):3===a.strategy?function(e,t){for(var n,r,a,o,s=e.window;;){if(e.lookahead<=258){if(y(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){o=e.strstart+258;do;while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<o);e.match_length=258-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=i._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(p(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,4===t)?(p(e,!0),0===e.strm.avail_out)?3:4:e.last_lit&&(p(e,!1),0===e.strm.avail_out)?1:2}(a,t):r[a.level].func(a,t);if((3===b||4===b)&&(a.status=666),1===b||3===b)return 0===e.avail_out&&(a.last_flush=-1),0;if(2===b&&(1===t?i._tr_align(a):5!==t&&(i._tr_stored_block(a,0,0,!1),3===t&&(h(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),f(e),0===e.avail_out))return a.last_flush=-1,0}return 4!==t?0:a.wrap<=0?1:(2===a.wrap?(d(a,255&e.adler),d(a,e.adler>>8&255),d(a,e.adler>>16&255),d(a,e.adler>>24&255),d(a,255&e.total_in),d(a,e.total_in>>8&255),d(a,e.total_in>>16&255),d(a,e.total_in>>24&255)):(m(a,e.adler>>>16),m(a,65535&e.adler)),f(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?l(e,-2):(e.state=null,113===t?l(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var n,r,i,s,u,l,c,f,p=t.length;if(!e||!e.state||2===(s=(n=e.state).wrap)||1===s&&42!==n.status||n.lookahead)return -2;for(1===s&&(e.adler=o(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(h(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new a.Buf8(n.w_size),a.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),u=e.avail_in,l=e.next_in,c=e.input,e.avail_in=p,e.next_in=0,e.input=t,y(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=2,y(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=u,n.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},333:function(e){e.exports=function(e,t){var n,r,a,i,o,s,u,l,c,h,f,p,d,m,g,y,b,v,w,x,_,k,S,I,E;n=e.state,r=e.next_in,I=e.input,a=r+(e.avail_in-5),i=e.next_out,E=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),u=n.dmax,l=n.wsize,c=n.whave,h=n.wnext,f=n.window,p=n.hold,d=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;t:do{d<15&&(p+=I[r++]<<d,d+=8,p+=I[r++]<<d,d+=8),v=m[p&y];n:for(;;){if(p>>>=w=v>>>24,d-=w,0==(w=v>>>16&255))E[i++]=65535&v;else if(16&w){x=65535&v,(w&=15)&&(d<w&&(p+=I[r++]<<d,d+=8),x+=p&(1<<w)-1,p>>>=w,d-=w),d<15&&(p+=I[r++]<<d,d+=8,p+=I[r++]<<d,d+=8),v=g[p&b];r:for(;;){if(p>>>=w=v>>>24,d-=w,16&(w=v>>>16&255)){if(_=65535&v,d<(w&=15)&&(p+=I[r++]<<d,(d+=8)<w&&(p+=I[r++]<<d,d+=8)),(_+=p&(1<<w)-1)>u){e.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=w,d-=w,_>(w=i-o)){if((w=_-w)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break t}if(k=0,S=f,0===h){if(k+=l-w,w<x){x-=w;do E[i++]=f[k++];while(--w);k=i-_,S=E}}else if(h<w){if(k+=l+h-w,(w-=h)<x){x-=w;do E[i++]=f[k++];while(--w);if(k=0,h<x){x-=w=h;do E[i++]=f[k++];while(--w);k=i-_,S=E}}}else if(k+=h-w,w<x){x-=w;do E[i++]=f[k++];while(--w);k=i-_,S=E}for(;x>2;)E[i++]=S[k++],E[i++]=S[k++],E[i++]=S[k++],x-=3;x&&(E[i++]=S[k++],x>1&&(E[i++]=S[k++]))}else{k=i-_;do E[i++]=E[k++],E[i++]=E[k++],E[i++]=E[k++],x-=3;while(x>2);x&&(E[i++]=E[k++],x>1&&(E[i++]=E[k++]))}}else if((64&w)==0){v=g[(65535&v)+(p&(1<<w)-1)];continue r}else{e.msg="invalid distance code",n.mode=30;break t}break}}else if((64&w)==0){v=m[(65535&v)+(p&(1<<w)-1)];continue n}else if(32&w){n.mode=12;break t}else{e.msg="invalid literal/length code",n.mode=30;break t}break}}while(r<a&&i<s);r-=x=d>>3,d-=x<<3,p&=(1<<d)-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?5+(a-r):5-(r-a),e.avail_out=i<s?257+(s-i):257-(i-s),n.hold=p,n.bits=d}},324:function(e,t,n){var r,a,i=n(380),o=n(496),s=n(307),u=n(333),l=n(19);function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):-2}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):-2}function d(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?-2:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,p(e)):-2}function m(e,t){var n,r;return e?(r=new h,e.state=r,r.window=null,0!==(n=d(e,t))&&(e.state=null),n):-2}var g=!0;function y(e,t,n,r){var a,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new i.Buf8(o.wsize)),r>=o.wsize?(i.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((a=o.wsize-o.wnext)>r&&(a=r),i.arraySet(o.window,t,n-r,a,o.wnext),(r-=a)?(i.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}t.inflateReset=p,t.inflateReset2=d,t.inflateResetKeep=f,t.inflateInit=function(e){return m(e,15)},t.inflateInit2=m,t.inflate=function(e,t){var n,h,f,p,d,m,b,v,w,x,_,k,S,I,E,N,T,A,C,O,R,D,P,$,F=0,M=new i.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return -2;12===(n=e.state).mode&&(n.mode=13),d=e.next_out,f=e.output,b=e.avail_out,p=e.next_in,h=e.input,m=e.avail_in,v=n.hold,w=n.bits,x=m,_=b,D=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;w<16;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(2&n.wrap&&35615===v){n.check=0,M[0]=255&v,M[1]=v>>>8&255,n.check=s(n.check,M,2,0),v=0,w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&v)!=8){e.msg="unknown compression method",n.mode=30;break}if(v>>>=4,w-=4,R=(15&v)+8,0===n.wbits)n.wbits=R;else if(R>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<R,e.adler=n.check=1,n.mode=512&v?10:12,v=0,w=0;break;case 2:for(;w<16;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(n.flags=v,(255&n.flags)!=8){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(M[0]=255&v,M[1]=v>>>8&255,n.check=s(n.check,M,2,0)),v=0,w=0,n.mode=3;case 3:for(;w<32;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}n.head&&(n.head.time=v),512&n.flags&&(M[0]=255&v,M[1]=v>>>8&255,M[2]=v>>>16&255,M[3]=v>>>24&255,n.check=s(n.check,M,4,0)),v=0,w=0,n.mode=4;case 4:for(;w<16;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(M[0]=255&v,M[1]=v>>>8&255,n.check=s(n.check,M,2,0)),v=0,w=0,n.mode=5;case 5:if(1024&n.flags){for(;w<16;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(M[0]=255&v,M[1]=v>>>8&255,n.check=s(n.check,M,2,0)),v=0,w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((k=n.length)>m&&(k=m),k&&(n.head&&(R=n.head.extra_len-n.length,n.head.extra||(n.head.extra=Array(n.head.extra_len)),i.arraySet(n.head.extra,h,p,k,R)),512&n.flags&&(n.check=s(n.check,h,k,p)),m-=k,p+=k,n.length-=k),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===m)break t;k=0;do R=h[p+k++],n.head&&R&&n.length<65536&&(n.head.name+=String.fromCharCode(R));while(R&&k<m);if(512&n.flags&&(n.check=s(n.check,h,k,p)),m-=k,p+=k,R)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===m)break t;k=0;do R=h[p+k++],n.head&&R&&n.length<65536&&(n.head.comment+=String.fromCharCode(R));while(R&&k<m);if(512&n.flags&&(n.check=s(n.check,h,k,p)),m-=k,p+=k,R)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;w<16;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=0,w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;w<32;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}e.adler=n.check=c(v),v=0,w=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=d,e.avail_out=b,e.next_in=p,e.avail_in=m,n.hold=v,n.bits=w,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break t;case 13:if(n.last){v>>>=7&w,w-=7&w,n.mode=27;break}for(;w<3;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}switch(n.last=1&v,w-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(function(e){if(g){var t;for(r=new i.Buf32(512),a=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(l(1,e.lens,0,288,r,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;l(2,e.lens,0,32,a,0,e.work,{bits:5}),g=!1}e.lencode=r,e.lenbits=9,e.distcode=a,e.distbits=5}(n),n.mode=20,6===t){v>>>=2,w-=2;break t}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,w-=2;break;case 14:for(v>>>=7&w,w-=7&w;w<32;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,v=0,w=0,n.mode=15,6===t)break t;case 15:n.mode=16;case 16:if(k=n.length){if(k>m&&(k=m),k>b&&(k=b),0===k)break t;i.arraySet(f,h,p,k,d),m-=k,p+=k,b-=k,d+=k,n.length-=k;break}n.mode=12;break;case 17:for(;w<14;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(n.nlen=(31&v)+257,v>>>=5,w-=5,n.ndist=(31&v)+1,v>>>=5,w-=5,n.ncode=(15&v)+4,v>>>=4,w-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;w<3;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}n.lens[B[n.have++]]=7&v,v>>>=3,w-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},D=l(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,D){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;E=(F=n.lencode[v&(1<<n.lenbits)-1])>>>24,N=F>>>16&255,T=65535&F,!(E<=w);){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(T<16)v>>>=E,w-=E,n.lens[n.have++]=T;else{if(16===T){for($=E+2;w<$;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(v>>>=E,w-=E,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}R=n.lens[n.have-1],k=3+(3&v),v>>>=2,w-=2}else if(17===T){for($=E+3;w<$;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}v>>>=E,w-=E,R=0,k=3+(7&v),v>>>=3,w-=3}else{for($=E+7;w<$;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}v>>>=E,w-=E,R=0,k=11+(127&v),v>>>=7,w-=7}if(n.have+k>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;k--;)n.lens[n.have++]=R}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},D=l(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,D){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},D=l(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,D){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break t;case 20:n.mode=21;case 21:if(m>=6&&b>=258){e.next_out=d,e.avail_out=b,e.next_in=p,e.avail_in=m,n.hold=v,n.bits=w,u(e,_),d=e.next_out,f=e.output,b=e.avail_out,p=e.next_in,h=e.input,m=e.avail_in,v=n.hold,w=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;E=(F=n.lencode[v&(1<<n.lenbits)-1])>>>24,N=F>>>16&255,T=65535&F,!(E<=w);){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(N&&(240&N)==0){for(A=E,C=N,O=T;E=(F=n.lencode[O+((v&(1<<A+C)-1)>>A)])>>>24,N=F>>>16&255,T=65535&F,!(A+E<=w);){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}v>>>=A,w-=A,n.back+=A}if(v>>>=E,w-=E,n.back+=E,n.length=T,0===N){n.mode=26;break}if(32&N){n.back=-1,n.mode=12;break}if(64&N){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&N,n.mode=22;case 22:if(n.extra){for($=n.extra;w<$;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,w-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;E=(F=n.distcode[v&(1<<n.distbits)-1])>>>24,N=F>>>16&255,T=65535&F,!(E<=w);){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if((240&N)==0){for(A=E,C=N,O=T;E=(F=n.distcode[O+((v&(1<<A+C)-1)>>A)])>>>24,N=F>>>16&255,T=65535&F,!(A+E<=w);){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}v>>>=A,w-=A,n.back+=A}if(v>>>=E,w-=E,n.back+=E,64&N){e.msg="invalid distance code",n.mode=30;break}n.offset=T,n.extra=15&N,n.mode=24;case 24:if(n.extra){for($=n.extra;w<$;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,w-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break t;if(k=_-b,n.offset>k){if((k=n.offset-k)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}k>n.wnext?(k-=n.wnext,S=n.wsize-k):S=n.wnext-k,k>n.length&&(k=n.length),I=n.window}else I=f,S=d-n.offset,k=n.length;k>b&&(k=b),b-=k,n.length-=k;do f[d++]=I[S++];while(--k);0===n.length&&(n.mode=21);break;case 26:if(0===b)break t;f[d++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;w<32;){if(0===m)break t;m--,v|=h[p++]<<w,w+=8}if(_-=b,e.total_out+=_,n.total+=_,_&&(e.adler=n.check=n.flags?s(n.check,f,_,d-_):o(n.check,f,_,d-_)),_=b,(n.flags?v:c(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=0,w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;w<32;){if(0===m)break t;m--,v+=h[p++]<<w,w+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=0,w=0}n.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return -4;default:return -2}return(e.next_out=d,e.avail_out=b,e.next_in=p,e.avail_in=m,n.hold=v,n.bits=w,(n.wsize||_!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,_-e.avail_out))?(n.mode=31,-4):(x-=e.avail_in,_-=e.avail_out,e.total_in+=x,e.total_out+=_,n.total+=_,n.wrap&&_&&(e.adler=n.check=n.flags?s(n.check,f,_,e.next_out-_):o(n.check,f,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===_||4===t)&&0===D&&(D=-5),D)},t.inflateEnd=function(e){if(!e||!e.state)return -2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var n;return e&&e.state&&(2&(n=e.state).wrap)!=0?(n.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state&&(0===(n=e.state).wrap||11===n.mode)?11===n.mode&&o(1,t,r,0)!==n.check?-3:y(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},19:function(e,t,n){var r=n(380),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,u,l,c,h,f){var p,d,m,g,y,b,v,w,x,_=f.bits,k=0,S=0,I=0,E=0,N=0,T=0,A=0,C=0,O=0,R=0,D=null,P=0,$=new r.Buf16(16),F=new r.Buf16(16),M=null,B=0;for(k=0;k<=15;k++)$[k]=0;for(S=0;S<u;S++)$[t[n+S]]++;for(E=15,N=_;E>=1&&0===$[E];E--);if(N>E&&(N=E),0===E)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(I=1;I<E&&0===$[I];I++);for(N<I&&(N=I),C=1,k=1;k<=15;k++)if(C<<=1,(C-=$[k])<0)return -1;if(C>0&&(0===e||1!==E))return -1;for(k=1,F[1]=0;k<15;k++)F[k+1]=F[k]+$[k];for(S=0;S<u;S++)0!==t[n+S]&&(h[F[t[n+S]]++]=S);if(0===e?(D=M=h,b=19):1===e?(D=a,P-=257,M=i,B-=257,b=256):(D=o,M=s,b=-1),R=0,S=0,k=I,y=c,T=N,A=0,m=-1,g=(O=1<<N)-1,1===e&&O>852||2===e&&O>592)return 1;for(;;){v=k-A,h[S]<b?(w=0,x=h[S]):h[S]>b?(w=M[B+h[S]],x=D[P+h[S]]):(w=96,x=0),p=1<<k-A,I=d=1<<T;do l[y+(R>>A)+(d-=p)]=v<<24|w<<16|x|0;while(0!==d);for(p=1<<k-1;R&p;)p>>=1;if(0!==p?(R&=p-1,R+=p):R=0,S++,0==--$[k]){if(k===E)break;k=t[n+h[S]]}if(k>N&&(R&g)!==m){for(0===A&&(A=N),y+=I,C=1<<(T=k-A);T+A<E&&!((C-=$[T+A])<=0);)T++,C<<=1;if(O+=1<<T,1===e&&O>852||2===e&&O>592)return 1;l[m=R&g]=N<<24|T<<16|y-c|0}}return 0!==R&&(l[y+R]=k-A<<24|4194304),f.bits=N,0}},31:function(e){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},842:function(e,t,n){var r,a,i,o=n(380);function s(e){for(var t=e.length;--t>=0;)e[t]=0}var u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=Array(576);s(f);var p=Array(60);s(p);var d=Array(512);s(d);var m=Array(256);s(m);var g=Array(29);s(g);var y=Array(30);function b(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function w(e){return e<256?d[e]:d[256+(e>>>7)]}function x(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function _(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function k(e,t,n){_(e,n[2*t],n[2*t+1])}function S(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function I(e,t,n){var r,a,i=Array(16),o=0;for(r=1;r<=15;r++)i[r]=o=o+n[r-1]<<1;for(a=0;a<=t;a++){var s=e[2*a+1];0!==s&&(e[2*a]=S(i[s]++,s))}}function E(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function N(e){e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function T(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function A(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&T(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!T(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function C(e,t,n){var r,a,i,o,s=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],a=e.pending_buf[e.l_buf+s],s++,0===r?k(e,a,t):(k(e,(i=m[a])+256+1,t),0!==(o=u[i])&&_(e,a-=g[i],o),k(e,i=w(--r),n),0!==(o=l[i])&&_(e,r-=y[i],o));while(s<e.last_lit);k(e,256,t)}function O(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,l=-1;for(n=0,e.heap_len=0,e.heap_max=573;n<u;n++)0!==i[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(t.max_code=l,n=e.heap_len>>1;n>=1;n--)A(e,i,n);a=u;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,A(e,i,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,a,i,o,s,u=t.dyn_tree,l=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,d=t.stat_desc.max_length,m=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(i=u[2*u[2*(r=e.heap[n])+1]+1]+1)>d&&(i=d,m++),u[2*r+1]=i,!(r>l)&&(e.bl_count[i]++,o=0,r>=p&&(o=f[r-p]),s=u[2*r],e.opt_len+=s*(i+o),h&&(e.static_len+=s*(c[2*r+1]+o)));if(0!==m){do{for(i=d-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[d]--,m-=2}while(m>0);for(i=d;0!==i;i--)for(r=e.bl_count[i];0!==r;)!((a=e.heap[--n])>l)&&(u[2*a+1]!==i&&(e.opt_len+=(i-u[2*a+1])*u[2*a],u[2*a+1]=i),r--)}}(e,t),I(i,l,e.bl_count)}function R(e,t,n){var r,a,i=-1,o=t[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=o,o=t[(r+1)*2+1],++s<u&&a===o||(s<l?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=a,0===o?(u=138,l=3):a===o?(u=6,l=3):(u=7,l=4))}function D(e,t,n){var r,a,i=-1,o=t[1],s=0,u=7,l=4;for(0===o&&(u=138,l=3),r=0;r<=n;r++)if(a=o,o=t[(r+1)*2+1],!(++s<u)||a!==o){if(s<l)do k(e,a,e.bl_tree);while(0!=--s);else 0!==a?(a!==i&&(k(e,a,e.bl_tree),s--),k(e,16,e.bl_tree),_(e,s-3,2)):s<=10?(k(e,17,e.bl_tree),_(e,s-3,3)):(k(e,18,e.bl_tree),_(e,s-11,7));s=0,i=a,0===o?(u=138,l=3):a===o?(u=6,l=3):(u=7,l=4)}}s(y);var P=!1;function $(e,t,n,r){var a;_(e,0+(r?1:0),3),N(a=e),x(a,n),x(a,~n),o.arraySet(a.pending_buf,a.window,t,n,a.pending),a.pending+=n}t._tr_init=function(e){P||(function(){var e,t,n,o,s,h=Array(16);for(o=0,n=0;o<28;o++)for(e=0,g[o]=n;e<1<<u[o];e++)m[n++]=o;for(m[n-1]=o,s=0,o=0;o<16;o++)for(e=0,y[o]=s;e<1<<l[o];e++)d[s++]=o;for(s>>=7;o<30;o++)for(e=0,y[o]=s<<7;e<1<<l[o]-7;e++)d[256+s++]=o;for(t=0;t<=15;t++)h[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,h[8]++;for(;e<=255;)f[2*e+1]=9,e++,h[9]++;for(;e<=279;)f[2*e+1]=7,e++,h[7]++;for(;e<=287;)f[2*e+1]=8,e++,h[8]++;for(I(f,287,h),e=0;e<30;e++)p[2*e+1]=5,p[2*e]=S(e,5);r=new b(f,u,257,286,15),a=new b(p,l,0,30,15),i=new b([],c,0,19,7)}(),P=!0),e.l_desc=new v(e.dyn_ltree,r),e.d_desc=new v(e.dyn_dtree,a),e.bl_desc=new v(e.bl_tree,i),e.bi_buf=0,e.bi_valid=0,E(e)},t._tr_stored_block=$,t._tr_flush_block=function(e,t,n,r){var a,i,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),O(e,e.l_desc),O(e,e.d_desc),o=function(e){var t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),O(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?$(e,t,n,r):4===e.strategy||i===a?(_(e,2+(r?1:0),3),C(e,f,p)):(_(e,4+(r?1:0),3),function(e,t,n,r){var a;for(_(e,t-257,5),_(e,n-1,5),_(e,r-4,4),a=0;a<r;a++)_(e,e.bl_tree[2*h[a]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),C(e,e.dyn_ltree,e.dyn_dtree)),E(e),r&&N(e)},t._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(m[n]+256+1)*2]++,e.dyn_dtree[2*w(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){var t;_(e,2,3),k(e,256,f),16===(t=e).bi_valid?(x(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},562:function(e){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},491:function(e){e.exports=n(7596)},300:function(e){e.exports=n(1876)},781:function(e){e.exports=n(9681)},837:function(e){e.exports=n(9720)}},i={};function o(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}},a=!0;try{t[e](r,r.exports,o),a=!1}finally{a&&delete i[e]}return r.exports}o.ab="//";var s=o(23);e.exports=s}()},1876:function(e){!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return(n+r)*3/4-r},t.toByteArray=function(e){var t,n,i=u(e),o=i[0],s=i[1],l=new a((o+s)*3/4-s),c=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[c++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,i=[],o=0,s=r-a;o<s;o+=16383)i.push(function(e,t,r){for(var a,i=[],o=t;o<r;o+=3)i.push(n[(a=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}(e,o,o+16383>s?s:o+16383));return 1===a?i.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===a&&i.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),i.join("")};for(var n=[],r=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=i.length;o<s;++o)n[o]=i[o],r[i.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},72:function(e,t,n){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=n(675),a=n(783),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!s.isEncoding(t))throw TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=o(n),a=r.write(e,t);return a!==n&&(r=r.slice(0,a)),r}(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return function(e,t,n){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),s.prototype),r}(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return s.from(r,t,n);var a=function(e){if(s.isBuffer(e)){var t,n=0|f(e.length),r=o(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),o(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var a=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(a)return r?-1:I(e).length;t=(""+t).toLowerCase(),a=!0}}function d(e,t,n){var a,i,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=C[e[i]];return a}(this,t,n);case"utf8":case"utf-8":return b(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}(this,t,n);case"base64":return a=t,i=n,0===a&&i===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}(this,t,n);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,a){var i;if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(i=n=+n)!=i&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return -1;n=e.length-1}else if(n<0){if(!a)return -1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,a);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,a);throw TypeError("val must be string, number or Buffer")}function y(e,t,n,r,a){var i,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(a){var c=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*o}else -1!==c&&(i-=i-c),c=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var h=!0,f=0;f<u;f++)if(l(e,i+f)!==l(t,f)){h=!1;break}if(h)return i}return -1}function b(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i,o,s,u,l=e[a],c=null,h=l>239?4:l>223?3:l>191?2:1;if(a+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:(192&(i=e[a+1]))==128&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=e[a+1],o=e[a+2],(192&i)==128&&(192&o)==128&&(u=(15&l)<<12|(63&i)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[a+1],o=e[a+2],s=e[a+3],(192&i)==128&&(192&o)==128&&(192&s)==128&&(u=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),a+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function v(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function w(e,t,n,r,a,i){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function x(e,t,n,r,a,i){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function _(e,t,n,r,i){return t=+t,n>>>=0,i||x(e,t,n,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,n,r,23,4),n+4}function k(e,t,n,r,i){return t=+t,n>>>=0,i||x(e,t,n,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,n,r,52,8),n+8}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,n){return(l(e),e<=0)?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(A(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,r=s.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(A(i,Uint8Array)&&(i=s.from(i)),!s.isBuffer(i))throw TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?b(this,0,e):d.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(e,t,n,r,a){if(A(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,o=n-t,u=Math.min(i,o),l=this.slice(r,a),c=e.slice(t,n),h=0;h<u;++h)if(l[h]!==c[h]){i=l[h],o=c[h];break}return i<o?-1:o<i?1:0},s.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a,i,o,s,u,l,c,h,f,p,d,m,g=this.length-t;if((void 0===n||n>g)&&(n=g),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var y=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(s!=s)break;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return u=t,l=n,T(I(e,this.length-u),this,u,l);case"ascii":return c=t,h=n,T(E(e),this,c,h);case"latin1":case"binary":return a=this,i=e,o=t,s=n,T(E(i),a,o,s);case"base64":return f=t,p=n,T(N(e),this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d=t,m=n,T(function(e,t){for(var n,r,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,a.push(n%256),a.push(r);return a}(e,this.length-d),this,d,m);default:if(y)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),y=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||v(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=Math.pow(2,8*n)-1;w(this,e,t,n,a,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var a=Math.pow(2,8*n)-1;w(this,e,t,n,a,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);w(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var a=Math.pow(2,8*n-1);w(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var i=a-1;i>=0;--i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return a},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var a,i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:s.from(e,r),u=o.length;if(0===u)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%u]}return this};var S=/[^+/0-9A-Za-z-_]/g;function I(e,t){t=t||1/0;for(var n,r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319||o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return i}function E(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function N(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length)&&!(a>=e.length);++a)t[a+n]=e[a];return a}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var C=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var r=16*n,a=0;a<16;++a)t[r+a]=e[n]+e[a];return t}()},783:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?a-1:0,f=n?-1:1,p=e[t+h];for(h+=f,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+h],h+=f,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===i)i=1-l;else{if(i===u)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,r),i-=l}return(p?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,s,u,l=8*i-a-1,c=(1<<l)-1,h=c>>1,f=23===a?5960464477539062e-23:0,p=r?0:i-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=f/u:t+=f*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+p]=255&s,p+=d,s/=256,a-=8);for(o=o<<a|s,l+=a;l>0;e[n+p]=255&o,p+=d,o/=256,l-=8);e[n+p-d]|=128*m}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}r.ab="//";var a=r(72);e.exports=a}()},5293:function(e){!function(){"use strict";var t={864:function(e){var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise(function(n,r){function a(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&"function"==typeof e.on&&m(e,"error",a,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=u(e))>0&&o.length>a&&!o.warned){o.warned=!0;var a,i,o,l=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,console&&console.warn&&console.warn(l)}return e}function c(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=c.bind(r);return a.listener=n,r.wrapFn=a,a}function f(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):d(a,a.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function a(i){r.once&&e.removeEventListener(t,a),n(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a="error"===e,i=this._events;if(void 0!==i)a=a&&void 0===i.error;else if(!a)return!1;if(a){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,s=Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else for(var l=u.length,c=d(u,l),n=0;n<l;++n)r(c[n],this,t);return!0},i.prototype.addListener=function(e,t){return l(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return l(this,e,t,!0)},i.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,a,i,o;if(s(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,a=i;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var a,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(a=i[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return f(this,e,!0)},i.prototype.rawListeners=function(e){return f(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}r.ab="//";var a=r(864);e.exports=a}()},1864:function(e){!function(){"use strict";var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",a=0,i=-1,o=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else if(47===n)break;else n=47;if(47===n){if(i===s-1||1===o);else if(i!==s-1&&2===o){if(r.length<2||2!==a||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2)){if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){-1===u?(r="",a=0):a=(r=r.slice(0,u)).length-1-r.lastIndexOf("/"),i=s,o=0;continue}}else if(2===r.length||1===r.length){r="",a=0,i=s,o=0;continue}}t&&(r.length>0?r+="/..":r="..",a=2)}else r.length>0?r+="/"+e.slice(i+1,s):r=e.slice(i+1,s),a=s-i-1;i=s,o=0}else 46===n&&-1!==o?++o:o=-1}return r}var r={resolve:function(){for(var e,r,a="",i=!1,o=arguments.length-1;o>=-1&&!i;o--)o>=0?r=arguments[o]:(void 0===e&&(e=""),r=e),t(r),0!==r.length&&(a=r+"/"+a,i=47===r.charCodeAt(0));return(a=n(a,!i),i)?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),a=47===e.charCodeAt(e.length-1);return(0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&a&&(e+="/"),r)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var a=arguments[n];t(a),a.length>0&&(void 0===e?e=a:e+="/"+a)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n||(e=r.resolve(e))===(n=r.resolve(n)))return"";for(var a=1;a<e.length&&47===e.charCodeAt(a);++a);for(var i=e.length,o=i-a,s=1;s<n.length&&47===n.charCodeAt(s);++s);for(var u=n.length-s,l=o<u?o:u,c=-1,h=0;h<=l;++h){if(h===l){if(u>l){if(47===n.charCodeAt(s+h))return n.slice(s+h+1);if(0===h)return n.slice(s+h)}else o>l&&(47===e.charCodeAt(a+h)?c=h:0===h&&(c=0));break}var f=e.charCodeAt(a+h);if(f!==n.charCodeAt(s+h))break;47===f&&(c=h)}var p="";for(h=a+c+1;h<=i;++h)(h===i||47===e.charCodeAt(h))&&(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(s+c):(s+=c,47===n.charCodeAt(s)&&++s,n.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,a=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(n=e.charCodeAt(o))){if(!i){a=o;break}}else i=!1;return -1===a?r?"/":".":r&&1===a?"//":e.slice(0,a)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw TypeError('"ext" argument must be a string');t(e);var r,a=0,i=-1,o=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var s=n.length-1,u=-1;for(r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47===l){if(!o){a=r+1;break}}else -1===u&&(o=!1,u=r+1),s>=0&&(l===n.charCodeAt(s)?-1==--s&&(i=r):(s=-1,i=u))}return a===i?i=u:-1===i&&(i=e.length),e.slice(a,i)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!o){a=r+1;break}}else -1===i&&(o=!1,i=r+1);return -1===i?"":e.slice(a,i)},extname:function(e){t(e);for(var n=-1,r=0,a=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var u=e.charCodeAt(s);if(47===u){if(!i){r=s+1;break}continue}-1===a&&(i=!1,a=s+1),46===u?-1===n?n=s:1!==o&&(o=1):-1!==n&&(o=-1)}return -1===n||-1===a||0===o||1===o&&n===a-1&&n===r+1?"":e.slice(n,a)},format:function(e){var t,n;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n},parse:function(e){t(e);var n,r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var a=e.charCodeAt(0),i=47===a;i?(r.root="/",n=1):n=0;for(var o=-1,s=0,u=-1,l=!0,c=e.length-1,h=0;c>=n;--c){if(47===(a=e.charCodeAt(c))){if(!l){s=c+1;break}continue}-1===u&&(l=!1,u=c+1),46===a?-1===o?o=c:1!==h&&(h=1):-1!==o&&(h=-1)}return -1===o||-1===u||0===h||1===h&&o===u-1&&o===s+1?-1!==u&&(0===s&&i?r.base=r.name=e.slice(1,u):r.base=r.name=e.slice(s,u)):(0===s&&i?(r.name=e.slice(1,o),r.base=e.slice(1,u)):(r.name=e.slice(s,o),r.base=e.slice(s,u)),r.ext=e.slice(o,u)),s>0?r.dir=e.slice(0,s-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}},o=!0;try{t[e](i,i.exports,r),o=!1}finally{o&&delete n[e]}return i.exports}r.ab="//";var a=r(114);e.exports=a}()},9681:function(e,t,n){var r=n(3454);!function(){var t={782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function n(e,n,r){r||(r=Error);class a extends r{constructor(e,t,r){super("string"==typeof n?n:n(e,t,r))}}a.prototype.name=r.name,a.prototype.code=e,t[e]=a}function r(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let n=e.length;return(e=e.map(e=>String(e)),n>2)?`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]:2===n?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,n){var a,i,o,s,u;let l,c;if("string"==typeof t&&(a="not ",t.substr(!i||i<0?0:+i,a.length)===a)?(l="must not be",t=t.replace(/^not /,"")):l="must be",o=" argument",(void 0===s||s>e.length)&&(s=e.length),e.substring(s-o.length,s)===o)c=`The ${e} ${l} ${r(t,"type")}`;else{let n=("number"!=typeof u&&(u=0),u+1>e.length||-1===e.indexOf(".",u))?"argument":"property";c=`The "${e}" ${n} ${l} ${r(t,"type")}`}return c+`. Received type ${typeof n}`},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,n){"use strict";var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var i=n(709),o=n(337);n(782)(c,i);for(var s=a(o.prototype),u=0;u<s.length;u++){var l=s[u];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,n){"use strict";e.exports=a;var r=n(170);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}n(782)(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},709:function(e,t,a){"use strict";e.exports=E,E.ReadableState=I,a(361).EventEmitter;var i,o,s,u,l,c=function(e,t){return e.listeners(t).length},h=a(678),f=a(300).Buffer,p=n.g.Uint8Array||function(){},d=a(837);o=d&&d.debuglog?d.debuglog("stream"):function(){};var m=a(379),g=a(25),y=a(776).getHighWaterMark,b=a(646).q,v=b.ERR_INVALID_ARG_TYPE,w=b.ERR_STREAM_PUSH_AFTER_EOF,x=b.ERR_METHOD_NOT_IMPLEMENTED,_=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;a(782)(E,h);var k=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function I(e,t,n){i=i||a(403),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",n),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=a(704).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function E(e){if(i=i||a(403),!(this instanceof E))return new E(e);var t=this instanceof i;this._readableState=new I(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),h.call(this)}function N(e,t,n,r,a){o("readableAddChunk",t);var i,s,u,l,c,h=e._readableState;if(null===t)h.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?C(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,h);else{if(a||(i=h,s=t,f.isBuffer(s)||s instanceof p||"string"==typeof s||void 0===s||i.objectMode||(u=new v("chunk",["string","Buffer","Uint8Array"],s)),c=u),c)k(e,c);else if(h.objectMode||t&&t.length>0){if("string"==typeof t||h.objectMode||Object.getPrototypeOf(t)===f.prototype||(l=t,t=f.from(l)),r)h.endEmitted?k(e,new _):T(e,h,t,!0);else if(h.ended)k(e,new w);else{if(h.destroyed)return!1;h.reading=!1,h.decoder&&!n?(t=h.decoder.write(t),h.objectMode||0!==t.length?T(e,h,t,!1):R(e,h)):T(e,h,t,!1)}}else r||(h.reading=!1,R(e,h))}return!h.ended&&(h.length<h.highWaterMark||0===h.length)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&C(e)),R(e,t)}function A(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)return t.flowing&&t.length?t.buffer.head.data.length:t.length;if(e>t.highWaterMark){var n;t.highWaterMark=((n=e)>=1073741824?n=1073741824:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)}return e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)}function C(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(O,e))}function O(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function R(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(D,e,t))}function D(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function $(e){o("readable nexttick read 0"),e.read(0)}function F(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){var n;return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n)}function L(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function j(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=g.destroy,E.prototype._undestroy=g.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=f.from(e,t),t=""),n=!0),N(this,e,t,!1,n)},E.prototype.unshift=function(e){return N(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){s||(s=a(704).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this},E.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t,n=this._readableState,r=e;if(0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:n.length>0)||n.ended))return o("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?L(this):C(this),null;if(0===(e=A(e,n))&&n.ended)return 0===n.length&&L(this),null;var a=n.needReadable;return o("need readable",a),(0===n.length||n.length-e<n.highWaterMark)&&o("length less than watermark",a=!0),n.ended||n.reading?o("reading or ended",a=!1):a&&(o("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=A(r,n))),null===(t=e>0?B(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==e&&n.ended&&L(this)),null!==t&&this.emit("data",t),t},E.prototype._read=function(e){k(this,new x("_read()"))},E.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,o("pipe count=%d opts=%j",a.pipesCount,t);var i=t&&!1===t.end||e===r.stdout||e===r.stderr?m:s;function s(){o("onend"),e.end()}a.endEmitted?r.nextTick(i):n.once("end",i),e.on("unpipe",function t(r,i){o("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,o("cleanup"),e.removeListener("close",p),e.removeListener("finish",d),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",m),n.removeListener("data",h),l=!0,a.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u())});var u=function(){var e=n._readableState;o("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&c(n,"data")&&(e.flowing=!0,M(n))};e.on("drain",u);var l=!1;function h(t){o("ondata");var r=e.write(t);o("dest.write",r),!1===r&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==j(a.pipes,e))&&!l&&(o("false write response, pause",a.awaitDrain),a.awaitDrain++),n.pause())}function f(t){o("onerror",t),m(),e.removeListener("error",f),0===c(e,"error")&&k(e,t)}function p(){e.removeListener("finish",d),m()}function d(){o("onfinish"),e.removeListener("close",p),m()}function m(){o("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",d),e.emit("pipe",n),a.flowing||(o("pipe resume"),n.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},E.prototype.on=function(e,t){var n=h.prototype.on.call(this,e,t),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"!==e||a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,o("on readable",a.length,a.reading),a.length?C(this):a.reading||r.nextTick($,this)),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=h.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(P,this),n},E.prototype.removeAllListeners=function(e){var t=h.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&r.nextTick(P,this),t},E.prototype.resume=function(){var e,t=this._readableState;return t.flowing||(o("resume"),t.flowing=!t.readableListening,(e=t).resumeScheduled||(e.resumeScheduled=!0,r.nextTick(F,this,e))),t.paused=!1,this},E.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var a in e.on("end",function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){o("wrapped data"),n.decoder&&(a=n.decoder.write(a)),(!n.objectMode||null!=a)&&(n.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<S.length;i++)e.on(S[i],this.emit.bind(this,S[i]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=a(871)),u(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=B,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===l&&(l=a(727)),l(E,e,t)})},170:function(e,t,n){"use strict";e.exports=c;var r=n(646).q,a=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(403);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);u.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(t,n){f(e,t,n)})}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}n(782)(c,u),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new a("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(e,t,a){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){(function(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(void 0),r=r.next}t.corkedRequestsFree.next=e})(t,e)}}e.exports=E,E.WritableState=I;var o,s,u={deprecate:a(769)},l=a(678),c=a(300).Buffer,h=n.g.Uint8Array||function(){},f=a(25),p=a(776).getHighWaterMark,d=a(646).q,m=d.ERR_INVALID_ARG_TYPE,g=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,b=d.ERR_STREAM_CANNOT_PIPE,v=d.ERR_STREAM_DESTROYED,w=d.ERR_STREAM_NULL_VALUES,x=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,k=f.errorOrDestroy;function S(){}function I(e,t,n){o=o||a(403),e=e||{},"boolean"!=typeof n&&(n=t instanceof o),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(e,t){var n,a,i=e._writableState,o=i.sync,s=i.writecb;if("function"!=typeof s)throw new y;if((n=i).writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)a=e,--i.pendingcb,o?(r.nextTick(s,t),r.nextTick(R,a,i),a._writableState.errorEmitted=!0,k(a,t)):(s(t),a._writableState.errorEmitted=!0,k(a,t),R(a,i));else{var u=C(i)||e.destroyed;u||i.corked||i.bufferProcessing||!i.bufferedRequest||A(e,i),o?r.nextTick(T,e,i,u,s):T(e,i,u,s)}})(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function E(e){var t=this instanceof(o=o||a(403));if(!t&&!s.call(E,this))return new E(e);this._writableState=new I(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function N(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function T(e,t,n,r){var a;n||0===(a=t).length&&a.needDrain&&(a.needDrain=!1,e.emit("drain")),t.pendingcb--,r(),R(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=Array(t.bufferedRequestCount),a=t.corkedRequestsFree;a.entry=n;for(var o=0,s=!0;n;)r[o]=n,n.isBuf||(s=!1),n=n.next,o+=1;r.allBuffers=s,N(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,c=n.callback,h=t.objectMode?1:u.length;if(N(e,t,!1,h,u,l,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final(function(n){t.pendingcb--,n&&k(e,n),t.prefinished=!0,e.emit("prefinish"),R(e,t)})}function R(e,t){var n,a=C(t);if(a&&((n=t).prefinished||n.finalCalled||("function"!=typeof e._final||n.destroyed?(n.prefinished=!0,e.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,r.nextTick(O,e,n))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return a}a(782)(E,l),I.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(I.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===E&&e&&e._writableState instanceof I}})):s=function(e){return e instanceof this},E.prototype.pipe=function(){k(this,new b)},E.prototype.write=function(e,t,n){var a,i,o,s,u,l,f,p=this._writableState,d=!1,g=!p.objectMode&&(a=e,c.isBuffer(a)||a instanceof h);return g&&!c.isBuffer(e)&&(i=e,e=c.from(i)),("function"==typeof t&&(n=t,t=null),g?t="buffer":t||(t=p.defaultEncoding),"function"!=typeof n&&(n=S),p.ending)?(o=n,k(this,s=new x),r.nextTick(o,s)):(g||(u=e,l=n,null===u?f=new w:"string"==typeof u||p.objectMode||(f=new m("chunk",["string","Buffer"],u)),!f||(k(this,f),r.nextTick(l,f),0)))&&(p.pendingcb++,d=function(e,t,n,r,a,i){if(!n){var o,s,u=(o=r,s=a,t.objectMode||!1===t.decodeStrings||"string"!=typeof o||(o=c.from(o,s)),o);r!==u&&(n=!0,a="buffer",r=u)}var l=t.objectMode?1:r.length;t.length+=l;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else N(e,t,!1,l,r,a,i);return h}(this,p,g,e,t,n)),d},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,n){n(new g("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var a,i,o,s=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||(a=this,i=s,o=n,i.ending=!0,R(a,i),o&&(i.finished?r.nextTick(o):a.once("finish",o)),i.ended=!0,a.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=f.destroy,E.prototype._undestroy=f.undestroy,E.prototype._destroy=function(e,t){t(e)}},871:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,o=n(698),s=Symbol("lastResolve"),u=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),p=Symbol("stream");function d(e,t){return{value:e,done:t}}function m(e){var t=e[s];if(null!==t){var n=e[p].read();null!==n&&(e[h]=null,e[s]=null,e[u]=null,t(d(n,!1)))}}function g(e){r.nextTick(m,e)}var y=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((a(i={get stream(){return this[p]},next:function(){var e,t,n=this,a=this[l];if(null!==a)return Promise.reject(a);if(this[c])return Promise.resolve(d(void 0,!0));if(this[p].destroyed)return new Promise(function(e,t){r.nextTick(function(){n[l]?t(n[l]):e(d(void 0,!0))})});var i=this[h];if(i)t=new Promise((e=this,function(t,n){i.then(function(){if(e[c]){t(d(void 0,!0));return}e[f](t,n)},n)}));else{var o=this[p].read();if(null!==o)return Promise.resolve(d(o,!1));t=new Promise(this[f])}return this[h]=t,t}},Symbol.asyncIterator,function(){return this}),a(i,"return",function(){var e=this;return new Promise(function(t,n){e[p].destroy(null,function(e){if(e){n(e);return}t(d(void 0,!0))})})}),i),y);e.exports=function(e){var t,n=Object.create(b,(a(t={},p,{value:e,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,u,{value:null,writable:!0}),a(t,l,{value:null,writable:!0}),a(t,c,{value:e._readableState.endEmitted,writable:!0}),a(t,f,{value:function(e,t){var r=n[p].read();r?(n[h]=null,n[s]=null,n[u]=null,e(d(r,!1))):(n[s]=e,n[u]=t)},writable:!0}),t));return n[h]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];null!==t&&(n[h]=null,n[s]=null,n[u]=null,t(e)),n[l]=e;return}var r=n[s];null!==r&&(n[h]=null,n[s]=null,n[u]=null,r(d(void 0,!0))),n[c]=!0}),e.on("readable",g.bind(null,n)),n}},379:function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(300).Buffer,o=n(837).inspect,s=o&&o.custom||"inspect";e.exports=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.head=null,this.tail=null,this.length=0}return e=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t,n,r=i.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,n=o,i.prototype.copy.call(t,r,n),o+=a.data.length,a=a.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var a=t.data,i=e>a.length?a.length:e;if(i===a.length?r+=a:r+=a.slice(0,e),0==(e-=i)){i===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(i));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,o),0==(e-=o)){o===a.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(o));break}++r}return this.length-=r,t}},{key:s,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){var r,a;r=e,a=n[t],t in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{depth:0,customInspect:!1}))}}],a(n.prototype,e),t&&a(n,t),n}()},25:function(e){"use strict";function t(e,t){a(e,t),n(e)}function n(e){(!e._writableState||e._writableState.emitClose)&&(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,e)):r.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!i&&e?o._writableState?o._writableState.errorEmitted?r.nextTick(n,o):(o._writableState.errorEmitted=!0,r.nextTick(t,o,e)):r.nextTick(t,o,e):i?(r.nextTick(n,o),i(e)):r.nextTick(n,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},698:function(e,t,n){"use strict";var r=n(646).q.ERR_STREAM_PREMATURE_CLOSE;function a(){}e.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);n||(n={}),o=i||a,s=!1,i=function(){if(!s){s=!0;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(this,t)}};var o,s,u=n.readable||!1!==n.readable&&t.readable,l=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||f()},h=t._writableState&&t._writableState.finished,f=function(){l=!1,h=!0,u||i.call(t)},p=t._readableState&&t._readableState.endEmitted,d=function(){u=!1,p=!0,l||i.call(t)},m=function(e){i.call(t,e)},g=function(){var e;return u&&!p?(t._readableState&&t._readableState.ended||(e=new r),i.call(t,e)):l&&!h?(t._writableState&&t._writableState.ended||(e=new r),i.call(t,e)):void 0},y=function(){t.req.on("finish",f)};return t.setHeader&&"function"==typeof t.abort?(t.on("complete",f),t.on("abort",g),t.req?y():t.on("request",y)):l&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",d),t.on("finish",f),!1!==n.error&&t.on("error",m),t.on("close",g),function(){t.removeListener("complete",f),t.removeListener("abort",g),t.removeListener("request",y),t.req&&t.req.removeListener("finish",f),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",f),t.removeListener("end",d),t.removeListener("error",m),t.removeListener("close",g)}}},727:function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){n(e);return}s.done?t(u):Promise.resolve(u).then(r,a)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var i=n(646).q.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,n){if(t&&"function"==typeof t.next)o=t;else if(t&&t[Symbol.asyncIterator])o=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])o=t[Symbol.iterator]();else throw new i("iterable",["Iterable"],t);var o,s=new e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,a;r=e,a=n[t],t in r?Object.defineProperty(r,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[t]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({objectMode:!0},n)),u=!1;function l(){return c.apply(this,arguments)}function c(){var e;return e=function*(){try{var e=yield o.next(),t=e.value;e.done?s.push(null):s.push((yield t))?l():u=!1}catch(e){s.destroy(e)}},(c=function(){var t=this,n=arguments;return new Promise(function(a,i){var o=e.apply(t,n);function s(e){r(o,a,i,s,u,"next",e)}function u(e){r(o,a,i,s,u,"throw",e)}s(void 0)})}).apply(this,arguments)}return s._read=function(){u||(u=!0,l())},s}},442:function(e,t,n){"use strict";var r,a=n(646).q,i=a.ERR_MISSING_ARGS,o=a.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e,t,a=arguments.length,c=Array(a),h=0;h<a;h++)c[h]=arguments[h];var f=(e=c).length&&"function"==typeof e[e.length-1]?e.pop():s;if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new i("streams");var p=c.map(function(e,a){var i,s,l,h,d,m=a<c.length-1;return s=i=function(e){t||(t=e),e&&p.forEach(u),m||(p.forEach(u),f(t))},l=!1,i=function(){l||(l=!0,s.apply(void 0,arguments))},h=!1,e.on("close",function(){h=!0}),void 0===r&&(r=n(698)),r(e,{readable:m,writable:a>0},function(e){if(e)return i(e);h=!0,i()}),d=!1,function(t){if(!h&&!d){if(d=!0,e.setHeader&&"function"==typeof e.abort)return e.abort();if("function"==typeof e.destroy)return e.destroy();i(t||new o("pipe"))}}});return c.reduce(l)}},776:function(e,t,n){"use strict";var r=n(646).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,a){var i=null!=t.highWaterMark?t.highWaterMark:a?t[n]:null;if(null!=i){if(!(isFinite(i)&&Math.floor(i)===i)||i<0)throw new r(a?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},678:function(e,t,n){e.exports=n(781)},55:function(e,t,n){var r=n(300),a=r.Buffer;function i(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),o.prototype=Object.create(a.prototype),i(a,o),o.from=function(e,t,n){if("number"==typeof e)throw TypeError("Argument must not be a number");return a(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw TypeError("Argument must be a number");var r=a(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}},173:function(e,t,n){e.exports=a;var r=n(361).EventEmitter;function a(){r.call(this)}n(782)(a,r),a.Readable=n(709),a.Writable=n(337),a.Duplex=n(403),a.Transform=n(170),a.PassThrough=n(889),a.finished=n(698),a.pipeline=n(442),a.Stream=a,a.prototype.pipe=function(e,t){var n=this;function a(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",a),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",a),e.removeListener("drain",i),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},704:function(e,t,n){"use strict";var r=n(55).Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:this.write=f,this.end=p;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}(this,e,0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=i,i.prototype.write=function(e){var t,n;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var a=o(t[r]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=o(t[r]))>=0?(a>0&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=o(t[r]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(e){e.exports=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}};function t(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}},300:function(e){"use strict";e.exports=n(1876)},361:function(e){"use strict";e.exports=n(5293)},781:function(e){"use strict";e.exports=n(5293).EventEmitter},837:function(e){"use strict";e.exports=n(9720)}},a={};function i(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}},o=!0;try{t[e](r,r.exports,i),o=!1}finally{o&&delete a[e]}return r.exports}i.ab="//";var o=i(173);e.exports=o}()},9720:function(e,t,n){var r=n(1876).Buffer,a=n(3454);!function(){var t={992:function(e){e.exports=function(e,n,r){if(e.filter)return e.filter(n,r);if(null==e||"function"!=typeof n)throw TypeError();for(var a=[],i=0;i<e.length;i++)if(t.call(e,i)){var o=e[i];n.call(r,o,i,e)&&a.push(o)}return a};var t=Object.prototype.hasOwnProperty},256:function(e,t,n){"use strict";var r=n(500),a=n(139),i=a(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&i(e,".prototype.")>-1?a(n):n}},139:function(e,t,n){"use strict";var r=n(174),a=n(500),i=a("%Function.prototype.apply%"),o=a("%Function.prototype.call%"),s=a("%Reflect.apply%",!0)||r.call(o,i),u=a("%Object.getOwnPropertyDescriptor%",!0),l=a("%Object.defineProperty%",!0),c=a("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(r,o,arguments);return u&&l&&u(t,"length").configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))}),t};var h=function(){return s(r,i,arguments)};l?l(e.exports,"apply",{value:h}):e.exports.apply=h},144:function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;e.exports=function(e,r,a){if("[object Function]"!==n.call(r))throw TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var o=0;o<i;o++)r.call(a,e[o],o,e);else for(var s in e)t.call(e,s)&&r.call(a,e[s],s,e)}},426:function(e){"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r,a=this;if("function"!=typeof a||"[object Function]"!==n.call(a))throw TypeError("Function.prototype.bind called on incompatible "+a);for(var i=t.call(arguments,1),o=Math.max(0,a.length-i.length),s=[],u=0;u<o;u++)s.push("$"+u);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(!(this instanceof r))return a.apply(e,i.concat(t.call(arguments)));var n=a.apply(this,i.concat(t.call(arguments)));return Object(n)===n?n:this}),a.prototype){var l=function(){};l.prototype=a.prototype,r.prototype=new l,l.prototype=null}return r}},174:function(e,t,n){"use strict";var r=n(426);e.exports=Function.prototype.bind||r},500:function(e,t,n){"use strict";var r,a=SyntaxError,i=Function,o=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var l=function(){throw new o},c=u?function(){try{return arguments.callee,l}catch(e){try{return u(arguments,"callee").get}catch(e){return l}}}():l,h=n(115)(),f=Object.getPrototypeOf||function(e){return e.__proto__},p={},d="undefined"==typeof Uint8Array?r:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":a,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&(n=f(a.prototype))}return m[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(174),v=n(101),w=b.call(Function.call,Array.prototype.concat),x=b.call(Function.apply,Array.prototype.splice),_=b.call(Function.call,String.prototype.replace),k=b.call(Function.call,String.prototype.slice),S=b.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,N=function(e){var t=k(e,0,1),n=k(e,-1);if("%"===t&&"%"!==n)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var r=[];return _(e,I,function(e,t,n,a){r[r.length]=n?_(a,E,"$1"):t||e}),r},T=function(e,t){var n,r=e;if(v(y,r)&&(r="%"+(n=y[r])[0]+"%"),v(m,r)){var i=m[r];if(i===p&&(i=g(r)),void 0===i&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/g,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=N(e),r=n.length>0?n[0]:"",i=T("%"+r+"%",t),s=i.name,l=i.value,c=!1,h=i.alias;h&&(r=h[0],x(n,w([0,1],h)));for(var f=1,p=!0;f<n.length;f+=1){var d=n[f],g=k(d,0,1),y=k(d,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new a("property names with quotes must have matching quotes");if("constructor"!==d&&p||(c=!0),r+="."+d,v(m,s="%"+r+"%"))l=m[s];else if(null!=l){if(!(d in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var b=u(l,d);l=(p=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:l[d]}else p=v(l,d),l=l[d];p&&!c&&(m[s]=l)}}return l}},942:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,a=n(773);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&a()}},773:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},115:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,a=n(832);e.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&a()}},832:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},101:function(e,t,n){"use strict";var r=n(174);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},157:function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,n=Object.prototype.toString,r=function(e){return(!t||!e||"object"!=typeof e||!(Symbol.toStringTag in e))&&"[object Arguments]"===n.call(e)},a=function(e){return!!r(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==n.call(e)&&"[object Function]"===n.call(e.callee)},i=function(){return r(arguments)}();r.isLegacyArguments=a,e.exports=i?r:a},391:function(e){"use strict";var t=Object.prototype.toString,n=Function.prototype.toString,r=/^\s*(?:function)?\*/,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,i=Object.getPrototypeOf,o=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}(),s=o?i(o):{};e.exports=function(e){return"function"==typeof e&&(!!r.test(n.call(e))||(a?i(e)===s:"[object GeneratorFunction]"===t.call(e)))}},994:function(e,t,r){"use strict";var a=r(144),i=r(349),o=r(256),s=o("Object.prototype.toString"),u=r(942)()&&"symbol"==typeof Symbol.toStringTag,l=i(),c=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return -1},h=o("String.prototype.slice"),f={},p=r(466),d=Object.getPrototypeOf;u&&p&&d&&a(l,function(e){var t=new n.g[e];if(!(Symbol.toStringTag in t))throw EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=d(t),a=p(r,Symbol.toStringTag);a||(a=p(d(r),Symbol.toStringTag)),f[e]=a.get});var m=function(e){var t=!1;return a(f,function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}}),t};e.exports=function(e){return!!e&&"object"==typeof e&&(u?!!p&&m(e):c(l,h(s(e),8,-1))>-1)}},369:function(e){e.exports=function(e){return e instanceof r}},584:function(e,t,n){"use strict";var r=n(157),a=n(391),i=n(490),o=n(994);function s(e){return e.call.bind(e)}var u="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,c=s(Object.prototype.toString),h=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(u)var d=s(BigInt.prototype.valueOf);if(l)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===c(e)}function b(e){return"[object Set]"===c(e)}function v(e){return"[object WeakMap]"===c(e)}function w(e){return"[object WeakSet]"===c(e)}function x(e){return"[object ArrayBuffer]"===c(e)}function _(e){return"undefined"!=typeof ArrayBuffer&&(x.working?x(e):e instanceof ArrayBuffer)}function k(e){return"[object DataView]"===c(e)}function S(e){return"undefined"!=typeof DataView&&(k.working?k(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=a,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||S(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},b.working="undefined"!=typeof Set&&b(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(b.working?b(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),t.isArrayBuffer=_,k.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&k(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=S;var I="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function N(e){return void 0!==I&&(void 0===E.working&&(E.working=E(new I)),E.working?E(e):e instanceof I)}function T(e){return g(e,h)}function A(e){return g(e,f)}function C(e){return g(e,p)}function O(e){return u&&g(e,d)}function R(e){return l&&g(e,m)}t.isSharedArrayBuffer=N,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},t.isGeneratorObject=function(e){return"[object Generator]"===c(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},t.isNumberObject=T,t.isStringObject=A,t.isBooleanObject=C,t.isBigIntObject=O,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return T(e)||A(e)||C(e)||O(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(_(e)||N(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},177:function(e,t,n){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])y(s)||!_(s)?o+=" "+s:o+=" "+l(s);return o},t.deprecate=function(e,n){if(void 0!==a&&!0===a.noDeprecation)return e;if(void 0===a)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(a.throwDeprecation)throw Error(n);a.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}};var o={},s=/^$/;if(a.env.NODE_DEBUG){var u=a.env.NODE_DEBUG;s=RegExp("^"+(u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function l(e,n){var r={seen:[],stylize:h};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,e,r.depth)}function c(e,t){var n=l.styles[t];return n?"\x1b["+l.colors[n][0]+"m"+e+"\x1b["+l.colors[n][1]+"m":e}function h(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&I(n.inspect)&&n.inspect!==t.inspect&&!(n.constructor&&n.constructor.prototype===n)){var a,i,o,s,u,l=n.inspect(r,e);return v(l)||(l=f(e,l,r)),l}var c=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}(e,n);if(c)return c;var h=Object.keys(n),_=(s={},h.forEach(function(e,t){s[e]=!0}),s);if(e.showHidden&&(h=Object.getOwnPropertyNames(n)),S(n)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return p(n);if(0===h.length){if(I(n)){var E=n.name?": "+n.name:"";return e.stylize("[Function"+E+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return p(n)}var N="",T=!1,C=["{","}"];return(m(n)&&(T=!0,C=["[","]"]),I(n)&&(N=" [Function"+(n.name?": "+n.name:"")+"]"),x(n)&&(N=" "+RegExp.prototype.toString.call(n)),k(n)&&(N=" "+Date.prototype.toUTCString.call(n)),S(n)&&(N=" "+p(n)),0!==h.length||T&&0!=n.length)?r<0?x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=T?function(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)A(t,String(o))?i.push(d(e,t,n,r,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(d(e,t,n,r,a,!0))}),i}(e,n,r,_,h):h.map(function(t){return d(e,n,r,_,t,T)}),e.seen.pop(),a=N,i=C,o=0,u.reduce(function(e,t){return o++,t.indexOf("\n")>=0&&o++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===a?"":a+"\n ")+" "+u.join(",\n  ")+" "+i[1]:i[0]+a+" "+u.join(", ")+" "+i[1]):C[0]+N+C[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,a,i){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),A(r,a)||(o="["+a+"]"),!s&&(0>e.seen.indexOf(u.value)?(s=y(n)?f(e,u.value,null):f(e,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),w(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function m(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function w(e){return void 0===e}function x(e){return _(e)&&"[object RegExp]"===E(e)}function _(e){return"object"==typeof e&&null!==e}function k(e){return _(e)&&"[object Date]"===E(e)}function S(e){return _(e)&&("[object Error]"===E(e)||e instanceof Error)}function I(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!o[e=e.toUpperCase()]){if(s.test(e)){var n=a.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){}}return o[e]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(584),t.isArray=m,t.isBoolean=g,t.isNull=y,t.isNullOrUndefined=function(e){return null==e},t.isNumber=b,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=w,t.isRegExp=x,t.types.isRegExp=x,t.isObject=_,t.isDate=k,t.types.isDate=k,t.isError=S,t.types.isNativeError=S,t.isFunction=I,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(369);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[N((e=new Date).getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":"),[e.getDate(),T[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(782),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t=e[C];if("function"!=typeof t)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push(function(e,r){e?n(e):t(r)});try{e.apply(this,a)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=C,t.callbackify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then(function(e){a.nextTick(o.bind(null,null,e))},function(e){a.nextTick(O.bind(null,e,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}},490:function(e,t,r){"use strict";var a=r(144),i=r(349),o=r(256),s=o("Object.prototype.toString"),u=r(942)()&&"symbol"==typeof Symbol.toStringTag,l=i(),c=o("String.prototype.slice"),h={},f=r(466),p=Object.getPrototypeOf;u&&f&&p&&a(l,function(e){if("function"==typeof n.g[e]){var t=new n.g[e];if(!(Symbol.toStringTag in t))throw EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=p(t),a=f(r,Symbol.toStringTag);a||(a=f(p(r),Symbol.toStringTag)),h[e]=a.get}});var d=function(e){var t=!1;return a(h,function(n,r){if(!t)try{var a=n.call(e);a===r&&(t=a)}catch(e){}}),t},m=r(994);e.exports=function(e){return!!m(e)&&(u?d(e):c(s(e),8,-1))}},349:function(e,t,r){"use strict";var a=r(992);e.exports=function(){return a(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(e){return"function"==typeof n.g[e]})}},466:function(e,t,n){"use strict";var r=n(500)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r}},i={};function o(e){var n=i[e];if(void 0!==n)return n.exports;var r=i[e]={exports:{}},a=!0;try{t[e](r,r.exports,o),a=!1}finally{a&&delete i[e]}return r.exports}o.ab="//";var s=o(177);e.exports=s}()},2822:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}u((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let s=i(n(6886)),u=i(n(9190));s.enableProdMode(),t.default=new class{constructor(){this.model=null,this.model=null,this.getModel()}getModel(){return o(this,void 0,void 0,function*(){try{this.model=yield u.load("https://nsfw-model-1.s3.us-west-2.amazonaws.com/nsfw-predict-model/",{type:"graph"})}catch(e){console.error(e)}})}predict(e,t){if(!this.model)throw Error("Some error occured, please try again later!");return this.model.classify(e,t)}predictImg(e,t=5){return o(this,void 0,void 0,function*(){let n=URL.createObjectURL(e);try{let e=document.createElement("img");return e.width=400,e.height=400,e.src=n,yield new Promise(r=>{e.onload=()=>o(this,void 0,void 0,function*(){let a=yield this.predict(e,t);URL.revokeObjectURL(n),r(a)})})}catch(e){throw console.error(e),URL.revokeObjectURL(n),e}})}isSafe(e){return o(this,void 0,void 0,function*(){try{let t=yield this.predictImg(e,3),n=t.find(({className:e})=>"Porn"===e),r=t.find(({className:e})=>"Hentai"===e);if(!n||!r)return!0;return!(n.probability>.25||r.probability>.25)}catch(e){throw console.error(e),e}})}}},9190:function(e,t,n){"use strict";var r=n(1876).Buffer,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NSFWJS=t.load=void 0;var c=o(n(6886)),h=n(8762),f=l(n(8103));t.load=function(e,t){return void 0===e&&(e="https://d1zv2aa70wpiur.cloudfront.net/tfjs_quant_nsfw_mobilenet/"),void 0===t&&(t={size:224}),s(this,void 0,void 0,function(){var n;return u(this,function(r){switch(r.label){case 0:if(null==c)throw Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");return t.size=t.size||224,[4,(n=new p(e,t)).load()];case 1:return r.sent(),[2,n]}})})};var p=function(){function e(e,t){this.intermediateModels={},this.options=t,this.normalizationOffset=c.scalar(255),"string"!=typeof e||e.startsWith("indexeddb://")||e.startsWith("localstorage://")?this.pathOrIOHandler=e:e.endsWith("model.json")?this.pathOrIOHandler=e:this.pathOrIOHandler=e+"model.json"}return e.prototype.load=function(){return s(this,void 0,void 0,function(){var e,t,n,r,a,i=this;return u(this,function(o){switch(o.label){case 0:if(t=(e=this.options).size,"graph"!==e.type)return[3,2];return n=this,[4,c.loadGraphModel(this.pathOrIOHandler)];case 1:return n.model=o.sent(),[3,4];case 2:return r=this,[4,c.loadLayersModel(this.pathOrIOHandler)];case 3:r.model=o.sent(),this.endpoints=this.model.layers.map(function(e){return e.name}),o.label=4;case 4:return[4,(a=c.tidy(function(){return i.model.predict(c.zeros([1,t,t,3]))})).data()];case 5:return o.sent(),a.dispose(),[2]}})})},e.prototype.infer=function(e,t){var n=this;if(null!=t&&-1===this.endpoints.indexOf(t))throw Error("Unknown endpoint "+t+". Available endpoints: "+this.endpoints+".");return c.tidy(function(){e instanceof c.Tensor||(e=c.browser.fromPixels(e));var r,a=e.toFloat().div(n.normalizationOffset),i=a,o=n.options.size;(e.shape[0]!==o||e.shape[1]!==o)&&(i=c.image.resizeBilinear(a,[o,o],!0));var s=i.reshape([1,o,o,3]);if(null==t)r=n.model;else{if(n.model.hasOwnProperty("layers")&&null==n.intermediateModels[t]){var u=n.model.layers.find(function(e){return e.name===t});n.intermediateModels[t]=c.model({inputs:n.model.inputs,outputs:u.output})}r=n.intermediateModels[t]}return r.predict(s)})},e.prototype.classify=function(e,t){return void 0===t&&(t=5),s(this,void 0,void 0,function(){var n,r;return u(this,function(a){switch(a.label){case 0:return[4,function(e,t){return s(this,void 0,void 0,function(){var n,r,a,i,o,s;return u(this,function(u){switch(u.label){case 0:return[4,e.data()];case 1:for(a=0,n=u.sent(),r=[];a<n.length;a++)r.push({value:n[a],index:a});for(r.sort(function(e,t){return t.value-e.value}),i=new Float32Array(t),o=new Int32Array(t),a=0;a<t;a++)i[a]=r[a].value,o[a]=r[a].index;for(a=0,s=[];a<o.length;a++)s.push({className:h.NSFW_CLASSES[o[a]],probability:i[a]});return[2,s]}})})}(n=this.infer(e),t)];case 1:return r=a.sent(),n.dispose(),[2,r]}})})},e.prototype.classifyGif=function(e,t){return void 0===t&&(t={topk:5}),s(this,void 0,void 0,function(){var n,a,i,o,s,l,c,h,p;return u(this,function(u){switch(u.label){case 0:if(n=[],!r.isBuffer(e))return[3,2];return[4,f.default({url:e,frames:"all",outputType:"jpg"})];case 1:return n=u.sent(),[3,4];case 2:return[4,f.default({url:e.src,frames:"all",outputType:"canvas"})];case 3:n=u.sent(),u.label=4;case 4:if(a=[],"number"!=typeof t.fps)a=n.map(function(e,t){return t});else{for(o=0,i=0;o<n.length;o++)i+=10*n[o].frameInfo.delay;if((s=Math.floor(i/1e3*t.fps))<=1)a=[Math.floor(n.length/2)];else if(s>=n.length)a=n.map(function(e,t){return t});else for(o=1,l=Math.floor(n.length/(s+1));o<=s;o++)a.push(o*l)}c=[],o=0,u.label=5;case 5:if(!(o<a.length))return[3,8];return h=n[a[o]].getImage(),[4,this.classify(h,t.topk)];case 6:p=u.sent(),"function"==typeof t.onFrame&&t.onFrame({index:a[o],totalFrames:n.length,predictions:p,image:h}),c.push(p),u.label=7;case 7:return o++,[3,5];case 8:return[2,c]}})})},e}();t.NSFWJS=p},8762:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NSFW_CLASSES=void 0,t.NSFW_CLASSES={0:"Drawing",1:"Hentai",2:"Neutral",3:"Porn",4:"Sexy"}},1494:function(e,t){"use strict";function n(e,t,n,r){for(var a=e[t++],i=1<<a,o=i+1,s=o+1,u=a+1,l=(1<<u)-1,c=0,h=0,f=0,p=e[t++],d=new Int32Array(4096),m=null;;){for(;c<16&&0!==p;)h|=e[t++]<<c,c+=8,1===p?p=e[t++]:--p;if(c<u)break;var g=h&l;if(h>>=u,c-=u,g===i){s=o+1,l=(1<<(u=a+1))-1,m=null;continue}if(g===o)break;for(var y=g<s?g:m,b=0,v=y;v>i;)v=d[v]>>8,++b;var w=v;if(f+b+(y!==g?1:0)>r){console.log("Warning, gif stream longer than expected.");return}n[f++]=w;var x=f+=b;for(y!==g&&(n[f++]=w),v=y;b--;)v=d[v],n[--x]=255&v,v>>=8;null!==m&&s<4096&&(d[s++]=m<<8|w,s>=l+1&&u<12&&(++u,l=l<<1|1)),m=g}return f!==r&&console.log("Warning, gif stream shorter than expected."),n}try{t.N=function(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||(e[t++]+1&253)!=56||97!==e[t++])throw Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],o=1<<(7&i)+1;e[t++],e[t++];var s=null,u=null;i>>7&&(s=t,u=o,t+=3*o);var l=!0,c=[],h=0,f=null,p=0,d=null;for(this.width=r,this.height=a;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,d=e[t++]|e[t++]<<8,t++;else for(t+=12;;){var m=e[t++];if(!(m>=0))throw Error("Invalid block size");if(0===m)break;t+=m}break;case 249:if(4!==e[t++]||0!==e[t+4])throw Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],(1&g)==0&&(f=null),p=g>>2&7,t++;break;case 254:for(;;){var m=e[t++];if(!(m>=0))throw Error("Invalid block size");if(0===m)break;t+=m}break;default:throw Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,x=e[t++],_=x>>7,k=x>>6&1,S=1<<(7&x)+1,I=s,E=u,N=!1;if(_){var N=!0;I=t,E=S,t+=3*S}var T=t;for(t++;;){var m=e[t++];if(!(m>=0))throw Error("Invalid block size");if(0===m)break;t+=m}c.push({x:y,y:b,width:v,height:w,has_local_palette:N,palette_offset:I,palette_size:E,data_offset:T,data_length:t-T,transparent_index:f,interlaced:!!k,delay:h,disposal:p});break;case 59:l=!1;break;default:throw Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return d},this.frameInfo=function(e){if(e<0||e>=c.length)throw Error("Frame index out of range.");return c[e]},this.decodeAndBlitFrameBGRA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);n(e,i.data_offset,s,o);var u=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,h=r-c,f=c,p=(i.y*r+i.x)*4,d=((i.y+i.height)*r+i.x)*4,m=p,g=4*h;!0===i.interlaced&&(g+=28*r);for(var y=8,b=0,v=s.length;b<v;++b){var w=s[b];if(0===f&&(m+=g,f=c,m>=d&&(g=4*h+4*r*(y-1),m=p+(c+h)*(y<<1),y>>=1)),w===l)m+=4;else{var x=e[u+3*w],_=e[u+3*w+1],k=e[u+3*w+2];a[m++]=k,a[m++]=_,a[m++]=x,a[m++]=255}--f}},this.decodeAndBlitFrameRGBA=function(t,a){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);n(e,i.data_offset,s,o);var u=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,h=r-c,f=c,p=(i.y*r+i.x)*4,d=((i.y+i.height)*r+i.x)*4,m=p,g=4*h;!0===i.interlaced&&(g+=28*r);for(var y=8,b=0,v=s.length;b<v;++b){var w=s[b];if(0===f&&(m+=g,f=c,m>=d&&(g=4*h+4*r*(y-1),m=p+(c+h)*(y<<1),y>>=1)),w===l)m+=4;else{var x=e[u+3*w],_=e[u+3*w+1],k=e[u+3*w+2];a[m++]=x,a[m++]=_,a[m++]=k,a[m++]=255}--f}}}}catch(e){}},5573:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(1554),i={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};t.dataToBitMap=function(e,t){var n,o,s,u=t.width,l=t.height,c=t.depth,h=t.bpp,f=t.interlace;if(8!==c)var p,d,m=(p=[],d=0,{get:function(t){for(;p.length<t;)!function(){if(d===e.length)throw Error("Ran out of data");var t,n,r,a,i=e[d];switch(d++,c){default:throw Error("unrecognised depth");case 16:r=e[d],d++,p.push((i<<8)+r);break;case 4:r=15&i,a=i>>4,p.push(a,r);break;case 2:t=3&i,n=i>>2&3,r=i>>4&3,a=i>>6&3,p.push(a,r,n,t);break;case 1:t=i>>4&1,n=i>>5&1,r=i>>6&1,a=i>>7&1,p.push(a,r,n,t,i>>3&1,i>>2&1,i>>1&1,1&i)}}();var n=p.slice(0,t);return p=p.slice(t),n},resetAfterLine:function(){p.length=0},end:function(){if(d!==e.length)throw Error("extra data found")}});n=c<=8?new r(u*l*4):new Uint16Array(u*l*4);var g=Math.pow(2,c)-1,y=0;if(f)o=a.getImagePasses(u,l),s=a.getInterlaceIterator(u,l);else{var b=0;s=function(){var e=b;return b+=4,e},o=[{width:u,height:l}]}for(var v=0;v<o.length;v++)8===c?y=function(e,t,n,r,a,o){for(var s=e.width,u=e.height,l=e.index,c=0;c<u;c++)for(var h=0;h<s;h++){for(var f=n(h,c,l),p=0;p<4;p++){var d=i[r][p];if(p===a.length)throw Error("Ran out of data");t[f+p]=255!==d?a[d+o]:255}o+=r}return o}(o[v],n,s,h,e,y):function(e,t,n,r,a,o){for(var s=e.width,u=e.height,l=e.index,c=0;c<u;c++){for(var h=0;h<s;h++)for(var f=a.get(r),p=n(h,c,l),d=0;d<4;d++){var m=i[r][d];t[p+d]=255!==m?f[m]:o}a.resetAfterLine()}}(o[v],n,s,h,m,g);if(8===c){if(y!==e.length)throw Error("extra data found")}else m.end();return n}},4174:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(7745);e.exports=function(e,t,n,i){var o=i.colorType===a.COLORTYPE_COLOR_ALPHA;if(i.inputHasAlpha&&o||!i.inputHasAlpha&&!o)return e;var s=o?4:3,u=new r(t*n*s),l=i.inputHasAlpha?4:3,c=0,h=0,f=i.bgColor||{};void 0===f.red&&(f.red=255),void 0===f.green&&(f.green=255),void 0===f.blue&&(f.blue=255);for(var p=0;p<n;p++)for(var d=0;d<t;d++){var m,g=e[c],y=e[c+1],b=e[c+2];i.inputHasAlpha?(m=e[c+3],o||(m/=255,g=Math.min(Math.max(Math.round((1-m)*f.red+m*g),0),255),y=Math.min(Math.max(Math.round((1-m)*f.green+m*y),0),255),b=Math.min(Math.max(Math.round((1-m)*f.blue+m*b),0),255))):m=255,u[h]=g,u[h+1]=y,u[h+2]=b,o&&(u[h+3]=m),c+=l,h+=s}return u}},425:function(e,t,n){"use strict";var r=n(3454),a=n(1876).Buffer,i=n(9720),o=n(9681),s=e.exports=function(){o.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(s,o),s.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),r.nextTick((function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},s.prototype.write=function(e,t){var n;return this.writable?(n=a.isBuffer(e)?e:new a(e,t||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",Error("Stream not writable")),!1)},s.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",Error("There are some read requests waitng on finished stream")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._processReadAllowingLess=function(e){this._reads.shift();var t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},s.prototype._processRead=function(e){this._reads.shift();for(var t=0,n=0,r=new a(e.length);t<e.length;){var i=this._buffers[n++],o=Math.min(i.length,e.length-t);i.copy(r,t,0,o),t+=o,o!==i.length&&(this._buffers[--n]=i.slice(o))}n>0&&this._buffers.splice(0,n),this._buffered-=e.length,e.func.call(this,r)},s.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&this._buffers.length>0&&null===this._buffers[0]&&this._end()}catch(e){this.emit("error",e)}}},7745:function(e){"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},6018:function(e){"use strict";var t=[];!function(){for(var e=0;e<256;e++){for(var n=e,r=0;r<8;r++)1&n?n=3988292384^n>>>1:n>>>=1;t[e]=n}}();var n=e.exports=function(){this._crc=-1};n.prototype.write=function(e){for(var n=0;n<e.length;n++)this._crc=t[(this._crc^e[n])&255]^this._crc>>>8;return!0},n.prototype.crc32=function(){return -1^this._crc},n.crc32=function(e){for(var n=-1,r=0;r<e.length;r++)n=t[(n^e[r])&255]^n>>>8;return -1^n}},5935:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(6733),i={0:function(e,t,n,r,a){e.copy(r,a,t,t+n)},1:function(e,t,n,r,a,i){for(var o=0;o<n;o++){var s=o>=i?e[t+o-i]:0,u=e[t+o]-s;r[a+o]=u}},2:function(e,t,n,r,a){for(var i=0;i<n;i++){var o=t>0?e[t+i-n]:0,s=e[t+i]-o;r[a+i]=s}},3:function(e,t,n,r,a,i){for(var o=0;o<n;o++){var s=o>=i?e[t+o-i]:0,u=t>0?e[t+o-n]:0,l=e[t+o]-(s+u>>1);r[a+o]=l}},4:function(e,t,n,r,i,o){for(var s=0;s<n;s++){var u=s>=o?e[t+s-o]:0,l=t>0?e[t+s-n]:0,c=t>0&&s>=o?e[t+s-(n+o)]:0,h=e[t+s]-a(u,l,c);r[i+s]=h}}},o={0:function(e,t,n){for(var r=0,a=t+n,i=t;i<a;i++)r+=Math.abs(e[i]);return r},1:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=i>=r?e[t+i-r]:0;a+=Math.abs(e[t+i]-o)}return a},2:function(e,t,n){for(var r=0,a=t+n,i=t;i<a;i++){var o=t>0?e[i-n]:0;r+=Math.abs(e[i]-o)}return r},3:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=i>=r?e[t+i-r]:0,s=t>0?e[t+i-n]:0;a+=Math.abs(e[t+i]-(o+s>>1))}return a},4:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var s=o>=r?e[t+o-r]:0,u=t>0?e[t+o-n]:0,l=t>0&&o>=r?e[t+o-(n+r)]:0;i+=Math.abs(e[t+o]-a(s,u,l))}return i}};e.exports=function(e,t,n,a,s){if("filterType"in a&&-1!==a.filterType){if("number"==typeof a.filterType)u=[a.filterType];else throw Error("unrecognised filter types")}else u=[0,1,2,3,4];for(var u,l=t*s,c=0,h=0,f=new r((l+1)*n),p=u[0],d=0;d<n;d++){if(u.length>1)for(var m=1/0,g=0;g<u.length;g++){var y=o[u[g]](e,h,l,s);y<m&&(p=u[g],m=y)}f[c]=p,c++,i[p](e,h,l,f,c,s),c+=l,h+=l}return f}},6281:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(9720),i=n(425),o=n(8290),s=e.exports=function(e){i.call(this);var t=[],n=this;this._filter=new o(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){n.emit("complete",r.concat(t))}}),this._filter.start()};a.inherits(s,i)},263:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(2809),i=n(8290);t.process=function(e,t){var n=[],o=new a(e);return new i(t,{read:o.read.bind(o),write:function(e){n.push(e)},complete:function(){}}).start(),o.process(),r.concat(n)}},8290:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(1554),i=n(6733);function o(e,t,n){var r=e*t;return 8!==n&&(r=Math.ceil(r/(8/n))),r}var s=e.exports=function(e,t){var n=e.width,r=e.height,i=e.interlace,s=e.bpp,u=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],i)for(var l=a.getImagePasses(n,r),c=0;c<l.length;c++)this._images.push({byteWidth:o(l[c].width,s,u),height:l[c].height,lineIndex:0});else this._images.push({byteWidth:o(n,s,u),height:r,lineIndex:0});8===u?this._xComparison=s:16===u?this._xComparison=2*s:this._xComparison=1};s.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},s.prototype._unFilterType1=function(e,t,n){for(var r=this._xComparison,a=r-1,i=0;i<n;i++){var o=e[1+i],s=i>a?t[i-r]:0;t[i]=o+s}},s.prototype._unFilterType2=function(e,t,n){for(var r=this._lastLine,a=0;a<n;a++){var i=e[1+a],o=r?r[a]:0;t[a]=i+o}},s.prototype._unFilterType3=function(e,t,n){for(var r=this._xComparison,a=r-1,i=this._lastLine,o=0;o<n;o++){var s=e[1+o],u=i?i[o]:0,l=Math.floor(((o>a?t[o-r]:0)+u)/2);t[o]=s+l}},s.prototype._unFilterType4=function(e,t,n){for(var r=this._xComparison,a=r-1,o=this._lastLine,s=0;s<n;s++){var u=e[1+s],l=o?o[s]:0,c=i(s>a?t[s-r]:0,l,s>a&&o?o[s-r]:0);t[s]=u+c}},s.prototype._reverseFilterLine=function(e){var t,n=e[0],a=this._images[this._imageIndex],i=a.byteWidth;if(0===n)t=e.slice(1,i+1);else switch(t=new r(i),n){case 1:this._unFilterType1(e,t,i);break;case 2:this._unFilterType2(e,t,i);break;case 3:this._unFilterType3(e,t,i);break;case 4:this._unFilterType4(e,t,i);break;default:throw Error("Unrecognised filter type - "+n)}this.write(t),a.lineIndex++,a.lineIndex>=a.height?(this._lastLine=null,this._imageIndex++,a=this._images[this._imageIndex]):this._lastLine=t,a?this.read(a.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},1157:function(e,t,n){"use strict";var r=n(1876).Buffer;e.exports=function(e,t){var n=t.depth,a=t.width,i=t.height,o=t.colorType,s=t.transColor,u=t.palette,l=e;return 3===o?function(e,t,n,r,a){for(var i=0,o=0;o<r;o++)for(var s=0;s<n;s++){var u=a[e[i]];if(!u)throw Error("index "+e[i]+" not in palette");for(var l=0;l<4;l++)t[i+l]=u[l];i+=4}}(e,l,a,i,u):(s&&function(e,t,n,r,a){for(var i=0,o=0;o<r;o++)for(var s=0;s<n;s++){var u=!1;if(1===a.length?a[0]===e[i]&&(u=!0):a[0]===e[i]&&a[1]===e[i+1]&&a[2]===e[i+2]&&(u=!0),u)for(var l=0;l<4;l++)t[i+l]=0;i+=4}}(e,l,a,i,s),8!==n&&(16===n&&(l=new r(a*i*4)),function(e,t,n,r,a){for(var i=Math.pow(2,a)-1,o=0,s=0;s<r;s++)for(var u=0;u<n;u++){for(var l=0;l<4;l++)t[o+l]=Math.floor(255*e[o+l]/i+.5);o+=4}}(e,l,a,i,n))),l}},1554:function(e,t){"use strict";var n=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t.getImagePasses=function(e,t){for(var r=[],a=e%8,i=t%8,o=(e-a)/8,s=(t-i)/8,u=0;u<n.length;u++){for(var l=n[u],c=o*l.x.length,h=s*l.y.length,f=0;f<l.x.length;f++)if(l.x[f]<a)c++;else break;for(f=0;f<l.y.length;f++)if(l.y[f]<i)h++;else break;c>0&&h>0&&r.push({width:c,height:h,index:u})}return r},t.getInterlaceIterator=function(e){return function(t,r,a){var i=t%n[a].x.length,o=(t-i)/n[a].x.length*8+n[a].x[i],s=r%n[a].y.length;return 4*o+((r-s)/n[a].y.length*8+n[a].y[s])*e*4}}},5191:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(9720),i=n(9681),o=n(7745),s=n(4106),u=e.exports=function(e){i.call(this),this._packer=new s(e||{}),this._deflate=this._packer.createDeflate(),this.readable=!0};a.inherits(u,i),u.prototype.pack=function(e,t,n,a){this.emit("data",new r(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),a&&this.emit("data",this._packer.packGAMA(a));var i=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(e){this.emit("data",this._packer.packIDAT(e))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(i)}},6217:function(e,t,n){"use strict";var r=n(1876).Buffer,a=!0,i=n(7715);i.deflateSync||(a=!1);var o=n(7745),s=n(4106);e.exports=function(e,t){if(!a)throw Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var n=new s(t||{}),u=[];u.push(new r(o.PNG_SIGNATURE)),u.push(n.packIHDR(e.width,e.height)),e.gamma&&u.push(n.packGAMA(e.gamma));var l=n.filterData(e.data,e.width,e.height),c=i.deflateSync(l,n.getDeflateOptions());if(l=null,!c||!c.length)throw Error("bad png - invalid compressed data response");return u.push(n.packIDAT(c)),u.push(n.packIEND()),r.concat(u)}},4106:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(7745),i=n(6018),o=n(4174),s=n(5935),u=n(7715),l=e.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||u.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:a.COLORTYPE_COLOR_ALPHA,e.colorType!==a.COLORTYPE_COLOR&&e.colorType!==a.COLORTYPE_COLOR_ALPHA)throw Error("option color type:"+e.colorType+" is not supported at present");if(8!==e.bitDepth)throw Error("option bit depth:"+e.bitDepth+" is not supported at present")};l.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},l.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},l.prototype.filterData=function(e,t,n){var r=o(e,t,n,this._options),i=a.COLORTYPE_TO_BPP_MAP[this._options.colorType];return s(r,t,n,this._options,i)},l.prototype._packChunk=function(e,t){var n=t?t.length:0,a=new r(n+12);return a.writeUInt32BE(n,0),a.writeUInt32BE(e,4),t&&t.copy(a,8),a.writeInt32BE(i.crc32(a.slice(4,a.length-4)),a.length-4),a},l.prototype.packGAMA=function(e){var t=new r(4);return t.writeUInt32BE(Math.floor(e*a.GAMMA_DIVISION),0),this._packChunk(a.TYPE_gAMA,t)},l.prototype.packIHDR=function(e,t){var n=new r(13);return n.writeUInt32BE(e,0),n.writeUInt32BE(t,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(a.TYPE_IHDR,n)},l.prototype.packIDAT=function(e){return this._packChunk(a.TYPE_IDAT,e)},l.prototype.packIEND=function(){return this._packChunk(a.TYPE_IEND,null)}},6733:function(e){"use strict";e.exports=function(e,t,n){var r=e+t-n,a=Math.abs(r-e),i=Math.abs(r-t),o=Math.abs(r-n);return a<=i&&a<=o?e:i<=o?t:n}},8761:function(e,t,n){"use strict";var r=n(9720),a=n(7715),i=n(425),o=n(6281),s=n(1219),u=n(5573),l=n(1157),c=e.exports=function(e){i.call(this),this._parser=new s(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};r.inherits(c,i),c.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this.errord=!0},c.prototype._inflateData=function(e){this._inflate||(this._inflate=a.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter)),this._inflate.write(e)},c.prototype._handleMetaData=function(e){this.emit("metadata",e),this._bitmapInfo=Object.create(e),this._filter=new o(this._bitmapInfo)},c.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},c.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},c.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},c.prototype._complete=function(e){if(!this.errord){try{var t=u.dataToBitMap(e,this._bitmapInfo),n=l(t,this._bitmapInfo);t=null}catch(e){this._handleError(e);return}this.emit("parsed",n)}}},7099:function(e,t,n){"use strict";var r=n(1876).Buffer,a=!0,i=n(7715);i.deflateSync||(a=!1);var o=n(2809),s=n(263),u=n(1219),l=n(5573),c=n(1157);e.exports=function(e,t){if(!a)throw Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var n,h,f,p=[],d=new o(e);if(new u(t,{read:d.read.bind(d),error:function(e){n=e},metadata:function(e){h=e},gamma:function(e){f=e},palette:function(e){h.palette=e},transColor:function(e){h.transColor=e},inflateData:function(e){p.push(e)}}).start(),d.process(),n)throw n;var m=r.concat(p);p.length=0;var g=i.inflateSync(m);if(m=null,!g||!g.length)throw Error("bad png - invalid inflate data response");var y=s.process(g,h);m=null;var b=l.dataToBitMap(y,h);y=null;var v=c(b,h);return h.data=v,h.gamma=f||0,h}},1219:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(7745),i=n(6018),o=e.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[a.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[a.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[a.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[a.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[a.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[a.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.inflateData=t.inflateData,this.finished=t.finished};o.prototype.start=function(){this.read(a.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(e){for(var t=a.PNG_SIGNATURE,n=0;n<t.length;n++)if(e[n]!==t[n]){this.error(Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(e){for(var t=e.readUInt32BE(0),n=e.readUInt32BE(4),o="",s=4;s<8;s++)o+=String.fromCharCode(e[s]);var u=Boolean(32&e[4]);if(!this._hasIHDR&&n!==a.TYPE_IHDR){this.error(Error("Expected IHDR on beggining"));return}if(this._crc=new i,this._crc.write(new r(o)),this._chunks[n])return this._chunks[n](t);if(!u){this.error(Error("Unsupported critical chunk type "+o));return}this.read(t+4,this._skipChunk.bind(this))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(e){var t=e.readInt32BE(0),n=this._crc.crc32();if(this._options.checkCRC&&n!==t){this.error(Error("Crc error - "+t+" - "+n));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(e){this._crc.write(e);var t=e.readUInt32BE(0),n=e.readUInt32BE(4),r=e[8],i=e[9],o=e[10],s=e[11],u=e[12];if(8!==r&&4!==r&&2!==r&&1!==r&&16!==r){this.error(Error("Unsupported bit depth "+r));return}if(!(i in a.COLORTYPE_TO_BPP_MAP)){this.error(Error("Unsupported color type"));return}if(0!==o){this.error(Error("Unsupported compression method"));return}if(0!==s){this.error(Error("Unsupported filter method"));return}if(0!==u&&1!==u){this.error(Error("Unsupported interlace method"));return}this._colorType=i;var l=a.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:n,depth:r,interlace:Boolean(u),palette:Boolean(i&a.COLORTYPE_PALETTE),color:Boolean(i&a.COLORTYPE_COLOR),alpha:Boolean(i&a.COLORTYPE_ALPHA),bpp:l,colorType:i}),this._handleChunkEnd()},o.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(e){this._crc.write(e);for(var t=Math.floor(e.length/3),n=0;n<t;n++)this._palette.push([e[3*n],e[3*n+1],e[3*n+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(e){this.read(e,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===a.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length){this.error(Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(Error("More transparent colors than palette size"));return}for(var t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===a.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===a.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/a.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(e){this.read(-e,this._parseIDAT.bind(this,e))},o.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===a.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw Error("Expected palette not found");this.inflateData(t);var n=e-t.length;n>0?this._handleIDAT(n):this._handleChunkEnd()},o.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},o.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},1010:function(e,t,n){"use strict";var r=n(7099),a=n(6217);t.read=function(e,t){return r(e,t||{})},t.write=function(e){return a(e)}},3525:function(e,t,n){"use strict";var r=n(1876).Buffer,a=n(3454),i=n(9720),o=n(9681),s=n(8761),u=n(5191),l=n(1010),c=t.y=function(e){o.call(this),e=e||{},this.width=e.width||0,this.height=e.height||0,this.data=this.width>0&&this.height>0?new r(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(e){this.data=e,this.emit("parsed",e)}).bind(this)),this._packer=new u(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(c,o),c.sync=l,c.prototype.pack=function(){return this.data&&this.data.length?(a.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(e,t){if(t){var n,r;n=(function(e){this.removeListener("error",r),this.data=e,t(null,this)}).bind(this),r=(function(e){this.removeListener("parsed",n),t(e,null)}).bind(this),this.once("parsed",n),this.once("error",r)}return this.end(e),this},c.prototype.write=function(e){return this._parser.write(e),!0},c.prototype.end=function(e){this._parser.end(e)},c.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},c.prototype._gamma=function(e){this.gamma=e},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(e,t,n,r,a,i,o,s){if(n>e.width||r>e.height||n+a>e.width||r+i>e.height)throw Error("bitblt reading outside image");if(o>t.width||s>t.height||o+a>t.width||s+i>t.height)throw Error("bitblt writing outside image");for(var u=0;u<i;u++)e.data.copy(t.data,(s+u)*t.width+o<<2,(r+u)*e.width+n<<2,(r+u)*e.width+n+a<<2)},c.prototype.bitblt=function(e,t,n,r,a,i,o){return c.bitblt(this,e,t,n,r,a,i,o),this},c.adjustGamma=function(e){if(e.gamma){for(var t=0;t<e.height;t++)for(var n=0;n<e.width;n++)for(var r=e.width*t+n<<2,a=0;a<3;a++){var i=e.data[r+a]/255;i=Math.pow(i,1/2.2/e.gamma),e.data[r+a]=Math.round(255*i)}e.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}},2809:function(e){"use strict";var t=e.exports=function(e){this._buffer=e,this._reads=[]};t.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},t.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();var t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}return this._reads.length>0?Error("There are some read requests waitng on finished stream"):this._buffer.length>0?Error("unrecognised content at end of stream"):void 0}},1720:function(e,t,n){"use strict";n.r(t),n.d(t,{Children:function(){return G},Component:function(){return s.Component},Fragment:function(){return s.Fragment},PureComponent:function(){return L},StrictMode:function(){return eS},Suspense:function(){return X},SuspenseList:function(){return Y},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:function(){return em},cloneElement:function(){return ev},createContext:function(){return s.createContext},createElement:function(){return s.createElement},createFactory:function(){return ey},createPortal:function(){return et},createRef:function(){return s.createRef},default:function(){return eC},findDOMNode:function(){return ex},flushSync:function(){return ek},forwardRef:function(){return W},hydrate:function(){return eo},isValidElement:function(){return eb},lazy:function(){return Z},memo:function(){return U},render:function(){return ei},startTransition:function(){return eI},unmountComponentAtNode:function(){return ew},unstable_batchedUpdates:function(){return e_},useCallback:function(){return S},useContext:function(){return I},useDebugValue:function(){return E},useDeferredValue:function(){return eE},useEffect:function(){return v},useErrorBoundary:function(){return N},useId:function(){return T},useImperativeHandle:function(){return _},useInsertionEffect:function(){return eT},useLayoutEffect:function(){return w},useMemo:function(){return k},useReducer:function(){return b},useRef:function(){return x},useState:function(){return y},useSyncExternalStore:function(){return eA},useTransition:function(){return eN},version:function(){return eg}});var r,a,i,o,s=n(6400),u=0,l=[],c=[],h=s.options.__b,f=s.options.__r,p=s.options.diffed,d=s.options.__c,m=s.options.unmount;function g(e,t){s.options.__h&&s.options.__h(a,e,u||t),u=0;var n=a.__H||(a.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:c}),n.__[e]}function y(e){return u=1,b($,e)}function b(e,t,n){var i=g(r++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):$(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=a,!a.u)){a.u=!0;var o=a.shouldComponentUpdate;a.shouldComponentUpdate=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter(function(e){return e.__c});if(r.every(function(e){return!e.__N}))return!o||o.call(this,e,t,n);var a=!1;return r.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}}),!(!a&&i.__c.props===e)&&(!o||o.call(this,e,t,n))}}return i.__N||i.__}function v(e,t){var n=g(r++,3);!s.options.__s&&P(n.__H,t)&&(n.__=e,n.i=t,a.__H.__h.push(n))}function w(e,t){var n=g(r++,4);!s.options.__s&&P(n.__H,t)&&(n.__=e,n.i=t,a.__h.push(n))}function x(e){return u=5,k(function(){return{current:e}},[])}function _(e,t,n){u=6,w(function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},null==n?n:n.concat(e))}function k(e,t){var n=g(r++,7);return P(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function S(e,t){return u=8,k(function(){return e},t)}function I(e){var t=a.context[e.__c],n=g(r++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(a)),t.props.value):e.__}function E(e,t){s.options.useDebugValue&&s.options.useDebugValue(t?t(e):e)}function N(e){var t=g(r++,10),n=y();return t.__=e,a.componentDidCatch||(a.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]}function T(){var e=g(r++,11);if(!e.__){for(var t=a.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function A(){for(var e;e=l.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(R),e.__H.__h.forEach(D),e.__H.__h=[]}catch(t){e.__H.__h=[],s.options.__e(t,e.__v)}}s.options.__b=function(e){a=null,h&&h(e)},s.options.__r=function(e){f&&f(e),r=0;var t=(a=e.__c).__H;t&&(i===a?(t.__h=[],a.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=c,e.__N=e.i=void 0})):(t.__h.forEach(R),t.__h.forEach(D),t.__h=[])),i=a},s.options.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==l.push(t)&&o===s.options.requestAnimationFrame||((o=s.options.requestAnimationFrame)||O)(A)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==c&&(e.__=e.__V),e.i=void 0,e.__V=c})),i=a=null},s.options.__c=function(e,t){t.some(function(e){try{e.__h.forEach(R),e.__h=e.__h.filter(function(e){return!e.__||D(e)})}catch(n){t.some(function(e){e.__h&&(e.__h=[])}),t=[],s.options.__e(n,e.__v)}}),d&&d(e,t)},s.options.unmount=function(e){m&&m(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{R(e)}catch(e){t=e}}),n.__H=void 0,t&&s.options.__e(t,n.__v))};var C="function"==typeof requestAnimationFrame;function O(e){var t,n=function(){clearTimeout(r),C&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);C&&(t=requestAnimationFrame(n))}function R(e){var t=a,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),a=t}function D(e){var t=a;e.__c=e.__(),a=t}function P(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function $(e,t){return"function"==typeof t?t(e):t}function F(e,t){for(var n in t)e[n]=t[n];return e}function M(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function B(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function L(e){this.props=e}function U(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:M(this.props,e)}function r(t){return this.shouldComponentUpdate=n,(0,s.createElement)(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(L.prototype=new s.Component).isPureReactComponent=!0,L.prototype.shouldComponentUpdate=function(e,t){return M(this.props,e)||M(this.state,t)};var j=s.options.__b;s.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),j&&j(e)};var z="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function W(e){function t(t){var n=F({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=z,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var V=function(e,t){return null==e?null:(0,s.toChildArray)((0,s.toChildArray)(e).map(t))},G={map:V,forEach:V,count:function(e){return e?(0,s.toChildArray)(e).length:0},only:function(e){var t=(0,s.toChildArray)(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:s.toChildArray},H=s.options.__e;s.options.__e=function(e,t,n,r){if(e.then){for(var a,i=t;i=i.__;)if((a=i.__c)&&a.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t)}H(e,t,n,r)};var q=s.options.unmount;function X(){this.__u=0,this.t=null,this.__b=null}function K(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Z(e){var t,n,r;function a(a){if(t||(t=e()).then(function(e){n=e.default||e},function(e){r=e}),r)throw r;if(!n)throw t;return(0,s.createElement)(n,a)}return a.displayName="Lazy",a.__f=!0,a}function Y(){this.u=null,this.o=null}s.options.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),q&&q(e)},(X.prototype=new s.Component).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var a=K(r.__v),i=!1,o=function(){i||(i=!0,n.__R=null,a?a(s):s())};n.__R=o;var s=function(){if(!--r.__u){if(r.state.__a){var e,t=r.state.__a;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)}),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(t,t.__c.__P,t.__c.__O)}for(r.setState({__a:r.__b=null});e=r.t.pop();)e.forceUpdate()}},u=!0===t.__h;r.__u++||u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},X.prototype.componentWillUnmount=function(){this.t=[]},X.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),t.__c.__H=null),null!=(t=F({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return e(t,n,r)})),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__a&&(0,s.createElement)(s.Fragment,null,e.fallback);return a&&(a.__h=null),[(0,s.createElement)(s.Fragment,null,t.__a?null:e.children),a]};var Q=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function J(e){return this.getChildContext=function(){return e.context},e.children}function ee(e){var t=this,n=e.i;t.componentWillUnmount=function(){(0,s.render)(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),(0,s.render)((0,s.createElement)(J,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function et(e,t){var n=(0,s.createElement)(ee,{__v:e,i:t});return n.containerInfo=t,n}(Y.prototype=new s.Component).__a=function(e){var t=this,n=K(t.__v),r=t.o.get(e);return r[0]++,function(a){var i=function(){t.props.revealOrder?(r.push(a),Q(t,e,r)):a()};n?n(i):i()}},Y.prototype.render=function(e){this.u=null,this.o=new Map;var t=(0,s.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Y.prototype.componentDidUpdate=Y.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Q(e,n,t)})};var en="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,er=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ea="undefined"!=typeof document;function ei(e,t,n){return null==t.__k&&(t.textContent=""),(0,s.render)(e,t),"function"==typeof n&&n(),e?e.__c:null}function eo(e,t,n){return(0,s.hydrate)(e,t),"function"==typeof n&&n(),e?e.__c:null}s.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(s.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var es=s.options.event;function eu(){}function el(){return this.cancelBubble}function ec(){return this.defaultPrevented}s.options.event=function(e){return es&&(e=es(e)),e.persist=eu,e.isPropagationStopped=el,e.isDefaultPrevented=ec,e.nativeEvent=e};var eh,ef={configurable:!0,get:function(){return this.class}},ep=s.options.vnode;s.options.vnode=function(e){var t=e.type,n=e.props,r=n;if("string"==typeof t){var a=-1===t.indexOf("-");for(var i in r={},n){var o,u=n[i];ea&&"children"===i&&"noscript"===t||"value"===i&&"defaultValue"in n&&null==u||("defaultValue"===i&&"value"in n&&null==n.value?i="value":"download"===i&&!0===u?u="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&(o=n.type,!("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(o))?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():a&&er.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===u&&(u=void 0),/^oninput$/i.test(i)&&r[i=i.toLowerCase()]&&(i="oninputCapture"),r[i]=u)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=(0,s.toChildArray)(n.children).forEach(function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)})),"select"==t&&null!=r.defaultValue&&(r.value=(0,s.toChildArray)(n.children).forEach(function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value})),e.props=r,n.class!=n.className&&(ef.enumerable="className"in n,null!=n.className&&(r.class=n.className),Object.defineProperty(r,"className",ef))}e.$$typeof=en,ep&&ep(e)};var ed=s.options.__r;s.options.__r=function(e){ed&&ed(e),eh=e.__c};var em={ReactCurrentDispatcher:{current:{readContext:function(e){return eh.__n[e.__c].props.value}}}},eg="17.0.2";function ey(e){return s.createElement.bind(null,e)}function eb(e){return!!e&&e.$$typeof===en}function ev(e){return eb(e)?s.cloneElement.apply(null,arguments):e}function ew(e){return!!e.__k&&((0,s.render)(null,e),!0)}function ex(e){return e&&(e.base||1===e.nodeType&&e)||null}var e_=function(e,t){return e(t)},ek=function(e,t){return e(t)},eS=s.Fragment;function eI(e){e()}function eE(e){return e}function eN(){return[!1,eI]}var eT=w;function eA(e,t){var n=t(),r=y({h:{__:n,v:t}}),a=r[0].h,i=r[1];return w(function(){a.__=n,a.v=t,B(a.__,t())||i({h:a})},[e,n,t]),v(function(){return B(a.__,a.v())||i({h:a}),e(function(){B(a.__,a.v())||i({h:a})})},[e]),n}var eC={useState:y,useId:T,useReducer:b,useEffect:v,useLayoutEffect:w,useInsertionEffect:eT,useTransition:eN,useDeferredValue:eE,useSyncExternalStore:eA,startTransition:eI,useRef:x,useImperativeHandle:_,useMemo:k,useCallback:S,useContext:I,useDebugValue:E,version:"17.0.2",Children:G,render:ei,hydrate:eo,unmountComponentAtNode:ew,createPortal:et,createElement:s.createElement,createContext:s.createContext,createFactory:ey,cloneElement:ev,createRef:s.createRef,Fragment:s.Fragment,isValidElement:eb,findDOMNode:ex,Component:s.Component,PureComponent:L,memo:U,forwardRef:W,flushSync:ek,unstable_batchedUpdates:e_,StrictMode:eS,Suspense:X,SuspenseList:Y,lazy:Z,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:em}},6400:function(e,t,n){"use strict";n.r(t),n.d(t,{Component:function(){return v},Fragment:function(){return b},cloneElement:function(){return $},createContext:function(){return F},createElement:function(){return m},createRef:function(){return y},h:function(){return m},hydrate:function(){return P},isValidElement:function(){return o},options:function(){return a},render:function(){return D},toChildArray:function(){return function e(t,n){return n=n||[],null==t||"boolean"==typeof t||(Array.isArray(t)?t.some(function(t){e(t,n)}):n.push(t)),n}}});var r,a,i,o,s,u,l,c={},h=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n){var a,i,o,s={};for(o in t)"key"==o?a=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return g(e,s,a,i,null)}function g(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++i:o};return null==o&&null!=a.vnode&&a.vnode(s),s}function y(){return{current:null}}function b(e){return e.children}function v(e,t){this.props=e,this.context=t}function w(e,t){if(null==t)return e.__?w(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?w(e):null}function x(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!_.__r++||u!==a.debounceRendering)&&((u=a.debounceRendering)||setTimeout)(_)}function _(){for(var e;_.__r=s.length;)e=s.sort(function(e,t){return e.__v.__b-t.__v.__b}),s=[],e.some(function(e){var t,n,r,a,i;e.__d&&(a=(r=e.__v).__e,(i=e.__P)&&(t=[],(n=p({},r)).__v=r.__v+1,A(i,r,n,e.__n,void 0!==i.ownerSVGElement,null!=r.__h?[a]:null,t,null==a?w(r):a,r.__h),C(t,r),r.__e!=a&&function e(t){var n,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(r)))})}function k(e,t,n,r,i,o,s,u,l,f){var p,m,y,v,x,_,k,I=r&&r.__k||h,E=I.length;for(n.__k=[],p=0;p<t.length;p++)if(null!=(v=n.__k[p]=null==(v=t[p])||"boolean"==typeof v?null:"string"==typeof v||"number"==typeof v||"bigint"==typeof v?g(null,v,null,null,v):Array.isArray(v)?g(b,{children:v},null,null,null):v.__b>0?g(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)){if(v.__=n,v.__b=n.__b+1,null===(y=I[p])||y&&v.key==y.key&&v.type===y.type)I[p]=void 0;else for(m=0;m<E;m++){if((y=I[m])&&v.key==y.key&&v.type===y.type){I[m]=void 0;break}y=null}A(e,v,y=y||c,i,o,s,u,l,f),x=v.__e,(m=v.ref)&&y.ref!=m&&(k||(k=[]),y.ref&&k.push(y.ref,null,v),k.push(m,v.__c||x,v)),null!=x?(null==_&&(_=x),"function"==typeof v.type&&v.__k===y.__k?v.__d=l=function e(t,n,r){for(var a,i=t.__k,o=0;i&&o<i.length;o++)(a=i[o])&&(a.__=t,n="function"==typeof a.type?e(a,n,r):S(r,a,a,i,a.__e,n));return n}(v,l,e):l=S(e,v,y,I,x,l),"function"==typeof n.type&&(n.__d=l)):l&&y.__e==l&&l.parentNode!=e&&(l=w(y))}for(n.__e=_,p=E;p--;)null!=I[p]&&function e(t,n,r){var i,o;if(a.unmount&&a.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||O(i,null,n)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){a.__e(e,n)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&e(i[o],n,r||"function"!=typeof t.type);r||null==t.__e||d(t.__e),t.__=t.__e=t.__d=void 0}(I[p],I[p]);if(k)for(p=0;p<k.length;p++)O(k[p],k[++p],k[++p])}function S(e,t,n,r,a,i){var o,s,u;if(void 0!==t.__d)o=t.__d,t.__d=void 0;else if(null==n||a!=i||null==a.parentNode)a:if(null==i||i.parentNode!==e)e.appendChild(a),o=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<r.length;u+=1)if(s==a)break a;e.insertBefore(a,i),o=i}return void 0!==o?o:a.nextSibling}function I(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||f.test(t)?n:n+"px"}function E(e,t,n,r,a){var i;a:if("style"===t){if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||I(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||I(e.style,t,n[t])}}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase() in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?T:N,i):e.removeEventListener(t,i?T:N,i);else if("dangerouslySetInnerHTML"!==t){if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break a}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function N(e){this.l[e.type+!1](a.event?a.event(e):e)}function T(e){this.l[e.type+!0](a.event?a.event(e):e)}function A(e,t,n,i,o,s,u,l,h){var f,m,g,y,x,_,S,I,N,T,A,C,O,D,P,$=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(h=n.__h,l=t.__e=n.__e,t.__h=null,s=[l]),(f=a.__b)&&f(t);try{a:if("function"==typeof $){if(I=t.props,N=(f=$.contextType)&&i[f.__c],T=f?N?N.props.value:f.__:i,n.__c?S=(m=t.__c=n.__c).__=m.__E:("prototype"in $&&$.prototype.render?t.__c=m=new $(I,T):(t.__c=m=new v(I,T),m.constructor=$,m.render=R),N&&N.sub(m),m.props=I,m.state||(m.state={}),m.context=T,m.__n=i,g=m.__d=!0,m.__h=[],m._sb=[]),null==m.__s&&(m.__s=m.state),null!=$.getDerivedStateFromProps&&(m.__s==m.state&&(m.__s=p({},m.__s)),p(m.__s,$.getDerivedStateFromProps(I,m.__s))),y=m.props,x=m.state,g)null==$.getDerivedStateFromProps&&null!=m.componentWillMount&&m.componentWillMount(),null!=m.componentDidMount&&m.__h.push(m.componentDidMount);else{if(null==$.getDerivedStateFromProps&&I!==y&&null!=m.componentWillReceiveProps&&m.componentWillReceiveProps(I,T),!m.__e&&null!=m.shouldComponentUpdate&&!1===m.shouldComponentUpdate(I,m.__s,T)||t.__v===n.__v){for(m.props=I,m.state=m.__s,t.__v!==n.__v&&(m.__d=!1),m.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(e){e&&(e.__=t)}),A=0;A<m._sb.length;A++)m.__h.push(m._sb[A]);m._sb=[],m.__h.length&&u.push(m);break a}null!=m.componentWillUpdate&&m.componentWillUpdate(I,m.__s,T),null!=m.componentDidUpdate&&m.__h.push(function(){m.componentDidUpdate(y,x,_)})}if(m.context=T,m.props=I,m.__v=t,m.__P=e,C=a.__r,O=0,"prototype"in $&&$.prototype.render){for(m.state=m.__s,m.__d=!1,C&&C(t),f=m.render(m.props,m.state,m.context),D=0;D<m._sb.length;D++)m.__h.push(m._sb[D]);m._sb=[]}else do m.__d=!1,C&&C(t),f=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++O<25);m.state=m.__s,null!=m.getChildContext&&(i=p(p({},i),m.getChildContext())),g||null==m.getSnapshotBeforeUpdate||(_=m.getSnapshotBeforeUpdate(y,x)),P=null!=f&&f.type===b&&null==f.key?f.props.children:f,k(e,Array.isArray(P)?P:[P],t,n,i,o,s,u,l,h),m.base=t.__e,t.__h=null,m.__h.length&&u.push(m),S&&(m.__E=m.__=null),m.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,a,i,o,s,u){var l,h,f,p=n.props,m=t.props,g=t.type,y=0;if("svg"===g&&(i=!0),null!=o){for(;y<o.length;y++)if((l=o[y])&&"setAttribute"in l==!!g&&(g?l.localName===g:3===l.nodeType)){e=l,o[y]=null;break}}if(null==e){if(null===g)return document.createTextNode(m);e=i?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,m.is&&m),o=null,u=!1}if(null===g)p===m||u&&e.data===m||(e.data=m);else{if(o=o&&r.call(e.childNodes),h=(p=n.props||c).dangerouslySetInnerHTML,f=m.dangerouslySetInnerHTML,!u){if(null!=o)for(p={},y=0;y<e.attributes.length;y++)p[e.attributes[y].name]=e.attributes[y].value;(f||h)&&(f&&(h&&f.__html==h.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(e,t,n,r,a){var i;for(i in n)"children"===i||"key"===i||i in t||E(e,i,null,n[i],r);for(i in t)a&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||E(e,i,t[i],n[i],r)}(e,m,p,i,u),f)t.__k=[];else if(k(e,Array.isArray(y=t.props.children)?y:[y],t,n,a,i&&"foreignObject"!==g,o,s,o?o[0]:n.__k&&w(n,0),u),null!=o)for(y=o.length;y--;)null!=o[y]&&d(o[y]);u||("value"in m&&void 0!==(y=m.value)&&(y!==e.value||"progress"===g&&!y||"option"===g&&y!==p.value)&&E(e,"value",y,p.value,!1),"checked"in m&&void 0!==(y=m.checked)&&y!==e.checked&&E(e,"checked",y,p.checked,!1))}return e}(n.__e,t,n,i,o,s,u,h);(f=a.diffed)&&f(t)}catch(e){t.__v=null,(h||null!=s)&&(t.__e=l,t.__h=!!h,s[s.indexOf(l)]=null),a.__e(e,t,n)}}function C(e,t){a.__c&&a.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){a.__e(e,t.__v)}})}function O(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){a.__e(e,n)}}function R(e,t,n){return this.constructor(e,n)}function D(e,t,n){var i,o,s;a.__&&a.__(e,t),o=(i="function"==typeof n)?null:n&&n.__k||t.__k,s=[],A(t,e=(!i&&n||t).__k=m(b,null,[e]),o||c,c,void 0!==t.ownerSVGElement,!i&&n?[n]:o?null:t.firstChild?r.call(t.childNodes):null,s,!i&&n?n:o?o.__e:t.firstChild,i),C(s,e)}function P(e,t){D(e,t,P)}function $(e,t,n){var a,i,o,s=p({},e.props);for(o in t)"key"==o?a=t[o]:"ref"==o?i=t[o]:s[o]=t[o];return arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),g(e.type,s,a||e.key,i||e.ref,null)}function F(e,t){var n={__c:t="__cC"+l++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(x)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=h.slice,a={__e:function(e,t,n,r){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&null!=i.getDerivedStateFromError&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,r||{}),o=a.__d),o)return a.__E=a}catch(t){e=t}throw e}},i=0,o=function(e){return null!=e&&void 0===e.constructor},v.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(p({},n),this.props)),e&&p(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),x(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),x(this))},v.prototype.render=b,s=[],_.__r=0,l=0},6584:function(e,t,n){"use strict";n.r(t),n.d(t,{Fragment:function(){return r.Fragment},jsx:function(){return i},jsxDEV:function(){return i},jsxs:function(){return i}});var r=n(6400),a=0;function i(e,t,n,i,o){var s,u,l={};for(u in t)"ref"==u?s=t[u]:l[u]=t[u];var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--a,__source:o,__self:i};if("function"==typeof e&&(s=e.defaultProps))for(u in s)void 0===l[u]&&(l[u]=s[u]);return r.options.vnode&&r.options.vnode(c),c}},7610:function(e,t,n){"use strict";n.d(t,{ps:function(){return g},vx:function(){return m}});var r=n(7294);let a=(0,r.forwardRef)((e,t)=>r.createElement("div",Object.assign({},e,{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",willChange:"clip",userSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"},"data-rcs":"clip-item",ref:t})));a.displayName="ContainerClip";let i=(0,r.forwardRef)(({children:e,portrait:t},n)=>r.createElement("div",{style:{position:"absolute",top:0,width:"100%",height:"100%",pointerEvents:"none"},"data-rcs":"handle-container",ref:n},r.createElement("div",{style:{position:"absolute",width:t?"100%":void 0,height:t?void 0:"100%",transform:t?"translateY(-50%)":"translateX(-50%)",pointerEvents:"all"}},e)));i.displayName="ThisHandleContainer";let o=({flip:e})=>r.createElement("div",{style:{width:0,height:0,borderTop:"8px solid transparent",borderRight:"10px solid",borderBottom:"8px solid transparent",transform:e?"rotate(180deg)":void 0}}),s=({portrait:e,buttonStyle:t,linesStyle:n,style:a,...i})=>{let s={display:"flex",flexDirection:e?"row":"column",placeItems:"center",height:"100%",cursor:e?"ns-resize":"ew-resize",pointerEvents:"none",color:"#fff",...a},u={flexGrow:1,height:e?2:"100%",width:e?"100%":2,backgroundColor:"currentColor",pointerEvents:"auto",boxShadow:"0 0 7px rgba(0,0,0,.35)",...n},l={display:"grid",gridAutoFlow:"column",gap:8,placeContent:"center",flexShrink:0,width:56,height:56,borderRadius:"50%",borderStyle:"solid",borderWidth:2,pointerEvents:"auto",backdropFilter:"blur(7px)",WebkitBackdropFilter:"blur(7px)",boxShadow:"0 0 7px rgba(0,0,0,.35)",transform:e?"rotate(90deg)":void 0,...t};return r.createElement("div",Object.assign({className:"__rcs-handle-root"},i,{style:s}),r.createElement("div",{className:"__rcs-handle-line",style:u}),r.createElement("div",{className:"__rcs-handle-button",style:l},r.createElement(o,null),r.createElement(o,{flip:!0})),r.createElement("div",{className:"__rcs-handle-line",style:u}))},u=({boxSizing:e="border-box",objectFit:t="cover",objectPosition:n="center",...r}={})=>({display:"block",width:"100%",height:"100%",maxWidth:"100%",boxSizing:e,objectFit:t,objectPosition:n,...r}),l=e=>{let t=(0,r.useRef)(e);return(0,r.useEffect)(()=>{t.current=e}),t.current},c=(e,t,n,a)=>{let i=(0,r.useRef)();(0,r.useEffect)(()=>{i.current=t},[t]),(0,r.useEffect)(()=>{if(!(n&&n.addEventListener))return;let t=e=>i.current&&i.current(e);return n.addEventListener(e,t,a),()=>{n.removeEventListener(e,t,a)}},[e,n,a])},h="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,f=(e,t)=>{let n=(0,r.useRef)(),a=(0,r.useCallback)(()=>{e.current&&n.current&&n.current.observe(e.current)},[e]);h(()=>(n.current=new ResizeObserver(([e])=>t(e.contentRect)),a(),()=>{n.current&&n.current.disconnect()}),[t,a])},p={passive:!0},d={capture:!0,passive:!1},m=({handle:e,itemOne:t,itemTwo:n,onlyHandleDraggable:o=!1,onPositionChange:u,portrait:h=!1,position:m=50,boundsPadding:g=0,changePositionOnHover:y=!1,style:b,...v})=>{let w=(0,r.useRef)(null),x=(0,r.useRef)(null),_=(0,r.useRef)(null),k=(0,r.useRef)(m),S=l(m),[I,E]=(0,r.useState)(!1),N=(0,r.useRef)(!1),[T,A]=(0,r.useState)(),[C,O]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A(o?_.current:w.current)},[o]);let R=(0,r.useCallback)(function({x:e,y:t,isOffset:n,portrait:r,boundsPadding:a}){let{top:i,left:o,width:s,height:l}=w.current.getBoundingClientRect();if(0===s||0===l)return;let c=Math.min(Math.max(r?n?t-i-window.pageYOffset:t:n?e-o-window.pageXOffset:e,0),r?l:s),h=r?l/(w.current.offsetHeight||1):s/(w.current.offsetWidth||1),f=c/h,p=s/h,d=l/h,m=f/(r?d:p)*100,g=m===k.current&&(0===k.current||100===k.current);if(C&&g&&(r?0===f||f===d:0===f||f===p))return;O(!0),k.current=m;let y=Math.min(Math.max(f,0+a),(r?d:p)-a);x.current.style.clip=r?`rect(auto,auto,${y}px,auto)`:`rect(auto,${y}px,auto,auto)`,_.current.style.transform=r?`translate3d(0,${y}px,0)`:`translate3d(${y}px,0,0)`,u&&u(k.current)},[C,u]);(0,r.useEffect)(()=>{let{width:e,height:t}=w.current.getBoundingClientRect(),n=m===S?k.current:m;R({portrait:h,boundsPadding:g,x:e/100*n,y:t/100*n})},[h,m,S,g,R]);let D=(0,r.useCallback)(e=>{e.preventDefault(),R({portrait:h,boundsPadding:g,isOffset:!0,x:e instanceof MouseEvent?e.pageX:e.touches[0].pageX,y:e instanceof MouseEvent?e.pageY:e.touches[0].pageY}),E(!0)},[h,g,R]),P=(0,r.useCallback)(function(e){R({portrait:h,boundsPadding:g,isOffset:!0,x:e instanceof MouseEvent?e.pageX:e.touches[0].pageX,y:e instanceof MouseEvent?e.pageY:e.touches[0].pageY})},[h,g,R]),$=(0,r.useCallback)(()=>{E(!1)},[]),F=(0,r.useCallback)(({width:e,height:t})=>{let{width:n,height:r}=w.current.getBoundingClientRect();R({portrait:h,boundsPadding:g,x:e/100*k.current*n/e,y:t/100*k.current*r/t})},[h,g,R]);(0,r.useEffect)(()=>(I&&!N.current&&(window.addEventListener("mousemove",P,p),window.addEventListener("mouseup",$,p),window.addEventListener("touchmove",P,p),window.addEventListener("touchend",$,p),N.current=!0),()=>{N.current&&(window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",$),window.removeEventListener("touchmove",P),window.removeEventListener("touchend",$),N.current=!1)}),[P,$,I]),f(w,F),(0,r.useEffect)(()=>{let e=w.current,t=()=>{I||$()};return y&&(e.addEventListener("mousemove",P,p),e.addEventListener("mouseleave",t,p)),()=>{e.removeEventListener("mousemove",P),e.removeEventListener("mouseleave",t)}},[y,P,$,I]),c("mousedown",D,T,d),c("touchstart",D,T,d);let M=e||r.createElement(s,{portrait:h}),B={position:"relative",overflow:"hidden",cursor:I?h?"ns-resize":"ew-resize":void 0,userSelect:"none",KhtmlUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",...b};return r.createElement("div",Object.assign({},v,{ref:w,style:B,"data-rcs":"root"}),n,r.createElement(a,{ref:x},t),r.createElement(i,{portrait:h,ref:_},M))},g=({style:e,...t})=>{let n=u(e);return r.createElement("img",Object.assign({},t,{style:n,"data-rcs":"image"}))}},9921:function(e,t){"use strict";/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");n=Symbol.for("react.module.reference"),t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===s||e===o||e===f||e===p||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===d||e.$$typeof===u||e.$$typeof===l||e.$$typeof===h||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case i:case s:case o:case f:case p:return e;default:switch(e=e&&e.$$typeof){case c:case l:case h:case m:case d:case u:return e;default:return t}}case a:return t}}}},9864:function(e,t,n){"use strict";e.exports=n(9921)},238:function(e,t,n){"use strict";n.d(t,{_P:function(){return eW}});var r,a,i,o,s,u,l,c,h,f,p,d,m=n(7294),g={"aria-busy":!0,role:"status"},y=n(9864),b=n(6774),v=n.n(b),w=function(e){function t(e,t,r){var a=t.trim().split(d);t=a;var i=a.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)t[s]=n(e,t[s],r).trim();break;default:var u=s=0;for(t=[];s<i;++s)for(var l=0;l<o;++l)t[u++]=n(e[l]+" ",a[s],r).trim()}return t}function n(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,i){var o=e+";",s=2*t+3*n+4*i;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===A||2===A&&a(u,1)?"-webkit-"+u+u:u}if(0===A||2===A&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(I,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return f.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(v,"tb");break;case 232:u=o.replace(v,"tb-rl");break;case 220:u=o.replace(v,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(_,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(_,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,i).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+i&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),D(2!==t?r:r.replace(k,"$1"),n,t)}function i(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(x," or ($1)").substring(4):"("+t+")"}function o(e,t,n,r,a,i,o,s,l,c){for(var h,f=0,p=t;f<R;++f)switch(h=O[f].call(u,e,p,n,r,a,i,o,s,l,c)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==t)return p}function s(e){return void 0!==(e=e.prefix)&&(D=null,e?"function"!=typeof e?A=1:(A=2,D=e):A=0),s}function u(e,n){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<R){var u=o(-1,n,s,s,N,E,0,0,0,0);void 0!==u&&"string"==typeof u&&(n=u)}var h=function e(n,s,u,h,f){for(var p,d,m,v,x,_=0,k=0,S=0,I=0,O=0,D=0,$=m=p=0,F=0,M=0,B=0,L=0,U=u.length,j=U-1,z="",W="",V="",G="";F<U;){if(d=u.charCodeAt(F),F===j&&0!==k+I+S+_&&(0!==k&&(d=47===k?10:47),I=S=_=0,U++,j++),0===k+I+S+_){if(F===j&&(0<M&&(z=z.replace(c,"")),0<z.trim().length)){switch(d){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(F)}d=59}switch(d){case 123:for(p=(z=z.trim()).charCodeAt(0),m=1,L=++F;F<U;){switch(d=u.charCodeAt(F)){case 123:m++;break;case 125:m--;break;case 47:switch(d=u.charCodeAt(F+1)){case 42:case 47:i:{for($=F+1;$<j;++$)switch(u.charCodeAt($)){case 47:if(42===d&&42===u.charCodeAt($-1)&&F+2!==$){F=$+1;break i}break;case 10:if(47===d){F=$+1;break i}}F=$}}break;case 91:d++;case 40:d++;case 34:case 39:for(;F++<j&&u.charCodeAt(F)!==d;);}if(0===m)break;F++}if(m=u.substring(L,F),0===p&&(p=(z=z.replace(l,"").trim()).charCodeAt(0)),64===p){switch(0<M&&(z=z.replace(c,"")),d=z.charCodeAt(1)){case 100:case 109:case 115:case 45:M=s;break;default:M=C}if(L=(m=e(s,M,m,d,f+1)).length,0<R&&(M=t(C,z,B),x=o(3,m,M,s,N,E,L,d,f,h),z=M.join(""),void 0!==x&&0===(L=(m=x.trim()).length)&&(d=0,m="")),0<L)switch(d){case 115:z=z.replace(w,i);case 100:case 109:case 45:m=z+"{"+m+"}";break;case 107:m=(z=z.replace(g,"$1 $2"))+"{"+m+"}",m=1===A||2===A&&a("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=z+m,112===h&&(W+=m,m="")}else m=""}else m=e(s,t(s,z,B),m,h,f+1);V+=m,m=B=M=$=p=0,z="",d=u.charCodeAt(++F);break;case 125:case 59:if(1<(L=(z=(0<M?z.replace(c,""):z).trim()).length))switch(0===$&&(45===(p=z.charCodeAt(0))||96<p&&123>p)&&(L=(z=z.replace(" ",":")).length),0<R&&void 0!==(x=o(1,z,s,n,N,E,W.length,h,f,h))&&0===(L=(z=x.trim()).length)&&(z="\x00\x00"),p=z.charCodeAt(0),d=z.charCodeAt(1),p){case 0:break;case 64:if(105===d||99===d){G+=z+u.charAt(F);break}default:58!==z.charCodeAt(L-1)&&(W+=r(z,p,d,z.charCodeAt(2)))}B=M=$=p=0,z="",d=u.charCodeAt(++F)}}switch(d){case 13:case 10:47===k?k=0:0===1+p&&107!==h&&0<z.length&&(M=1,z+="\x00"),0<R*P&&o(0,z,s,n,N,E,W.length,h,f,h),E=1,N++;break;case 59:case 125:if(0===k+I+S+_){E++;break}default:switch(E++,v=u.charAt(F),d){case 9:case 32:if(0===I+_+k)switch(O){case 44:case 58:case 9:case 32:v="";break;default:32!==d&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===I+k+_&&(M=B=1,v="\f"+v);break;case 108:if(0===I+k+_+T&&0<$)switch(F-$){case 2:112===O&&58===u.charCodeAt(F-3)&&(T=O);case 8:111===D&&(T=D)}break;case 58:0===I+k+_&&($=F);break;case 44:0===k+S+I+_&&(M=1,v+="\r");break;case 34:case 39:0===k&&(I=I===d?0:0===I?d:I);break;case 91:0===I+k+S&&_++;break;case 93:0===I+k+S&&_--;break;case 41:0===I+k+_&&S--;break;case 40:0===I+k+_&&(0===p&&(2*O+3*D==533||(p=1)),S++);break;case 64:0===k+S+I+_+$+m&&(m=1);break;case 42:case 47:if(!(0<I+_+S))switch(k){case 0:switch(2*d+3*u.charCodeAt(F+1)){case 235:k=47;break;case 220:L=F,k=42}break;case 42:47===d&&42===O&&L+2!==F&&(33===u.charCodeAt(L+2)&&(W+=u.substring(L,F+1)),v="",k=0)}}0===k&&(z+=v)}D=O,O=d,F++}if(0<(L=W.length)){if(M=s,0<R&&void 0!==(x=o(2,W,M,n,N,E,L,h,f,h))&&0===(W=x).length)return G+W+V;if(W=M.join(",")+"{"+W+"}",0!=A*T){switch(2!==A||a(W,2)||(T=0),T){case 111:W=W.replace(b,":-moz-$1")+W;break;case 112:W=W.replace(y,"::-webkit-input-$1")+W.replace(y,"::-moz-$1")+W.replace(y,":-ms-input-$1")+W}T=0}}return G+W+V}(C,s,n,0,0);return 0<R&&void 0!==(u=o(-2,h,s,s,N,E,h.length,0,0,0))&&(h=u),T=0,E=N=1,h}var l=/^\0+/g,c=/[\0\r\f]/g,h=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,d=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,v=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,_=/-self|flex-/g,k=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,I=/([^-])(image-set\()/,E=1,N=1,T=0,A=1,C=[],O=[],R=0,D=null,P=0;return u.use=function e(t){switch(t){case void 0:case null:R=O.length=0;break;default:if("function"==typeof t)O[R++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else P=0|!!t}return e},u.set=s,void 0!==e&&s(e),u},x={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},_=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,k=(r=Object.create(null),function(e){return void 0===r[e]&&(r[e]=_.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)),r[e]}),S=n(8679),I=n.n(S),E=n(3454);function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var T=function(e,t){for(var n=[e[0]],r=0,a=t.length;r<a;r+=1)n.push(t[r],e[r+1]);return n},A=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,y.typeOf)(e)},C=Object.freeze([]),O=Object.freeze({});function R(e){return"function"==typeof e}function D(e){return e.displayName||e.name||"Component"}function P(e){return e&&"string"==typeof e.styledComponentId}var $=void 0!==E&&void 0!==E.env&&(E.env.REACT_APP_SC_ATTR||E.env.SC_ATTR)||"data-styled",F="undefined"!=typeof window&&"HTMLElement"in window,M=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:void 0!==E&&void 0!==E.env&&(void 0!==E.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==E.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==E.env.REACT_APP_SC_DISABLE_SPEEDY&&E.env.REACT_APP_SC_DISABLE_SPEEDY:void 0!==E.env.SC_DISABLE_SPEEDY&&""!==E.env.SC_DISABLE_SPEEDY&&"false"!==E.env.SC_DISABLE_SPEEDY&&E.env.SC_DISABLE_SPEEDY));function B(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var L=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,a=r;e>=a;)(a<<=1)<0&&B(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var i=r;i<a;i++)this.groupSizes[i]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var a=n;a<r;a++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),a=r+n,i=r;i<a;i++)t+=this.tag.getRule(i)+"/*!sc*/\n";return t},e}(),U=new Map,j=new Map,z=1,W=function(e){if(U.has(e))return U.get(e);for(;j.has(z);)z++;var t=z++;return U.set(e,t),j.set(t,e),t},V=function(e,t){t>=z&&(z=t+1),U.set(e,t),j.set(t,e)},G="style["+$+'][data-styled-version="5.3.8"]',H=RegExp("^"+$+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),q=function(e,t,n){for(var r,a=n.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&e.registerName(t,r)},X=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],a=0,i=n.length;a<i;a++){var o=n[a].trim();if(o){var s=o.match(H);if(s){var u=0|parseInt(s[1],10),l=s[2];0!==u&&(V(l,u),q(e,l,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},K=function(){return n.nc},Z=function(e){var t=document.head,n=e||t,r=document.createElement("style"),a=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute($))return r}}(n),i=void 0!==a?a.nextSibling:null;r.setAttribute($,"active"),r.setAttribute("data-styled-version","5.3.8");var o=K();return o&&r.setAttribute("nonce",o),n.insertBefore(r,i),r},Y=function(){function e(e){var t=this.element=Z(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var a=t[n];if(a.ownerNode===e)return a}B(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Q=function(){function e(e){var t=this.element=Z(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),J=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),ee=F,et={isServer:!F,useCSSOMInjection:!M},en=function(){function e(e,t,n){void 0===e&&(e=O),void 0===t&&(t={}),this.options=N({},et,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&F&&ee&&(ee=!1,function(e){for(var t=document.querySelectorAll(G),n=0,r=t.length;n<r;n++){var a=t[n];a&&"active"!==a.getAttribute($)&&(X(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return W(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(N({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){var e,t,n,r,a;return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,a=t.target,e=n?new J(a):r?new Y(a):new Q(a),new L(e)))},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(W(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(W(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(W(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",a=0;a<n;a++){var i,o=(i=a,j.get(i));if(void 0!==o){var s=e.names.get(o),u=t.getGroup(a);if(s&&u&&s.size){var l=$+".g"+a+'[id="'+o+'"]',c="";void 0!==s&&s.forEach(function(e){e.length>0&&(c+=e+",")}),r+=""+u+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),er=/(a)(d)/gi,ea=function(e){return String.fromCharCode(e+(e>25?39:97))};function ei(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=ea(t%52)+n;return(ea(t%52)+n).replace(er,"$1-$2")}var eo=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},es=function(e){return eo(5381,e)};function eu(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(R(n)&&!P(n))return!1}return!0}var el=es("5.3.8"),ec=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&eu(e),this.componentId=t,this.baseHash=eo(el,t),this.baseStyle=n,en.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash){if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var i=eN(this.rules,e,t,n).join(""),o=ei(eo(this.baseHash,i)>>>0);if(!t.hasNameForId(r,o)){var s=n(i,"."+o,void 0,r);t.insertRules(r,o,s)}a.push(o),this.staticRulesId=o}}else{for(var u=this.rules.length,l=eo(this.baseHash,n.hash),c="",h=0;h<u;h++){var f=this.rules[h];if("string"==typeof f)c+=f;else if(f){var p=eN(f,e,t,n),d=Array.isArray(p)?p.join(""):p;l=eo(l,d+h),c+=d}}if(c){var m=ei(l>>>0);if(!t.hasNameForId(r,m)){var g=n(c,"."+m,void 0,r);t.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),eh=/^\s*\/\/.*$/gm,ef=[":","[",".","#"];function ep(e){var t,n,r,a,i=void 0===e?O:e,o=i.options,s=i.plugins,u=void 0===s?C:s,l=new w(void 0===o?O:o),c=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,i,o,s,u,l,c,h){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===l)return r+"/*|*/";break;case 3:switch(l){case 102:case 112:return e(a[0]+r),"";default:return r+(0===h?"/*|*/":"")}case -2:r.split("/*|*/}").forEach(t)}}}(function(e){c.push(e)}),f=function(e,r,i){return 0===r&&-1!==ef.indexOf(i[n.length])||i.match(a)?e:"."+t};function p(e,i,o,s){void 0===s&&(s="&");var u=e.replace(eh,"");return t=s,r=RegExp("\\"+(n=i)+"\\b","g"),a=RegExp("(\\"+n+"\\b){2,}"),l(o||!i?"":i,i&&o?o+" "+i+" { "+u+" }":u)}return l.use([].concat(u,[function(e,t,a){2===e&&a.length&&a[0].lastIndexOf(n)>0&&(a[0]=a[0].replace(r,f))},h,function(e){if(-2===e){var t=c;return c=[],t}}])),p.hash=u.length?u.reduce(function(e,t){return t.name||B(15),eo(e,t.name)},5381).toString():"",p}var ed=m.createContext(),em=(ed.Consumer,m.createContext()),eg=(em.Consumer,new en),ey=ep();function eb(){return(0,m.useContext)(ed)||eg}function ev(e){var t=(0,m.useState)(e.stylisPlugins),n=t[0],r=t[1],a=eb(),i=(0,m.useMemo)(function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target]),o=(0,m.useMemo)(function(){return ep({options:{prefix:!e.disableVendorPrefixes},plugins:n})},[e.disableVendorPrefixes,n]);return(0,m.useEffect)(function(){v()(n,e.stylisPlugins)||r(e.stylisPlugins)},[e.stylisPlugins]),m.createElement(ed.Provider,{value:i},m.createElement(em.Provider,{value:o},e.children))}var ew=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=ey);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return B(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=ey),this.name+e.hash},e}(),ex=/([A-Z])/,e_=/([A-Z])/g,ek=/^ms-/,eS=function(e){return"-"+e.toLowerCase()};function eI(e){return ex.test(e)?e.replace(e_,eS).replace(ek,"-ms-"):e}var eE=function(e){return null==e||!1===e||""===e};function eN(e,t,n,r){if(Array.isArray(e)){for(var a,i=[],o=0,s=e.length;o<s;o+=1)""!==(a=eN(e[o],t,n,r))&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));return i}return eE(e)?"":P(e)?"."+e.styledComponentId:R(e)?"function"!=typeof e||e.prototype&&e.prototype.isReactComponent||!t?e:eN(e(t),t,n,r):e instanceof ew?n?(e.inject(n,r),e.getName(r)):e:A(e)?function e(t,n){var r,a,i=[];for(var o in t)t.hasOwnProperty(o)&&!eE(t[o])&&(Array.isArray(t[o])&&t[o].isCss||R(t[o])?i.push(eI(o)+":",t[o],";"):A(t[o])?i.push.apply(i,e(t[o],o)):i.push(eI(o)+": "+(r=o,null==(a=t[o])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in x?String(a).trim():a+"px")+";"));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString()}var eT=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function eA(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return R(e)||A(e)?eT(eN(T(C,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:eT(eN(T(e,n)))}var eC=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eO=/(^-|-$)/g;function eR(e){return e.replace(eC,"-").replace(eO,"")}var eD=function(e){return ei(es(e)>>>0)};function eP(e){return"string"==typeof e}var e$=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},eF=m.createContext();eF.Consumer;var eM={},eB=function(e){return function e(t,n,r){if(void 0===r&&(r=O),!(0,y.isValidElementType)(n))return B(1,String(n));var a=function(){return t(n,r,eA.apply(void 0,arguments))};return a.withConfig=function(a){return e(t,n,N({},r,{},a))},a.attrs=function(a){return e(t,n,N({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(function e(t,n,r){var a=P(t),i=!eP(t),o=n.attrs,s=void 0===o?C:o,u=n.componentId,l=void 0===u?(g=n.displayName,y=n.parentComponentId,eM[b="string"!=typeof g?"sc":eR(g)]=(eM[b]||0)+1,v=b+"-"+eD("5.3.8"+b+eM[b]),y?y+"-"+v:v):u,c=n.displayName,h=void 0===c?eP(t)?"styled."+t:"Styled("+D(t)+")":c,f=n.displayName&&n.componentId?eR(n.displayName)+"-"+n.componentId:n.componentId||l,p=a&&t.attrs?Array.prototype.concat(t.attrs,s).filter(Boolean):s,d=n.shouldForwardProp;a&&t.shouldForwardProp&&(d=n.shouldForwardProp?function(e,r,a){return t.shouldForwardProp(e,r,a)&&n.shouldForwardProp(e,r,a)}:t.shouldForwardProp);var g,y,b,v,w,x=new ec(r,f,a?t.componentStyle:void 0),_=x.isStatic&&0===s.length,S=function(e,t){return function(e,t,n,r){var a,i,o,s,u,l,c,h=e.attrs,f=e.componentStyle,p=e.defaultProps,d=e.foldedComponentIds,g=e.shouldForwardProp,y=e.styledComponentId,b=e.target,v=(a=(0,m.useContext)(eF),void 0===(i=p)&&(i=O),void 0===(o=t.theme!==i.theme&&t.theme||a||i.theme||O)&&(o=O),s=N({},t,{theme:o}),u={},h.forEach(function(e){var t,n,r,a=e;for(t in R(a)&&(a=a(s)),a)s[t]=u[t]="className"===t?(n=u[t],r=a[t],n&&r?n+" "+r:n||r):a[t]}),[s,u]),w=v[0],x=v[1],_=(l=eb(),c=(0,m.useContext)(em)||ey,r?f.generateAndInjectStyles(O,l,c):f.generateAndInjectStyles(w,l,c)),S=x.$as||t.$as||x.as||t.as||b,I=eP(S),E=x!==t?N({},t,{},x):t,T={};for(var A in E)"$"!==A[0]&&"as"!==A&&("forwardedAs"===A?T.as=E[A]:(g?g(A,k,S):!I||k(A))&&(T[A]=E[A]));return t.style&&x.style!==t.style&&(T.style=N({},t.style,{},x.style)),T.className=Array.prototype.concat(d,y,_!==y?_:null,t.className,x.className).filter(Boolean).join(" "),T.ref=n,(0,m.createElement)(S,T)}(w,e,t,_)};return S.displayName=h,(w=m.forwardRef(S)).attrs=p,w.componentStyle=x,w.displayName=h,w.shouldForwardProp=d,w.foldedComponentIds=a?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):C,w.styledComponentId=f,w.target=a?t.target:t,w.withComponent=function(t){var a=n.componentId,i=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}(n,["componentId"]),o=a&&a+"-"+(eP(t)?t:eR(D(t)));return e(t,N({},i,{attrs:p,componentId:o}),r)},Object.defineProperty(w,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0;i<r.length;i++){var o,s=r[i];if(e$(s))for(var u in s)"__proto__"!==(o=u)&&"constructor"!==o&&"prototype"!==o&&function(t,n,r){var a=t[r];e$(n)&&e$(a)?e(a,n):t[r]=n}(t,s[u],u)}return t}({},t.defaultProps,e):e}}),w.toString=function(){return"."+w.styledComponentId},i&&I()(w,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),w},e)};function eL(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=eA.apply(void 0,[e].concat(n)).join(""),i=eD(a);return new ew(i,a)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){eB[e]=eB(e)}),(a=(function(e,t){this.rules=e,this.componentId=t,this.isStatic=eu(e),en.registerId(this.componentId+1)}).prototype).createStyles=function(e,t,n,r){var a=r(eN(this.rules,t,n,r).join(""),""),i=this.componentId+e;n.insertRules(i,i,a)},a.removeStyles=function(e,t){t.clearRules(this.componentId+e)},a.renderStyles=function(e,t,n,r){e>2&&en.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},(i=(function(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=K();return"<style "+[n&&'nonce="'+n+'"',$+'="true"','data-styled-version="5.3.8"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?B(2):e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)return B(2);var t,n=((t={})[$]="",t["data-styled-version"]="5.3.8",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=K();return r&&(n.nonce=r),[m.createElement("style",N({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new en({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(e){return this.sealed?B(2):m.createElement(ev,{sheet:this.instance},e)},i.interleaveWithNodeStream=function(e){return B(3)};var eU=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ej=eL(s||(s=eU(["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"],["\n  12.5% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  43.75% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n  100% {\n    stroke-dasharray: ","px, ","px;\n    stroke-dashoffset: -","px;\n  }\n"])),33.98873199462888,242.776657104492,26.70543228149412,84.97182998657219,242.776657104492,84.97182998657219,2.42776657104492,242.776657104492,240.34889053344708);eB.path(u||(u=eU(["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"],["\n  stroke-dasharray: ","px, ",";\n  stroke-dashoffset: 0;\n  animation: "," ","s linear infinite;\n"])),2.42776657104492,242.776657104492,ej,1.6);var ez=function(){return(ez=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},eW=function(e){var t=e.height,n=e.width,r=e.radius,a=void 0===r?6:r,i=e.color,o=e.ariaLabel,s=e.wrapperStyle,u=e.wrapperClass,l=e.visible;return m.createElement("div",ez({style:ez(ez({},{display:void 0===l||l?"flex":"none"}),s),className:u,"data-testid":"rings-loading","aria-label":void 0===o?"rings-loading":o},g),m.createElement("svg",{width:void 0===n?80:n,height:void 0===t?80:t,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",stroke:void 0===i?"#4fa94d":i,"data-testid":"rings-svg"},m.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:"2"},m.createElement("circle",{cx:"22",cy:"22",r:a,strokeOpacity:"0"},m.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),m.createElement("circle",{cx:"22",cy:"22",r:a,strokeOpacity:"0"},m.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"strokeOpacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),m.createElement("animate",{attributeName:"strokeWidth",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),m.createElement("circle",{cx:"22",cy:"22",r:Number(a)+2},m.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})))))},eV=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},eG=eL(l||(l=eV(["\n to {\n    transform: rotate(360deg);\n  }\n"],["\n to {\n    transform: rotate(360deg);\n  }\n"])));eB.svg(c||(c=eV(["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"],["\n  animation: "," 0.75s steps(12, end) infinite;\n  animation-duration: ","s;\n"])),eG,(o="speed",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!==e[o])return e[o];if(o&&o.indexOf(".")>0){for(var t=o.split("."),n=t.length,r=e[t[0]],a=1;null!=r&&a<n;)r=r[t[a]],a+=1;if(void 0!==r)return r}return"0.75"})),eB.polyline(h||(h=eV(["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"],["\n  stroke-width: ","px;\n  stroke-linecap: round;\n\n  &:nth-child(12n + 0) {\n    stroke-opacity: 0.08;\n  }\n\n  &:nth-child(12n + 1) {\n    stroke-opacity: 0.17;\n  }\n\n  &:nth-child(12n + 2) {\n    stroke-opacity: 0.25;\n  }\n\n  &:nth-child(12n + 3) {\n    stroke-opacity: 0.33;\n  }\n\n  &:nth-child(12n + 4) {\n    stroke-opacity: 0.42;\n  }\n\n  &:nth-child(12n + 5) {\n    stroke-opacity: 0.5;\n  }\n\n  &:nth-child(12n + 6) {\n    stroke-opacity: 0.58;\n  }\n\n  &:nth-child(12n + 7) {\n    stroke-opacity: 0.66;\n  }\n\n  &:nth-child(12n + 8) {\n    stroke-opacity: 0.75;\n  }\n\n  &:nth-child(12n + 9) {\n    stroke-opacity: 0.83;\n  }\n\n  &:nth-child(12n + 11) {\n    stroke-opacity: 0.92;\n  }\n"])),function(e){return e.width});var eH=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},eq=eL(f||(f=eH(["\n to {\n    stroke-dashoffset: 136;\n  }\n"],["\n to {\n    stroke-dashoffset: 136;\n  }\n"])));eB.polygon(p||(p=eH(["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"],["\n  stroke-dasharray: 17;\n  animation: "," 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n"])),eq),eB.svg(d||(d=eH(["\n  transform-origin: 50% 65%;\n"],["\n  transform-origin: 50% 65%;\n"])))},6753:function(e,t,n){var r=n(3454);e.exports=u;var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},i=n(6497);i.inherits=n(5717);var o=n(9481),s=n(4229);function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}i.inherits(u,o),function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(a(s.prototype),function(e){u.prototype[e]||(u.prototype[e]=s.prototype[e])})},2725:function(e,t,n){e.exports=i;var r=n(4605),a=n(6497);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}a.inherits=n(5717),a.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},9481:function(e,t,n){var r,a=n(3454);e.exports=f;var i=n(5826),o=n(1876).Buffer;f.ReadableState=h;var s=n(5293).EventEmitter;s.listenerCount||(s.listenerCount=function(e,t){return e.listeners(t).length});var u=n(9681),l=n(6497);l.inherits=n(5717);var c=n(4616);function h(e,t){var a=n(6753),i=(e=e||{}).highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof a&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(r||(r=n(5680).s),this.decoder=new r(e.encoding),this.encoding=e.encoding)}function f(e){if(n(6753),!(this instanceof f))return new f(e);this._readableState=new h(e,this),this.readable=!0,u.call(this)}function p(e,t,n,r,i){var o=(s=n,u=null,l.isBuffer(s)||l.isString(s)||l.isNullOrUndefined(s)||t.objectMode||(u=TypeError("Invalid non-string/buffer chunk")),u);if(o)e.emit("error",o);else if(l.isNullOrUndefined(n))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}(e,t);else if(t.objectMode||n&&n.length>0){if(t.ended&&!i){var s,u,h,f=Error("stream.push() after EOF");e.emit("error",f)}else if(t.endEmitted&&i){var f=Error("stream.unshift() after end event");e.emit("error",f)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),(h=t).readingMore||(h.readingMore=!0,a.nextTick(function(){(function(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1})(e,h)}))}else i||(t.reading=!1);return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function d(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||l.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=8388608)e=8388608;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length)?t.ended?t.length:(t.needReadable=!0,0):e}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(function(){g(e)}):g(e))}function g(e){c("emit readable"),e.emit("readable"),y(e)}function y(e){var t=e._readableState;if(c("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function b(e,t){var n,r=t.buffer,a=t.length,i=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===a)n=null;else if(s)n=r.shift();else if(!e||e>=a)n=i?r.join(""):o.concat(r,a),r.length=0;else if(e<r[0].length){var u=r[0];n=u.slice(0,e),r[0]=u.slice(e)}else if(e===r[0].length)n=r.shift();else{n=i?"":new o(e);for(var l=0,c=0,h=r.length;c<h&&l<e;c++){var u=r[0],f=Math.min(e-l,u.length);i?n+=u.slice(0,f):u.copy(n,l,0,f),f<u.length?r[0]=u.slice(f):r.shift(),l+=f}}return n}function v(e){var t=e._readableState;if(t.length>0)throw Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,a.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}c=c&&c.debuglog?c.debuglog("stream"):function(){},l.inherits(f,u),f.prototype.push=function(e,t){var n=this._readableState;return l.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding)!==n.encoding&&(e=new o(e,t),t=""),p(this,n,e,t,!1)},f.prototype.unshift=function(e){return p(this,this._readableState,e,"",!0)},f.prototype.setEncoding=function(e){return r||(r=n(5680).s),this._readableState.decoder=new r(e),this._readableState.encoding=e,this},f.prototype.read=function(e){c("read",e);var t,n=this._readableState,r=e;if((!l.isNumber(e)||e>0)&&(n.emittedReadable=!1),0===e&&n.needReadable&&(n.length>=n.highWaterMark||n.ended))return c("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?v(this):m(this),null;if(0===(e=d(e,n))&&n.ended)return 0===n.length&&v(this),null;var a=n.needReadable;return c("need readable",a),(0===n.length||n.length-e<n.highWaterMark)&&c("length less than watermark",a=!0),(n.ended||n.reading)&&c("reading or ended",a=!1),a&&(c("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1),a&&!n.reading&&(e=d(r,n)),t=e>0?b(e,n):null,l.isNull(t)&&(n.needReadable=!0,e=0),n.length-=e,0!==n.length||n.ended||(n.needReadable=!0),r!==e&&n.ended&&0===n.length&&v(this),l.isNull(t)||this.emit("data",t),t},f.prototype._read=function(e){this.emit("error",Error("not implemented"))},f.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,c("pipe count=%d opts=%j",r.pipesCount,t);var o=t&&!1===t.end||e===a.stdout||e===a.stderr?f:l;function u(e){c("onunpipe"),e===n&&f()}function l(){c("onend"),e.end()}r.endEmitted?a.nextTick(o):n.once("end",o),e.on("unpipe",u);var h=function(){var e=n._readableState;c("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s.listenerCount(n,"data")&&(e.flowing=!0,y(n))};function f(){c("cleanup"),e.removeListener("close",m),e.removeListener("finish",g),e.removeListener("drain",h),e.removeListener("error",d),e.removeListener("unpipe",u),n.removeListener("end",l),n.removeListener("end",f),n.removeListener("data",p),r.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}function p(t){c("ondata"),!1===e.write(t)&&(c("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,n.pause())}function d(t){c("onerror",t),b(),e.removeListener("error",d),0===s.listenerCount(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",g),b()}function g(){c("onfinish"),e.removeListener("close",m),b()}function b(){c("unpipe"),n.unpipe(e)}return e.on("drain",h),n.on("data",p),e._events&&e._events.error?i(e._events.error)?e._events.error.unshift(d):e._events.error=[d,e._events.error]:e.on("error",d),e.once("close",m),e.once("finish",g),e.emit("pipe",n),r.flowing||(c("pipe resume"),n.resume()),e},f.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)n[a].emit("unpipe",this);return this}var a=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1}(t.pipes,e);return -1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},f.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening){if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&m(this,r);else{var i=this;a.nextTick(function(){c("readable nexttick read 0"),i.read(0)})}}}return n},f.prototype.addListener=f.prototype.on,f.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(c("resume"),n.flowing=!0,n.reading||(c("resume read 0"),this.read(0)),e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,a.nextTick(function(){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}))),this},f.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var a in e.on("end",function(){if(c("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){c("wrapped data"),t.decoder&&(a=t.decoder.write(a)),a&&(t.objectMode||a.length)&&!r.push(a)&&(n=!0,e.pause())}),e)l.isFunction(e[a])&&l.isUndefined(this[a])&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));return function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(["error","close","destroy","pause","resume"],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},r},f._fromList=b},4605:function(e,t,n){e.exports=o;var r=n(6753),a=n(6497);function i(e,t){this.afterTransform=function(e,n){return function(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,a.isNullOrUndefined(n)||e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState=new i(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){a.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw Error("calling transform done when ws.length != 0");if(r.transforming)throw Error("calling transform done when still transforming");return e.push(null)}a.inherits=n(5717),a.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;a.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},4229:function(e,t,n){var r=n(3454);e.exports=l;var a=n(1876).Buffer;l.WritableState=u;var i=n(6497);i.inherits=n(5717);var o=n(9681);function s(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function u(e,t){var a=n(6753),i=(e=e||{}).highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,t instanceof a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){(function(e,t){var n,a,i=e._writableState,o=i.sync,s=i.writecb;if((n=i).writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)a=e,o?r.nextTick(function(){i.pendingcb--,s(t)}):(i.pendingcb--,s(t)),a._writableState.errorEmitted=!0,a.emit("error",t);else{var u=p(e,i);u||i.corked||i.bufferProcessing||!i.buffer.length||f(e,i),o?r.nextTick(function(){h(e,i,u,s)}):h(e,i,u,s)}})(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function l(e){var t=n(6753);if(!(this instanceof l)&&!(this instanceof t))return new l(e);this._writableState=new u(e,this),this.writable=!0,o.call(this)}function c(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function h(e,t,n,r){var a;n||0===(a=t).length&&a.needDrain&&(a.needDrain=!1,e.emit("drain")),t.pendingcb--,r(),m(e,t)}function f(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var a=t.buffer[r],i=a.chunk,o=a.encoding,s=a.callback,u=t.objectMode?1:i.length;if(c(e,t,!1,u,i,o,s),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function p(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function d(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var n=p(e,t);return n&&(0===t.pendingcb?(d(e,t),t.finished=!0,e.emit("finish")):d(e,t)),n}i.inherits(l,o),l.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))},l.prototype.write=function(e,t,n){var o,u,l,h,f,p,d,m,g,y,b,v=this._writableState,w=!1;return(i.isFunction(t)&&(n=t,t=null),i.isBuffer(e)?t="buffer":t||(t=v.defaultEncoding),i.isFunction(n)||(n=function(){}),v.ended)?(y=n,b=Error("write after end"),this.emit("error",b),r.nextTick(function(){y(b)})):function(e,t,n,a){var o=!0;if(!i.isBuffer(n)&&!i.isString(n)&&!i.isNullOrUndefined(n)&&!t.objectMode){var s=TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){a(s)}),o=!1}return o}(this,v,e,n)&&(v.pendingcb++,o=this,u=v,l=e,h=t,f=n,p=l,d=h,!u.objectMode&&!1!==u.decodeStrings&&i.isString(p)&&(p=new a(p,d)),l=p,i.isBuffer(l)&&(h="buffer"),m=u.objectMode?1:l.length,u.length+=m,(g=u.length<u.highWaterMark)||(u.needDrain=!0),u.writing||u.corked?u.buffer.push(new s(l,h,f)):c(o,u,!1,m,l,h,f),w=g),w},l.prototype.cork=function(){var e=this._writableState;e.corked++},l.prototype.uncork=function(){var e=this._writableState;!e.corked||(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||f(this,e))},l.prototype._write=function(e,t,n){n(Error("not implemented"))},l.prototype._writev=null,l.prototype.end=function(e,t,n){var a,o,s=this._writableState;i.isFunction(e)?(n=e,e=null,t=null):i.isFunction(t)&&(n=t,t=null),i.isNullOrUndefined(e)||this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||s.finished||(a=s,o=n,a.ending=!0,m(this,a),o&&(a.finished?r.nextTick(o):this.once("finish",o)),a.ended=!0)}},5680:function(e,t,n){var r=n(1876).Buffer,a=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},i=t.s=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),!function(e){if(e&&!a(e))throw Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:this.write=o;return}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function o(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}i.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length);var r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1);if(r>=55296&&r<=56319){this.charLength+=this.surrogateSize,t="";continue}if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.detectIncompleteChar(e);var a=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,a),a-=this.charReceived);var a=(t+=e.toString(this.encoding,0,a)).length-1,r=t.charCodeAt(a);if(r>=55296&&r<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,a)}return t},i.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},i.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,a=this.encoding;t+=r.slice(0,n).toString(a)}return t}},1451:function(e,t,n){(t=e.exports=n(9481)).Stream=n(9681),t.Readable=t,t.Writable=n(4229),t.Duplex=n(6753),t.Transform=n(4605),t.PassThrough=n(2725)},6377:function(e,t,n){var r=n(4832),a=n(8652),i=n(801),o=n(2030),s=n(3618),u=n(9049),l=n(1971);l.alea=r,l.xor128=a,l.xorwow=i,l.xorshift7=o,l.xor4096=s,l.tychei=u,e.exports=l},4832:function(e,t,n){var r;!function(e,a,i){function o(e){var t,n=this,r=(t=4022871197,function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=4294967296*r}return(t>>>0)*23283064365386963e-26});n.next=function(){var e=2091639*n.s0+23283064365386963e-26*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+(2097152*a()|0)*11102230246251565e-32},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0!==(r=(function(){return u}).call(t,n,t,a))&&(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},9049:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0!==(r=(function(){return u}).call(t,n,t,a))&&(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},8652:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0!==(r=(function(){return u}).call(t,n,t,a))&&(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},3618:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\x00",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0!==(r=(function(){return u}).call(t,n,t,a))&&(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},2030:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],e^=e>>>7,n=e^e<<24,e=r[a+1&7],n^=e^e>>>10,e=r[a+3&7],n^=e^e>>>3,e=r[a+4&7],n^=e^e<<7,e=r[a+7&7],e^=e<<13,n^=e^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(n=0,t=""+t;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0!==(r=(function(){return u}).call(t,n,t,a))&&(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/2097152;while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0!==(r=(function(){return u}).call(t,n,t,a))&&(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},1971:function(e,t,n){var r;!function(a,i,o){var s,u=o.pow(256,6),l=o.pow(2,52),c=2*l;function h(e,t,n){var r=[],h=d(function e(t,n){var r,a=[],i=typeof t;if(n&&"object"==i)for(r in t)try{a.push(e(t[r],n-1))}catch(e){}return a.length?a:"string"==i?t:t+"\x00"}((t=!0==t?{entropy:!0}:t||{}).entropy?[e,m(i)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(256):(e=new Uint8Array(256),(a.crypto||a.msCrypto).getRandomValues(e)),m(e)}catch(e){var t=a.navigator,n=t&&t.plugins;return[+new Date,a,n,a.screen,m(i)]}}():e,3),r),g=new f(r),y=function(){for(var e=g.g(6),t=u,n=0;e<l;)e=(e+n)*256,t*=256,n=g.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|g.g(4)},y.quick=function(){return g.g(4)/4294967296},y.double=y,d(m(g.S),i),(t.pass||n||function(e,t,n,r){return(r&&(r.S&&p(r,g),e.state=function(){return p(g,{})}),n)?(o.random=e,t):e})(y,h,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<256;)o[a]=a++;for(a=0;a<256;a++)o[a]=o[i=255&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=255&a+1],n=256*n+o[255&(o[a]=o[i=255&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(256)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){for(var n,r=e+"",a=0;a<r.length;)t[255&a]=255&(n^=19*t[255&a])+r.charCodeAt(a++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(d(o.random(),i),e.exports){e.exports=h;try{s=n(5042)}catch(e){}}else void 0!==(r=(function(){return h}).call(t,n,t,e))&&(e.exports=r)}("undefined"!=typeof self?self:this,[],Math)},6774:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var l=i[u];if(!s(l))return!1;var c=e[l],h=t[l];if(!1===(a=n?n.call(r,c,h,l):void 0)||void 0===a&&c!==h)return!1}return!0}},6547:function(e,t,n){var r=n(3454),a=n(9681);function i(e,t,n){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var i=!1,o=!1,s=[],u=!1,l=new a;function c(){for(;s.length&&!l.paused;){var e=s.shift();if(null===e)return l.emit("end");l.emit("data",e)}}return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(n&&!1===n.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return u||(null==e&&(u=!0),s.push(e),c()),l},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&r.nextTick(function(){l.destroy()})}),l.end=function(e){if(!i)return i=!0,arguments.length&&l.write(e),l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy(),l},l.destroy=function(){if(!o)return o=!0,i=!0,s.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),c(),l.paused||l.emit("drain"),l},l}t=e.exports=i,i.through=i},8706:function(e){"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,a=e[0],i=e[0],o=1;o<r;++o)if(i=a,t(a=e[o],i)){if(o===n){n++;continue}e[n++]=a}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],a=e[0],i=1;i<n;++i,a=r)if(a=r,(r=e[i])!==a){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},3250:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(7294),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,o=r.useEffect,s=r.useLayoutEffect,u=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,c=r[1];return s(function(){a.value=n,a.getSnapshot=t,l(a)&&c({inst:a})},[e,n,t]),o(function(){return l(a)&&c({inst:a}),e(function(){l(a)&&c({inst:a})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},1688:function(e,t,n){"use strict";e.exports=n(3250)},9364:function(e,t,n){"use strict";n.d(t,{$O:function(){return eq}});var r={};r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var a={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){}function s(e,t,n){if(!e.s){if(n instanceof u){if(n.s)1&t&&(t=n.s),n=n.v;else{n.o=s.bind(null,e,t);return}}if(n&&n.then){n.then(s.bind(null,e,t),s.bind(null,e,2));return}e.s=t,e.v=n;var r=e.o;r&&r(e)}}r.d(a,{AuthManager:function(){return eH},BaseAPI:function(){return O},BinaryResult:function(){return M},BytescaleApiClientConfigUtils:function(){return C},BytescaleApiError:function(){return D},CancelledError:function(){return R},CommonTypesNoOp:function(){return eu},FileApi:function(){return W},FolderApi:function(){return K},JSONApiResponse:function(){return $},JobApi:function(){return et},UploadApi:function(){return es},UploadManager:function(){return eF},UrlBuilder:function(){return em},UrlBuilderTypesNoOp:function(){return eg},VoidApiResponse:function(){return F},querystring:function(){return P}});var u=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,a=this.s;if(a){var i=1&a?t:n;if(!i)return this;try{s(r,1,i(this.v))}catch(e){s(r,2,e)}return r}return this.o=function(e){try{var a=e.v;1&e.s?s(r,1,t?t(a):a):n?s(r,1,n(a)):s(r,2,a)}catch(e){s(r,2,e)}},r},e}();function l(e){return e instanceof u&&1&e.s}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(r.key),r)}}var h=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.mutex=void 0,this.resolver=void 0}return e=[{key:"safe",value:function(e){try{var t,n,r=this;return t=r.acquire(),n=function(){return function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(e,function(e,t){return r.release(),function(e,t){if(e)throw t;return t}(e,t)})},t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t}catch(e){return Promise.reject(e)}}},{key:"acquire",value:function(){try{var e,t,n=this;return e=function(e,t,n){for(;;){var r,a=e();if(l(a)&&(a=a.v),!a)return i;if(a.then){r=0;break}var i=n();if(i&&i.then){if(l(i))i=i.s;else{r=1;break}}if(t){var o=t();if(o&&o.then&&!l(o)){r=2;break}}}var c=new u,h=s.bind(null,c,2);return(0===r?a.then(p):1===r?i.then(f):o.then(d)).then(void 0,h),c;function f(r){i=r;do{if(t&&(o=t())&&o.then&&!l(o)){o.then(d).then(void 0,h);return}if(!(a=e())||l(a)&&!a.v){s(c,1,i);return}if(a.then){a.then(p).then(void 0,h);return}l(i=n())&&(i=i.v)}while(!i||!i.then);i.then(f).then(void 0,h)}function p(e){e?(i=n())&&i.then?i.then(f).then(void 0,h):f(i):s(c,1,i)}function d(){(a=e())?a.then?a.then(p).then(void 0,h):p(a):s(c,1,i)}}(function(){return void 0!==n.mutex},void 0,function(){var e;return(e=n.mutex)&&e.then?e.then(o):Promise.resolve()}),t=function(){n.mutex=new Promise(function(e){n.resolver=e})},e&&e.then?e.then(t):t(e)}catch(e){return Promise.reject(e)}}},{key:"release",value:function(){if(void 0===this.resolver)throw Error("Unable to release mutex: already released.");this.resolver(),this.resolver=void 0,this.mutex=void 0}}],c(n.prototype,e),t&&c(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"getMutex",value:function(){var e=t.mutexKey,n=window[e];return void 0===n&&(n=new h,window[e]=n),n}},{key:"setSession",value:function(e){window[t.stateKey]=e}},{key:"getSession",value:function(){if("undefined"!=typeof window)return window[t.stateKey]}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(r.key),r)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function g(e){var t=v();return function(){var n,r=x(e);if(t){var a=x(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){var t="function"==typeof Map?new Map:void 0;return(y=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return b(e,arguments,x(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)})(e)}function b(e,t,n){return(b=v()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&w(a,n.prototype),a}).apply(null,arguments)}function v(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function k(){}function S(e,t){return e&&e.then?e.then(t):t(e)}function I(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function E(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function T(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d(t)?t:String(t)}p.stateKey="BytescaleSessionState",p.mutexKey="BytescaleSessionStateMutex";var C=function(){function e(){E(this,e)}return T(e,null,[{key:"getApiUrl",value:function(t){var n;return null!==(n=t.apiUrl)&&void 0!==n?n:e.defaultApiUrl}},{key:"getCdnUrl",value:function(t){var n;return null!==(n=t.cdnUrl)&&void 0!==n?n:e.defaultCdnUrl}},{key:"getFetchApi",value:function(e){var t;return null!==(t=e.fetchApi)&&void 0!==t?t:fetch}},{key:"getAccountId",value:function(t){var n,r,a;if(e.specialApiKeys.includes(t.apiKey))a=e.specialApiKeyAccountId;else if((a=null!==(r=null===(n=t.apiKey.split("_")[1])||void 0===n?void 0:n.substr(0,e.accountIdLength))&&void 0!==r?r:"").length!==e.accountIdLength)throw Error("Invalid Bytescale API key.");return a}},{key:"validate",value:function(t){var n;if((null!=t?t:void 0)===void 0)throw Error("Config parameter required.");if((null!==(n=t.apiKey)&&void 0!==n?n:void 0)===void 0)throw Error("Please provide an API key via the 'apiKey' config parameter.");if(t.apiKey.trim()!==t.apiKey)throw Error("API key needs trimming (whitespace detected).");e.getAccountId(t)}}]),e}();C.defaultApiUrl="https://api.bytescale.com",C.defaultCdnUrl="https://upcdn.io",C.specialApiKeys=["free","demo"],C.specialApiKeyAccountId="W142hJk",C.accountIdLength=7;var O=function(){function e(t){E(this,e),this.config=t,C.validate(t)}return T(e,[{key:"request",value:function(t,n,r){try{var a,i,o,s,u=this,l=u.config.apiKey;t.headers.Authorization="Bearer ".concat(l);var c=p.getSession();(null==c?void 0:c.accessToken)!==void 0&&(t.headers["Authorization-Token"]=c.accessToken);var h=(a={},i=C.defaultCdnUrl,o=C.getCdnUrl(u.config),(i=A(i))in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a);return I(u.createFetchParams(t,n,void 0===r?void 0:null!==(s=h[r])&&void 0!==s?s:r),function(t){var n=t.url,r=t.init;return e.fetch(n,r,Object.assign(Object.assign({},u.config),{isBytescaleApi:!0}))})}catch(e){return Promise.reject(e)}}},{key:"encodeParam",value:function(e,t){if("filePath"===e){if(!t.startsWith("/"))throw Error("The 'filePath' parameter must begin with a '/' character.");return t}return encodeURIComponent(t)}},{key:"createFetchParams",value:function(e,t,n){try{var r=(null!=n?n:C.getApiUrl(this.config))+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(r+="?"+P(e.query));var a=this.config.headers,i=Object.assign({},e.headers);return I(void 0===a?{}:a(),function(n){var a=Object.assign(i,n);Object.keys(a).forEach(function(e){return void 0===a[e]?delete a[e]:{}});var o={method:e.method,headers:a,body:e.body},s=Object.assign({},o);return I(("function"==typeof t?t:function(){return I(t)})({init:o,context:e}),function(e){var t=Object.assign(s,e),n=Object.assign(Object.assign({},t),{body:JSON.stringify(t.body)});return{url:r,init:n}})},void 0===a)}catch(e){return Promise.reject(e)}}}],[{key:"fetch",value:function(e,t,n){try{var r,a,i;return S(_(function(){return I(C.getFetchApi(n)(e,Object.assign(Object.assign({},t),{cache:"no-store"})),function(e){i=e})},function(t){throw Error(n.isBytescaleApi?"Unable to resolve the Bytescale API: ".concat(t.message," If the problem persists, and your network connection is OK, then please contact support@bytescale.com and provide: (a) time of failed request in UTC (b) screenshot of failed network response header + body (c) screenshot of failed network request header + body (d) browser and OS version."):"Unable to resolve URL (".concat(e,"): ").concat(t.message))}),function(o){var s,u;return i.status>=200&&i.status<300?i:(s=function(n){throw Error("Failure status code (".concat(i.status,") received for request: ").concat(null!==(a=t.method)&&void 0!==a?a:"GET"," ").concat(e))},(u=function(){if(n.isBytescaleApi){var e=void 0;return S(_(function(){return I(i.json(),function(t){e=t})},k),function(){if("string"==typeof(null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.code))throw new D(e);throw Error("Unable to connect to the Bytescale API (".concat(i.status,"): please try again."))})}}())&&u.then?u.then(s):s(u))})}catch(e){return Promise.reject(e)}}}]),e}(),R=function(e){m(n,e);var t=g(n);function n(){var e;return E(this,n),(e=t.call(this,"Operation cancelled by caller.")).name="CancelledError",e}return T(n)}(y(Error)),D=function(e){m(n,e);var t=g(n);function n(e){var r;return E(this,n),(r=t.call(this,e.error.message)).name="BytescaleApiError",r.errorCode=e.error.code,r.details=e.error.details,r}return T(n)}(y(Error));function P(e){return Object.keys(e).map(function(t){var n;return(n=e[t])instanceof Object?P(n):"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(String(n)))}).filter(function(e){return e.length>0}).join("&")}var $=function(){function e(t){E(this,e),this.raw=t}return T(e,[{key:"value",value:function(){try{return I(this.raw.json())}catch(e){return Promise.reject(e)}}}]),e}(),F=function(){function e(t){E(this,e),this.raw=t}return T(e,[{key:"value",value:function(){return I(void 0)}}]),e}(),M=function(){function e(t){E(this,e),this.raw=t}return T(e,[{key:"stream",value:function(){if(this.raw.bodyUsed)throw Error("Response body has already been consumed.");if(null===this.raw.body)throw Error("Response body does not exist.");return this.raw.body}},{key:"text",value:function(){try{return I(this.raw.text())}catch(e){return Promise.reject(e)}}},{key:"blob",value:function(){try{return I(this.raw.blob())}catch(e){return Promise.reject(e)}}},{key:"json",value:function(){try{return I(this.raw.json())}catch(e){return Promise.reject(e)}}}]),e}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}(r.key),r)}}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=z(i);if(t){var r=z(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"copyFile",value:function(e){try{var t={};return t["Content-Type"]="application/json",L(this.request({path:"/v2/accounts/{accountId}/files/copy".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFileRequest},void 0,[][0]),function(e){return L(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"copyFileBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",L(this.request({path:"/v2/accounts/{accountId}/files/copy/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFileBatchRequest},void 0,[][0]),function(e){return L(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFile",value:function(e){try{var t={};return void 0!==e.filePath&&(t.filePath=e.filePath),L(this.request({path:"/v2/accounts/{accountId}/files".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:{},query:t},void 0,[][0]),function(e){return L(new F(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFileBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",L(this.request({path:"/v2/accounts/{accountId}/files/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:t,query:{},body:e.deleteFileBatchRequest},void 0,[][0]),function(e){return L(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"downloadFile",value:function(e){try{var t={};return void 0!==e.cache&&(t.cache=e.cache),void 0!==e.cacheTtl&&(t.cache_ttl=e.cacheTtl),void 0!==e.version&&(t.version=e.version),L(this.request({path:"/{accountId}/raw{filePath}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),this.encodeParam("filePath",e.filePath)),method:"GET",headers:{},query:t},void 0,"https://upcdn.io"),function(e){return new M(e)})}catch(e){return Promise.reject(e)}}},{key:"getFileDetails",value:function(e){try{var t={};return void 0!==e.filePath&&(t.filePath=e.filePath),L(this.request({path:"/v2/accounts/{accountId}/files/details".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return L(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"processFile",value:function(e){try{var t={};return void 0!==e.artifact&&(t.artifact=e.artifact),void 0!==e.cache&&(t.cache=e.cache),void 0!==e.cachePerm&&(t.cache_perm=e.cachePerm),void 0!==e.cacheTtl&&(t.cache_ttl=e.cacheTtl),void 0!==e.large&&(t.large=e.large),void 0!==e.transformationParams&&(t.transformationParams=e.transformationParams),void 0!==e.version&&(t.version=e.version),L(this.request({path:"/{accountId}/{transformation}{filePath}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),this.encodeParam("filePath",e.filePath)).replace("{".concat("transformation","}"),this.encodeParam("transformation",e.transformation)),method:"GET",headers:{},query:t},void 0,"https://upcdn.io"),function(e){return new M(e)})}catch(e){return Promise.reject(e)}}},{key:"processFileAndSave",value:function(e){try{var t={};void 0!==e.transformationParams&&(t.transformationParams=e.transformationParams);var n={};return n["Content-Type"]="application/json",L(this.request({path:"/{accountId}/save/{transformation}{filePath}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),this.encodeParam("filePath",e.filePath)).replace("{".concat("transformation","}"),this.encodeParam("transformation",e.transformation)),method:"POST",headers:n,query:t,body:e.processFileAndSaveRequest},void 0,"https://upcdn.io"),function(e){return L(new $(e).value())})}catch(e){return Promise.reject(e)}}}],U(i.prototype,n),r&&U(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(O);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==V(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===V(t)?t:String(t)}(r.key),r)}}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=X(i);if(t){var r=X(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"copyFolder",value:function(e){try{var t={};return t["Content-Type"]="application/json",G(this.request({path:"/v2/accounts/{accountId}/folders/copy".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFolderRequest},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"copyFolderBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",G(this.request({path:"/v2/accounts/{accountId}/folders/copy/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.copyFolderBatchRequest},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFolder",value:function(e){try{var t={};return t["Content-Type"]="application/json",G(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:t,query:{},body:e.deleteFolderRequest},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"deleteFolderBatch",value:function(e){try{var t={};return t["Content-Type"]="application/json",G(this.request({path:"/v2/accounts/{accountId}/folders/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:t,query:{},body:e.deleteFolderBatchRequest},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"getFolderDetails",value:function(e){try{var t={};return void 0!==e.folderPath&&(t.folderPath=e.folderPath),G(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"listFolder",value:function(e){try{var t={};return void 0!==e.cursor&&(t.cursor=e.cursor),void 0!==e.dryRun&&(t.dryRun=e.dryRun),void 0!==e.folderPath&&(t.folderPath=e.folderPath),void 0!==e.includeFiles&&(t.includeFiles=e.includeFiles),void 0!==e.includeOverriddenStorage&&(t.includeOverriddenStorage=e.includeOverriddenStorage),void 0!==e.includePhysicalFolders&&(t.includePhysicalFolders=e.includePhysicalFolders),void 0!==e.includeVirtualFolders&&(t.includeVirtualFolders=e.includeVirtualFolders),void 0!==e.limit&&(t.limit=e.limit),void 0!==e.recursive&&(t.recursive=e.recursive),G(this.request({path:"/v2/accounts/{accountId}/folders/list".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"putFolder",value:function(e){try{var t={};return t["Content-Type"]="application/json",G(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"PUT",headers:t,query:{},body:e.putFolderRequest},void 0,[][0]),function(e){return G(new $(e).value())})}catch(e){return Promise.reject(e)}}}],H(i.prototype,n),r&&H(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(O);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==Z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Z(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Z(t)?t:String(t)}(r.key),r)}}function J(e,t){return(J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=ee(i);if(t){var r=ee(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"cancelJob",value:function(e){try{return Y(this.request({path:"/v2/accounts/{accountId}/jobs/{jobType}/{jobId}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("jobId","}"),this.encodeParam("jobId",e.jobId)).replace("{".concat("jobType","}"),this.encodeParam("jobType",e.jobType)),method:"DELETE",headers:{},query:{}},void 0,[][0]),function(e){return Y(new F(e).value())})}catch(e){return Promise.reject(e)}}},{key:"getJob",value:function(e){try{return Y(this.request({path:"/v2/accounts/{accountId}/jobs/{jobType}/{jobId}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("jobId","}"),this.encodeParam("jobId",e.jobId)).replace("{".concat("jobType","}"),this.encodeParam("jobType",e.jobType)),method:"GET",headers:{},query:{}},void 0,[][0]),function(e){return Y(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"listRecentJobs",value:function(e){try{var t={};return e.jobType&&(t.jobType=e.jobType),Y(this.request({path:"/v2/accounts/{accountId}/jobs".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),function(e){return Y(new $(e).value())})}catch(e){return Promise.reject(e)}}}],Q(i.prototype,n),r&&Q(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(O);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ea(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==en(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==en(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===en(t)?t:String(t)}(r.key),r)}}function ei(e,t){return(ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eo(e){return(eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var es=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ei(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eo(i);if(t){var r=eo(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"beginMultipartUpload",value:function(e){try{var t={};return t["Content-Type"]="application/json",er(this.request({path:"/v2/accounts/{accountId}/uploads".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.beginMultipartUploadRequest},void 0,[][0]),function(e){return er(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"completeUploadPart",value:function(e){try{var t={};return t["Content-Type"]="application/json",er(this.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts/{uploadPartIndex}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),this.encodeParam("uploadId",e.uploadId)).replace("{".concat("uploadPartIndex","}"),this.encodeParam("uploadPartIndex",e.uploadPartIndex)),method:"PUT",headers:t,query:{},body:e.completeUploadPartRequest},void 0,[][0]),function(e){return er(new F(e).value())})}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e){try{return er(this.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts/{uploadPartIndex}".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),this.encodeParam("uploadId",e.uploadId)).replace("{".concat("uploadPartIndex","}"),this.encodeParam("uploadPartIndex",e.uploadPartIndex)),method:"GET",headers:{},query:{}},void 0,[][0]),function(e){return er(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"listUploadParts",value:function(e){try{return er(this.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),this.encodeParam("uploadId",e.uploadId)),method:"GET",headers:{},query:{}},void 0,[][0]),function(e){return er(new $(e).value())})}catch(e){return Promise.reject(e)}}},{key:"uploadFromUrl",value:function(e){try{var t={};return t["Content-Type"]="application/json",er(this.request({path:"/v2/accounts/{accountId}/uploads/url".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:t,query:{},body:e.uploadFromUrlRequest},void 0,[][0]),function(e){return er(new $(e).value())})}catch(e){return Promise.reject(e)}}}],ea(i.prototype,n),r&&ea(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(O),eu=!1;function el(e){return void 0!==e[1]&&null!==e[1]}function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||ep(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ef(e){return function(e){if(Array.isArray(e))return ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ep(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(e,t){if(e){if("string"==typeof e)return ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ed(e,t)}}function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var em=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"url",value:function(e){var t;return(null===(t=e.options)||void 0===t?void 0:t.transformation)===void 0?this.raw(e):this.transformation(e,e.options)}},{key:"raw",value:function(e){var t,n=this.getBaseUrl(e,"raw"),r=this.getCommonQueryParams(null!==(t=e.options)&&void 0!==t?t:{});return this.addQueryParams(n,r)}},{key:"transformation",value:function(e,t){var n,r=this.getBaseUrl(e,"preset"===t.transformation?t.transformationPreset:t.transformation),a="preset"===t.transformation?[]:this.getTransformationParams(t),i=this.getCommonQueryParams(null!==(n=e.options)&&void 0!==n?n:{}),o=this.getCommonTransformationQueryParams(t);return this.addQueryParams(r,[].concat(ef(a),ef(i),ef(o)))}},{key:"getBaseUrl",value:function(e,t){var n=C.defaultCdnUrl;return"".concat(n,"/").concat(e.accountId,"/").concat(t).concat(e.filePath)}},{key:"getCommonTransformationQueryParams",value:function(e){return this.makeQueryParams(["cachePermanently","large","artifact"],{cachePermanently:"cache_perm"})(e)}},{key:"getCommonQueryParams",value:function(e){return this.makeQueryParams(["auth","cache","cacheTtl","version","forceDownloadPrompt"],{cacheTtl:"cache_ttl",forceDownloadPrompt:"download"})(e)}},{key:"makeQueryParams",value:function(e,t){return function(n){var r=[];return e.forEach(function(e){var a,i=n[e];void 0!==i&&r.push([null!==(a=t[e])&&void 0!==a?a:e,i.toString()])}),r}}},{key:"getTransformationParams",value:function(e){var t=e.transformationParams;if(void 0===t)return[];var n=function(e){return Object.entries(e).filter(el).map(function(e){var t=eh(e,2);return[t[0],t[1].toString()]})};return Array.isArray(t)?t.flatMap(n):n(t)}},{key:"addQueryParams",value:function(e,t){return 0===t.length?e:"".concat(e,"?").concat(t.map(function(e){var t=eh(e,2),n=t[0],r=t[1];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))}).join("&"))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==ec(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ec(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ec(t)?t:String(t)}(r.key),r)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),eg=!1;function ey(e){return(ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eb(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function ev(e,t,n){if(!e.s){if(n instanceof ew){if(n.s)1&t&&(t=n.s),n=n.v;else{n.o=ev.bind(null,e,t);return}}if(n&&n.then){n.then(ev.bind(null,e,t),ev.bind(null,e,2));return}e.s=t,e.v=n;var r=e.o;r&&r(e)}}var ew=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,a=this.s;if(a){var i=1&a?t:n;if(!i)return this;try{ev(r,1,i(this.v))}catch(e){ev(r,2,e)}return r}return this.o=function(e){try{var a=e.v;1&e.s?ev(r,1,t?t(a):a):n?ev(r,1,n(a)):ev(r,2,a)}catch(e){ev(r,2,e)}},r},e}();function ex(e){return e instanceof ew&&1&e.s}function e_(e){return function(e){if(Array.isArray(e))return ek(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ek(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eS(){}function eI(e,t){if(!t)return e&&e.then?e.then(eS):Promise.resolve()}function eE(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function eN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==ey(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ey(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ey(t)?t:String(t)}(r.key),r)}}function eT(e){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==eT(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eT(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eT(t)?t:String(t)}(r.key),r)}}function eC(e,t){return(eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eO(e){return(eO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eR(e){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==eR(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eR(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eR(t)?t:String(t)}(r.key),r)}}function eP(e,t){return(eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function e$(e){return(e$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eP(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=e$(i);if(t){var r=e$(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eR(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"doPutUploadPart",value:function(e,t,n,r,a){try{var i=this,o=new XMLHttpRequest,s=!0;return a(function(){s&&o.abort()}),function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(function(){var t,a;return(t=new Promise(function(t,a){o.upload.addEventListener("progress",function(e){e.lengthComputable&&r(e.loaded)},!1),o.addEventListener("load",function(){var e,n=null!==(e=o.getResponseHeader("etag"))&&void 0!==e?e:void 0;t({etag:n,status:o.status})}),o.onabort=function(){return a(new R)},o.onerror=function(){return a(Error("File upload error."))},o.ontimeout=function(){return a(Error("File upload timeout."))},o.open("PUT",e.uploadUrl),o.send(i.getRequestBody(e,n))})).then||(t=Promise.resolve(t)),a?t.then(a):t},function(e,t){return s=!1,function(e,t){if(e)throw t;return t}(e,t)})}catch(e){return Promise.reject(e)}}}],eD(i.prototype,n),r&&eD(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eC(e,t)}(i,e);var t,n,r,a=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=eO(i);if(t){var r=eO(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===eT(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function i(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),a.apply(this,arguments)}return n=[{key:"processUploadSource",value:function(e){if("string"==typeof e)return{type:"Blob",value:new Blob([e],{type:this.stringMimeType})};if(void 0!==e.byteLength)return{type:"ArrayBuffer",value:e};if(void 0!==e.size)return{type:"Blob",value:e};throw Error("Unsupported type for 'data' parameter. Please provide a String, Blob, ArrayBuffer, or File object (from a file input element).")}},{key:"getPreUploadInfoPartial",value:function(e,t){switch(t.type){case"Blob":return this.getBlobInfo(t);case"ArrayBuffer":return{mime:void 0,size:t.value.byteLength,originalFileName:void 0,maxConcurrentUploadParts:void 0};default:!function(e){throw Error("Didn't expect to get here: ".concat(JSON.stringify(e)))}(t)}}},{key:"preUpload",value:function(e){}},{key:"postUpload",value:function(e){var t,n;return t&&t.then||(t=Promise.resolve(t)),n?t.then(n):t}},{key:"getRequestBody",value:function(e,t){return -1===e.range.inclusiveEnd?new Blob:t.value.slice(e.range.inclusiveStart,e.range.inclusiveEnd+1)}}],eA(i.prototype,n),r&&eA(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.config=e,this.stringMimeType="text/plain",this.defaultMaxConcurrentUploadParts=4,this.intervalMs=500,this.uploadApi=new es(e),this.accountId=C.getAccountId(e)}return e=[{key:"upload",value:function(e){try{var t=this;t.assertNotCancelled(e);var n=t.processUploadSource(e.data),r=t.getPreUploadInfo(e,n),a=r.size,i=t.makeOnProgressForPartFactory(e,a),o=t.preUpload(n);return void 0!==e.onProgress&&e.onProgress(t.makeProgressEvent(0,a)),eE(t.beginUpload(e,r),function(a){var s,u,l=a.uploadParts.count,c=e_(Array(l).keys()),h=t.makeCancellationMethods(),f=h.cancel,p=h.addCancellationHandler,d=setInterval(t.onIntervalTick(e,f),t.intervalMs);return s=function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(function(){return eE(t.mapAsync(c,r.maxConcurrentUploadParts,eb(function(r){return t.uploadPart(e,n,r,a,i(),p)})),function(){return eI(t.postUpload(o))})},function(e,t){return clearInterval(d),function(e,t){if(e)throw t;return t}(e,t)}),u=function(){return a.file},s&&s.then?s.then(u):u(s)})}catch(e){return Promise.reject(e)}}},{key:"getBlobInfo",value:function(e){var t=e.value,n=t.name,r=t.size;return{mime:t.type,size:r,originalFileName:n,maxConcurrentUploadParts:void 0}}},{key:"onIntervalTick",value:function(e,t){var n=this;return function(){n.isCancelled(e)&&t()}}},{key:"makeCancellationMethods",value:function(){var e=[];return{cancel:function(){return e.forEach(function(e){return e()})},addCancellationHandler:function(t){e.push(t)}}}},{key:"makeOnProgressForPartFactory",value:function(e,t){var n=this,r=e.onProgress;if(void 0===r)return function(){return function(){}};var a=0;return function(){var e=0;return function(i){var o=i-e;e+=o,a+=o,r(n.makeProgressEvent(a,t))}}}},{key:"makeProgressEvent",value:function(e,t){return{bytesTotal:t,bytesSent:e,progress:Math.round(e/t*100)}}},{key:"assertNotCancelled",value:function(e){if(this.isCancelled(e))throw new R}},{key:"isCancelled",value:function(e){var t;return(null===(t=e.cancellationToken)||void 0===t?void 0:t.isCancelled)===!0}},{key:"beginUpload",value:function(e,t){var n=t.size,r=t.mime,a=t.originalFileName;try{return eE(this.uploadApi.beginMultipartUpload({accountId:this.accountId,beginMultipartUploadRequest:{metadata:e.metadata,mime:r,originalFileName:a,path:e.path,protocol:"1.1",size:n,tags:e.tags}}))}catch(e){return Promise.reject(e)}}},{key:"uploadPart",value:function(e,t,n,r,a,i){try{var o=this;return o.assertNotCancelled(e),eE(o.getUploadPart(n,r),function(s){return o.assertNotCancelled(e),eE(o.putUploadPart(s,t,a,i),function(t){return o.assertNotCancelled(e),eI(o.uploadApi.completeUploadPart({accountId:o.accountId,uploadId:r.uploadId,uploadPartIndex:n,completeUploadPartRequest:{etag:t}}))})})}catch(e){return Promise.reject(e)}}},{key:"putUploadPart",value:function(e,t,n,r){try{var a=e.range.inclusiveEnd+1-e.range.inclusiveStart;return eE(this.doPutUploadPart(e,a,t,n,r),function(e){var t=e.status,r=e.etag;if(2!==Math.floor(t/100))throw Error("Failed to upload part (".concat(t,")."));if(void 0===r)throw Error("No 'etag' response header found in upload part response.");return n(a),r})}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e,t){try{if(0===e)return t.uploadParts.first;return eE(this.uploadApi.getUploadPart({uploadId:t.uploadId,accountId:this.accountId,uploadPartIndex:e}))}catch(e){return Promise.reject(e)}}},{key:"getPreUploadInfo",value:function(e,t){var n,r,a,i=this.getPreUploadInfoPartial(e,t);return{maxConcurrentUploadParts:null!==(n=i.maxConcurrentUploadParts)&&void 0!==n?n:this.defaultMaxConcurrentUploadParts,originalFileName:null!==(r=e.originalFileName)&&void 0!==r?r:i.originalFileName,mime:null!==(a=e.mime)&&void 0!==a?a:i.mime,size:i.size}}},{key:"mapAsync",value:function(e,t,n){try{var r=e_(e);return eI(Promise.all(e_(Array(t).keys()).map(eb(function(){return function(e){if(e&&e.then)return e.then(eS)}(function(e,t,n){for(;;){var r,a=e();if(ex(a)&&(a=a.v),!a)return i;if(a.then){r=0;break}var i=n();if(i&&i.then){if(ex(i))i=i.s;else{r=1;break}}if(t){var o=t();if(o&&o.then&&!ex(o)){r=2;break}}}var s=new ew,u=ev.bind(null,s,2);return(0===r?a.then(c):1===r?i.then(l):o.then(h)).then(void 0,u),s;function l(r){i=r;do{if(t&&(o=t())&&o.then&&!ex(o)){o.then(h).then(void 0,u);return}if(!(a=e())||ex(a)&&!a.v){ev(s,1,i);return}if(a.then){a.then(c).then(void 0,u);return}ex(i=n())&&(i=i.v)}while(!i||!i.then);i.then(l).then(void 0,u)}function c(e){e?(i=n())&&i.then?i.then(l).then(void 0,u):l(i):ev(s,1,i)}function h(){(a=e())?a.then?a.then(c).then(void 0,u):c(a):ev(s,1,i)}}(function(){return r.length>0},void 0,function(){var e=r.shift();return function(e){var t=e();if(t&&t.then)return t.then(eS)}(function(){if(void 0!==e)return eI(n(e))})}))}))))}catch(e){return Promise.reject(e)}}}],eN(n.prototype,e),t&&eN(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}()));function eM(e){return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eB=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"error",value:function(e){console.error(t.prefix(e))}},{key:"warn",value:function(e){console.warn(t.prefix(e))}},{key:"prefix",value:function(e){return"[bytescale-sdk] ".concat(e)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==eM(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eM(t)?t:String(t)}(r.key),r)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function eL(e){return(eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eU(){}function ej(e,t){if(!t)return e&&e.then?e.then(eU):Promise.resolve()}function ez(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function eW(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function eV(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eG(r.key),r)}}function eG(e){var t=function(e,t){if("object"!==eL(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==eL(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===eL(t)?t:String(t)}var eH=new(function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.contentType="content-type",this.contentTypeJson="application/json",this.contentTypeText="text/plain",this.minJwtTtlSeconds=10,this.maxJwtTtlSeconds=2147483,this.retryAuthAfterErrorSeconds=5,this.refreshBeforeExpirySeconds=20,this.authSessionMutex=p.getMutex()}return e=[{key:"isAuthSessionActive",value:function(){return void 0!==p.getSession()}},{key:"beginAuthSession",value:function(e){try{var t=this,n={accessToken:void 0,accessTokenRefreshHandle:void 0,params:e,isActive:!0};return ez(t.authSessionMutex.safe(eW(function(){if(t.isAuthSessionActive())throw Error("Auth session already active: see AuthManager.isAuthSessionActive(). Please call 'await endAuthSession()' and then 'await beginAuthSession(...)' if you want to start a new auth session.");return p.setSession(n),ez()})),function(){return ej(t.refreshAccessToken(n))})}catch(e){return Promise.reject(e)}}},{key:"endAuthSession",value:function(){try{var e=this;return ej(e.authSessionMutex.safe(eW(function(){var t=p.getSession();if(void 0!==t)return p.setSession(void 0),t.isActive=!1,void 0!==t.accessTokenRefreshHandle&&clearTimeout(t.accessTokenRefreshHandle),ej(e.deleteAccessToken(t.params))})))}catch(e){return Promise.reject(e)}}},{key:"refreshAccessToken",value:function(e){try{var t=this;return ej(t.authSessionMutex.safe(eW(function(){if(e.isActive){var n=t.retryAuthAfterErrorSeconds;return function(e){if(e&&e.then)return e.then(eU)}(function(e,t){try{var n=e()}catch(e){return t(!0,e)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}(function(){return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){var r=t.getAccessToken,a=e.params;return ez(e.params.authHeaders(),function(i){return ez(r.call(t,a,i),function(r){return ez(t.setAccessToken(e.params,r),function(r){var a=r.ttlSeconds-t.refreshBeforeExpirySeconds;n=Math.max(a,t.minJwtTtlSeconds),a!==n&&eB.warn("JWT expiration is too short: waiting for ".concat(n," seconds before refreshing.")),n=Math.min(n,t.maxJwtTtlSeconds),e.accessToken=r.accessToken})})})},function(e){eB.error("Error when refreshing access token: ".concat(e))})},function(r,a){return e.accessTokenRefreshHandle=window.setTimeout(function(){t.refreshAccessToken(e).then(function(){},function(e){return eB.error("Unexpected error when refreshing access token: ".concat(e))})},1e3*n),function(e,t){if(e)throw t;return t}(r,a)}))}})))}catch(e){return Promise.reject(e)}}},{key:"getAccessTokenUrl",value:function(e){var t,n=C.getCdnUrl(null!==(t=e.options)&&void 0!==t?t:{});return"".concat(n,"/api/v1/access_tokens/").concat(e.accountId)}},{key:"deleteAccessToken",value:function(e){try{var t;return ej(O.fetch(this.getAccessTokenUrl(e),{method:"DELETE",credentials:"include",headers:{}},{isBytescaleApi:!0,fetchApi:null===(t=e.options)||void 0===t?void 0:t.fetchApi}))}catch(e){return Promise.reject(e)}}},{key:"setAccessToken",value:function(e,t){try{var n,r,a,i;return ez(O.fetch(this.getAccessTokenUrl(e),{method:"PUT",credentials:"include",headers:(r={},a=this.contentType,i=this.contentTypeJson,(a=eG(a))in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r),body:JSON.stringify({accessToken:t})},{isBytescaleApi:!0,fetchApi:null===(n=e.options)||void 0===n?void 0:n.fetchApi}),function(e){return ez(e.json())})}catch(e){return Promise.reject(e)}}},{key:"getAccessToken",value:function(e,t){try{var n,r,a=this,i="Your auth API endpoint",o=a.contentTypeText;return ez(O.fetch(e.authUrl,{method:"GET",headers:t},{isBytescaleApi:!1,fetchApi:null===(n=e.options)||void 0===n?void 0:n.fetchApi}),function(e){var t=null!==(r=e.headers.get(a.contentType))&&void 0!==r?r:"";if(t.split(";")[0]!==o)throw Error("".concat(i,' returned "').concat(t,'" for the ').concat(a.contentType,' response header, but the Bytescale SDK requires "').concat(o,'".'));return ez(e.text(),function(e){if(0===e.length)throw Error("".concat(i," returned an empty string. Please return a valid JWT instead."));if(e.trim().length!==e.length)throw Error("".concat(i," returned whitespace around the JWT, please remove it."));return e})})}catch(e){return Promise.reject(e)}}}],eV(n.prototype,e),t&&eV(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}());a.AuthManager,a.BaseAPI,a.BinaryResult,a.BytescaleApiClientConfigUtils,a.BytescaleApiError,a.CancelledError,a.CommonTypesNoOp,a.FileApi,a.FolderApi,a.JSONApiResponse,a.JobApi,a.UploadApi,a.UploadManager;var eq=a.UrlBuilder;a.UrlBuilderTypesNoOp,a.VoidApiResponse,a.querystring},6782:function(e,t,n){"use strict";n.d(t,{r:function(){return M}});var r,a,i,o,s,u=n(7294),l=((r=l||{})[r.None=0]="None",r[r.RenderStrategy=1]="RenderStrategy",r[r.Static=2]="Static",r),c=((a=c||{})[a.Unmount=0]="Unmount",a[a.Hidden=1]="Hidden",a);function h({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:a,visible:i=!0,name:o}){let s=p(t,e);if(i)return f(s,n,r,o);let u=null!=a?a:0;if(2&u){let{static:e=!1,...t}=s;if(e)return f(t,n,r,o)}if(1&u){let{unmount:e=!0,...t}=s;return function e(t,n,...r){if(t in n){let e=n[t];return"function"==typeof e?e(...r):e}let a=Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(n).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,e),a}(e?0:1,{0:()=>null,1:()=>f({...t,hidden:!0,style:{display:"none"}},n,r,o)})}return f(s,n,r,o)}function f(e,t={},n,r){let{as:a=n,children:i,refName:o="ref",...s}=g(e,["unmount","static"]),l=void 0!==e.ref?{[o]:e.ref}:{},c="function"==typeof i?i(t):i;s.className&&"function"==typeof s.className&&(s.className=s.className(t));let h={};if(t){let e=!1,n=[];for(let[r,a]of Object.entries(t))"boolean"==typeof a&&(e=!0),!0===a&&n.push(r);e&&(h["data-headlessui-state"]=n.join(" "))}if(a===u.Fragment&&Object.keys(m(s)).length>0){if(!(0,u.isValidElement)(c)||Array.isArray(c)&&c.length>1)throw Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(s).map(e=>`  - ${e}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join(`
`)].join(`
`));return(0,u.cloneElement)(c,Object.assign({},p(c.props,m(g(s,["ref"]))),h,l,function(...e){return{ref:e.every(e=>null==e)?void 0:t=>{for(let n of e)null!=n&&("function"==typeof n?n(t):n.current=t)}}}(c.ref,l.ref)))}return(0,u.createElement)(a,Object.assign({},g(s,["ref"]),a!==u.Fragment&&l,a!==u.Fragment&&h),c)}function p(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let r of e)for(let e in r)e.startsWith("on")&&"function"==typeof r[e]?(null!=n[e]||(n[e]=[]),n[e].push(r[e])):t[e]=r[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(e=>[e,void 0])));for(let e in n)Object.assign(t,{[e](t,...r){for(let a of n[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;a(t,...r)}}});return t}function d(e){var t;return Object.assign((0,u.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function m(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function g(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}let y="undefined"==typeof window||"undefined"==typeof document,b=y?u.useEffect:u.useLayoutEffect,v={serverHandoffComplete:!1},w=0;function x(){return++w}let _=null!=(s=u.useId)?s:function(){let e=function(){let[e,t]=(0,u.useState)(v.serverHandoffComplete);return(0,u.useEffect)(()=>{!0!==e&&t(!0)},[e]),(0,u.useEffect)(()=>{!1===v.serverHandoffComplete&&(v.serverHandoffComplete=!0)},[]),e}(),[t,n]=u.useState(e?x:null);return b(()=>{null===t&&n(x())},[t]),null!=t?""+t:void 0};var k=((i=k||{}).Space=" ",i.Enter="Enter",i.Escape="Escape",i.Backspace="Backspace",i.Delete="Delete",i.ArrowLeft="ArrowLeft",i.ArrowUp="ArrowUp",i.ArrowRight="ArrowRight",i.ArrowDown="ArrowDown",i.Home="Home",i.End="End",i.PageUp="PageUp",i.PageDown="PageDown",i.Tab="Tab",i);let S=function(e){let t;let n=(t=(0,u.useRef)(e),b(()=>{t.current=e},[e]),t);return u.useCallback((...e)=>n.current(...e),[n])},I=Symbol();function E(...e){let t=(0,u.useRef)(e);(0,u.useEffect)(()=>{t.current=e},[e]);let n=S(e=>{for(let n of t.current)null!=n&&("function"==typeof n?n(e):n.current=e)});return e.every(e=>null==e||(null==e?void 0:e[I]))?void 0:n}let N=(0,u.createContext)(null),T=d(function(e,t){let n=_(),{id:r=`headlessui-label-${n}`,passive:a=!1,...i}=e,o=function e(){let t=(0,u.useContext)(N);if(null===t){let t=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),s=E(t);b(()=>o.register(r),[r,o.register]);let l={ref:s,...o.props,id:r};return a&&("onClick"in l&&delete l.onClick,"onClick"in i&&delete i.onClick),h({ourProps:l,theirProps:i,slot:o.slot||{},defaultTag:"label",name:o.name||"Label"})}),A=(0,u.createContext)(null),C=d(function(e,t){let n=_(),{id:r=`headlessui-description-${n}`,...a}=e,i=function e(){let t=(0,u.useContext)(A);if(null===t){let t=Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}return t}(),o=E(t);return b(()=>i.register(r),[r,i.register]),h({ourProps:{ref:o,...i.props,id:r},theirProps:a,slot:i.slot||{},defaultTag:"p",name:i.name||"Description"})});function O(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";if("string"==typeof n&&"button"===n.toLowerCase())return"button"}var R=((o=R||{})[o.None=1]="None",o[o.Focusable=2]="Focusable",o[o.Hidden=4]="Hidden",o);let D=d(function(e,t){let{features:n=1,...r}=e;return h({ourProps:{ref:t,"aria-hidden":(2&n)==2||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(4&n)==4&&(2&n)!=2&&{display:"none"}}},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})});function P(){let e=[],t=[],n={enqueue(e){t.push(e)},addEventListener:(e,t,r,a)=>(e.addEventListener(t,r,a),n.add(()=>e.removeEventListener(t,r,a))),requestAnimationFrame(...e){let t=requestAnimationFrame(...e);return n.add(()=>cancelAnimationFrame(t))},nextFrame:(...e)=>n.requestAnimationFrame(()=>n.requestAnimationFrame(...e)),setTimeout(...e){let t=setTimeout(...e);return n.add(()=>clearTimeout(t))},microTask(...e){var t;let r={current:!0};return t=()=>{r.current&&e[0]()},"function"==typeof queueMicrotask?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e})),n.add(()=>{r.current=!1})},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0){let[t]=e.splice(n,1);t()}}),dispose(){for(let t of e.splice(0))t()},async workQueue(){for(let e of t.splice(0))await e()}};return n}let $=(0,u.createContext)(null);$.displayName="GroupContext";let F=u.Fragment,M=Object.assign(d(function(e,t){let n=_(),{id:r=`headlessui-switch-${n}`,checked:a,defaultChecked:i=!1,onChange:o,name:s,value:l,...c}=e,f=(0,u.useContext)($),p=(0,u.useRef)(null),d=E(p,t,null===f?null:f.setSwitch),[g,y]=function(e,t,n){let[r,a]=(0,u.useState)(n),i=void 0!==e,o=(0,u.useRef)(i),s=(0,u.useRef)(!1),l=(0,u.useRef)(!1);return!i||o.current||s.current?i||!o.current||l.current||(l.current=!0,o.current=i,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(s.current=!0,o.current=i,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[i?e:r,S(e=>(i||a(e),null==t?void 0:t(e)))]}(a,o,i),v=S(()=>null==y?void 0:y(!g)),w=S(e=>{if(function(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(null==t?void 0:t.getAttribute("disabled"))==="";return!(r&&function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}(e.currentTarget))return e.preventDefault();e.preventDefault(),v()}),x=S(e=>{e.key===k.Space?(e.preventDefault(),v()):e.key===k.Enter&&function(e){var t;let n=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(n){for(let e of n.elements)if("INPUT"===e.tagName&&"submit"===e.type||"BUTTON"===e.tagName&&"submit"===e.type||"INPUT"===e.nodeName&&"image"===e.type){e.click();return}}}(e.currentTarget)}),I=S(e=>e.preventDefault()),N=(0,u.useMemo)(()=>({checked:g}),[g]),T={id:r,ref:d,role:"switch",type:function(e,t){let[n,r]=(0,u.useState)(()=>O(e));return b(()=>{r(O(e))},[e.type,e.as]),b(()=>{n||!t.current||t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}(e,p),tabIndex:0,"aria-checked":g,"aria-labelledby":null==f?void 0:f.labelledby,"aria-describedby":null==f?void 0:f.describedby,onClick:w,onKeyUp:x,onKeyPress:I},A=function(){let[e]=(0,u.useState)(P);return(0,u.useEffect)(()=>()=>e.dispose(),[e]),e}();return(0,u.useEffect)(()=>{var e;let t=null==(e=p.current)?void 0:e.closest("form");t&&void 0!==i&&A.addEventListener(t,"reset",()=>{y(i)})},[p,y]),u.createElement(u.Fragment,null,null!=s&&g&&u.createElement(D,{features:R.Hidden,...m({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:g,name:s,value:l})}),h({ourProps:T,theirProps:c,slot:N,defaultTag:"button",name:"Switch"}))}),{Group:function(e){let[t,n]=(0,u.useState)(null),[r,a]=function(){let[e,t]=(0,u.useState)([]);return[e.length>0?e.join(" "):void 0,(0,u.useMemo)(()=>function(e){let n=S(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return -1!==r&&n.splice(r,1),n}))),r=(0,u.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props}),[n,e.slot,e.name,e.props]);return u.createElement(N.Provider,{value:r},e.children)},[t])]}(),[i,o]=function(){let[e,t]=(0,u.useState)([]);return[e.length>0?e.join(" "):void 0,(0,u.useMemo)(()=>function(e){let n=S(e=>(t(t=>[...t,e]),()=>t(t=>{let n=t.slice(),r=n.indexOf(e);return -1!==r&&n.splice(r,1),n}))),r=(0,u.useMemo)(()=>({register:n,slot:e.slot,name:e.name,props:e.props}),[n,e.slot,e.name,e.props]);return u.createElement(A.Provider,{value:r},e.children)},[t])]}(),s=(0,u.useMemo)(()=>({switch:t,setSwitch:n,labelledby:r,describedby:i}),[t,n,r,i]);return u.createElement(o,{name:"Switch.Description"},u.createElement(a,{name:"Switch.Label",props:{onClick(){t&&(t.click(),t.focus({preventScroll:!0}))}}},u.createElement($.Provider,{value:s},h({ourProps:{},theirProps:e,defaultTag:F,name:"Switch.Group"}))))},Label:T,Description:C})},9734:function(e,t,n){"use strict";n.d(t,{ZP:function(){return ei}});var r=n(7294),a=n(1688);let i=new WeakMap,o={},s={},u=()=>{},l=u(),c=Object,h=e=>e===l,f=e=>"function"==typeof e,p=(e,t)=>({...e,...t}),d="undefined",m=typeof window!=d,g=typeof document!=d,y=()=>m&&typeof window.requestAnimationFrame!=d,b=(e,t)=>{let n=i.get(e);return[()=>e.get(t)||o,r=>{if(!h(t)){let a=e.get(t);t in s||(s[t]=a),n[5](t,p(a,r),a||o)}},n[6],()=>!h(t)&&t in s?s[t]:e.get(t)||o]},v=new WeakMap,w=0,x=e=>{let t,n;let r=typeof e,a=e&&e.constructor,i=a==Date;if(c(e)!==e||i||a==RegExp)t=i?e.toJSON():"symbol"==r?e.toString():"string"==r?JSON.stringify(e):""+e;else{if(t=v.get(e))return t;if(t=++w+"~",v.set(e,t),a==Array){for(n=0,t="@";n<e.length;n++)t+=x(e[n])+",";v.set(e,t)}if(a==c){t="#";let r=c.keys(e).sort();for(;!h(n=r.pop());)h(e[n])||(t+=n+":"+x(e[n])+",");v.set(e,t)}}return t},_=!0,[k,S]=m&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[u,u],I=()=>{let e=g&&document.visibilityState;return h(e)||"hidden"!==e},E=e=>(g&&document.addEventListener("visibilitychange",e),k("focus",e),()=>{g&&document.removeEventListener("visibilitychange",e),S("focus",e)}),N=e=>{let t=()=>{_=!0,e()},n=()=>{_=!1};return k("online",t),k("offline",n),()=>{S("online",t),S("offline",n)}},T={initFocus:E,initReconnect:N},A=!r.useId,C=!m||"Deno"in window,O=e=>y()?window.requestAnimationFrame(e):setTimeout(e,1),R=C?r.useEffect:r.useLayoutEffect,D="undefined"!=typeof navigator&&navigator.connection,P=!C&&D&&(["slow-2g","2g"].includes(D.effectiveType)||D.saveData),$=e=>{if(f(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?x(e):"",t]},F=0,M=()=>++F;var B={__proto__:null,FOCUS_EVENT:0,RECONNECT_EVENT:1,MUTATE_EVENT:2,ERROR_REVALIDATE_EVENT:3};async function L(...e){let[t,n,r,a]=e,o=p({populateCache:!0,throwOnError:!0},"boolean"==typeof a?{revalidate:a}:a||{}),s=o.populateCache,u=o.rollbackOnError,c=o.optimisticData,d=!1!==o.revalidate,m=e=>"function"==typeof u?u(e):!1!==u,g=o.throwOnError;if(f(n)){let e=[],r=t.keys();for(let a=r.next();!a.done;a=r.next()){let r=a.value;!/^\$(inf|sub)\$/.test(r)&&n(t.get(r)._k)&&e.push(r)}return Promise.all(e.map(y))}return y(n);async function y(n){let a;let[o]=$(n);if(!o)return;let[u,p]=b(t,o),[y,v,w]=i.get(t),x=y[o],_=()=>d&&(delete w[o],x&&x[0])?x[0](2).then(()=>u().data):u().data;if(e.length<3)return _();let k=r,S=M();v[o]=[S,0];let I=!h(c),E=u(),N=E.data,T=E._c,A=h(T)?N:T;if(I&&p({data:c=f(c)?c(A):c,_c:A}),f(k))try{k=k(A)}catch(e){a=e}if(k&&f(k.then)){if(k=await k.catch(e=>{a=e}),S!==v[o][0]){if(a)throw a;return k}a&&I&&m(a)&&(s=!0,k=A,p({data:k,_c:l}))}s&&!a&&(f(s)&&(k=s(k,A)),p({data:k,_c:l})),v[o][1]=M();let C=await _();if(p({_c:l}),a){if(g)throw a;return}return s?C:k}}let U=(e,t)=>{for(let n in e)e[n][0]&&e[n][0](t)},j=(e,t)=>{if(!i.has(e)){let n=p(T,t),r={},a=L.bind(l,e),o=u,s={},c=(e,t)=>{let n=s[e]||[];return s[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},h=(t,n,r)=>{e.set(t,n);let a=s[t];if(a)for(let e of a)e(n,r)},f=()=>{if(!i.has(e)&&(i.set(e,[r,{},{},{},a,h,c]),!C)){let t=n.initFocus(setTimeout.bind(l,U.bind(l,r,0))),a=n.initReconnect(setTimeout.bind(l,U.bind(l,r,1)));o=()=>{t&&t(),a&&a(),i.delete(e)}}};return f(),[e,a,f,o]}return[e,i.get(e)[4]]},z=(e,t,n,r,a)=>{let i=n.errorRetryCount,o=a.retryCount,s=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;(h(i)||!(o>i))&&setTimeout(r,s,a)},W=(e,t)=>x(e)==x(t),[V,G]=j(new Map),H=p({onLoadingSlow:u,onSuccess:u,onError:u,onErrorRetry:z,onDiscarded:u,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:P?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:P?5e3:3e3,compare:W,isPaused:()=>!1,cache:V,mutate:G,fallback:{}},{isOnline:()=>_,isVisible:I}),q=(e,t)=>{let n=p(e,t);if(t){let{use:r,fallback:a}=e,{use:i,fallback:o}=t;r&&i&&(n.use=r.concat(i)),a&&o&&(n.fallback=p(a,o))}return n},X=(0,r.createContext)({}),K=e=>{let{value:t}=e,n=(0,r.useContext)(X),a=f(t),i=(0,r.useMemo)(()=>a?t(n):t,[a,n,t]),o=(0,r.useMemo)(()=>a?i:q(n,i),[a,n,i]),s=i&&i.provider,u=(0,r.useRef)(l);s&&!u.current&&(u.current=j(s(o.cache||V),i));let c=u.current;return c&&(o.cache=c[0],o.mutate=c[1]),R(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,r.createElement)(X.Provider,p(e,{value:o}))},Z=m&&window.__SWR_DEVTOOLS_USE__,Y=Z?window.__SWR_DEVTOOLS_USE__:[],Q=e=>f(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],J=()=>p(H,(0,r.useContext)(X)),ee=e=>(t,n,r)=>{let a=n&&((...e)=>{let r=$(t)[0],[,,,a]=i.get(V),o=a[r];return o?(delete a[r],o):n(...e)});return e(t,a,r)},et=Y.concat(ee),en=(e,t,n)=>{let r=t[e]||(t[e]=[]);return r.push(n),()=>{let e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}};Z&&(window.__SWR_DEVTOOLS_REACT__=r);let er={dedupe:!0},ea=(e,t,n)=>{let{cache:o,compare:s,suspense:u,fallbackData:c,revalidateOnMount:d,revalidateIfStale:m,refreshInterval:g,refreshWhenHidden:y,refreshWhenOffline:v,keepPreviousData:w}=n,[x,_,k]=i.get(o),[S,I]=$(e),E=(0,r.useRef)(!1),N=(0,r.useRef)(!1),T=(0,r.useRef)(S),D=(0,r.useRef)(t),P=(0,r.useRef)(n),F=()=>P.current,U=()=>F().isVisible()&&F().isOnline(),[j,z,W,V]=b(o,S),G=(0,r.useRef)({}).current,H=h(c)?n.fallback[S]:c,q=(e,t)=>{let n=!0;for(let r in G){let a=r;"data"===a?s(t[a],e[a])||h(e[a])&&s(t[a],ea)||(n=!1):t[a]!==e[a]&&(n=!1)}return n},X=(0,r.useMemo)(()=>{let e=!!S&&!!t&&(h(d)?!F().isPaused()&&!u&&(!!h(m)||m):d),n=t=>{let n=p(t);return(delete n._k,e)?{isValidating:!0,isLoading:!0,...n}:n},r=j(),a=V(),i=n(r),o=r===a?i:n(a),s=i;return[()=>{let e=n(j());return q(e,s)?s:s=e},()=>o]},[o,S]),K=(0,a.useSyncExternalStore)((0,r.useCallback)(e=>W(S,(t,n)=>{q(n,t)||e()}),[o,S]),X[0],X[1]),Z=!E.current,Y=x[S]&&x[S].length>0,Q=K.data,J=h(Q)?H:Q,ee=K.error,et=(0,r.useRef)(J),ea=w?h(Q)?et.current:Q:J,ei=(!Y||!!h(ee))&&(Z&&!h(d)?d:!F().isPaused()&&(u?!h(J)&&m:h(J)||m)),eo=!!(S&&t&&Z&&ei),es=h(K.isValidating)?eo:K.isValidating,eu=h(K.isLoading)?eo:K.isLoading,el=(0,r.useCallback)(async e=>{let t,r;let a=D.current;if(!S||!a||N.current||F().isPaused())return!1;let i=!0,o=e||{},u=!k[S]||!o.dedupe,c=()=>A?!N.current&&S===T.current&&E.current:S===T.current,p={isValidating:!1,isLoading:!1},d=()=>{z(p)},m=()=>{let e=k[S];e&&e[1]===r&&delete k[S]},g={isValidating:!0};h(j().data)&&(g.isLoading=!0);try{if(u&&(z(g),n.loadingTimeout&&h(j().data)&&setTimeout(()=>{i&&c()&&F().onLoadingSlow(S,n)},n.loadingTimeout),k[S]=[a(I),M()]),[t,r]=k[S],t=await t,u&&setTimeout(m,n.dedupingInterval),!k[S]||k[S][1]!==r)return u&&c()&&F().onDiscarded(S),!1;p.error=l;let e=_[S];if(!h(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return d(),u&&c()&&F().onDiscarded(S),!1;let o=j().data;p.data=s(o,t)?o:t,u&&c()&&F().onSuccess(t,S,n)}catch(n){m();let e=F(),{shouldRetryOnError:t}=e;!e.isPaused()&&(p.error=n,u&&c()&&(e.onError(n,S,e),(!0===t||f(t)&&t(n))&&U()&&e.onErrorRetry(n,S,e,e=>{let t=x[S];t&&t[0]&&t[0](B.ERROR_REVALIDATE_EVENT,e)},{retryCount:(o.retryCount||0)+1,dedupe:!0})))}return i=!1,d(),!0},[S,o]),ec=(0,r.useCallback)((...e)=>L(o,T.current,...e),[]);if(R(()=>{D.current=t,P.current=n,h(Q)||(et.current=Q)}),R(()=>{if(!S)return;let e=el.bind(l,er),t=0,n=(n,r={})=>{if(n==B.FOCUS_EVENT){let n=Date.now();F().revalidateOnFocus&&n>t&&U()&&(t=n+F().focusThrottleInterval,e())}else if(n==B.RECONNECT_EVENT)F().revalidateOnReconnect&&U()&&e();else if(n==B.MUTATE_EVENT)return el();else if(n==B.ERROR_REVALIDATE_EVENT)return el(r)},r=en(S,x,n);return N.current=!1,T.current=S,E.current=!0,z({_k:I}),ei&&(h(J)||C?e():O(e)),()=>{N.current=!0,r()}},[S]),R(()=>{let e;function t(){let t=f(g)?g(J):g;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!j().error&&(y||F().isVisible())&&(v||F().isOnline())?el(er).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[g,y,v,S]),(0,r.useDebugValue)(ea),u&&h(J)&&S){if(!A&&C)throw Error("Fallback data is required when using suspense in SSR.");throw D.current=t,P.current=n,N.current=!1,h(ee)?el(er):ee}return{mutate:ec,get data(){return G.data=!0,ea},get error(){return G.error=!0,ee},get isValidating(){return G.isValidating=!0,es},get isLoading(){return G.isLoading=!0,eu}}};c.defineProperty(K,"defaultValue",{value:H});var ei=function(...e){let t=J(),[n,r,a]=Q(e),i=q(t,a),o=ea,{use:s}=i,u=(s||[]).concat(et);for(let e=u.length;e--;)o=u[e](o);return o(n,r||i.fetcher||null,i)}}}]);